import"../chunks/DsnmJJEf.js";import"../chunks/B0REFSyw.js";import{p as O,c as T,f as l,a as r,d as U,g as t,J,b as i,e as c,r as n,s as f,t as j}from"../chunks/jLkyigik.js";import{s as y,d as st}from"../chunks/D0W8aix9.js";import{i as C}from"../chunks/DE8eBBCz.js";import{i as V}from"../chunks/DHqAxYuR.js";import{a as z,s as G}from"../chunks/BZbP0ZDM.js";import{u as K}from"../chunks/Fe5j4VE8.js";import{M as nt}from"../chunks/CmgtbPyM.js";import{M as N}from"../chunks/BlgH_50q.js";import{a as it}from"../chunks/BTCJ9A-1.js";import{e as q,i as B}from"../chunks/mFXjY9Pb.js";import{a as vt}from"../chunks/DMkAGsoo.js";import{g as dt}from"../chunks/pvIPKrRS.js";import{D as mt}from"../chunks/CkcISRbr.js";import"../chunks/DrxzAJGk.js";import{p as ct}from"../chunks/BBRUas6R.js";import{g as lt}from"../chunks/Ck6C3ky0.js";var pt=i('<button class="emotion-item svelte-cyscl8"> </button>'),ft=i('<div class="selection"></div>'),_t=i('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-value"> </div> <!></div>'),ut=i('<h4> </h4> <div class="event svelte-cyscl8"><div>Date</div> <div>Value</div> <div>Data</div></div> <!>',1),gt=i("<p>Loading events</p>");function ht($,b){O(b,!1);const k=()=>z(K,"$user",x),[x,M]=G(),v=async()=>(await dt()).reduce((o,e)=>(o[e.type]||(o[e.type]=[]),o[e.type].push(e),o),{});V();var p=T(),_=l(p);{var D=d=>{var o=T(),e=l(o);it(e,v,s=>{var a=gt();r(s,a)},(s,a)=>{var m=T(),w=l(m);q(w,1,()=>Object.keys(t(a)),B,(Q,F)=>{var I=ut(),L=l(I),R=c(L,!0);n(L);var W=f(L,4);q(W,1,()=>t(a)[t(F)],B,(X,u)=>{const Y=J(()=>mt.fromSeconds(t(u).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var P=_t(),A=c(P),Z=c(A,!0);n(A);var E=f(A,2),tt=c(E,!0);n(E);var et=f(E,2);{var at=H=>{var S=ft();q(S,5,()=>t(u).data.emotions,B,(rt,g)=>{var h=pt(),ot=c(h);n(h),j(()=>{vt(h,`--color: ${t(g).color??""}`),y(ot,`${t(g).category??""}
                                    ${t(g).subcategory??""}
                                    ${t(g).emotion??""}`)}),r(rt,h)}),n(S),r(H,S)};C(et,H=>{t(u).data?.emotions&&H(at)})}n(P),j(()=>{y(Z,t(Y)),y(tt,t(u).value)}),r(X,P)}),j(()=>y(R,t(F))),r(Q,I)}),r(s,m)},(s,a)=>{{let m=J(()=>({level:"error",header:"Something went wrong getting events",message:t(a)}));N(s,{get item(){return t(m)}})}}),r(d,o)};C(_,d=>{k()&&d(D)})}r($,p),U(),M()}var yt=i("<div><button>Add an entry</button></div> <!>",1),$t=i("<!> <!>",1);function It($,b){O(b,!1);const k=()=>z(K,"$user",x),[x,M]=G(),v={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};ct.set(v),V();var p=$t(),_=l(p);nt(_,{get title(){return v.name},get description(){return v.description},get iconPath(){return v.iconPath}});var D=f(_,2);{var d=e=>{var s=yt(),a=l(s),m=c(a);m.__click=()=>lt("/personal-tracker/add"),n(a);var w=f(a,2);ht(w,{}),r(e,s)},o=e=>{N(e,{item:{level:"info",header:"Login to add an entry or see events"}})};C(D,e=>{k()?e(d):e(o,!1)})}r($,p),U(),M()}st(["click"]);export{It as component};
