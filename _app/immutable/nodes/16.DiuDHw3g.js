var Fe=Object.defineProperty;var de=l=>{throw TypeError(l)};var Ce=(l,e,r)=>e in l?Fe(l,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[e]=r;var ee=(l,e,r)=>Ce(l,typeof e!="symbol"?e+"":e,r),Ge=(l,e,r)=>e.has(l)||de("Cannot "+r);var le=(l,e,r)=>(Ge(l,e,"read from private field"),r?r.call(l):e.get(l)),fe=(l,e,r)=>e.has(l)?de("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,r);import"../chunks/CWj6FrbW.js";import{A as V,g as W,s as H,C as _e,p as Le,B as be,aO as Xe,E as u,w as a,k as Ye,n as Ze,F as c,v as xe}from"../chunks/I8Oq6K5_.js";import{s as Re}from"../chunks/DRU8cbEw.js";import{i as O}from"../chunks/CLIFNVQM.js";import{f as Be,t as F,a as E}from"../chunks/CtuybYrQ.js";import{b as te,r as _}from"../chunks/BKam2jIy.js";import{b as m}from"../chunks/BcNfVtUj.js";import{b as Pe}from"../chunks/CUSbk-Jw.js";import{M as Ae}from"../chunks/BXnR543D.js";import{P as De}from"../chunks/u9MJM6mA.js";var I;class Ie{constructor(e,r){ee(this,"default");fe(this,I,V());ee(this,"key","");this.key=e,this.value=r,this.default=r;{const s=localStorage.getItem(e);s&&(this.value=this.deserialize(s))}_e(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return W(le(this,I))}set value(e){H(le(this,I),e,!0)}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e)}}I=new WeakMap;function d(l,e){return new Ie(l,e)}const Ne=(l,e,r)=>e-r<=l&&l<=e+r,Oe=(l,e)=>{const{gridSize:r,colorMode:s,cellSize:L,t:X,noiseFactor:Y,displacementX:N,displacementY:g,displacementZ:A,levelsStart:p,levelsEnd:h,levelsStep:Z,levelsMargin:x}=e;l.background(0);const C=l.color(255,0,0),G=l.color(0,255,0);for(let S=0;S<r;S++)for(let z=0;z<r;z++){const w=l.noise(z*Y+X*N,S*Y+X*g,X*A);for(let M=p;M<=h;M+=Z){if(!Ne(w,M,x))continue;let f=255;if(s==="white")f=255;else if(s==="gradient")f=l.map(M,p,h,100,255);else if(s==="quantized-gradient"){const R=Math.trunc(w*10)/10;f=l.map(R,p,h,100,255)}else if(s==="color-gradient")f=l.lerpColor(C,G,w);else if(s==="color-scaled-gradient"){const R=l.map(w,p,h,0,1);f=l.lerpColor(C,G,R)}l.fill(f),l.circle(z*L,S*L,L)}}};var Ve=(l,e)=>e.grid=!e.grid,We=F("<br>"),He=F('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1">',1),Je=F('<div class="control-section svelte-1qmp6lp"><label for="gridSize">Grid size</label> <input type="number" step="1"> <label for="blurEnabled">Enable blur</label> <!> <!></div>'),Te=(l,e)=>e.noise=!e.noise,Qe=F("<br>"),Ue=F('<div class="control-section svelte-1qmp6lp"><label for="displacementX">displacementX</label> <input type="number" step="0.01"> <label for="displacementY">displacementY</label> <input type="number" step="0.01"> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"></div>'),je=(l,e)=>e.lines=!e.lines,Ke=F("<br>"),$e=F('<div class="control-section svelte-1qmp6lp"><label for="levelsStart">levelsStart</label> <input type="number" step="0.1"> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option><option>Color Gradient</option><option>Color scaled Gradient</option></select></div>'),el=F('<div class="container svelte-1qmp6lp"><div id="canvas-container"><div class="stats"><label for="fps">FPS</label> <span> </span></div> <!></div> <div class="controls-container svelte-1qmp6lp"><span class="control-header svelte-1qmp6lp"><button>&nbsp;Grid controls</button></span> <!> <span class="control-header svelte-1qmp6lp"><button>&nbsp;Noise controls</button></span> <!> <span class="control-header svelte-1qmp6lp"><button>&nbsp;Lines controls</button></span> <!> <div class="control-section svelte-1qmp6lp"><label for="resetAll">Reset all</label><button>Reset</button></div></div></div>');function pl(l,e){Le(e,!0);let r=V(void 0),s=1e3,L=0,X=0,Y=0,N=V(0);const g=d("p5-terrain-gridSize",200);let A=s/g.value;_e(()=>{A=s/g.value});let p=d("p5-terrain-blurEnabled",!1),h=d("p5-terrain-blurValue",4),Z=d("p5-terrain-displacementX",0),x=d("p5-terrain-displacementY",0),C=d("p5-terrain-displacementZ",.01),G=d("p5-terrain-noiseFactor",.02),S=d("p5-terrain-levelsStart",.2),z=d("p5-terrain-levelsEnd",.8),w=d("p5-terrain-levelsStep",.05),M=d("p5-terrain-margin",.005),f=d("p5-terrain-colorMode","gradient"),R=V(be(p.value?"on":"off"));const me=()=>{[g,p,h,Z,x,C,G,S,z,w,M,f].forEach(o=>o.reset())},y=be({grid:!1,noise:!1,lines:!1}),ge=t=>{function o(){const i=Math.min(t.windowWidth,t.windowHeight);s=Math.floor(i*.8),t.resizeCanvas(s,s),A=s/g.value}function v(){const i=Date.now();i-X>1e3&&(H(N,Y,!0),X=i,Y=0),Y++}t.windowResized=()=>{o()},t.setup=()=>{H(r,t,!0),t.createCanvas(s,s),o(),t.noStroke()},t.draw=()=>{v(),L++,Oe(t,{gridSize:g.value,colorMode:f.value,t:L,cellSize:A,noiseFactor:G.value,displacementX:Z.value,displacementY:x.value,displacementZ:C.value,levelsStart:S.value,levelsEnd:z.value,levelsMargin:M.value,levelsStep:w.value}),p.value&&t.filter(t.BLUR,h.value)}};Xe(()=>{var t;(t=W(r))==null||t.remove()});var J=el(),T=u(J),Q=u(T),ae=a(u(Q),2),he=u(ae,!0);c(ae),c(Q);var Se=a(Q,2);De(Se,{sketch:ge}),c(T);var re=a(T,2),U=u(re),oe=u(U);oe.__click=[Ve,y],c(U);var se=a(U,2);{var ze=t=>{var o=We();E(t,o)},we=t=>{var o=Je(),v=a(u(o),2);_(v);var i=a(v,4);Ae(i,{get value(){return W(R)},label:"",design:"slider",$$events:{change:()=>{p.value=!p.value,H(R,p.value?"on":"off",!0)}}});var b=a(i,2);{var q=n=>{var B=He(),P=a(xe(B),2);_(P),m(P,()=>h.value,D=>h.value=D),E(n,B)};O(b,n=>{p.value&&n(q)})}c(o),m(v,()=>g.value,n=>g.value=n),E(t,o)};O(se,t=>{y.grid?t(ze):t(we,!1)})}var j=a(se,2),ne=u(j);ne.__click=[Te,y],c(j);var ie=a(j,2);{var Me=t=>{var o=Qe();E(t,o)},ye=t=>{var o=Ue(),v=a(u(o),2);_(v);var i=a(v,4);_(i);var b=a(i,4);_(b);var q=a(b,4);_(q),c(o),m(v,()=>Z.value,n=>Z.value=n),m(i,()=>x.value,n=>x.value=n),m(b,()=>C.value,n=>C.value=n),m(q,()=>G.value,n=>G.value=n),E(t,o)};O(ie,t=>{y.noise?t(Me):t(ye,!1)})}var K=a(ie,2),ve=u(K);ve.__click=[je,y],c(K);var ue=a(K,2);{var ke=t=>{var o=Ke();E(t,o)},qe=t=>{var o=$e(),v=a(u(o),2);_(v);var i=a(v,4);_(i);var b=a(i,4);_(b);var q=a(b,4);_(q);var n=a(q,4),B=u(n);B.value=B.__value="white";var P=a(B);P.value=P.__value="gradient";var D=a(P);D.value=D.__value="quantized-gradient";var $=a(D);$.value=$.__value="color-gradient";var pe=a($);pe.value=pe.__value="color-scaled-gradient",c(n),c(o),m(v,()=>S.value,k=>S.value=k),m(i,()=>z.value,k=>z.value=k),m(b,()=>w.value,k=>w.value=k),m(q,()=>M.value,k=>M.value=k),Pe(n,()=>f.value,k=>f.value=k),E(t,o)};O(ue,t=>{y.lines?t(ke):t(qe,!1)})}var ce=a(ue,2),Ee=a(u(ce));Ee.__click=me,c(ce),c(re),c(J),Ye(()=>{Re(he,W(N)),te(oe,1,`collapse-button ${y.grid?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1qmp6lp"),te(ne,1,`collapse-button ${y.noise?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1qmp6lp"),te(ve,1,`collapse-button ${y.lines?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1qmp6lp")}),E(l,J),Ze()}Be(["click"]);export{pl as component};
