import"../chunks/CWj6FrbW.js";import{i as te}from"../chunks/CU0QmhD1.js";import{p as D,A as i,B as ae,w as o,s as r,k as N,g as t,n as O,E as f,F as u,x as $}from"../chunks/D7Iq_oEs.js";import{p as se}from"../chunks/QIXD2vJc.js";import{f as oe,t as _,a as m,j as re}from"../chunks/6Mp4TzzX.js";import{i as L}from"../chunks/BHUurzv7.js";import{e as le,i as ie}from"../chunks/BZoveuJY.js";import{b as ne,r as j}from"../chunks/CHVQtzBs.js";import{b as z,a as ce}from"../chunks/DkX4YCPt.js";import{b as fe}from"../chunks/C6ZF0PI7.js";import{s as ue,a as me}from"../chunks/XeRfgqW9.js";import{u as pe,U as ve}from"../chunks/Uk35BGxw.js";import{A as de}from"../chunks/C3X2_vIy.js";import{t as be}from"../chunks/B5B4nQiO.js";import{M as _e}from"../chunks/DLkGyeFp.js";import{M as ge}from"../chunks/Jo_1U8Q0.js";import{M as he}from"../chunks/CpYfVfsj.js";import{u as ye}from"../chunks/Do3Cq09F.js";import{g as ke}from"../chunks/DniLx9hY.js";const xe=()=>{ke("/clipboard/")};var Me=(p,s)=>{t(s)!==void 0&&(t(s).value="")},Se=(p,s)=>r(s,!t(s)),Ce=_('Public <i class="fas fa-lock-open"></i>',1),Ue=_('Private <i class="fas fa-lock"></i>',1),we=_('<button class="form-action"><!></button>'),Ae=_('<span class="form-action">Login to upload an entry</span>'),Fe=_('<div class="contents svelte-vc138s"><h4 class="title-bar svelte-vc138s">Add a new clipboard entry <button>Close</button></h4> <!> <form class="form-content svelte-vc138s"><label for="name">Name</label> <input type="text"> <label for="content">Content</label> <input type="textarea"> <label for="file">File</label> <span><input class="file-input svelte-vc138s" type="file"> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Te(p,s){D(s,!0);const[q,G]=ue(),H=()=>me(pe,"$user",q);let n=i(ae([])),g=i(""),h=i(""),S=i(void 0),v=i(void 0),y=i(!1),k=i(0),d=i(!1);const J=async()=>{var a,M;if(r(n,[],!0),(a=t(g))!=null&&a.length||t(n).push({level:"error",header:"name must be defined"}),(M=t(h))!=null&&M.length||t(n).push({level:"error",header:"content must be defined"}),t(k)<0&&t(n).push({level:"error",header:"TTL must be positive"}),t(n).length)return;let e;t(v)&&t(v).length&&(e=t(v)[0]||void 0);try{r(d,!0),await ye({name:t(g),content:t(h),ttlSeconds:t(k),isPublic:t(y),file:e}),r(d,!1),s.onUpload()}catch(c){r(d,!1);let b=c.message;c instanceof de&&c.code===401?b="Invalid logged in user":c instanceof ve&&(b="User is logged out");const l=`<strong>Entry not created</strong><br/> ${b}`;be.push(l,{theme:{"--toastBarBackground":"#FF0000"}})}};var C=Fe(),U=f(C),K=o(f(U));K.__click=[xe],u(U);var P=o(U,2);le(P,17,()=>t(n),ie,(e,a)=>{ge(e,{get item(){return t(a)}})});var w=o(P,2),A=o(f(w),2);j(A);var F=o(A,4);j(F);var T=o(F,4),E=f(T);fe(E,e=>r(S,e),()=>t(S));var Q=o(E,2);Q.__click=[Me,S],u(T);var B=o(T,4);he(B,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(k)},set valueInSeconds(e){r(k,e,!0)}});var x=o(B,4);let I;x.__click=[Se,y];var R=f(x);{var V=e=>{var a=Ce();$(),m(e,a)},W=e=>{var a=Ue();$(),m(e,a)};L(R,e=>{t(y)?e(V):e(W,!1)})}u(x),u(w);var X=o(w,2);{var Y=e=>{var a=we();a.__click=J;var M=f(a);{var c=l=>{_e(l,{size:.5,unit:"em",durationSeconds:.5})},b=l=>{var ee=re("Submit");m(l,ee)};L(M,l=>{t(d)?l(c):l(b,!1)})}u(a),N(()=>a.disabled=t(d)),m(e,a)},Z=e=>{var a=Ae();m(e,a)};L(X,e=>{H()?e(Y):e(Z,!1)})}u(C),N(e=>I=ne(x,1,"visibility-status svelte-vc138s",null,I,e),[()=>({"visibility-public":t(y)})]),z(A,()=>t(g),e=>r(g,e)),z(F,()=>t(h),e=>r(h,e)),ce(E,()=>t(v),e=>r(v,e)),m(p,C),O(),G()}oe(["click"]);function We(p,s){D(s,!1),se.set("Clipboard"),te(),Te(p,{onUpload:()=>console.log("new entry created")}),O()}export{We as component};
