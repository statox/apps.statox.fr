import"../chunks/NZTpNUN0.js";import"../chunks/DINClf5P.js";import{p as w,h as F,a4 as S,d as x,s as l,e as k,g as o,i as h,r as b,a as _,b as E,t as V,c as W,f as C}from"../chunks/D6WCIunz.js";import{e as y,i as U}from"../chunks/_3a0TLdx.js";import{d as T,s as O}from"../chunks/BCejqCpM.js";import{i as j}from"../chunks/kb571B70.js";import{i as q}from"../chunks/CpjyN-9v.js";import{s as z,a as G}from"../chunks/xyfN9_G_.js";import{t as B}from"../chunks/Ct6e6i7q.js";import{u as H}from"../chunks/DrxJRRsq.js";import{M as N}from"../chunks/BXcaCR0j.js";import{r as J}from"../chunks/DTsamwDi.js";import{b as K}from"../chunks/BKTkIJ2h.js";import{A as $,U as A}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{c as D}from"../chunks/Bd9sQ8Nq.js";import{D as L}from"../chunks/DTyfSRsR.js";import{s as Q}from"../chunks/CZ-vVIq0.js";import"../chunks/BFNGRIwq.js";import{p as R}from"../chunks/LSE9fGGF.js";import{g as I}from"../chunks/CFZpIX3S.js";var X=x('<div><h3>Weight</h3> <!> <div class="input-container svelte-huay37"><button class="svelte-huay37">-</button> <input type="number" step="0.1" class="svelte-huay37"/> <button class="svelte-huay37">+</button></div> <button class="form-action">Submit</button></div>');function Y(d,u){w(u,!0);let m=F(S([])),e=F(100);const f=async()=>{if(h(m,[],!0),o(e)!==Number(o(e).toFixed(1))&&o(m).push({level:"error",header:"Value have at most 1 number after the comma"}),(o(e)<80||o(e)>110)&&o(m).push({level:"error",header:"Value must be in kg"}),o(m).length)return;const a=L.now().toUTC().toUnixInteger();try{await D({event:{timestampUTC:a,type:"weight",value:Math.floor(o(e)*100)}}),u.onUpload()}catch(n){let g=n.message;n instanceof $&&n.code===401?g="Invalid logged in user":n instanceof A&&(g="User is logged out");const M=`<strong>Entry not created</strong><br/> ${g}`;B.push(M,{theme:{"--toastBarBackground":"#FF0000"}})}};var c=X(),p=l(k(c),2);y(p,17,()=>o(m),U,(a,n)=>{N(a,{get item(){return o(n)}})});var i=l(p,2),v=k(i);v.__click=()=>h(e,Number((o(e)-.1).toFixed(2)),!0);var s=l(v,2);J(s);var r=l(s,2);r.__click=()=>h(e,Number((o(e)+.1).toFixed(2)),!0),b(i);var t=l(i,2);t.__click=f,b(c),K(s,()=>o(e),a=>h(e,a)),_(d,c),E()}T(["click"]);var Z=x("<button> </button>"),tt=x('<div><h3>Mood</h3> <!> <div class="options-container svelte-m23i1u"></div> <button class="form-action">Submit</button></div>');function et(d,u){w(u,!0);let m=S([]),e=F(5);const f=async()=>{const s=L.now().toUTC().toUnixInteger();try{await D({event:{timestampUTC:s,type:"mood",value:o(e)}}),u.onUpload()}catch(r){let t=r.message;r instanceof $&&r.code===401?t="Invalid logged in user":r instanceof A&&(t="User is logged out");const a=`<strong>Entry not created</strong><br/> ${t}`;B.push(a,{theme:{"--toastBarBackground":"#FF0000"}})}};var c=tt(),p=l(k(c),2);y(p,17,()=>m,U,(s,r)=>{N(s,{get item(){return o(r)}})});var i=l(p,2);y(i,20,()=>[1,2,3,4,5,6,7,9,10],U,(s,r)=>{var t=Z();t.__click=()=>h(e,r,!0);let a;var n=k(t,!0);b(t),V(()=>{a=Q(t,1,"",null,a,{selected:o(e)===r}),O(n,r)}),_(s,t)}),b(i);var v=l(i,2);v.__click=f,b(c),_(d,c),E()}T(["click"]);var ot=x("<button>Back</button> <h2>Today's Personal Metrics</h2> <!>",1);function Mt(d,u){w(u,!1);const m=()=>G(H,"$user",e),[e,f]=z();R.set("Personal Tracker");const c=()=>{I("/personal-tracker"),B.push("New entry created")};let p=[{name:"mood",component:et},{name:"weight",component:Y}];q();var i=W(),v=C(i);{var s=t=>{var a=ot(),n=C(a);n.__click=()=>I("/personal-tracker");var g=l(n,4);y(g,1,()=>p,U,(M,P)=>{o(P).component(M,{onUpload:c})}),_(t,a)},r=t=>{N(t,{item:{level:"info",header:"Login to add an entry or see events"}})};j(v,t=>{m()?t(s):t(r,!1)})}_(d,i),E(),f()}T(["click"]);export{Mt as component};
