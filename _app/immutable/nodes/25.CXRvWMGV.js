import"../chunks/NZTpNUN0.js";import"../chunks/WHv88YST.js";import{p as U,c as T,f as l,a as r,d as V,g as t,a0 as O,b as i,e as c,r as n,s as f,t as j}from"../chunks/BXDEc9at.js";import{s as y,d as st}from"../chunks/rMjN7E44.js";import{i as C}from"../chunks/DzN6g0OA.js";import{i as z}from"../chunks/DDjwRVny.js";import{a as G,s as J}from"../chunks/CKHL-8-y.js";import{u as K}from"../chunks/CRQfEbLk.js";import{M as nt}from"../chunks/CVKSY8HU.js";import{M as N}from"../chunks/0yIdRvEd.js";import{e as q,i as B}from"../chunks/Bewy8owc.js";import{a as it}from"../chunks/DIZB41iL.js";import{a as vt}from"../chunks/CJ3rIdgZ.js";import{g as dt}from"../chunks/CnqxynKU.js";import{D as mt}from"../chunks/DTyfSRsR.js";import"../chunks/BLokosK0.js";import{p as ct}from"../chunks/DoNHDqcw.js";import{g as lt}from"../chunks/CJm-6nVB.js";var pt=i('<button class="emotion-item svelte-cyscl8"> </button>'),ft=i('<div class="selection"></div>'),_t=i('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-value"> </div> <!></div>'),ut=i('<h4> </h4> <div class="event svelte-cyscl8"><div>Date</div> <div>Value</div> <div>Data</div></div> <!>',1),gt=i("<p>Loading events</p>");function ht($,b){U(b,!1);const k=()=>G(K,"$user",x),[x,M]=J(),v=async()=>(await dt()).reduce((o,e)=>(o[e.type]||(o[e.type]=[]),o[e.type].push(e),o),{});z();var p=T(),_=l(p);{var D=d=>{var o=T(),e=l(o);it(e,v,s=>{var a=gt();r(s,a)},(s,a)=>{var m=T(),w=l(m);q(w,1,()=>Object.keys(t(a)),B,(Q,F)=>{var I=ut(),L=l(I),R=c(L,!0);n(L);var W=f(L,4);q(W,1,()=>t(a)[t(F)],B,(X,u)=>{const Y=O(()=>mt.fromSeconds(t(u).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var P=_t(),A=c(P),Z=c(A,!0);n(A);var E=f(A,2),tt=c(E,!0);n(E);var et=f(E,2);{var at=H=>{var S=ft();q(S,5,()=>t(u).data.emotions,B,(rt,g)=>{var h=pt(),ot=c(h);n(h),j(()=>{vt(h,`--color: ${t(g).color??""}`),y(ot,`${t(g).category??""}
                                    ${t(g).subcategory??""}
                                    ${t(g).emotion??""}`)}),r(rt,h)}),n(S),r(H,S)};C(et,H=>{t(u).data?.emotions&&H(at)})}n(P),j(()=>{y(Z,t(Y)),y(tt,t(u).value)}),r(X,P)}),j(()=>y(R,t(F))),r(Q,I)}),r(s,m)},(s,a)=>{{let m=O(()=>({level:"error",header:"Something went wrong getting events",message:t(a)}));N(s,{get item(){return t(m)}})}}),r(d,o)};C(_,d=>{k()&&d(D)})}r($,p),V(),M()}var yt=i("<div><button>Add an entry</button></div> <!>",1),$t=i("<!> <!>",1);function It($,b){U(b,!1);const k=()=>G(K,"$user",x),[x,M]=J(),v={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};ct.set(v),z();var p=$t(),_=l(p);nt(_,{get title(){return v.name},get description(){return v.description},get iconPath(){return v.iconPath}});var D=f(_,2);{var d=e=>{var s=yt(),a=l(s),m=c(a);m.__click=()=>lt("/personal-tracker/add"),n(a);var w=f(a,2);ht(w,{}),r(e,s)},o=e=>{N(e,{item:{level:"info",header:"Login to add an entry or see events"}})};C(D,e=>{k()?e(d):e(o,!1)})}r($,p),V(),M()}st(["click"]);export{It as component};
