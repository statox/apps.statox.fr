import{g as Zt,a as Jt,u as Gt,b as xt,c as el}from"../chunks/api.CVWl_NUR.js";import{s as ce,D as Xt,e as b,c as C,z as K,l as E,F as je,i as S,E as ne,n as se,f as h,y as We,a as y,t as M,b as D,g as B,d as H,M as Je,h as m,k as Ge,x as tl,a7 as Yt,A as W,B as ge,j as Fe,G as Me,I as ll,p as Qe,J as et,N as tt}from"../chunks/scheduler.BLnAaDok.js";import{S as Le,i as Te,g as Z,t as I,c as x,a as N,b as oe,d as de,m as ie,e as ae}from"../chunks/index.Dm8pIgRq.js";import{e as F,u as nl,o as sl}from"../chunks/each.RtOVu21q.js";import{c as rl,o as ol}from"../chunks/store.B1n4qbiI.js";import{M as il}from"../chunks/Main.BjSRK3eX.js";import{U as al,M as cl,u as fl}from"../chunks/Main.DziXd_fA.js";import{w as Kt,b as ul,g as hl}from"../chunks/entry.i6hqgIVc.js";import{t as _l}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.BveLC0TC.js";import{A as dl}from"../chunks/index.BpcC7rHg.js";import{h as gl,u as ml}from"../chunks/await_block.CizxWy2L.js";import{p as pl}from"../chunks/Main.svelte_svelte_type_style_lang.CFOemB9g.js";const kl=!1,vl=async()=>({chords:await Zt()}),un=Object.freeze(Object.defineProperty({__proto__:null,load:vl,ssr:kl},Symbol.toStringTag,{value:"Module"})),{clearTimeout:lt,setTimeout:nt,window:Xe}=Jt;function bl(i){let t=!1,n=()=>{t=!1},l,e,r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" class="svelte-1kbb9q3"><path d="M12 6H0l6-6z"></path></svg> <span class="screen-reader-text svelte-1kbb9q3">Back to top</span>',s,a;return Xt(i[3]),{c(){e=b("button"),e.innerHTML=r,this.h()},l(o){e=C(o,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-ed45ug"&&(e.innerHTML=r),this.h()},h(){E(e,"class","top-link svelte-1kbb9q3"),je(e,"hide",i[1])},m(o,u){S(o,e,u),s||(a=[ne(Xe,"scroll",()=>{t=!0,lt(l),l=nt(n,100),i[3]()}),ne(e,"click",i[2])],s=!0)},p(o,[u]){u&1&&!t&&(t=!0,lt(l),scrollTo(Xe.pageXOffset,o[0]),l=nt(n,100)),u&2&&je(e,"hide",o[1])},i:se,o:se,d(o){o&&h(e),s=!1,We(a)}}}function Cl(i,t,n){let l,e=!0,r;const s=u=>{u>0?n(1,e=!1):n(1,e=!0),r&&clearTimeout(r),r=setTimeout(()=>{n(1,e=!0)},3e3)},a=()=>{const u=document.documentElement.scrollTop||document.body.scrollTop;u>0&&(window.requestAnimationFrame(a),window.scrollTo(0,u-u/2))};function o(){n(0,l=Xe.pageYOffset)}return i.$$.update=()=>{i.$$.dirty&1&&s(l)},[l,e,a,o]}class wl extends Le{constructor(t){super(),Te(this,t,Cl,bl,ce,{})}}const Ve=Kt();let Wt=[];const st=localStorage.getItem("failedVisitCounts");if(st!==null)try{Wt=JSON.parse(st)}catch{console.error("Couldnt parse failedVisitCounts from local storage")}const He=Kt(Wt);He.subscribe(i=>{localStorage.setItem("failedVisitCounts",JSON.stringify(i))});const Ye=i=>i==="doc"?"fas fa-file-word":i==="pdf"?"fas fa-file-pdf":i==="youtube"?"fa fa-youtube":"fas fa-link";function Ll(i){let t,n,l,e,r,s,a,o,u;return{c(){t=b("span"),l=y(),e=b("span"),r=b("a"),s=M(i[2]),this.h()},l(c){t=C(c,"SPAN",{class:!0}),D(t).forEach(h),l=B(c),e=C(c,"SPAN",{});var _=D(e);r=C(_,"A",{href:!0,target:!0,rel:!0,title:!0});var f=D(r);s=H(f,i[2]),f.forEach(h),_.forEach(h),this.h()},h(){E(t,"class",n=Je(Ye(i[0].type))+" svelte-1yqqigs"),E(r,"href",a=i[3](i[0])),E(r,"target","_blank"),E(r,"rel","noopener noreferrer"),E(r,"title",i[1])},m(c,_){S(c,t,_),S(c,l,_),S(c,e,_),m(e,r),m(r,s),o||(u=ne(r,"click",i[4]),o=!0)},p(c,[_]){_&1&&n!==(n=Je(Ye(c[0].type))+" svelte-1yqqigs")&&E(t,"class",n),_&1&&a!==(a=c[3](c[0]))&&E(r,"href",a),_&2&&E(r,"title",c[1])},i:se,o:se,d(c){c&&(h(t),h(l),h(e)),o=!1,u()}}}function Tl(i,t,n){let l;Ge(i,He,c=>n(6,l=c));let{chord:e}=t,{showArtist:r=!1}=t,s;Ve.subscribe(c=>{if(c&&c.has(e.url)){const _=c.get(e.url),f=new Date(_.lastAccessDateUnix*1e3);n(1,s=`visits: ${_.count} - last: ${f.toLocaleDateString()}`)}});const a=(r?e.artist+" - ":"")+e.title,o=c=>c.type==="doc"?`${ul}/docviewer/${c.url}`:c.url,u=async()=>{try{await Gt(e.url);const c=tl(Ve),_=c.get(e.url)||{count:0,lastAccessDateUnix:0};_.count++,_.lastAccessDateUnix=Date.now()/1e3,c.set(e.url,_),Ve.set(c)}catch(c){let _=c.message;c instanceof dl&&c.code===401?_="Invalid logged in user":c instanceof al&&(_="User is logged out"),Yt(He,l=[...l,e.url],l);const f=`<strong>Visit not counted</strong><br/> ${_}`;_l.push(f,{initial:1,duration:5e3,theme:{"--toastBarBackground":"#FF0000"}})}};return i.$$set=c=>{"chord"in c&&n(0,e=c.chord),"showArtist"in c&&n(5,r=c.showArtist)},[e,s,a,o,u,r]}class qe extends Le{constructor(t){super(),Te(this,t,Tl,Ll,ce,{chord:0,showArtist:5})}}function rt(i,t,n){const l=i.slice();l[5]=t[n];const e=l[3].get(l[5].url);return l[6]=e,l}function ot(i){let t,n,l,e,r,s=i[6]&&it(i);return l=new qe({props:{chord:i[5],showArtist:!0}}),{c(){t=b("li"),s&&s.c(),n=y(),oe(l.$$.fragment),e=y(),this.h()},l(a){t=C(a,"LI",{class:!0});var o=D(t);s&&s.l(o),n=B(o),de(l.$$.fragment,o),e=B(o),o.forEach(h),this.h()},h(){E(t,"class","ul2col-item")},m(a,o){S(a,t,o),s&&s.m(t,null),m(t,n),ie(l,t,null),m(t,e),r=!0},p(a,o){a[6]?s?s.p(a,o):(s=it(a),s.c(),s.m(t,n)):s&&(s.d(1),s=null);const u={};o&1&&(u.chord=a[5]),l.$set(u)},i(a){r||(N(l.$$.fragment,a),r=!0)},o(a){I(l.$$.fragment,a),r=!1},d(a){a&&h(t),s&&s.d(),ae(l)}}}function it(i){let t,n=i[6].count+"",l,e;return{c(){t=M("("),l=M(n),e=M(")")},l(r){t=H(r,"("),l=H(r,n),e=H(r,")")},m(r,s){S(r,t,s),S(r,l,s),S(r,e,s)},p(r,s){s&9&&n!==(n=r[6].count+"")&&Fe(l,n)},d(r){r&&(h(t),h(l),h(e))}}}function at(i){let t=i[4](i[5],i[1],i[2]),n,l,e=t&&ot(i);return{c(){e&&e.c(),n=W()},l(r){e&&e.l(r),n=W()},m(r,s){e&&e.m(r,s),S(r,n,s),l=!0},p(r,s){s&7&&(t=r[4](r[5],r[1],r[2])),t?e?(e.p(r,s),s&7&&N(e,1)):(e=ot(r),e.c(),N(e,1),e.m(n.parentNode,n)):e&&(Z(),I(e,1,1,()=>{e=null}),x())},i(r){l||(N(e),l=!0)},o(r){I(e),l=!1},d(r){r&&h(n),e&&e.d(r)}}}function ct(i){let t,n,l=F(i[0]),e=[];for(let s=0;s<l.length;s+=1)e[s]=at(rt(i,l,s));const r=s=>I(e[s],1,1,()=>{e[s]=null});return{c(){t=b("ul");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=C(s,"UL",{class:!0});var a=D(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(h),this.h()},h(){E(t,"class","ul2col-container")},m(s,a){S(s,t,a);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);n=!0},p(s,a){if(a&31){l=F(s[0]);let o;for(o=0;o<l.length;o+=1){const u=rt(s,l,o);e[o]?(e[o].p(u,a),N(e[o],1)):(e[o]=at(u),e[o].c(),N(e[o],1),e[o].m(t,null))}for(Z(),o=l.length;o<e.length;o+=1)r(o);x()}},i(s){if(!n){for(let a=0;a<l.length;a+=1)N(e[a]);n=!0}},o(s){e=e.filter(Boolean);for(let a=0;a<e.length;a+=1)I(e[a]);n=!1},d(s){s&&h(t),ge(e,s)}}}function Sl(i){let t=i[0],n,l,e=ct(i);return{c(){e.c(),n=W()},l(r){e.l(r),n=W()},m(r,s){e.m(r,s),S(r,n,s),l=!0},p(r,[s]){s&1&&ce(t,t=r[0])?(Z(),I(e,1,1,se),x(),e=ct(r),e.c(),N(e,1),e.m(n.parentNode,n)):e.p(r,s)},i(r){l||(N(e),l=!0)},o(r){I(e),l=!1},d(r){r&&h(n),e.d(r)}}}function El(i,t,n){let{searchString:l}=t,{chords:e}=t,{filters:r}=t,s;Ve.subscribe(o=>{o&&(n(3,s=o),n(0,e=e.sort((u,c)=>{const _=o.get(u.url),f=o.get(c.url);return _&&f?f.lastAccessDateUnix-_.lastAccessDateUnix:_?-1:f?1:u.artist!=c.artist?u.artist.toLowerCase()<c.artist.toLowerCase()?-1:1:u.title.toLowerCase()<c.title.toLowerCase()?-1:1})))});const a=(o,u,c)=>c[o.type]===!1?!1:u.length===0||o.artist.toLowerCase().match(u.toLowerCase())?!0:o.title.toLowerCase().match(u.toLowerCase());return i.$$set=o=>{"searchString"in o&&n(1,l=o.searchString),"chords"in o&&n(0,e=o.chords),"filters"in o&&n(2,r=o.filters)},[e,l,r,s,a]}class Al extends Le{constructor(t){super(),Te(this,t,El,Sl,ce,{searchString:1,chords:0,filters:2})}}const Nl=(i,t)=>i<t?-1:i>t?1:0,Ke=(i,t)=>{const n=i.toLowerCase(),l=t.toLowerCase();return Nl(n,l)},{Boolean:Qt}=Jt;function ft(i,t,n){const l=i.slice();l[14]=t[n];const e=l[8](l[14].name,l[0],l[1]);l[15]=e;const r=l[9](l[14].name,l[0]);return l[16]=r,l}function ut(i,t,n){const l=i.slice();return l[20]=t[n],l}function ze(i){const t=i.slice(),n=t[16]?t[5][t[14].name]:t[15];return t[19]=n,t}function ht(i,t,n){const l=i.slice();return l[23]=t[n],l}function _t(i){let t,n,l=i[23].letter.toUpperCase()+"",e,r;return{c(){t=b("li"),n=b("a"),e=M(l),r=y(),this.h()},l(s){t=C(s,"LI",{class:!0});var a=D(t);n=C(a,"A",{href:!0,class:!0});var o=D(n);e=H(o,l),o.forEach(h),r=B(a),a.forEach(h),this.h()},h(){E(n,"href","#"+i[23].tag),E(n,"class","navigationLink svelte-1deg5s8"),E(t,"class","navigationBtn svelte-1deg5s8")},m(s,a){S(s,t,a),m(t,n),m(n,e),m(t,r)},p:se,d(s){s&&h(t)}}}function dt(i){let t,n,l=i[14].name+"",e,r,s=i[0],a,o,u=mt(i);return{c(){t=b("tr"),n=b("td"),e=M(l),r=y(),u.c(),a=y(),this.h()},l(c){t=C(c,"TR",{class:!0});var _=D(t);n=C(_,"TD",{id:!0,class:!0});var f=D(n);e=H(f,l),r=B(f),u.l(f),f.forEach(h),a=B(_),_.forEach(h),this.h()},h(){E(n,"id",i[14].tag),E(n,"class","svelte-1deg5s8"),E(t,"class","svelte-1deg5s8")},m(c,_){S(c,t,_),m(t,n),m(n,e),m(n,r),u.m(n,null),m(t,a),o=!0},p(c,_){_&1&&ce(s,s=c[0])?(Z(),I(u,1,1,se),x(),u=mt(c),u.c(),N(u,1),u.m(n,null)):u.p(c,_)},i(c){o||(N(u),o=!0)},o(c){I(u),o=!1},d(c){c&&h(t),u.d(c)}}}function gt(i){let t,n,l,e;return n=new qe({props:{chord:i[20]}}),{c(){t=b("li"),oe(n.$$.fragment),l=y(),this.h()},l(r){t=C(r,"LI",{class:!0});var s=D(t);de(n.$$.fragment,s),l=B(s),s.forEach(h),this.h()},h(){E(t,"class","ul2col-item")},m(r,s){S(r,t,s),ie(n,t,null),m(t,l),e=!0},p(r,s){const a={};s&3&&(a.chord=r[20]),n.$set(a)},i(r){e||(N(n.$$.fragment,r),e=!0)},o(r){I(n.$$.fragment,r),e=!1},d(r){r&&h(t),ae(n)}}}function mt(i){let t,n,l=F(i[19]),e=[];for(let s=0;s<l.length;s+=1)e[s]=gt(ut(i,l,s));const r=s=>I(e[s],1,1,()=>{e[s]=null});return{c(){t=b("ul");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=C(s,"UL",{class:!0});var a=D(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(h),this.h()},h(){E(t,"class","ul2col-container")},m(s,a){S(s,t,a);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);n=!0},p(s,a){if(a&931){l=F(s[19]);let o;for(o=0;o<l.length;o+=1){const u=ut(s,l,o);e[o]?(e[o].p(u,a),N(e[o],1)):(e[o]=gt(u),e[o].c(),N(e[o],1),e[o].m(t,null))}for(Z(),o=l.length;o<e.length;o+=1)r(o);x()}},i(s){if(!n){for(let a=0;a<l.length;a+=1)N(e[a]);n=!0}},o(s){e=e.filter(Qt);for(let a=0;a<e.length;a+=1)I(e[a]);n=!1},d(s){s&&h(t),ge(e,s)}}}function pt(i){let t,n,l=(i[16]||i[15].length>0)&&dt(ze(i));return{c(){l&&l.c(),t=W()},l(e){l&&l.l(e),t=W()},m(e,r){l&&l.m(e,r),S(e,t,r),n=!0},p(e,r){e[16]||e[15].length>0?l?(l.p(ze(e),r),r&3&&N(l,1)):(l=dt(ze(e)),l.c(),N(l,1),l.m(t.parentNode,t)):l&&(Z(),I(l,1,1,()=>{l=null}),x())},i(e){n||(N(l),n=!0)},o(e){I(l),n=!1},d(e){e&&h(t),l&&l.d(e)}}}function yl(i){let t=!1,n=()=>{t=!1},l,e,r=`${i[3]}px`,s,a,o,u,c;Xt(i[11]);let _=F(i[6]),f=[];for(let p=0;p<_.length;p+=1)f[p]=_t(ht(i,_,p));let L=F(i[7]),d=[];for(let p=0;p<L.length;p+=1)d[p]=pt(ft(i,L,p));const $=p=>I(d[p],1,1,()=>{d[p]=null});return{c(){e=b("ol");for(let p=0;p<f.length;p+=1)f[p].c();s=y(),a=b("table");for(let p=0;p<d.length;p+=1)d[p].c();this.h()},l(p){e=C(p,"OL",{id:!0,class:!0});var k=D(e);for(let O=0;O<f.length;O+=1)f[O].l(k);k.forEach(h),s=B(p),a=C(p,"TABLE",{id:!0});var v=D(a);for(let O=0;O<d.length;O+=1)d[O].l(v);v.forEach(h),this.h()},h(){E(e,"id","indexList"),E(e,"class","navigationBar disable-scrollbars svelte-1deg5s8"),Me(e,"--barTop",r),E(a,"id","artistTable")},m(p,k){S(p,e,k);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(e,null);S(p,s,k),S(p,a,k);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(a,null);i[12](a),o=!0,u||(c=ne(window,"scroll",()=>{t=!0,clearTimeout(l),l=setTimeout(n,100),i[11]()}),u=!0)},p(p,[k]){if(k&4&&!t&&(t=!0,clearTimeout(l),scrollTo(window.pageXOffset,p[2]),l=setTimeout(n,100)),k&64){_=F(p[6]);let v;for(v=0;v<_.length;v+=1){const O=ht(p,_,v);f[v]?f[v].p(O,k):(f[v]=_t(O),f[v].c(),f[v].m(e,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=_.length}if(k&8&&r!==(r=`${p[3]}px`)&&Me(e,"--barTop",r),k&931){L=F(p[7]);let v;for(v=0;v<L.length;v+=1){const O=ft(p,L,v);d[v]?(d[v].p(O,k),N(d[v],1)):(d[v]=pt(O),d[v].c(),N(d[v],1),d[v].m(a,null))}for(Z(),v=L.length;v<d.length;v+=1)$(v);x()}},i(p){if(!o){for(let k=0;k<L.length;k+=1)N(d[k]);o=!0}},o(p){d=d.filter(Qt);for(let k=0;k<d.length;k+=1)I(d[k]);o=!1},d(p){p&&(h(e),h(s),h(a)),ge(f,p),ge(d,p),i[12](null),u=!1,c()}}}function Bl(i,t,n){let{searchString:l=""}=t,{chords:e}=t,{filters:r}=t;const s=e.reduce((k,v)=>{const O=v.artist;return k[O]||(k[O]=[]),k[O].push(v),k},{}),a=[],o=Object.keys(s).sort(Ke).map((k,v,O)=>{if(v===0||k[0].toLowerCase()!=O[v-1][0].toLowerCase()){const A="anchor_letter_"+k[0];return a.push({letter:k[0],tag:A}),{name:k,tag:A}}return{name:k}});let u,c=0,_;const f=k=>{if(_){var v=_.getBoundingClientRect();if(v.top<20){n(3,c=20);return}n(3,c=v.top)}},L=(k,v,O)=>s[k].sort((w,V)=>w.title<V.title?-1:1).filter(w=>{const V=w.type;return O[V]===!1?!1:v.length===0?!0:!!w.title.toLowerCase().match(v.toLowerCase())}),d=(k,v)=>!!k.toLowerCase().match(v.toLowerCase());function $(){n(2,u=window.pageYOffset)}function p(k){ll[k?"unshift":"push"](()=>{_=k,n(4,_)})}return i.$$set=k=>{"searchString"in k&&n(0,l=k.searchString),"chords"in k&&n(10,e=k.chords),"filters"in k&&n(1,r=k.filters)},i.$$.update=()=>{i.$$.dirty&4&&f()},[l,r,u,c,_,s,a,o,L,d,e,$,p]}class Dl extends Le{constructor(t){super(),Te(this,t,Bl,yl,ce,{searchString:0,chords:10,filters:1})}}function kt(i,t,n){const l=i.slice();return l[5]=t[n],l}function vt(i,t,n){const l=i.slice();return l[8]=t[n],l}function bt(i){let t,n,l=i[3](i[5])+"",e,r,s,a,o,u=F(i[2][i[5]]),c=[];for(let f=0;f<u.length;f+=1)c[f]=wt(vt(i,u,f));const _=f=>I(c[f],1,1,()=>{c[f]=null});return{c(){t=b("div"),n=b("span"),e=M(l),r=y(),s=b("ul");for(let f=0;f<c.length;f+=1)c[f].c();a=y(),this.h()},l(f){t=C(f,"DIV",{});var L=D(t);n=C(L,"SPAN",{});var d=D(n);e=H(d,l),d.forEach(h),r=B(L),s=C(L,"UL",{class:!0});var $=D(s);for(let p=0;p<c.length;p+=1)c[p].l($);$.forEach(h),a=B(L),L.forEach(h),this.h()},h(){E(s,"class","ul2col-container")},m(f,L){S(f,t,L),m(t,n),m(n,e),m(t,r),m(t,s);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(s,null);m(t,a),o=!0},p(f,L){if((!o||L&4)&&l!==(l=f[3](f[5])+"")&&Fe(e,l),L&6){u=F(f[2][f[5]]);let d;for(d=0;d<u.length;d+=1){const $=vt(f,u,d);c[d]?(c[d].p($,L),N(c[d],1)):(c[d]=wt($),c[d].c(),N(c[d],1),c[d].m(s,null))}for(Z(),d=u.length;d<c.length;d+=1)_(d);x()}},i(f){if(!o){for(let L=0;L<u.length;L+=1)N(c[L]);o=!0}},o(f){c=c.filter(Boolean);for(let L=0;L<c.length;L+=1)I(c[L]);o=!1},d(f){f&&h(t),ge(c,f)}}}function Ct(i){let t,n,l,e;return n=new qe({props:{chord:i[8],showArtist:!0}}),{c(){t=b("li"),oe(n.$$.fragment),l=y(),this.h()},l(r){t=C(r,"LI",{class:!0});var s=D(t);de(n.$$.fragment,s),l=B(s),s.forEach(h),this.h()},h(){E(t,"class","ul2col-item")},m(r,s){S(r,t,s),ie(n,t,null),m(t,l),e=!0},p(r,s){const a={};s&4&&(a.chord=r[8]),n.$set(a)},i(r){e||(N(n.$$.fragment,r),e=!0)},o(r){I(n.$$.fragment,r),e=!1},d(r){r&&h(t),ae(n)}}}function wt(i){let t,n,l=i[1][i[8].type]&&Ct(i);return{c(){l&&l.c(),t=W()},l(e){l&&l.l(e),t=W()},m(e,r){l&&l.m(e,r),S(e,t,r),n=!0},p(e,r){e[1][e[8].type]?l?(l.p(e,r),r&6&&N(l,1)):(l=Ct(e),l.c(),N(l,1),l.m(t.parentNode,t)):l&&(Z(),I(l,1,1,()=>{l=null}),x())},i(e){n||(N(l),n=!0)},o(e){I(l),n=!1},d(e){e&&h(t),l&&l.d(e)}}}function Lt(i){let t=i[0].length===0||i[5].toLowerCase().match(i[0].toLowerCase()),n,l,e=t&&bt(i);return{c(){e&&e.c(),n=W()},l(r){e&&e.l(r),n=W()},m(r,s){e&&e.m(r,s),S(r,n,s),l=!0},p(r,s){s&5&&(t=r[0].length===0||r[5].toLowerCase().match(r[0].toLowerCase())),t?e?(e.p(r,s),s&5&&N(e,1)):(e=bt(r),e.c(),N(e,1),e.m(n.parentNode,n)):e&&(Z(),I(e,1,1,()=>{e=null}),x())},i(r){l||(N(e),l=!0)},o(r){I(e),l=!1},d(r){r&&h(n),e&&e.d(r)}}}function $l(i){let t,n,l=F(Object.keys(i[2]).sort(Ke)),e=[];for(let s=0;s<l.length;s+=1)e[s]=Lt(kt(i,l,s));const r=s=>I(e[s],1,1,()=>{e[s]=null});return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=W()},l(s){for(let a=0;a<e.length;a+=1)e[a].l(s);t=W()},m(s,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(s,a);S(s,t,a),n=!0},p(s,[a]){if(a&15){l=F(Object.keys(s[2]).sort(Ke));let o;for(o=0;o<l.length;o+=1){const u=kt(s,l,o);e[o]?(e[o].p(u,a),N(e[o],1)):(e[o]=Lt(u),e[o].c(),N(e[o],1),e[o].m(t.parentNode,t))}for(Z(),o=l.length;o<e.length;o+=1)r(o);x()}},i(s){if(!n){for(let a=0;a<l.length;a+=1)N(e[a]);n=!0}},o(s){e=e.filter(Boolean);for(let a=0;a<e.length;a+=1)I(e[a]);n=!1},d(s){s&&h(t),ge(e,s)}}}function Il(i,t,n){let{searchString:l}=t,{chords:e}=t,{filters:r}=t;const s=o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase(),a={};for(const o of e)o.tags.forEach(c=>{a[c]||n(2,a[c]=[],a),a[c].push(o)});return Object.keys(a).forEach(o=>{a[o].sort((u,c)=>{const _=u.artist.toLowerCase(),f=c.artist.toLowerCase(),L=u.title.toLowerCase(),d=c.title.toLowerCase();return _<f?-1:_>f?1:L<d?-1:1})}),i.$$set=o=>{"searchString"in o&&n(0,l=o.searchString),"chords"in o&&n(4,e=o.chords),"filters"in o&&n(1,r=o.filters)},[l,r,a,s,e]}class Ul extends Le{constructor(t){super(),Te(this,t,Il,$l,ce,{searchString:0,chords:4,filters:1})}}function Tt(i,t,n){const l=i.slice();l[5]=t[n];const e=l[3].get(l[5].url);return l[6]=e,l}function St(i){let t,n,l,e,r,s=i[6]&&Et(i);return l=new qe({props:{chord:i[5],showArtist:!0}}),{c(){t=b("li"),s&&s.c(),n=y(),oe(l.$$.fragment),e=y(),this.h()},l(a){t=C(a,"LI",{class:!0});var o=D(t);s&&s.l(o),n=B(o),de(l.$$.fragment,o),e=B(o),o.forEach(h),this.h()},h(){E(t,"class","ul2col-item")},m(a,o){S(a,t,o),s&&s.m(t,null),m(t,n),ie(l,t,null),m(t,e),r=!0},p(a,o){a[6]?s?s.p(a,o):(s=Et(a),s.c(),s.m(t,n)):s&&(s.d(1),s=null);const u={};o&1&&(u.chord=a[5]),l.$set(u)},i(a){r||(N(l.$$.fragment,a),r=!0)},o(a){I(l.$$.fragment,a),r=!1},d(a){a&&h(t),s&&s.d(),ae(l)}}}function Et(i){let t,n=i[6].count+"",l,e;return{c(){t=M("("),l=M(n),e=M(")")},l(r){t=H(r,"("),l=H(r,n),e=H(r,")")},m(r,s){S(r,t,s),S(r,l,s),S(r,e,s)},p(r,s){s&9&&n!==(n=r[6].count+"")&&Fe(l,n)},d(r){r&&(h(t),h(l),h(e))}}}function At(i){let t=i[4](i[5],i[1],i[2]),n,l,e=t&&St(i);return{c(){e&&e.c(),n=W()},l(r){e&&e.l(r),n=W()},m(r,s){e&&e.m(r,s),S(r,n,s),l=!0},p(r,s){s&7&&(t=r[4](r[5],r[1],r[2])),t?e?(e.p(r,s),s&7&&N(e,1)):(e=St(r),e.c(),N(e,1),e.m(n.parentNode,n)):e&&(Z(),I(e,1,1,()=>{e=null}),x())},i(r){l||(N(e),l=!0)},o(r){I(e),l=!1},d(r){r&&h(n),e&&e.d(r)}}}function Nt(i){let t,n,l=F(i[0]),e=[];for(let s=0;s<l.length;s+=1)e[s]=At(Tt(i,l,s));const r=s=>I(e[s],1,1,()=>{e[s]=null});return{c(){t=b("ul");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=C(s,"UL",{class:!0});var a=D(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(h),this.h()},h(){E(t,"class","ul2col-container")},m(s,a){S(s,t,a);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);n=!0},p(s,a){if(a&31){l=F(s[0]);let o;for(o=0;o<l.length;o+=1){const u=Tt(s,l,o);e[o]?(e[o].p(u,a),N(e[o],1)):(e[o]=At(u),e[o].c(),N(e[o],1),e[o].m(t,null))}for(Z(),o=l.length;o<e.length;o+=1)r(o);x()}},i(s){if(!n){for(let a=0;a<l.length;a+=1)N(e[a]);n=!0}},o(s){e=e.filter(Boolean);for(let a=0;a<e.length;a+=1)I(e[a]);n=!1},d(s){s&&h(t),ge(e,s)}}}function Pl(i){let t=i[0],n,l,e=Nt(i);return{c(){e.c(),n=W()},l(r){e.l(r),n=W()},m(r,s){e.m(r,s),S(r,n,s),l=!0},p(r,[s]){s&1&&ce(t,t=r[0])?(Z(),I(e,1,1,se),x(),e=Nt(r),e.c(),N(e,1),e.m(n.parentNode,n)):e.p(r,s)},i(r){l||(N(e),l=!0)},o(r){I(e),l=!1},d(r){r&&h(n),e.d(r)}}}function Ol(i,t,n){let{searchString:l}=t,{chords:e}=t,{filters:r}=t,s;Ve.subscribe(o=>{o&&(n(3,s=o),n(0,e=e.sort((u,c)=>{const _=o.get(u.url),f=o.get(c.url);return _&&f?_.count!==f.count?f.count-_.count:f.lastAccessDateUnix-_.lastAccessDateUnix:_?-1:f?1:u.artist!=c.artist?u.artist.toLowerCase()<c.artist.toLowerCase()?-1:1:u.title.toLowerCase()<c.title.toLowerCase()?-1:1})))});const a=(o,u,c)=>c[o.type]===!1?!1:u.length===0||o.artist.toLowerCase().match(u.toLowerCase())?!0:o.title.toLowerCase().match(u.toLowerCase());return i.$$set=o=>{"searchString"in o&&n(1,l=o.searchString),"chords"in o&&n(0,e=o.chords),"filters"in o&&n(2,r=o.filters)},[e,l,r,s,a]}class Vl extends Le{constructor(t){super(),Te(this,t,Ol,Pl,ce,{searchString:1,chords:0,filters:2})}}function yt(i){const t=i[1](i[3]);i[4]=t;const n=i[2](i[3]);i[5]=n}function Bt(i,t,n){const l=i.slice();return l[6]=t[n],l}function Dt(i){let t,n,l,e,r,s="Close",a,o,u,c={ctx:i,current:null,token:null,hasCatch:!0,pending:Hl,then:Ml,catch:ql,value:3,error:9};return gl(xt(),c),{c(){t=b("div"),n=b("div"),l=b("h3"),e=M(`Urls checks
                `),r=b("button"),r.textContent=s,a=y(),c.block.c(),this.h()},l(_){t=C(_,"DIV",{role:!0,class:!0});var f=D(t);n=C(f,"DIV",{class:!0});var L=D(n);l=C(L,"H3",{class:!0});var d=D(l);e=H(d,`Urls checks
                `),r=C(d,"BUTTON",{"data-svelte-h":!0}),K(r)!=="svelte-2m9p61"&&(r.textContent=s),d.forEach(h),a=B(L),c.block.l(L),L.forEach(h),f.forEach(h),this.h()},h(){E(l,"class","title-bar svelte-5k8p3l"),E(n,"class","contents svelte-5k8p3l"),E(t,"role","dialog"),E(t,"class","modal svelte-5k8p3l")},m(_,f){S(_,t,f),m(t,n),m(n,l),m(l,e),m(l,r),m(n,a),c.block.m(n,c.anchor=null),c.mount=()=>n,c.anchor=null,o||(u=ne(r,"click",rl),o=!0)},p(_,f){i=_,ml(c,i,f)},d(_){_&&h(t),c.block.d(),c.token=null,c=null,o=!1,u()}}}function ql(i){let t,n,l=i[9].message+"",e;return{c(){t=b("p"),n=M("Could not retrieve checks: "),e=M(l),this.h()},l(r){t=C(r,"P",{style:!0});var s=D(t);n=H(s,"Could not retrieve checks: "),e=H(s,l),s.forEach(h),this.h()},h(){Me(t,"color","red")},m(r,s){S(r,t,s),m(t,n),m(t,e)},p:se,d(r){r&&h(t)}}}function Ml(i){yt(i);let t,n,l="Last Check",e,r,s="Checks",a,o,u="Skipped",c,_,f="Errors",L,d,$=i[4]+"",p,k,v,O=i[3].nbChecks+"",A,w,V,Q=i[3].nbSkipped+"",j,ee,Se,Ie=i[3].nbFails+"",fe,Ne,ue,Be,X,te,Ee="Status",Ue,me,Pe="Ref",be,Ce,Oe="Host",pe,he,z="Data",we,ke=F(i[5]),J=[];for(let R=0;R<ke.length;R+=1)J[R]=$t(Bt(i,ke,R));return{c(){t=b("div"),n=b("span"),n.textContent=l,e=y(),r=b("span"),r.textContent=s,a=y(),o=b("span"),o.textContent=u,c=y(),_=b("span"),_.textContent=f,L=y(),d=b("span"),p=M($),k=y(),v=b("span"),A=M(O),w=y(),V=b("span"),j=M(Q),ee=y(),Se=b("span"),fe=M(Ie),Ne=y(),ue=b("br"),Be=y(),X=b("div"),te=b("span"),te.textContent=Ee,Ue=y(),me=b("span"),me.textContent=Pe,be=y(),Ce=b("span"),Ce.textContent=Oe,pe=y(),he=b("span"),he.textContent=z,we=y();for(let R=0;R<J.length;R+=1)J[R].c();this.h()},l(R){t=C(R,"DIV",{class:!0});var q=D(t);n=C(q,"SPAN",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-1lbvzb0"&&(n.textContent=l),e=B(q),r=C(q,"SPAN",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-1wmxeaf"&&(r.textContent=s),a=B(q),o=C(q,"SPAN",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-txun94"&&(o.textContent=u),c=B(q),_=C(q,"SPAN",{class:!0,"data-svelte-h":!0}),K(_)!=="svelte-5mrj6x"&&(_.textContent=f),L=B(q),d=C(q,"SPAN",{class:!0});var U=D(d);p=H(U,$),U.forEach(h),k=B(q),v=C(q,"SPAN",{class:!0});var De=D(v);A=H(De,O),De.forEach(h),w=B(q),V=C(q,"SPAN",{class:!0});var Ae=D(V);j=H(Ae,Q),Ae.forEach(h),ee=B(q),Se=C(q,"SPAN",{class:!0});var Y=D(Se);fe=H(Y,Ie),Y.forEach(h),q.forEach(h),Ne=B(R),ue=C(R,"BR",{}),Be=B(R),X=C(R,"DIV",{class:!0});var le=D(X);te=C(le,"SPAN",{class:!0,"data-svelte-h":!0}),K(te)!=="svelte-1s7ffxq"&&(te.textContent=Ee),Ue=B(le),me=C(le,"SPAN",{class:!0,"data-svelte-h":!0}),K(me)!=="svelte-1wa8gqx"&&(me.textContent=Pe),be=B(le),Ce=C(le,"SPAN",{class:!0,"data-svelte-h":!0}),K(Ce)!=="svelte-33rgke"&&(Ce.textContent=Oe),pe=B(le),he=C(le,"SPAN",{class:!0,"data-svelte-h":!0}),K(he)!=="svelte-1yzk30k"&&(he.textContent=z),we=B(le);for(let G=0;G<J.length;G+=1)J[G].l(le);le.forEach(h),this.h()},h(){E(n,"class","col table-head svelte-5k8p3l"),E(r,"class","col table-head svelte-5k8p3l"),E(o,"class","col table-head svelte-5k8p3l"),E(_,"class","col table-head svelte-5k8p3l"),E(d,"class","col svelte-5k8p3l"),E(v,"class","col svelte-5k8p3l"),E(V,"class","col svelte-5k8p3l"),E(Se,"class","col svelte-5k8p3l"),E(t,"class","rows svelte-5k8p3l"),E(te,"class","col table-head svelte-5k8p3l"),E(me,"class","col table-head svelte-5k8p3l"),E(Ce,"class","col table-head svelte-5k8p3l"),E(he,"class","col table-head svelte-5k8p3l"),E(X,"class","rows svelte-5k8p3l")},m(R,q){S(R,t,q),m(t,n),m(t,e),m(t,r),m(t,a),m(t,o),m(t,c),m(t,_),m(t,L),m(t,d),m(d,p),m(t,k),m(t,v),m(v,A),m(t,w),m(t,V),m(V,j),m(t,ee),m(t,Se),m(Se,fe),S(R,Ne,q),S(R,ue,q),S(R,Be,q),S(R,X,q),m(X,te),m(X,Ue),m(X,me),m(X,be),m(X,Ce),m(X,pe),m(X,he),m(X,we);for(let U=0;U<J.length;U+=1)J[U]&&J[U].m(X,null)},p(R,q){if(yt(R),q&4){ke=F(R[5]);let U;for(U=0;U<ke.length;U+=1){const De=Bt(R,ke,U);J[U]?J[U].p(De,q):(J[U]=$t(De),J[U].c(),J[U].m(X,null))}for(;U<J.length;U+=1)J[U].d(1);J.length=ke.length}},d(R){R&&(h(t),h(Ne),h(ue),h(Be),h(X)),ge(J,R)}}}function $t(i){let t,n=i[6].status+"",l,e,r,s=i[6].chord.artist+"",a,o,u=i[6].chord.title+"",c,_,f,L,d=new URL(i[6].chord.url).hostname+"",$,p,k,v=(i[6].error?JSON.stringify(i[6].error):"")+"",O;return{c(){t=b("span"),l=M(n),e=y(),r=b("span"),a=M(s),o=M(" - "),c=M(u),_=y(),f=b("span"),L=b("a"),$=M(d),p=y(),k=b("span"),O=M(v),this.h()},l(A){t=C(A,"SPAN",{class:!0});var w=D(t);l=H(w,n),w.forEach(h),e=B(A),r=C(A,"SPAN",{class:!0});var V=D(r);a=H(V,s),o=H(V," - "),c=H(V,u),V.forEach(h),_=B(A),f=C(A,"SPAN",{class:!0});var Q=D(f);L=C(Q,"A",{href:!0,target:!0,rel:!0});var j=D(L);$=H(j,d),j.forEach(h),Q.forEach(h),p=B(A),k=C(A,"SPAN",{class:!0});var ee=D(k);O=H(ee,v),ee.forEach(h),this.h()},h(){E(t,"class","col svelte-5k8p3l"),E(r,"class","col svelte-5k8p3l"),E(L,"href",i[6].chord.url),E(L,"target","_blank"),E(L,"rel","noopener noreferrer"),E(f,"class","col svelte-5k8p3l"),E(k,"class","col svelte-5k8p3l")},m(A,w){S(A,t,w),m(t,l),S(A,e,w),S(A,r,w),m(r,a),m(r,o),m(r,c),S(A,_,w),S(A,f,w),m(f,L),m(L,$),S(A,p,w),S(A,k,w),m(k,O)},p:se,d(A){A&&(h(t),h(e),h(r),h(_),h(f),h(p),h(k))}}}function Hl(i){let t,n="Fetching results...";return{c(){t=b("p"),t.textContent=n},l(l){t=C(l,"P",{"data-svelte-h":!0}),K(t)!=="svelte-gjakbw"&&(t.textContent=n)},m(l,e){S(l,t,e)},p:se,d(l){l&&h(t)}}}function Rl(i){let t,n=i[0]&&Dt(i);return{c(){n&&n.c(),t=W()},l(l){n&&n.l(l),t=W()},m(l,e){n&&n.m(l,e),S(l,t,e)},p(l,[e]){l[0]?n?n.p(l,e):(n=Dt(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:se,o:se,d(l){l&&h(t),n&&n.d(l)}}}function jl(i,t,n){let{isOpen:l}=t;const e=s=>{const a=new Date(s.timestamp);return a.toDateString()+" "+a.toTimeString()},r=s=>s.fails.sort((a,o)=>a.chord.url<o.chord.url?-1:1);return i.$$set=s=>{"isOpen"in s&&n(0,l=s.isOpen)},[l,e,r]}class Fl extends Le{constructor(t){super(),Te(this,t,jl,Rl,ce,{isOpen:0})}}function It(i,t,n){const l=i.slice();return l[10]=t[n],l}function Ut(i){let t,n=i[10].dateTag+"",l;return{c(){t=b("li"),l=M(n),this.h()},l(e){t=C(e,"LI",{class:!0});var r=D(t);l=H(r,n),r.forEach(h),this.h()},h(){E(t,"class","ul2col-separator")},m(e,r){S(e,t,r),m(t,l)},p(e,r){r&1&&n!==(n=e[10].dateTag+"")&&Fe(l,n)},d(e){e&&h(t)}}}function Pt(i){let t,n,l,e,r,s=i[10].dateTag&&Ut(i);return l=new qe({props:{chord:i[10]}}),{c(){s&&s.c(),t=y(),n=b("li"),oe(l.$$.fragment),e=y(),this.h()},l(a){s&&s.l(a),t=B(a),n=C(a,"LI",{class:!0});var o=D(n);de(l.$$.fragment,o),e=B(o),o.forEach(h),this.h()},h(){E(n,"class","ul2col-item")},m(a,o){s&&s.m(a,o),S(a,t,o),S(a,n,o),ie(l,n,null),m(n,e),r=!0},p(a,o){a[10].dateTag?s?s.p(a,o):(s=Ut(a),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null);const u={};o&1&&(u.chord=a[10]),l.$set(u)},i(a){r||(N(l.$$.fragment,a),r=!0)},o(a){I(l.$$.fragment,a),r=!1},d(a){a&&(h(t),h(n)),s&&s.d(a),ae(l)}}}function zl(i){let t,n,l,e,r="More...",s,a,o,u,c,_=F(i[0]),f=[];for(let d=0;d<_.length;d+=1)f[d]=Pt(It(i,_,d));const L=d=>I(f[d],1,1,()=>{f[d]=null});return{c(){t=b("div"),n=b("h3"),l=M(`Latest additions
        `),e=b("button"),e.textContent=r,s=y(),a=b("ul");for(let d=0;d<f.length;d+=1)f[d].c();this.h()},l(d){t=C(d,"DIV",{});var $=D(t);n=C($,"H3",{});var p=D(n);l=H(p,`Latest additions
        `),e=C(p,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-l2h3rt"&&(e.textContent=r),p.forEach(h),s=B($),a=C($,"UL",{class:!0});var k=D(a);for(let v=0;v<f.length;v+=1)f[v].l(k);k.forEach(h),$.forEach(h),this.h()},h(){E(e,"class","pull-right"),E(a,"class","ul2col-container")},m(d,$){S(d,t,$),m(t,n),m(n,l),m(n,e),m(t,s),m(t,a);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(a,null);o=!0,u||(c=ne(e,"click",i[3]),u=!0)},p(d,[$]){if($&1){_=F(d[0]);let p;for(p=0;p<_.length;p+=1){const k=It(d,_,p);f[p]?(f[p].p(k,$),N(f[p],1)):(f[p]=Pt(k),f[p].c(),N(f[p],1),f[p].m(a,null))}for(Z(),p=_.length;p<f.length;p+=1)L(p);x()}},i(d){if(!o){for(let $=0;$<_.length;$+=1)N(f[$]);o=!0}},o(d){f=f.filter(Boolean);for(let $=0;$<f.length;$+=1)I(f[$]);o=!1},d(d){d&&h(t),ge(f,d),u=!1,c()}}}function Jl(i,t,n){let{chords:l}=t;const e=Date.now(),r=1e3*3600*24*7,s=r*4,a=[{label:"last week",time:e-r},{label:"one month ago",time:e-s},{label:"two monthes ago",time:e-2*s},{label:"six monthes ago",time:e-6*s},{label:"one year ago",time:e-12*s}],o=l.filter(L=>L.creationDate).sort((L,d)=>d.creationDate-L.creationDate).map((L,d,$)=>{const p={...L};if(d>0){const k=$[d-1];for(const{time:v,label:O}of a)k.creationDate>v&&L.creationDate<v&&(p.dateTag=O)}return p});let u=6,c=[];const _=()=>{u+=4,n(0,c=o.slice(0,u))};Qe(()=>{_()});const f=()=>_();return i.$$set=L=>{"chords"in L&&n(2,l=L.chords)},[c,_,l,f]}class Gl extends Le{constructor(t){super(),Te(this,t,Jl,zl,ce,{chords:2})}}function Ot(i,t,n){const l=i.slice();return l[5]=t[n],l}function Vt(i){let t,n=" ↶ ",l,e;return{c(){t=b("button"),t.textContent=n},l(r){t=C(r,"BUTTON",{"data-svelte-h":!0}),K(t)!=="svelte-1mg1zky"&&(t.textContent=n)},m(r,s){S(r,t,s),l||(e=ne(t,"click",i[3]),l=!0)},p:se,d(r){r&&h(t),l=!1,e()}}}function qt(i,t){let n,l,e,r;return l=new qe({props:{chord:t[5],showArtist:!0}}),{key:i,first:null,c(){n=b("li"),oe(l.$$.fragment),e=y(),this.h()},l(s){n=C(s,"LI",{class:!0});var a=D(n);de(l.$$.fragment,a),e=B(a),a.forEach(h),this.h()},h(){E(n,"class","ul2col-item"),this.first=n},m(s,a){S(s,n,a),ie(l,n,null),m(n,e),r=!0},p(s,a){t=s;const o={};a&2&&(o.chord=t[5]),l.$set(o)},i(s){r||(N(l.$$.fragment,s),r=!0)},o(s){I(l.$$.fragment,s),r=!1},d(s){s&&h(n),ae(l)}}}function Xl(i){let t,n,l,e,r,s,a="Get more random songs",o,u,c,_,f=[],L=new Map,d,$,p,k=i[0].length>ye&&Vt(i),v=F(i[1]);const O=A=>A[5].url;for(let A=0;A<v.length;A+=1){let w=Ot(i,v,A),V=O(w);L.set(V,f[A]=qt(V,w))}return{c(){t=b("div"),n=b("h3"),l=M(`Random song
        `),e=b("span"),k&&k.c(),r=y(),s=b("button"),s.textContent=a,o=y(),u=b("br"),c=y(),_=b("ul");for(let A=0;A<f.length;A+=1)f[A].c();this.h()},l(A){t=C(A,"DIV",{});var w=D(t);n=C(w,"H3",{});var V=D(n);l=H(V,`Random song
        `),e=C(V,"SPAN",{class:!0});var Q=D(e);k&&k.l(Q),r=B(Q),s=C(Q,"BUTTON",{"data-svelte-h":!0}),K(s)!=="svelte-1gfm3kd"&&(s.textContent=a),Q.forEach(h),V.forEach(h),o=B(w),u=C(w,"BR",{}),c=B(w),_=C(w,"UL",{class:!0});var j=D(_);for(let ee=0;ee<f.length;ee+=1)f[ee].l(j);j.forEach(h),w.forEach(h),this.h()},h(){E(e,"class","pull-right"),E(_,"class","ul2col-container")},m(A,w){S(A,t,w),m(t,n),m(n,l),m(n,e),k&&k.m(e,null),m(e,r),m(e,s),m(t,o),m(t,u),m(t,c),m(t,_);for(let V=0;V<f.length;V+=1)f[V]&&f[V].m(_,null);d=!0,$||(p=ne(s,"click",i[2]),$=!0)},p(A,[w]){A[0].length>ye?k?k.p(A,w):(k=Vt(A),k.c(),k.m(e,r)):k&&(k.d(1),k=null),w&2&&(v=F(A[1]),Z(),f=nl(f,w,O,1,A,v,L,_,sl,qt,null,Ot),x())},i(A){if(!d){for(let w=0;w<v.length;w+=1)N(f[w]);d=!0}},o(A){for(let w=0;w<f.length;w+=1)I(f[w]);d=!1},d(A){A&&h(t),k&&k.d();for(let w=0;w<f.length;w+=1)f[w].d();$=!1,p()}}}const ye=6;function Yl(i,t,n){let{chords:l}=t,e=[],r=[];const s=()=>{e.length>=l.length-ye&&n(0,e=[]);for(let o=0;o<ye;o++){let u=-1;for(;u===-1||e.includes(u);)u=Math.floor(Math.random()*l.length);e.push(u)}n(1,r=e.slice(e.length-ye).map(o=>l[o]))},a=()=>{e.length<=ye||(e.splice(e.length-ye),n(1,r=e.slice(e.length-ye).map(o=>l[o])))};return Qe(()=>{s()}),i.$$set=o=>{"chords"in o&&n(4,l=o.chords)},[e,r,s,a,l]}class Kl extends Le{constructor(t){super(),Te(this,t,Yl,Xl,ce,{chords:4})}}function Mt(i,t,n){const l=i.slice();return l[18]=t[n],l}function Ht(i,t,n){const l=i.slice();return l[21]=t[n],l[22]=t,l[23]=n,l}function Rt(i,t,n){const l=i.slice();return l[24]=t[n],l}function jt(i){let t,n;return t=new cl({props:{item:i[24]}}),{c(){oe(t.$$.fragment)},l(l){de(t.$$.fragment,l)},m(l,e){ie(t,l,e),n=!0},p(l,e){const r={};e&1&&(r.item=l[24]),t.$set(r)},i(l){n||(N(t.$$.fragment,l),n=!0)},o(l){I(t.$$.fragment,l),n=!1},d(l){ae(t,l)}}}function Ft(i){let t,n,l,e,r,s,a;function o(){i[12].call(n,i[21])}function u(){return i[13](i[21])}return{c(){t=b("button"),n=b("input"),l=y(),e=b("span"),r=y(),this.h()},l(c){t=C(c,"BUTTON",{class:!0});var _=D(t);n=C(_,"INPUT",{id:!0,type:!0}),l=B(_),e=C(_,"SPAN",{class:!0}),D(e).forEach(h),r=B(_),_.forEach(h),this.h()},h(){E(n,"id",i[21]),E(n,"type","checkbox"),E(e,"class",Je(Ye(i[21]))+" svelte-1gfqv35"),E(t,"class","filter-control svelte-1gfqv35")},m(c,_){S(c,t,_),m(t,n),n.checked=i[3][i[21]],m(t,l),m(t,e),m(t,r),s||(a=[ne(n,"change",o),ne(t,"click",u)],s=!0)},p(c,_){i=c,_&72&&(n.checked=i[3][i[21]])},d(c){c&&h(t),s=!1,We(a)}}}function zt(i){let t,n=i[18].label+"",l,e,r,s;function a(){return i[14](i[18])}return{c(){t=b("button"),l=M(n),e=y(),this.h()},l(o){t=C(o,"BUTTON",{class:!0});var u=D(t);l=H(u,n),e=B(u),u.forEach(h),this.h()},h(){E(t,"class","control svelte-1gfqv35"),je(t,"selected",i[2]===i[18])},m(o,u){S(o,t,u),m(t,l),m(t,e),r||(s=ne(t,"click",a),r=!0)},p(o,u){i=o,u&36&&je(t,"selected",i[2]===i[18])},d(o){o&&h(t),r=!1,s()}}}function Wl(i){let t,n,l,e,r,s="Check dead links",a,o,u="Edit",c,_,f,L,d,$,p=i[4].length+"",k,v,O,A,w,V,Q,j,ee,Se="All songs",Ie,fe,Ne,ue,Be='<i class="fas fa-times-circle"></i>',X,te,Ee,Ue="Filters",me,Pe,be,Ce="View",Oe,pe,he,z,we,ke,J,R;t=new il({props:{title:"Song Book",description:"My song book",iconPath:"/songbook.png"}});let q=F(i[0]),U=[];for(let g=0;g<q.length;g+=1)U[g]=jt(Rt(i,q,g));const De=g=>I(U[g],1,1,()=>{U[g]=null});f=new wl({}),A=new Gl({props:{chords:i[4]}}),V=new Kl({props:{chords:i[4]}});let Ae=F(i[6]),Y=[];for(let g=0;g<Ae.length;g+=1)Y[g]=Ft(Ht(i,Ae,g));let le=F(i[5]),G=[];for(let g=0;g<le.length;g+=1)G[g]=zt(Mt(i,le,g));var $e=i[2].component;function Ze(g,P){return{props:{chords:g[4],searchString:g[1],filters:g[3]}}}return $e&&(z=et($e,Ze(i))),{c(){oe(t.$$.fragment),n=y(),l=b("h2"),e=b("span"),r=b("button"),r.textContent=s,a=y(),o=b("button"),o.textContent=u,c=y();for(let g=0;g<U.length;g+=1)U[g].c();_=y(),oe(f.$$.fragment),L=y(),d=b("p"),$=M("This is a list of "),k=M(p),v=M(` song chords I have been gathering since I started teaching myself
    the guitar as a teen and that I like to play.`),O=y(),oe(A.$$.fragment),w=y(),oe(V.$$.fragment),Q=y(),j=b("div"),ee=b("h3"),ee.textContent=Se,Ie=M(`
    Search an artist, a title or a tag:`),fe=b("input"),Ne=y(),ue=b("button"),ue.innerHTML=Be,X=y(),te=b("div"),Ee=b("h4"),Ee.textContent=Ue,me=y();for(let g=0;g<Y.length;g+=1)Y[g].c();Pe=y(),be=b("h4"),be.textContent=Ce,Oe=y(),pe=b("div");for(let g=0;g<G.length;g+=1)G[g].c();he=y(),z&&oe(z.$$.fragment),we=W(),this.h()},l(g){de(t.$$.fragment,g),n=B(g),l=C(g,"H2",{});var P=D(l);e=C(P,"SPAN",{class:!0});var T=D(e);r=C(T,"BUTTON",{"data-svelte-h":!0}),K(r)!=="svelte-13v6ylk"&&(r.textContent=s),a=B(T),o=C(T,"BUTTON",{"data-svelte-h":!0}),K(o)!=="svelte-18v2orh"&&(o.textContent=u),T.forEach(h),P.forEach(h),c=B(g);for(let ve=0;ve<U.length;ve+=1)U[ve].l(g);_=B(g),de(f.$$.fragment,g),L=B(g),d=C(g,"P",{});var re=D(d);$=H(re,"This is a list of "),k=H(re,p),v=H(re,` song chords I have been gathering since I started teaching myself
    the guitar as a teen and that I like to play.`),re.forEach(h),O=B(g),de(A.$$.fragment,g),w=B(g),de(V.$$.fragment,g),Q=B(g),j=C(g,"DIV",{});var _e=D(j);ee=C(_e,"H3",{"data-svelte-h":!0}),K(ee)!=="svelte-bfvigd"&&(ee.textContent=Se),Ie=H(_e,`
    Search an artist, a title or a tag:`),fe=C(_e,"INPUT",{type:!0}),Ne=B(_e),ue=C(_e,"BUTTON",{"data-svelte-h":!0}),K(ue)!=="svelte-5nqbye"&&(ue.innerHTML=Be),X=B(_e),te=C(_e,"DIV",{class:!0});var Re=D(te);Ee=C(Re,"H4",{"data-svelte-h":!0}),K(Ee)!=="svelte-xazxp3"&&(Ee.textContent=Ue),me=B(Re);for(let ve=0;ve<Y.length;ve+=1)Y[ve].l(Re);Re.forEach(h),Pe=B(_e),be=C(_e,"H4",{"data-svelte-h":!0}),K(be)!=="svelte-1yp5l9r"&&(be.textContent=Ce),Oe=B(_e),pe=C(_e,"DIV",{class:!0});var xe=D(pe);for(let ve=0;ve<G.length;ve+=1)G[ve].l(xe);xe.forEach(h),_e.forEach(h),he=B(g),z&&de(z.$$.fragment,g),we=W(),this.h()},h(){Me(r,"position","relative"),Me(o,"position","relative"),E(e,"class","pull-right"),E(fe,"type","text"),E(te,"class","filter-controls-container svelte-1gfqv35"),E(pe,"class","view-controls-container svelte-1gfqv35")},m(g,P){ie(t,g,P),S(g,n,P),S(g,l,P),m(l,e),m(e,r),m(e,a),m(e,o),S(g,c,P);for(let T=0;T<U.length;T+=1)U[T]&&U[T].m(g,P);S(g,_,P),ie(f,g,P),S(g,L,P),S(g,d,P),m(d,$),m(d,k),m(d,v),S(g,O,P),ie(A,g,P),S(g,w,P),ie(V,g,P),S(g,Q,P),S(g,j,P),m(j,ee),m(j,Ie),m(j,fe),tt(fe,i[1]),m(j,Ne),m(j,ue),m(j,X),m(j,te),m(te,Ee),m(te,me);for(let T=0;T<Y.length;T+=1)Y[T]&&Y[T].m(te,null);m(j,Pe),m(j,be),m(j,Oe),m(j,pe);for(let T=0;T<G.length;T+=1)G[T]&&G[T].m(pe,null);S(g,he,P),z&&ie(z,g,P),S(g,we,P),ke=!0,J||(R=[ne(r,"click",i[8]),ne(o,"click",i[9]),ne(fe,"input",i[10]),ne(ue,"click",i[11])],J=!0)},p(g,[P]){if(P&1){q=F(g[0]);let T;for(T=0;T<q.length;T+=1){const re=Rt(g,q,T);U[T]?(U[T].p(re,P),N(U[T],1)):(U[T]=jt(re),U[T].c(),N(U[T],1),U[T].m(_.parentNode,_))}for(Z(),T=q.length;T<U.length;T+=1)De(T);x()}if(P&2&&fe.value!==g[1]&&tt(fe,g[1]),P&72){Ae=F(g[6]);let T;for(T=0;T<Ae.length;T+=1){const re=Ht(g,Ae,T);Y[T]?Y[T].p(re,P):(Y[T]=Ft(re),Y[T].c(),Y[T].m(te,null))}for(;T<Y.length;T+=1)Y[T].d(1);Y.length=Ae.length}if(P&36){le=F(g[5]);let T;for(T=0;T<le.length;T+=1){const re=Mt(g,le,T);G[T]?G[T].p(re,P):(G[T]=zt(re),G[T].c(),G[T].m(pe,null))}for(;T<G.length;T+=1)G[T].d(1);G.length=le.length}if(P&4&&$e!==($e=g[2].component)){if(z){Z();const T=z;I(T.$$.fragment,1,0,()=>{ae(T,1)}),x()}$e?(z=et($e,Ze(g)),oe(z.$$.fragment),N(z.$$.fragment,1),ie(z,we.parentNode,we)):z=null}else if($e){const T={};P&2&&(T.searchString=g[1]),P&8&&(T.filters=g[3]),z.$set(T)}},i(g){if(!ke){N(t.$$.fragment,g);for(let P=0;P<q.length;P+=1)N(U[P]);N(f.$$.fragment,g),N(A.$$.fragment,g),N(V.$$.fragment,g),z&&N(z.$$.fragment,g),ke=!0}},o(g){I(t.$$.fragment,g),U=U.filter(Boolean);for(let P=0;P<U.length;P+=1)I(U[P]);I(f.$$.fragment,g),I(A.$$.fragment,g),I(V.$$.fragment,g),z&&I(z.$$.fragment,g),ke=!1},d(g){g&&(h(n),h(l),h(c),h(_),h(L),h(d),h(O),h(w),h(Q),h(j),h(he),h(we)),ae(t,g),ge(U,g),ae(f,g),ae(A,g),ae(V,g),ge(Y,g),ge(G,g),z&&ae(z,g),J=!1,We(R)}}}function Ql(i,t,n){let l,e;Ge(i,He,w=>n(15,l=w)),Ge(i,fl,w=>n(16,e=w)),pl.set("Songbook");let{data:r}=t;const{chords:s}=r;let a=[];const o=w=>{a.push(w),n(0,a),setTimeout(()=>{a.shift(),n(0,a)},5e3)};Qe(async()=>{try{if(l.length&&e){o({level:"info",header:"Trying to count missed visits while logged out"});for(const w of l)await Gt(w);o({level:"success",header:`Counted ${l.length} missed visits`}),Yt(He,l=[],l)}}catch{o({level:"error",header:"Couldnt upload failed visit counts"})}try{const V=(await el()).reduce((Q,j)=>(Q.set(j.url,{...j}),Q),new Map);Ve.set(V)}catch{o({level:"error",header:"Couldnt upload failed visit counts"})}});let u="";const c=[{label:"By artist",component:Dl},{label:"By tags",component:Ul},{label:"By frequency",component:Vl},{label:"By access date",component:Al}];let _=c[0],f={pdf:!0,doc:!0,youtube:!0,link:!0};const L=Object.keys(f),d=()=>ol(Fl),$=()=>hl("/songbook/edit");function p(){u=this.value,n(1,u)}const k=()=>n(1,u="");function v(w){f[w]=this.checked,n(3,f)}const O=w=>{n(3,f[w]=!f[w],f),n(3,f)},A=w=>n(2,_=w);return i.$$set=w=>{"data"in w&&n(7,r=w.data)},[a,u,_,f,s,c,L,r,d,$,p,k,v,O,A]}class hn extends Le{constructor(t){super(),Te(this,t,Ql,Wl,ce,{data:7})}}export{hn as component,un as universal};
