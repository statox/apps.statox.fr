import"../chunks/NZTpNUN0.js";import"../chunks/C6mLcrp8.js";import{x as X,y as n,z as re,o as p,p as o,s,v as N,g as t,a as f,B as j,C as u,E as m,w as $,f as ie,aX as le}from"../chunks/B0UlURnY.js";import{i as ne}from"../chunks/pzvRHnRc.js";import{p as fe}from"../chunks/ByRV_SoG.js";import{d as ce}from"../chunks/xAPHX074.js";import{i as x}from"../chunks/t2-SS6qO.js";import{e as ue,i as me}from"../chunks/BiJqJ8_F.js";import{a as pe,r as D}from"../chunks/BJqS654m.js";import{b as O,d as de}from"../chunks/B2Q2GzC9.js";import{b as ve}from"../chunks/sCJkPUoU.js";import{s as be,a as _e}from"../chunks/DbWSeRyB.js";import{u as ge,U as he}from"../chunks/e5VcFxYk.js";import{A as ye}from"../chunks/BoVVUzpO.js";import{t as ke}from"../chunks/B_sqZUC5.js";import{M as xe}from"../chunks/Igyun0wC.js";import{M as Se}from"../chunks/CA_iUU_Z.js";import{M as Me}from"../chunks/rpfju9JN.js";import{u as Ce}from"../chunks/aTX0a9d7.js";import{g as Ue}from"../chunks/Cg8gKoLv.js";const we=()=>{Ue("/clipboard/")};var Te=(d,r)=>{t(r)!==void 0&&(t(r).value="")},Ae=(d,r)=>s(r,!t(r)),Be=p('Public <i class="fas fa-lock-open"></i>',1),Ee=p('Private <i class="fas fa-lock"></i>',1),Fe=p('<i class="sucess-indicator fas fa-check svelte-118mt4a"></i>'),Le=p('<button class="form-action"><!></button> <!>',1),Pe=p('<span class="form-action">Login to upload an entry</span>'),Ie=p('<div class="contents svelte-118mt4a"><h4 class="title-bar svelte-118mt4a">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-118mt4a"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-118mt4a" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function ze(d,r){X(r,!0);const[q,G]=be(),H=()=>_e(ge,"$user",q);let c=n(re([])),_=n(""),g=n(""),S=n(void 0),v=n(void 0),h=n(!1),y=n(0),b=n(!1),M=n(!1);const J=async()=>{if(s(c,[],!0),t(_)?.length||t(c).push({level:"error",header:"name must be defined"}),t(g)?.length||t(c).push({level:"error",header:"content must be defined"}),t(y)<0&&t(c).push({level:"error",header:"TTL must be positive"}),t(c).length)return;let e;t(v)&&t(v).length&&(e=t(v)[0]||void 0);try{s(b,!0),s(M,!1),await Ce({name:t(_),content:t(g),ttlSeconds:t(y),isPublic:t(h),file:e}),s(b,!1),r.onUpload(),s(M,!0)}catch(a){s(b,!1);let l=a.message;a instanceof ye&&a.code===401?l="Invalid logged in user":a instanceof he&&(l="User is logged out");const F=`<strong>Entry not created</strong><br/> ${l}`;ke.push(F,{theme:{"--toastBarBackground":"#FF0000"}})}};var C=Ie(),U=u(C),K=o(u(U));K.__click=[we],m(U);var P=o(U,2);ue(P,17,()=>t(c),me,(e,a)=>{Se(e,{get item(){return t(a)}})});var w=o(P,2),T=o(u(w),2);D(T);var A=o(T,4);D(A);var B=o(A,4),E=u(B);ve(E,e=>s(S,e),()=>t(S));var Q=o(E,2);Q.__click=[Te,S],m(B);var I=o(B,4);Me(I,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(y)},set valueInSeconds(e){s(y,e,!0)}});var k=o(I,4);let z;k.__click=[Ae,h];var R=u(k);{var V=e=>{var a=Be();$(),f(e,a)},W=e=>{var a=Ee();$(),f(e,a)};x(R,e=>{t(h)?e(V):e(W,!1)})}m(k),m(w);var Y=o(w,2);{var Z=e=>{var a=Le(),l=ie(a);l.__click=J;var F=u(l);{var te=i=>{xe(i,{size:.5,unit:"em",durationSeconds:.5})},ae=i=>{var L=le("Submit");f(i,L)};x(F,i=>{t(b)?i(te):i(ae,!1)})}m(l);var se=o(l,2);{var oe=i=>{var L=Fe();f(i,L)};x(se,i=>{t(M)&&i(oe)})}N(()=>l.disabled=t(b)),f(e,a)},ee=e=>{var a=Pe();f(e,a)};x(Y,e=>{H()?e(Z):e(ee,!1)})}m(C),N(e=>z=pe(k,1,"visibility-status svelte-118mt4a",null,z,e),[()=>({"visibility-public":t(h)})]),O(T,()=>t(_),e=>s(_,e)),O(A,()=>t(g),e=>s(g,e)),de(E,()=>t(v),e=>s(v,e)),f(d,C),j(),G()}ce(["click"]);function st(d,r){X(r,!1),fe.set("Clipboard"),ne(),ze(d,{onUpload:()=>console.log("new entry created")}),j()}export{st as component};
