import{s as ot,A as Z,i as M,n as K,f as y,e as v,t as G,a as H,c as _,b as W,d as q,z as w,g as L,l as p,h as f,E as B,G as it,y as rt,N as at}from"../chunks/scheduler.gZqC1beF.js";import{S as nt,i as st,b as lt,d as ct,m as mt,a as dt,t as ht,e as ut}from"../chunks/index.qAIlD2bD.js";import{P as ft}from"../chunks/P5.DKUKgjxv.js";import{c as xt,o as yt}from"../chunks/store.CaxKb1VT.js";import"../chunks/entry.DueV5aaq.js";import{p as gt}from"../chunks/Main.svelte_svelte_type_style_lang.D4VWcUtR.js";import"../chunks/auth0-spa-js.production.esm.D13UjCU2.js";function tt(t){let o,e,s,i,l,m="Close",c,u,a=`This page is an implementation of <a href="https://chordwheel.com/" target="_blank" rel="noopener noreferrer">Jim Fleser&#39;s Chord Wheel</a>
                it is intended for my personal use. If you are using this implementation you should definitely
                <a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=4" target="_blank" rel="noopener noreferrer">buy his book</a>
                or
                <a href="https://apps.apple.com/us/app/the-chord-wheel/id444931977" target="_blank" rel="noopener noreferrer">buy his app</a> (which is much more complete than this page).`,h,r,n=`This tool only works for songs in major keys.
                <ul><li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=5&amp;Itemid=17" target="_blank" rel="noopener noreferrer">Analyzing songs and compositional styles</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=8:soloing-and-improvisation&amp;catid=8:using-the-chordwheel&amp;Itemid=8" target="_blank" rel="noopener noreferrer">Soloing and improvisation</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=9&amp;Itemid=5" target="_blank" rel="noopener noreferrer">Transpositions</a></li></ul>`,k,x;return{c(){o=v("div"),e=v("div"),s=v("h4"),i=G(`Chord Wheel
                `),l=v("button"),l.textContent=m,c=H(),u=v("div"),u.innerHTML=a,h=H(),r=v("div"),r.innerHTML=n,this.h()},l(d){o=_(d,"DIV",{role:!0,class:!0});var g=W(o);e=_(g,"DIV",{class:!0});var b=W(e);s=_(b,"H4",{class:!0});var I=W(s);i=q(I,`Chord Wheel
                `),l=_(I,"BUTTON",{"data-svelte-h":!0}),w(l)!=="svelte-2m9p61"&&(l.textContent=m),I.forEach(y),c=L(b),u=_(b,"DIV",{"data-svelte-h":!0}),w(u)!=="svelte-l8vmke"&&(u.innerHTML=a),h=L(b),r=_(b,"DIV",{"data-svelte-h":!0}),w(r)!=="svelte-8ryj9s"&&(r.innerHTML=n),b.forEach(y),g.forEach(y),this.h()},h(){p(s,"class","title-bar svelte-mmovoq"),p(e,"class","contents svelte-mmovoq"),p(o,"role","dialog"),p(o,"class","modal svelte-mmovoq")},m(d,g){M(d,o,g),f(o,e),f(e,s),f(s,i),f(s,l),f(e,c),f(e,u),f(e,h),f(e,r),k||(x=B(l,"click",xt),k=!0)},d(d){d&&y(o),k=!1,x()}}}function bt(t){let o,e=t[0]&&tt();return{c(){e&&e.c(),o=Z()},l(s){e&&e.l(s),o=Z()},m(s,i){e&&e.m(s,i),M(s,o,i)},p(s,[i]){s[0]?e||(e=tt(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},i:K,o:K,d(s){s&&y(o),e&&e.d(s)}}}function vt(t,o,e){let{isOpen:s}=o;return t.$$set=i=>{"isOpen"in i&&e(0,s=i.isOpen)},[s]}class _t extends nt{constructor(o){super(),st(this,o,vt,bt,ot,{isOpen:0})}}const U=Math.PI,V={scale:1,position:0,outerRing:{labels:["B°","F♯°","C♯°","G♯°","D♯°","A♯°","F°","C°","G°","D°","A°","E°"],cellSize:2*U/48,ratio:4,innerDiameter:.82,outerDiameter:1},middleRing:{labels:["Em","Am","Bm","Em","F♯m","Bm","C♯m","F♯m","G♯m","C♯m","D♯m","G♯m","A♯m","E♭m","Fm","B♭m","Cm","Fm","Gm","Cm","Dm","Gm","Am","Dm"],cellSize:2*U/24,ratio:1,innerDiameter:.6,outerDiameter:.82},innerRing:{labels:["C","G","D","A","F♭/E","C♭/B","G♭/F♯","D♭/C♯","A♭/G♯","E♭","B♭","F"],cellSize:2*U/12,ratio:1,innerDiameter:.35,outerDiameter:.6}},S=(t,o)=>{if(t>=0)return t%o;for(;t<0;)t+=o;return t},$=(t,o,e,s,i)=>{if(e<0||e>=o.labels.length)throw new Error(`OOB labelIndex: ${e}`);const{cellSize:l,innerDiameter:m,outerDiameter:c,ratio:u}=o,a=t.createVector();a.x=0,a.y=-c/2;const h=e*l*u;a.rotate(h);const r=l/2,n=[a.copy().rotate(-r).setMag(m),a.copy().rotate(-r).setMag(c),a.copy().setMag(c*1.02),a.copy().rotate(r).setMag(c),a.copy().rotate(r).setMag(m),a.copy().setMag(m*1.02)].map(d=>d.mult(i)),k=a.copy().setMag(m+(c-m)/2).mult(i),x=S(e+s,o.labels.length)*360/o.labels.length;return{vertices:n,center:k,label:o.labels[e],color:`hsb(${x}, 50%, 80%)`,colorHue:x}},X=(t,o)=>{const{scale:e}=o,s=o.innerRing.labels.map((m,c)=>$(t,o.innerRing,c,o.position,e)),i=o.middleRing.labels.map((m,c)=>$(t,o.middleRing,c,o.position*2,e)),l=o.outerRing.labels.map((m,c)=>$(t,o.outerRing,c,o.position,e));return{tilesInnerRing:s,tilesMiddleRing:i,tilesOuterRing:l}},Y=(t,o)=>{t.strokeWeight(2),t.stroke([0,0,0,.5]),t.fill(`hsb(${o.colorHue}, 50%, 70%)`);const[e,s,i,l,m,c]=o.vertices;t.beginShape(),t.vertex(e.x,e.y),t.vertex(s.x,s.y),t.quadraticVertex(i.x,i.y,l.x,l.y),t.vertex(l.x,l.y),t.vertex(m.x,m.y),t.quadraticVertex(c.x,c.y,e.x,e.y),t.endShape(),t.noStroke(),t.fill(0),t.textSize(13),t.text(o.label,o.center.x-t.textWidth(o.label)/2,o.center.y)},Rt=(t,o,e,s,i)=>{const l=[e[S(o-1,e.length)],e[S(o,e.length)],e[S(o+1,e.length)],s[S(2*o-1,s.length)],s[S(2*o,s.length)],s[S(2*o+1,s.length)],i[S(o,i.length)]];for(const m of l){t.strokeWeight(3),t.stroke([0,0,0,1]),t.fill(`hsb(${m.colorHue}, 60%, 90%)`);const[c,u,a,h,r,n]=m.vertices;t.beginShape(),t.vertex(c.x,c.y),t.vertex(u.x,u.y),t.quadraticVertex(a.x,a.y,h.x,h.y),t.vertex(h.x,h.y),t.vertex(r.x,r.y),t.quadraticVertex(n.x,n.y,c.x,c.y),t.endShape(),t.noStroke(),t.fill(0),t.textSize(13),t.textStyle(t.BOLD),t.text(m.label,m.center.x-t.textWidth(m.label)/2,m.center.y),t.textStyle(t.NORMAL)}},kt=(t,o,e)=>{const{scale:s}=e;t.textSize(10),t.push(),t.rotate(o*(2*t.PI/12)),t.fill(250),t.circle(0,0,e.innerRing.innerDiameter*2*s),t.fill(0);const i=t.createVector();i.x=0,i.y=-e.innerRing.innerDiameter*s;const l="▲";t.text(l,i.x-t.textWidth(l)/2,i.y*.9);const m="Key";t.text(m,i.x-t.textWidth(m)/2,i.y*.75);const c=t.createVector(),u=["♯","♯♯","♯♯♯","♯♯♯♯","7♭/5♯","6♭/6♯","5♭/7♯","♭♭♭♭","♭♭♭","♭♭","♭"];c.y=-e.innerRing.innerDiameter*.85*s,t.push();for(const j of u)t.rotate(2*t.PI/12),t.text(j,-t.textWidth(j)/2,c.y);t.pop();const a=t.createVector();a.y=-e.innerRing.innerDiameter*1.04*s;const h="I";t.text(h,a.x-t.textWidth(h)/2,a.y);const r=t.createVector();r.y=-e.innerRing.outerDiameter*.9*s;const n="maj7,maj9";t.text(n,r.x-t.textWidth(n)/2,r.y),t.push(),t.rotate(-(2*t.PI)/12);const k="IV";t.text(k,a.x-t.textWidth(k)/2,a.y);const x="maj7,maj9";t.text(x,r.x-t.textWidth(x)/2,r.y),t.pop(),t.push(),t.rotate(2*t.PI/12);const d="V";t.text(d,a.x-t.textWidth(d)/2,a.y);const g="7,9,11,sus4,13";t.text(g,r.x-t.textWidth(g)/2,r.y),t.pop(),a.y=-e.middleRing.innerDiameter*1.02*s,r.y=-e.middleRing.outerDiameter*.95*s;const b="III";t.text(b,a.x-t.textWidth(b)/2,a.y);const I="m7";t.text(I,r.x-t.textWidth(I)/2,r.y),t.push(),t.rotate(-(2*t.PI)/24);const C="II";t.text(C,a.x-t.textWidth(C)/2,a.y);const T="m7,m9";t.text(T,r.x-t.textWidth(T)/2,r.y),t.pop(),t.push();const D="V I";t.rotate(2*t.PI/24),t.text(D,a.x-t.textWidth(D)/2,a.y);const N="m7,m9";t.text(N,r.x-t.textWidth(N)/2,r.y),t.pop();const O="V II°";a.y=-e.outerRing.innerDiameter*1.015*s,r.y=-e.outerRing.outerDiameter*.96*s,t.text(O,a.x-t.textWidth(O)/2,a.y);const P="m7♭5";t.text(P,r.x-t.textWidth(P)/2,r.y)},et=(t,o)=>{if(o){t.position--,t.innerRing.labels.unshift(t.innerRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.outerRing.labels.unshift(t.outerRing.labels.pop());return}t.position++,t.innerRing.labels.push(t.innerRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.outerRing.labels.push(t.outerRing.labels.shift())};function It(t){let o,e,s,i,l='<i class="fa fa-info-circle" aria-hidden="true"></i>',m,c,u,a,h,r,n,k,x,d,g,b,I,C,T,D,N="On mobile you can also swipe left/right to rotate the shape and up/down to rotate the wheel",O,P,j;return u=new ft({props:{sketch:t[3]}}),{c(){o=v("h2"),e=G(`Chord wheel
    `),s=v("span"),i=v("button"),i.innerHTML=l,m=H(),c=v("div"),lt(u.$$.fragment),a=H(),h=v("div"),r=v("p"),n=v("button"),k=G(`
        Shape rotation
        `),x=v("button"),d=H(),g=v("p"),b=v("button"),I=G(`
        Wheel rotation
        `),C=v("button"),T=H(),D=v("p"),D.textContent=N,this.h()},l(R){o=_(R,"H2",{});var E=W(o);e=q(E,`Chord wheel
    `),s=_(E,"SPAN",{});var J=W(s);i=_(J,"BUTTON",{"data-svelte-h":!0}),w(i)!=="svelte-1r24cmf"&&(i.innerHTML=l),J.forEach(y),E.forEach(y),m=L(R),c=_(R,"DIV",{class:!0});var Q=W(c);ct(u.$$.fragment,Q),Q.forEach(y),a=L(R),h=_(R,"DIV",{class:!0});var A=W(h);r=_(A,"P",{});var z=W(r);n=_(z,"BUTTON",{class:!0}),W(n).forEach(y),k=q(z,`
        Shape rotation
        `),x=_(z,"BUTTON",{class:!0}),W(x).forEach(y),z.forEach(y),d=L(A),g=_(A,"P",{});var F=W(g);b=_(F,"BUTTON",{class:!0}),W(b).forEach(y),I=q(F,`
        Wheel rotation
        `),C=_(F,"BUTTON",{class:!0}),W(C).forEach(y),F.forEach(y),T=L(A),D=_(A,"P",{"data-svelte-h":!0}),w(D)!=="svelte-sorsau"&&(D.textContent=N),A.forEach(y),this.h()},h(){it(i,"position","relative"),p(c,"class","d-flex justify-content-center svelte-8r9jj"),p(n,"class","fa fa-undo"),p(x,"class","fa fa-repeat"),p(b,"class","fa fa-undo"),p(C,"class","fa fa-repeat"),p(h,"class","justify-content-center svelte-8r9jj")},m(R,E){M(R,o,E),f(o,e),f(o,s),f(s,i),M(R,m,E),M(R,c,E),mt(u,c,null),M(R,a,E),M(R,h,E),f(h,r),f(r,n),f(r,k),f(r,x),f(h,d),f(h,g),f(g,b),f(g,I),f(g,C),f(h,T),f(h,D),O=!0,P||(j=[B(i,"click",t[4]),B(n,"click",t[5]),B(x,"click",t[6]),B(b,"click",t[2]),B(C,"click",t[1])],P=!0)},p:K,i(R){O||(dt(u.$$.fragment,R),O=!0)},o(R){ht(u.$$.fragment,R),O=!1},d(R){R&&(y(o),y(m),y(c),y(a),y(h)),ut(u),P=!1,rt(j)}}}function Wt(t,o,e){gt.set("Chord Wheel");let s,i,l=0;const m=()=>{et(V,!0),i=X(s,V)},c=()=>{et(V,!1),i=X(s,V)},u=n=>{function k(){const d=Math.min(n.windowWidth,n.windowHeight);n.resizeCanvas(d*.8,d*.8),V.scale=d/2*.75,i=X(n,V)}n.setup=()=>{s=n,n.createCanvas(100,100),k(),n.colorMode(n.HSB)},n.draw=()=>{n.background(50),n.translate(n.width/2,n.height/2),i.tilesInnerRing.forEach(d=>Y(n,d)),i.tilesMiddleRing.forEach(d=>Y(n,d)),i.tilesOuterRing.forEach(d=>Y(n,d)),Rt(n,l,i.tilesInnerRing,i.tilesMiddleRing,i.tilesOuterRing),kt(n,l,V)},n.keyPressed=d=>{![n.LEFT_ARROW,n.RIGHT_ARROW,n.UP_ARROW,n.DOWN_ARROW].includes(n.keyCode)||d.altKey||(d.preventDefault(),n.keyCode===n.LEFT_ARROW&&e(0,l--,l),n.keyCode===n.RIGHT_ARROW&&e(0,l++,l),n.keyCode===n.UP_ARROW&&c(),n.keyCode===n.DOWN_ARROW&&m())};let x;n.touchMoved=d=>{var T;if(((T=d.target)==null?void 0:T.className)!=="p5Canvas")return;if(d.preventDefault(),!x){x={x:n.mouseX,y:n.mouseY};return}const g=n.mouseX-x.x,b=n.mouseY-x.y,I=Math.abs(g),C=Math.abs(b);I<50&&C<50||(I>C?g<0?e(0,l--,l):e(0,l++,l):b>0?m():c(),x={x:n.mouseX,y:n.mouseY})},n.windowResized=()=>{k()}};return at(()=>{s==null||s.remove()}),[l,m,c,u,()=>yt(_t),()=>e(0,l-=1),()=>e(0,l+=1)]}class Vt extends nt{constructor(o){super(),st(this,o,Wt,It,ot,{})}}export{Vt as component};
