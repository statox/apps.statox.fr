import"../chunks/NZTpNUN0.js";import{a as lt}from"../chunks/eHPvmyNl.js";import{x as ht,z as R,y as tt,o as I,p as l,f as et,s as st,w as U,a as z,B as ot,C as u,g as r,E as v}from"../chunks/CF3vMb2z.js";import{d as ct,s as dt}from"../chunks/CVy4YE01.js";import{i as ut}from"../chunks/DhdTNEOV.js";import{e as f,i as M}from"../chunks/zmj_gju8.js";import{r as p,a as nt}from"../chunks/BTYzRZWn.js";import{b as _}from"../chunks/BPdl2Dks.js";import{P as vt}from"../chunks/BQ9zzujc.js";class P{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){return this.x/=t.x,this}divideY(t){return this.y/=t.y,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.x/=t,this.y/=t,this}divideScalarX(t){return this.x/=t,this}divideScalarY(t){return this.y/=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.invertX(),this.invertY(),this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}normalize(){const t=this.length();return t===0?(this.x=1,this.y=0):this.divide(new P(t,t)),this}norm=this.normalize;limit(t,e){return Math.abs(this.x)>t&&(this.x*=e),Math.abs(this.y)>t&&(this.y*=e),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeX(t,e){const i=Math.min(t.x,e.x),h=Math.max(t.x,e.x);return this.x=it(i,h),this}randomizeY(t,e){const i=Math.min(t.y,e.y),h=Math.max(t.y,e.y);return this.y=it(i,h),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}toFixed(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){return this.mixX(t,e),this.mixY(t,e),this}clone(){return new P(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.copyX(t),this.copyY(t),this}zero(){return this.x=0,this.y=0,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return rt(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return rt(this.verticalAngle())}angle=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;direction=this.horizontalAngle;rotate(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),i=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=i,this}rotateDeg(t){const e=W(t);return this.rotate(e)}rotateTo(t){return this.rotate(t-this.angle())}rotateToDeg(t){const e=W(t);return this.rotateTo(e)}rotateBy(t){const e=this.angle()+t;return this.rotate(e)}rotateByDeg(t){const e=W(t);return this.rotateBy(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),i=this.distanceY(t);return e*e+i*i}length(){return Math.sqrt(this.lengthSq())}lengthSq(){return this.x*this.x+this.y*this.y}magnitude=this.length;isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x: ${this.x}, y: ${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}}const at=180/Math.PI;function it(m,t){return Math.floor(Math.random()*(t-m+1)+m)}function rt(m){return m*at}function W(m){return m/at}const gt=function(m,t,e,i,h){return(m-t)/(e-t)*(h-i)+i};class xt{genes;structure;constructor(){this.genes=[{cellSizeVariationInSegment:.95,cellSpacingVariationInSegment:.6,nbCellsInSegment:9,nextSegmentBaseCellSize:1,branchesMaxAngle:110,nbBranches:3,color:"white"},{cellSizeVariationInSegment:.95,cellSpacingVariationInSegment:.8,nbCellsInSegment:4,nextSegmentBaseCellSize:1,branchesMaxAngle:45,nbBranches:2,color:"red"},{cellSizeVariationInSegment:.95,cellSpacingVariationInSegment:.7,nbCellsInSegment:4,nextSegmentBaseCellSize:1,branchesMaxAngle:45,nbBranches:2,color:"orange"},{cellSizeVariationInSegment:.95,cellSpacingVariationInSegment:.6,nbCellsInSegment:1,nextSegmentBaseCellSize:1,branchesMaxAngle:45,nbBranches:2,color:"green"},{cellSizeVariationInSegment:.95,cellSpacingVariationInSegment:.5,nbCellsInSegment:4,nextSegmentBaseCellSize:1,branchesMaxAngle:120,nbBranches:7,color:"yellow"},{cellSizeVariationInSegment:.95,cellSpacingVariationInSegment:.4,nbCellsInSegment:4,nextSegmentBaseCellSize:1,branchesMaxAngle:45,nbBranches:2,color:"lightblue"}],this.structure=[]}grow(){this.structure=[];const t=[{cell:{position:new P,size:20,color:"white"},agent:{level:0,levelStep:0,direction:new P(0,20)}}];for(;t.length;){const{cell:e,agent:i}=t.pop();if(i.level===this.genes.length)continue;const{cellSpacingVariationInSegment:h,nbCellsInSegment:X,color:T,cellSizeVariationInSegment:x,nextSegmentBaseCellSize:j,branchesMaxAngle:Y,nbBranches:w}=this.genes[i.level];if(i.levelStep>=X){const E=-Y/2,$=Y/2;for(let k=0;k<w;k++){const O=gt(k,0,w-1,E,$),G={position:e.position.clone(),size:e.size*j,color:"white"},H={level:i.level+1,levelStep:0,direction:i.direction.clone().rotateDeg(O)};t.push({cell:G,agent:H})}continue}const C={...e,position:e.position.clone().add(i.direction.clone().multiplyScalar(h)),size:e.size*x,color:T},F={level:i.level,levelStep:i.levelStep+1,direction:i.direction.clone()};t.push({cell:C,agent:F}),this.structure.push(C)}}}var mt=(m,t)=>st(t,!r(t)),St=I('<div></div> <div><input type="number" step="0.1"/></div> <div><input type="number" step="1"/></div> <div><input type="number" step="0.1"/></div> <div><input type="number" step="0.1"/></div> <div><input type="number" step="1"/></div> <div><input type="number" step="1"/></div>',1),yt=I('<div class="genes-container svelte-1uen8vv"><div>Level</div> <div>cellSizeVariationInSegment</div> <div>nbCellsInSegment</div> <div>cellSpacingVariationInSegment</div> <div>nextSegmentBaseCellSize</div> <div>branchesMaxAngle</div> <div>nbBranches</div> <!></div>'),pt=I("<div></div>"),_t=I('<div><input type="number" step="0.1"/></div>'),bt=I('<div><input type="number" step="1"/></div>'),zt=I('<div><input type="number" step="0.1"/></div>'),It=I('<div><input type="number" step="0.1"/></div>'),ft=I('<div><input type="number" step="1"/></div>'),Mt=I('<div><input type="number" step="1"/></div>'),Ct=I('<div class="genes-container-2 svelte-1uen8vv"><div>Level</div> <!> <div>cellSizeVariationInSegment</div> <!> <div>nbCellsInSegment</div> <!> <div>cellSpacingVariationInSegment</div> <!> <div>nextSegmentBaseCellSize</div> <!> <div>branchesMaxAngle</div> <!> <div>nbBranches</div> <!></div>'),Bt=I("<h1>Here be flowers</h1> <!> <div><h2>Plant info</h2> <div> </div></div> <span><h2>Genes</h2> <button>Change view</button></span> <!>",1);function Pt(m,t){ht(t,!0);let e;const i=new xt,h=R([...i.genes]);i.grow();let X=tt(R(i.structure.length)),T=tt(!0);const x=()=>{i.genes=h,i.grow(),st(X,i.structure.length,!0),console.log("done growing",r(X))},j=c=>{c.setup=()=>{e=c,c.createCanvas(500,500),c.background("black")},c.draw=()=>{c.background("black");for(const S of i.structure){const B=S.position.x+c.width/2,A=c.height-S.position.y,o=S.size;c.fill(S.color),c.circle(B,A,o)}}};lt(()=>{console.clear(),e?.remove()});var Y=Bt(),w=l(et(Y),2);vt(w,{sketch:j});var C=l(w,2),F=l(u(C),2),E=u(F);v(F),v(C);var $=l(C,2),k=l(u($),2);k.__click=[mt,T],v($);var O=l($,2);{var G=c=>{var S=yt(),B=l(u(S),14);f(B,17,()=>h,M,(A,o,N)=>{var D=St(),V=et(D);V.textContent=N;var q=l(V,2),d=u(q);p(d),d.__change=x,v(q);var a=l(q,2),y=u(a);p(y),y.__change=x,v(a);var n=l(a,2),s=u(n);p(s),s.__change=x,v(n);var g=l(n,2),Z=u(g);p(Z),Z.__change=x,v(g);var J=l(g,2),K=u(J);p(K),K.__change=x,v(J);var L=l(J,2),Q=u(L);p(Q),Q.__change=x,v(L),U(()=>nt(V,`color: ${r(o).color??""}`)),_(d,()=>r(o).cellSizeVariationInSegment,b=>r(o).cellSizeVariationInSegment=b),_(y,()=>r(o).nbCellsInSegment,b=>r(o).nbCellsInSegment=b),_(s,()=>r(o).cellSpacingVariationInSegment,b=>r(o).cellSpacingVariationInSegment=b),_(Z,()=>r(o).nextSegmentBaseCellSize,b=>r(o).nextSegmentBaseCellSize=b),_(K,()=>r(o).branchesMaxAngle,b=>r(o).branchesMaxAngle=b),_(Q,()=>r(o).nbBranches,b=>r(o).nbBranches=b),z(A,D)}),v(S),z(c,S)},H=c=>{var S=Ct(),B=l(u(S),2);f(B,17,()=>h,M,(d,a,y)=>{var n=pt();n.textContent=y,U(()=>nt(n,`color: ${h[y].color??""}`)),z(d,n)});var A=l(B,4);f(A,17,()=>h,M,(d,a,y)=>{var n=_t(),s=u(n);p(s),s.__change=x,v(n),_(s,()=>r(a).cellSizeVariationInSegment,g=>r(a).cellSizeVariationInSegment=g),z(d,n)});var o=l(A,4);f(o,17,()=>h,M,(d,a,y)=>{var n=bt(),s=u(n);p(s),s.__change=x,v(n),_(s,()=>r(a).nbCellsInSegment,g=>r(a).nbCellsInSegment=g),z(d,n)});var N=l(o,4);f(N,17,()=>h,M,(d,a,y)=>{var n=zt(),s=u(n);p(s),s.__change=x,v(n),_(s,()=>r(a).cellSpacingVariationInSegment,g=>r(a).cellSpacingVariationInSegment=g),z(d,n)});var D=l(N,4);f(D,17,()=>h,M,(d,a,y)=>{var n=It(),s=u(n);p(s),s.__change=x,v(n),_(s,()=>r(a).nextSegmentBaseCellSize,g=>r(a).nextSegmentBaseCellSize=g),z(d,n)});var V=l(D,4);f(V,17,()=>h,M,(d,a,y)=>{var n=ft(),s=u(n);p(s),s.__change=x,v(n),_(s,()=>r(a).branchesMaxAngle,g=>r(a).branchesMaxAngle=g),z(d,n)});var q=l(V,4);f(q,17,()=>h,M,(d,a,y)=>{var n=Mt(),s=u(n);p(s),s.__change=x,v(n),_(s,()=>r(a).nbBranches,g=>r(a).nbBranches=g),z(d,n)}),v(S),z(c,S)};ut(O,c=>{r(T)?c(G):c(H,!1)})}U(()=>dt(E,`Nb segments: ${r(X)??""}`)),z(m,Y),ot()}ct(["click","change"]);export{Pt as component};
