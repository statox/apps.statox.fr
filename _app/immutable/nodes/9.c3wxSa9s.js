import"../chunks/CWj6FrbW.js";import{i as re}from"../chunks/DyVAq43h.js";import{p as V,C as l,E as ie,v as d,y as o,g as s,w as D,i as t,a as c,x as j,G as m,H as p,z as G,f as le,aV as ne}from"../chunks/CGiGqk7P.js";import{p as ce}from"../chunks/9pnZfmLw.js";import{d as fe}from"../chunks/C57t7CU5.js";import{i as M}from"../chunks/Cc712tkr.js";import{e as ue,i as me}from"../chunks/ZXkaPWj7.js";import{c as pe,r as H}from"../chunks/BbjtQk7y.js";import{b as O,c as de}from"../chunks/SGPRxWVV.js";import{b as ve}from"../chunks/l_ii1tqG.js";import{s as be,a as _e}from"../chunks/Bo8eQkir.js";import{u as ge,U as he}from"../chunks/CcRn8F0o.js";import{A as ye}from"../chunks/PH_AOCiz.js";import{t as ke}from"../chunks/DcgF9Wk6.js";import{M as xe}from"../chunks/CKFnamwM.js";import{M as Se}from"../chunks/BLNcyNr3.js";import{M as Me}from"../chunks/jAVusu7i.js";import{u as Ce}from"../chunks/BYwIdOY1.js";import{g as Ue}from"../chunks/9HUaq83I.js";const we=()=>{Ue("/clipboard/")};var Te=(v,r)=>{t(r)!==void 0&&(t(r).value="")},Ae=(v,r)=>s(r,!t(r)),Ee=d('Public <i class="fas fa-lock-open"></i>',1),Fe=d('Private <i class="fas fa-lock"></i>',1),Le=d('<i class="sucess-indicator fas fa-check svelte-118mt4a"></i>'),Pe=d('<button class="form-action"><!></button> <!>',1),Be=d('<span class="form-action">Login to upload an entry</span>'),Ie=d('<div class="contents svelte-118mt4a"><h4 class="title-bar svelte-118mt4a">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-118mt4a"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-118mt4a" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function ze(v,r){V(r,!0);const[q,J]=be(),K=()=>_e(ge,"$user",q);let f=l(ie([])),h=l(""),y=l(""),C=l(void 0),b=l(void 0),k=l(!1),x=l(0),_=l(!1),U=l(!1);const Q=async()=>{var a,n;if(s(f,[],!0),(a=t(h))!=null&&a.length||t(f).push({level:"error",header:"name must be defined"}),(n=t(y))!=null&&n.length||t(f).push({level:"error",header:"content must be defined"}),t(x)<0&&t(f).push({level:"error",header:"TTL must be positive"}),t(f).length)return;let e;t(b)&&t(b).length&&(e=t(b)[0]||void 0);try{s(_,!0),s(U,!1),await Ce({name:t(h),content:t(y),ttlSeconds:t(x),isPublic:t(k),file:e}),s(_,!1),r.onUpload(),s(U,!0)}catch(u){s(_,!1);let g=u.message;u instanceof ye&&u.code===401?g="Invalid logged in user":u instanceof he&&(g="User is logged out");const B=`<strong>Entry not created</strong><br/> ${g}`;ke.push(B,{theme:{"--toastBarBackground":"#FF0000"}})}};var w=Ie(),T=m(w),R=o(m(T));R.__click=[we],p(T);var z=o(T,2);ue(z,17,()=>t(f),me,(e,a)=>{Se(e,{get item(){return t(a)}})});var A=o(z,2),E=o(m(A),2);H(E);var F=o(E,4);H(F);var L=o(F,4),P=m(L);ve(P,e=>s(C,e),()=>t(C));var W=o(P,2);W.__click=[Te,C],p(L);var N=o(L,4);Me(N,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(x)},set valueInSeconds(e){s(x,e,!0)}});var S=o(N,4);let $;S.__click=[Ae,k];var X=m(S);{var Y=e=>{var a=Ee();G(),c(e,a)},Z=e=>{var a=Fe();G(),c(e,a)};M(X,e=>{t(k)?e(Y):e(Z,!1)})}p(S),p(A);var ee=o(A,2);{var te=e=>{var a=Pe(),n=le(a);n.__click=Q;var u=m(n);{var g=i=>{xe(i,{size:.5,unit:"em",durationSeconds:.5})},B=i=>{var I=ne("Submit");c(i,I)};M(u,i=>{t(_)?i(g):i(B,!1)})}p(n);var se=o(n,2);{var oe=i=>{var I=Le();c(i,I)};M(se,i=>{t(U)&&i(oe)})}D(()=>n.disabled=t(_)),c(e,a)},ae=e=>{var a=Be();c(e,a)};M(ee,e=>{K()?e(te):e(ae,!1)})}p(w),D(e=>$=pe(S,1,"visibility-status svelte-118mt4a",null,$,e),[()=>({"visibility-public":t(k)})]),O(E,()=>t(h),e=>s(h,e)),O(F,()=>t(y),e=>s(y,e)),de(P,()=>t(b),e=>s(b,e)),c(v,w),j(),J()}fe(["click"]);function at(v,r){V(r,!1),ce.set("Clipboard"),re(),ze(v,{onUpload:()=>console.log("new entry created")}),j()}export{at as component};
