import"../chunks/disclose-version.Bg9kRutz.js";import{i as ee}from"../chunks/legacy.C6Jsm68G.js";import{p as G,aH as h,o as te,s as d,aF as w,aG as k,w as v,g as e,k as z,n as H,v as ae}from"../chunks/index-client.CwKaIs20.js";import{f as Q,a as y,t as M,s as oe,q as re,e as ne}from"../chunks/template.C7-65AHn.js";import{i as C}from"../chunks/if.Bi_20hhT.js";import{s as j,a as D}from"../chunks/store.ChaSGJXD.js";import{u as J,U as se}from"../chunks/service.CPPf-mOw.js";import{M as K}from"../chunks/Main.CRj4rJTH.js";import{e as P,i as T}from"../chunks/each.DKzLuYBh.js";import{r as S}from"../chunks/attributes.8la23_Nf.js";import{b as $}from"../chunks/input.CyKUrhwE.js";import{p as E}from"../chunks/proxy.CJQ3oePJ.js";import{A as ie}from"../chunks/index.DPAtf5ly.js";import{M as le}from"../chunks/Main.BfRObO6Y.js";import{t as de}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.8P0126vy.js";import{a as ce,b as ue}from"../chunks/api.86ZY9Q6k.js";import{g as me}from"../chunks/entry.BN5UdCl-.js";import{I as ve}from"../chunks/IngredientsList.DqIdxXtn.js";import{s as O}from"../chunks/render.LcqAXr6c.js";import{b as fe}from"../chunks/select.3JH372LZ.js";import{p as pe}from"../chunks/Main.svelte_svelte_type_style_lang.B1uEF9ZY.js";const _e=(_,t,r,c,a)=>{e(t)&&r.onAdd({name:e(t),quantity:e(c),unit:e(a)})},ge=(_,t,r)=>{d(t,""),d(r,!e(r))};var be=M('<input type="text">'),he=(_,t)=>console.log("select",e(t)),ke=M("<option> </option>"),ye=M("<select></select>"),xe=M('<div class="input-container svelte-yrmwio"><button> </button> <!> <label for="quantity">Quantity</label> <input type="number"> <label for="quantity">Unit</label> <input type="text"> <button><i class="fa fa-solid fa-plus"></i></button></div>');function we(_,t){G(t,!0);let r=h(E([])),c=h(!1),a=h(""),p=h(void 0),u=h(void 0);te(async()=>{d(r,E((await ce()).ingredients))});var m=xe(),i=w(m);i.__click=[ge,a,c];var l=w(i,!0);k(i);var o=v(i,2);{var I=n=>{var f=be();S(f),$(f,()=>e(a),g=>d(a,g)),y(n,f)},F=n=>{var f=ye();f.__change=[he,a],P(f,21,()=>e(r),T,(g,U)=>{var x=ke(),B={},R=w(x,!0);k(x),z(()=>{B!==(B=e(U).name)&&(x.value=(x.__value=e(U).name)==null?"":e(U).name),O(R,e(U).name)}),y(g,x)}),k(f),fe(f,()=>e(a),g=>d(a,g)),y(n,f)};C(o,n=>{e(c)?n(I):n(F,!1)})}var N=v(o,4);S(N);var A=v(N,4);S(A);var L=v(A,2);L.__click=[_e,a,t,p,u],k(m),z(()=>O(l,e(c)?"New":"Existing")),$(N,()=>e(p),n=>d(p,n)),$(A,()=>e(u),n=>d(u,n)),y(_,m),H()}Q(["click","change"]);const Ie=async(_,t,r,c,a,p,u)=>{var m,i;if(d(t,E([])),(m=e(r))!=null&&m.length||e(t).push({level:"error",header:"Name must be defined"}),(i=e(c))!=null&&i.length||e(t).push({level:"error",header:"Content must be defined"}),!e(t).length)try{d(a,!0),await ue({name:e(r),content:e(c),ingredients:p}),d(a,!1),u.onUpload()}catch(l){d(a,!1);let o=l.message;l instanceof ie&&l.code===401?o="Invalid logged in user":l instanceof se&&(o="User is logged out");const I=`<strong>Entry not created</strong><br/> ${o}`;de.push(I,{theme:{"--toastBarBackground":"#FF0000"}})}};var Ae=()=>me("/cookbook"),Me=M('<button class="form-action svelte-kmn9ao"><!></button>'),Ne=M('<span class="form-action svelte-kmn9ao">Login to upload an entry</span>'),Ue=M('<div class="contents svelte-kmn9ao"><h2 class="title-bar svelte-kmn9ao">Add a new recipe</h2> <button>Back to list</button> <!> <div class="form-content svelte-kmn9ao"><label for="name">Name</label> <input type="text"> <label for="ingredients">New ingredient</label> <div><!></div> <label for="ingredients">List of ingredients</label> <div><!></div> <label for="content">Instructions</label> <textarea rows="10" cols="50"></textarea></div> <!></div>');function qe(_,t){G(t,!0);const[r,c]=j(),a=()=>D(J,"$user",r);let p=h(E([])),u=h(!1),m=h(""),i=h(""),l=E([]);const o=s=>{l.push(s),console.log("Added ingredient"),console.log(l)};var I=Ue(),F=v(w(I),2);F.__click=[Ae];var N=v(F,2);P(N,17,()=>e(p),T,(s,b)=>{K(s,{get item(){return e(b)}})});var A=v(N,2),L=v(w(A),2);S(L);var n=v(L,4),f=w(n);we(f,{onAdd:o}),k(n);var g=v(n,4),U=w(g);ve(U,{get ingredients(){return l},editable:!0}),k(g);var x=v(g,4);oe(x),k(A);var B=v(A,2);{var R=s=>{var b=Me();b.__click=[Ie,p,m,i,u,l,t];var W=w(b);{var X=q=>{le(q,{size:.5,unit:"em",durationSeconds:.5})},Y=q=>{var Z=re("Submit");y(q,Z)};C(W,q=>{e(u)?q(X):q(Y,!1)})}k(b),z(()=>b.disabled=e(u)),y(s,b)},V=s=>{var b=Ne();y(s,b)};C(B,s=>{a()?s(R):s(V,!1)})}k(I),$(L,()=>e(m),s=>d(m,s)),$(x,()=>e(i),s=>d(i,s)),y(_,I),H(),c()}Q(["click"]);function Xe(_,t){G(t,!1);const[r,c]=j(),a=()=>D(J,"$user",r);pe.set("Cookbook");const p=()=>{console.log("New recipe created")};ee();var u=ne(),m=ae(u);{var i=o=>{qe(o,{onUpload:p})},l=o=>{K(o,{item:{level:"info",header:"Login to add an entry"}})};C(m,o=>{a()?o(i):o(l,!1)})}y(_,u),H(),c()}export{Xe as component};
