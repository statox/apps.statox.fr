import"../chunks/NZTpNUN0.js";import"../chunks/DRxGxY2p.js";import{p as w,h as F,a5 as A,b as y,s as c,e as g,g as o,i as k,r as p,a as f,d as E,t as O,c as j,f as N,n as q}from"../chunks/OOCdeaM4.js";import{e as U,i as x}from"../chunks/80iJqotc.js";import{d as T,s as z}from"../chunks/DBBHR-3t.js";import{i as G}from"../chunks/BMFH8sZT.js";import{i as J}from"../chunks/c3q9pMCF.js";import{s as K,a as Q}from"../chunks/BY6cWyRb.js";import{t as B}from"../chunks/Du_j8uFv.js";import{u as R}from"../chunks/bMdrnNxv.js";import{M as I}from"../chunks/DKcpRBkl.js";import{r as X}from"../chunks/C2XHBoXy.js";import{b as Y}from"../chunks/CCHh_OeQ.js";import{A as P,U as S}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{c as D}from"../chunks/Bd9sQ8Nq.js";import{D as L}from"../chunks/DTyfSRsR.js";import{s as Z}from"../chunks/DazWBkG7.js";import"../chunks/CaC-JQYF.js";import{p as tt}from"../chunks/CgiMXJad.js";import{g as $}from"../chunks/CuLuO7qf.js";var et=y('<div><h4>Weight</h4> <!> <div class="input-container svelte-huay37"><button class="svelte-huay37">-</button> <input type="number" step="0.1" class="svelte-huay37"/> <button class="svelte-huay37">+</button></div> <button class="form-action">Submit</button></div>');function ot(h,u){w(u,!0);let l=F(A([])),e=F(100);const _=async()=>{if(k(l,[],!0),o(e)!==Number(o(e).toFixed(1))&&o(l).push({level:"error",header:"Value have at most 1 number after the comma"}),(o(e)<80||o(e)>110)&&o(l).push({level:"error",header:"Value must be in kg"}),o(l).length)return;const a=L.now().toUTC().toUnixInteger();try{await D({event:{timestampUTC:a,type:"weight",value:Math.floor(o(e)*100)}}),u.onUpload()}catch(s){let b=s.message;s instanceof P&&s.code===401?b="Invalid logged in user":s instanceof S&&(b="User is logged out");const M=`<strong>Entry not created</strong><br/> ${b}`;B.push(M,{theme:{"--toastBarBackground":"#FF0000"}})}};var m=et(),v=c(g(m),2);U(v,17,()=>o(l),x,(a,s)=>{I(a,{get item(){return o(s)}})});var i=c(v,2),d=g(i);d.__click=()=>k(e,Number((o(e)-.1).toFixed(2)),!0);var n=c(d,2);X(n);var r=c(n,2);r.__click=()=>k(e,Number((o(e)+.1).toFixed(2)),!0),p(i);var t=c(i,2);t.__click=_,p(m),Y(n,()=>o(e),a=>k(e,a)),f(h,m),E()}T(["click"]);var rt=y("<button> </button>"),at=y('<div><h4>Mood</h4> <!> <div class="options-container svelte-m23i1u"></div> <button class="form-action">Submit</button></div>');function st(h,u){w(u,!0);let l=A([]),e=F(5);const _=async()=>{const n=L.now().toUTC().toUnixInteger();try{await D({event:{timestampUTC:n,type:"mood",value:o(e)}}),u.onUpload()}catch(r){let t=r.message;r instanceof P&&r.code===401?t="Invalid logged in user":r instanceof S&&(t="User is logged out");const a=`<strong>Entry not created</strong><br/> ${t}`;B.push(a,{theme:{"--toastBarBackground":"#FF0000"}})}};var m=at(),v=c(g(m),2);U(v,17,()=>l,x,(n,r)=>{I(n,{get item(){return o(r)}})});var i=c(v,2);U(i,20,()=>[1,2,3,4,5,6,7,9,10],x,(n,r)=>{var t=rt();t.__click=()=>k(e,r,!0);let a;var s=g(t,!0);p(t),O(()=>{a=Z(t,1,"",null,a,{selected:o(e)===r}),z(s,r)}),f(n,t)}),p(i);var d=c(i,2);d.__click=_,p(m),f(h,m),E()}T(["click"]);var nt=y('<!> <hr class="separator svelte-cigsfe"/>',1),it=y(`<div class="contents svelte-cigsfe"><h4 class="title-bar svelte-cigsfe">Today's Personal Metrics <button>Back</button></h4> <!></div>`);function Bt(h,u){w(u,!1);const l=()=>Q(R,"$user",e),[e,_]=K();tt.set({name:"Personal Tracker",iconPath:"/personal_tracker.png",showAuthInHeader:!0});const m=()=>{$("/personal-tracker"),B.push("New entry created")};let v=[{name:"mood",component:st},{name:"weight",component:ot}];J();var i=j(),d=N(i);{var n=t=>{var a=it(),s=g(a),b=c(g(s));b.__click=()=>{$("/personal-tracker")},p(s);var M=c(s,2);U(M,1,()=>v,x,(V,W)=>{var C=nt(),H=N(C);o(W).component(H,{onUpload:m}),q(2),f(V,C)}),p(a),f(t,a)},r=t=>{I(t,{item:{level:"info",header:"Login to add an entry or see events"}})};G(d,t=>{l()?t(n):t(r,!1)})}f(h,i),E(),_()}T(["click"]);export{Bt as component};
