import"../chunks/NZTpNUN0.js";import{i as $}from"../chunks/Bo32xdQq.js";import{p as B,v as b,G as r,y as u,H as i,w as W,av as L,u as n,A as o,a as N,x as j,i as _,f as T}from"../chunks/Bq60w86z.js";import{a as ta}from"../chunks/khe9oBlH.js";import"../chunks/C_ROUUIB.js";import"../chunks/Dj7WJ9M_.js";import{A as s,g as na}from"../chunks/CzR_2FWY.js";import{a as O,D as R}from"../chunks/DTyfSRsR.js";import{M as oa}from"../chunks/Dqc_sBfu.js";import{p as ra}from"../chunks/AC4tPKZB.js";import{M as q}from"../chunks/SiFNRS46.js";import{s as w}from"../chunks/D-cnfVwm.js";import{a as I,c as ia}from"../chunks/DS3Hdpot.js";import{p as C}from"../chunks/7TFFA5CE.js";import{i as sa}from"../chunks/BNlcmG6b.js";import{e as z,i as Q}from"../chunks/OO6y50zU.js";const D=e=>{if(e===s.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(e===s.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(e===s.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(e===s.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(e===s.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(e===s.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(e===s.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(e===s.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},X=e=>{if(e===s.NEW)return"moon_phase_icons/1_new_moon.png";if(e===s.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(e===s.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(e===s.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(e===s.FULL)return"moon_phase_icons/5_full_moon.png";if(e===s.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(e===s.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(e===s.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},ma=async()=>{const e=await na(),{moonState:h,sunState:a,upcomingLunarStates:t}=e;return{moonState:h,sunState:{goldenHour:R.fromMillis(a.goldenHour),solarNoon:R.fromMillis(a.solarNoon),sunrise:R.fromMillis(a.sunrise),sunset:R.fromMillis(a.sunset),dayLength:O.fromMillis(a.dayLengthMs),dayLengthDiff:O.fromMillis(a.dayLengthDiffMs)},upcomingLunarStates:t.map(l=>({date:R.fromMillis(l.tsMillis),lunarState:{...l.lunarState,phasePictureUrl:D(l.lunarState.moonPhase)}}))}};var pa=b('<div class="container svelte-1mhy40n"><div class="content svelte-1mhy40n"><div class="data svelte-1mhy40n"><span><i class="fas fa-moon" aria-hidden="true"></i></span> <span></span> <span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span><i class="fas fa-sun" aria-hidden="true"></i></span> <span></span> <span>Sun rise/set</span> <span> </span> <span>DayLength</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-1mhy40n"/></div></div>');function da(e,h){B(h,!1);let a=C(h,"moonState",8),t=C(h,"sunState",8);$();var l=pa(),M=r(l),v=r(M),m=u(r(v),6),p=r(m,!0);i(m);var g=u(m,4),d=r(g);i(g);var c=u(g,4),y=r(c);i(c);var S=u(c,8),A=r(S);i(S);var E=u(S,4),x=r(E);i(E);var f=u(E,4),k=r(f,!0);i(f);var P=u(f,4),U=r(P,!0);i(P),i(v);var F=u(v,2);i(M),i(l),W((G,H,V,K,J,Y,Z,aa,ea)=>{w(p,(o(a()),n(()=>a().moonPhaseFr))),w(d,`${G??""} days (${H??""}%)`),w(y,`${o(a()),n(()=>a().moonVisibilityWindow[0])??""} - ${o(a()),n(()=>a().moonVisibilityWindow[1])??""}`),w(A,`${V??""} - ${K??""}`),w(x,`${J??""}
                (${o(t()),n(()=>t().dayLengthDiff>0?"+":"")??""}${Y??""})`),w(k,Z),w(U,aa),I(F,"alt",(o(a()),n(()=>a().moonPhase))),I(F,"src",ea)},[()=>(o(a()),n(()=>a().lunarAge.toFixed(1))),()=>(o(a()),n(()=>(a().lunarAgePercent*100).toFixed(0))),()=>(o(t()),n(()=>t().sunrise.toFormat("HH:mm"))),()=>(o(t()),n(()=>t().sunset.toFormat("HH:mm"))),()=>(o(t()),n(()=>t().dayLength.toFormat("h:m"))),()=>(o(t()),n(()=>t().dayLengthDiff.toFormat("m:s"))),()=>(o(t()),n(()=>t().solarNoon.toFormat("HH:mm"))),()=>(o(t()),n(()=>t().goldenHour.toFormat("HH:mm"))),()=>(o(D),o(a()),n(()=>D(a().moonPhase)))],L),N(e,l),j()}var _a=b('<div class="day-header svelte-1baztfi"> </div>'),ua=b("<div> </div> <div> </div>",1),la=b('<div><div><img class="phase-img svelte-1baztfi"/></div> <!></div>'),va=b('<div class="container svelte-1baztfi"><!> <!></div>');function ga(e,h){B(h,!1);let a=C(h,"upcomingLunarStates",8);$();var t=va(),l=r(t);z(l,1,()=>(o(a()),n(()=>a().slice(0,7))),Q,(v,m)=>{let p=()=>_(m).date;var g=_a(),d=r(g,!0);i(g),W(c=>w(d,c),[()=>(p(),n(()=>p().setLocale("fr").toLocaleString({weekday:"long"})))],L),N(v,g)});var M=u(l,2);z(M,1,a,Q,(v,m,p)=>{let g=()=>_(m).date,d=()=>_(m).lunarState;var c=la();const y=L(()=>(o(a()),d(),n(()=>p===0||p===29||a()[p-1].lunarState.moonPhaseFr!==d().moonPhaseFr)));var S=r(c),A=r(S);i(S);var E=u(S,2);{var x=f=>{var k=ua(),P=T(k),U=r(P,!0);i(P);var F=u(P,2),G=r(F,!0);i(F),W(H=>{w(U,H),w(G,(d(),n(()=>d().moonPhaseFr)))},[()=>(g(),n(()=>g().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})))],L),N(f,k)};sa(E,f=>{_(y)&&f(x)})}i(c),W(f=>{ia(c,1,`entry ${_(y)?"important-day":"other-day"}`,"svelte-1baztfi"),I(A,"alt",(d(),n(()=>d().moonPhase))),I(A,"src",f)},[()=>(o(X),d(),n(()=>X(d().moonPhase)))],L),N(v,c)}),i(t),N(e,t),j()}var ca=b("<!> <br/> <!> <br/> <!>",1),fa=b("<p>Loading ephemerides data</p>"),ha=b('<!> <div class="content"><!></div>',1);function Ua(e,h){B(h,!1),ra.set("Ephemerides"),$();var a=ha(),t=T(a);oa(t,{title:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"});var l=u(t,2),M=r(l);ta(M,ma,v=>{var m=fa();N(v,m)},(v,m)=>{var p=L(()=>{var{moonState:x,sunState:f,upcomingLunarStates:k}=_(m);return{moonState:x,sunState:f,upcomingLunarStates:k}}),g=L(()=>_(p).moonState),d=L(()=>_(p).sunState),c=L(()=>_(p).upcomingLunarStates),y=ca(),S=T(y);da(S,{get moonState(){return _(g)},get sunState(){return _(d)}});var A=u(S,4);ga(A,{get upcomingLunarStates(){return _(c)}});var E=u(A,4);q(E,{item:{level:"info",message:"All data is computed for Paris, France"}}),N(v,y)},(v,m)=>{const p=L(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:_(m)}));q(v,{get item(){return _(p)}})}),i(l),N(e,a),j()}export{Ua as component};
