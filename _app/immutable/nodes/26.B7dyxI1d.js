import"../chunks/NZTpNUN0.js";import"../chunks/DTkvpaL9.js";import{p as re,h as L,Y as de,b as z,s as p,e as g,g as e,i as m,r as h,a as b,d as ie,t as X,f as Z,c as se,bu as ue,u as A,n as xe}from"../chunks/CKl30C1c.js";import{e as U,i as F}from"../chunks/dSR8ni2w.js";import{d as le,s as R,e as J}from"../chunks/CXUVAb3i.js";import{i as $e}from"../chunks/Bf-KvY8u.js";import{i as Ee}from"../chunks/CJ4ok1TL.js";import{s as Ce,a as Ue}from"../chunks/DBHw-l6w.js";import{t as me}from"../chunks/BfU2SiU3.js";import{u as Fe}from"../chunks/CQdnaxUn.js";import{M as ve}from"../chunks/CeIpYOI6.js";import{r as je,s as M}from"../chunks/BIVvBMnW.js";import{b as Be}from"../chunks/2C5CoL1D.js";import{A as be,U as ke}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{c as ye}from"../chunks/Bd9sQ8Nq.js";import{D as he}from"../chunks/DTyfSRsR.js";import{s as ae,a as ce}from"../chunks/W5sdYEgN.js";import"../chunks/D-eULzKA.js";import{p as Se}from"../chunks/NZ_7-SuS.js";import{g as _e}from"../chunks/C8S7tTw2.js";var Pe=z('<div><h4>Weight</h4> <!> <div class="input-container svelte-huay37"><button class="svelte-huay37">-</button> <input type="number" step="0.1" class="svelte-huay37"/> <button class="svelte-huay37">+</button></div> <button class="form-action">Submit</button></div>');function Te(H,j){re(j,!0);let $=L(de([])),l=L(100);const S=async()=>{if(m($,[],!0),e(l)!==Number(e(l).toFixed(1))&&e($).push({level:"error",header:"Value have at most 1 number after the comma"}),(e(l)<80||e(l)>110)&&e($).push({level:"error",header:"Value must be in kg"}),e($).length)return;const f=he.now().toUTC().toUnixInteger();try{await ye({event:{timestampUTC:f,type:"weight",value:Math.floor(e(l)*100)}}),j.onUpload()}catch(x){let P=x.message;x instanceof be&&x.code===401?P="Invalid logged in user":x instanceof ke&&(P="User is logged out");const W=`<strong>Entry not created</strong><br/> ${P}`;me.push(W,{theme:{"--toastBarBackground":"#FF0000"}})}};var E=Pe(),C=p(g(E),2);U(C,17,()=>e($),F,(f,x)=>{ve(f,{get item(){return e(x)}})});var w=p(C,2),k=g(w);k.__click=()=>m(l,Number((e(l)-.1).toFixed(2)),!0);var v=p(k,2);je(v);var d=p(v,2);d.__click=()=>m(l,Number((e(l)+.1).toFixed(2)),!0),h(w);var u=p(w,2);u.__click=S,h(E),Be(v,()=>e(l),f=>m(l,f)),b(H,E),ie()}le(["click"]);var Ie=z("<button> </button>"),He=z('<div><h4>Mood</h4> <!> <div class="options-container svelte-m23i1u"></div> <button class="form-action">Submit</button></div>');function We(H,j){re(j,!0);let $=de([]),l=L(5);const S=async()=>{const v=he.now().toUTC().toUnixInteger();try{await ye({event:{timestampUTC:v,type:"mood",value:e(l)}}),j.onUpload()}catch(d){let u=d.message;d instanceof be&&d.code===401?u="Invalid logged in user":d instanceof ke&&(u="User is logged out");const f=`<strong>Entry not created</strong><br/> ${u}`;me.push(f,{theme:{"--toastBarBackground":"#FF0000"}})}};var E=He(),C=p(g(E),2);U(C,17,()=>$,F,(v,d)=>{ve(v,{get item(){return e(d)}})});var w=p(C,2);U(w,20,()=>[1,2,3,4,5,6,7,9,10],F,(v,d)=>{var u=Ie();u.__click=()=>m(l,d,!0);let f;var x=g(u,!0);h(u),X(()=>{f=ae(u,1,"",null,f,{selected:e(l)===d}),R(x,d)}),b(v,u)}),h(w);var k=p(w,2);k.__click=S,h(E),b(H,E),ie()}le(["click"]);const N={fearful:{_color:"#FFA726",scared:{helpless:{en:"helpless"},frightened:{en:"frightened"}},anxious:{apprehensive:{en:"apprehensive"},worried:{en:"worried"}},insecure:{inadequate:{en:"inadequate"},"self-conscious":{en:"self-conscious"}},weak:{worthless:{en:"worthless"},insignificant:{en:"insignificant"}},rejected:{excluded:{en:"excluded"},persecuted:{en:"persecuted"}},threatened:{nervous:{en:"nervous"},exposed:{en:"exposed"}}},angry:{_color:"#EF5350","let down":{betrayed:{en:"betrayed"},resentful:{en:"resentful"}},humiliated:{disrespected:{en:"disrespected"},ridiculed:{en:"ridiculed"}},bitter:{indignant:{en:"indignant"},violated:{en:"violated"}},mad:{furious:{en:"furious"},jealous:{en:"jealous"}},aggressive:{provoked:{en:"provoked"},hostile:{en:"hostile"}},frustrated:{infuriated:{en:"infuriated"},annoyed:{en:"annoyed"}},distant:{withdrawn:{en:"withdrawn"},numb:{en:"numb"}},critical:{skeptical:{en:"skeptical"},dismissive:{en:"dismissive"}}},disgusted:{_color:"#9E9E9E",disapproving:{judgmental:{en:"judgmental"},disdainful:{en:"disdainful"}},disappointed:{appalled:{en:"appalled"},revolted:{en:"revolted"}},awful:{nauseated:{en:"nauseated"},detestable:{en:"detestable"}},repelled:{horrified:{en:"horrified"},hesitant:{en:"hesitant"}}},sad:{_color:"#42A5F5",lonely:{isolated:{en:"isolated"},abandoned:{en:"abandoned"}},vulnerable:{victimized:{en:"victimized"},fragile:{en:"fragile"}},despair:{grief:{en:"grief"},powerless:{en:"powerless"}},guilty:{ashamed:{en:"ashamed"},remorseful:{en:"remorseful"}},depressed:{inferior:{en:"inferior"},empty:{en:"empty"}},hurt:{embarrassed:{en:"embarrassed"},disappointed:{en:"disappointed"}}},happy:{_color:"#FFEB3B",interested:{curious:{en:"curious"},inquisitive:{en:"inquisitive"}},proud:{successful:{en:"successful"},confident:{en:"confident"}},accepted:{respected:{en:"respected"},valued:{en:"valued"}},powerful:{courageous:{en:"courageous"},creative:{en:"creative"}},peaceful:{loving:{en:"loving"},thankful:{en:"thankful"}},trusting:{sensitive:{en:"sensitive"},intimate:{en:"intimate"}},optimistic:{hopeful:{en:"hopeful"},inspired:{en:"inspired"}},playful:{aroused:{en:"aroused"},cheeky:{en:"cheeky"}},content:{free:{en:"free"},joyful:{en:"joyful"}}},surprised:{_color:"#AB47BC",startled:{shocked:{en:"shocked"},dismayed:{en:"dismayed"}},confused:{disillusioned:{en:"disillusioned"},perplexed:{en:"perplexed"}},amazed:{astonished:{en:"astonished"},awe:{en:"awe"}},excited:{eager:{en:"eager"},energetic:{en:"energetic"}}},bad:{_color:"#66BB6A",bored:{indifferent:{en:"indifferent"},apathetic:{en:"apathetic"}},busy:{pressured:{en:"pressured"},rushed:{en:"rushed"}},stressed:{overwhelmed:{en:"overwhelmed"},"out of control":{en:"out of control"}},tired:{sleepy:{en:"sleepy"},unfocused:{en:"unfocused"}}}};var Oe=ue('<g class="emotion-wedge"><path></path><text class="emotion-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),qe=ue('<g class="subcategory-wedge"><path></path><text class="subcategory-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Le=ue('<g class="category-wedge"><path></path><text class="category-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),ze=z("<p> </p>"),De=z('<div class="emotion-wheel-container svelte-15n63h9"><svg viewBox="0 0 100 100" class="wheel svelte-15n63h9"><!><!><!><circle cx="50" cy="50" r="0" class="center-circle svelte-15n63h9"></circle></svg></div> <!> <button>Submit</button>',1);function Ve(H,j){re(j,!0);const $=async()=>{console.log("upload"),j.onUpload()};let l=L(de([]));const S=async(r,t,s)=>{const n=he.now().toUTC().toUnixInteger(),a={category:r};t&&(a.subcategory=t),s&&(a.emotion=s),console.log("uploading",JSON.stringify({timestampUTC:n,type:"emotion",value:a})),e(l).push([a.category,a.subcategory,a.emotion].join(" - ")),m(l,e(l),!0)};function E(){const r=[];let t=0;Object.keys(N).forEach(n=>{let a=0;Object.keys(N[n]).filter(i=>!i.startsWith("_")).forEach(i=>{a+=Object.keys(N[n][i]).length});const o=N[n]._color||"#CCCCCC";r.push({name:n,color:o,emotionCount:a,startAngle:0,endAngle:0,subcategories:[]}),t+=a});let s=0;return r.forEach(n=>{const a=n.emotionCount/t*360;n.startAngle=s,n.endAngle=s+a;let o=s;Object.keys(N[n.name]).filter(i=>!i.startsWith("_")).forEach(i=>{const c=Object.keys(N[n.name][i]),_=c.length/n.emotionCount*a;n.subcategories.push({name:i,startAngle:o,endAngle:o+_,emotions:c}),o+=_}),s+=a}),r}const C=E();function w(r,t){const s=parseInt(r.replace("#",""),16),n=Math.min(255,Math.floor((s>>16)+(255-(s>>16))*t/100)),a=Math.min(255,Math.floor((s>>8&255)+(255-(s>>8&255))*t/100)),o=Math.min(255,Math.floor((s&255)+(255-(s&255))*t/100));return"#"+(n<<16|a<<8|o).toString(16).padStart(6,"0")}let k=L(null),v=L(null),d=L(null);function u(r,t,s){m(k,r,!0),m(v,t,!0),m(d,s,!0)}function f(r,t){m(k,r,!0),m(v,t,!0),m(d,null)}function x(r){m(k,r,!0),m(v,null),m(d,null)}function P(){m(k,null),m(v,null),m(d,null)}function W(r,t,s,n,a=50,o=50){const i=(r-90)*Math.PI/180,c=(t-90)*Math.PI/180,_=a+s*Math.cos(i),I=o+s*Math.sin(i),y=a+n*Math.cos(i),T=o+n*Math.sin(i),O=a+n*Math.cos(c),B=o+n*Math.sin(c),Q=a+s*Math.cos(c),q=o+s*Math.sin(c),ne=t-r>180?1:0;return`
            M ${_} ${I}
            L ${y} ${T}
            A ${n} ${n} 0 ${ne} 1 ${O} ${B}
            L ${Q} ${q}
            A ${s} ${s} 0 ${ne} 0 ${_} ${I}
            Z
        `}function G(r,t,s){const n=(r+t)/2,a=(n-90)*Math.PI/180,o=50+s*Math.cos(a),i=50+s*Math.sin(a),c=n<180?n-90:n+90;return{x:o,y:i,rotation:c}}var ee=De(),D=Z(ee),K=g(D),te=g(K);U(te,17,()=>C,F,(r,t)=>{var s=se(),n=Z(s);U(n,17,()=>e(t).subcategories,F,(a,o)=>{const i=A(()=>(e(o).endAngle-e(o).startAngle)/e(o).emotions.length);var c=se(),_=Z(c);U(_,17,()=>e(o).emotions,F,(I,y,T)=>{const O=A(()=>e(o).startAngle+T*e(i)),B=A(()=>e(o).startAngle+(T+1)*e(i)),Q=A(()=>W(e(O),e(B),30,47)),q=A(()=>G(e(O),e(B),38.5)),ne=A(()=>e(d)===e(y));var V=Oe();V.__click=()=>S(e(t).name,e(o).name,e(y));var oe=g(V);let ge;var Y=p(oe),Me=g(Y,!0);h(Y),h(V),X(()=>{M(oe,"d",e(Q)),ge=ae(oe,0,"emotion-path svelte-15n63h9",null,ge,{highlighted:e(ne)}),ce(oe,`fill: ${e(t).color??""};`),M(Y,"x",e(q).x),M(Y,"y",e(q).y),M(Y,"transform",`rotate(${e(q).rotation??""} ${e(q).x??""} ${e(q).y??""})`),R(Me,e(y))}),J("mouseenter",V,()=>u(e(t).name,e(o).name,e(y))),J("mouseleave",V,P),b(I,V)}),b(a,c)}),b(r,s)});var pe=p(te);U(pe,17,()=>C,F,(r,t)=>{var s=se(),n=Z(s);U(n,17,()=>e(t).subcategories,F,(a,o)=>{const i=A(()=>W(e(o).startAngle,e(o).endAngle,17,30)),c=A(()=>G(e(o).startAngle,e(o).endAngle,23.5)),_=A(()=>e(v)===e(o).name&&e(k)===e(t).name),I=A(()=>w(e(t).color,30));var y=qe();y.__click=()=>S(e(t).name,e(o).name);var T=g(y);let O;var B=p(T),Q=g(B,!0);h(B),h(y),X(()=>{M(T,"d",e(i)),O=ae(T,0,"subcategory-path svelte-15n63h9",null,O,{highlighted:e(_)}),ce(T,`fill: ${e(I)??""};`),M(B,"x",e(c).x),M(B,"y",e(c).y),M(B,"transform",`rotate(${e(c).rotation??""} ${e(c).x??""} ${e(c).y??""})`),R(Q,e(o).name)}),J("mouseenter",y,()=>f(e(t).name,e(o).name)),J("mouseleave",y,P),b(a,y)}),b(r,s)});var Ae=p(pe);U(Ae,17,()=>C,F,(r,t)=>{const s=A(()=>W(e(t).startAngle,e(t).endAngle,0,17)),n=A(()=>G(e(t).startAngle,e(t).endAngle,8.5)),a=A(()=>e(k)===e(t).name);var o=Le();o.__click=()=>S(e(t).name);var i=g(o);let c;var _=p(i),I=g(_,!0);h(_),h(o),X(()=>{M(i,"d",e(s)),c=ae(i,0,"category-path svelte-15n63h9",null,c,{highlighted:e(a)}),ce(i,`fill: ${e(t).color??""};`),M(_,"x",e(n).x),M(_,"y",e(n).y),M(_,"transform",`rotate(${e(n).rotation??""} ${e(n).x??""} ${e(n).y??""})`),R(I,e(t).name)}),J("mouseenter",o,()=>x(e(t).name)),J("mouseleave",o,P),b(r,o)}),xe(),h(K),h(D);var fe=p(D,2);U(fe,17,()=>e(l),F,(r,t)=>{var s=ze(),n=g(s,!0);h(s),X(()=>R(n,e(t))),b(r,s)});var we=p(fe,2);we.__click=$,b(H,ee),ie()}le(["click"]);var Je=z('<div class="input-form svelte-cigsfe"><!></div> <hr class="separator svelte-cigsfe"/>',1),Ne=z(`<div class="contents svelte-cigsfe"><h4 class="title-bar svelte-cigsfe">Today's Personal Metrics <button>Back</button></h4> <!></div>`);function ht(H,j){re(j,!1);const $=()=>Ue(Fe,"$user",l),[l,S]=Ce();Se.set({name:"Personal Tracker",iconPath:"/personal_tracker.png",showAuthInHeader:!0});const E=()=>{_e("/personal-tracker"),me.push("New entry created")};let C=[{name:"emotionWheel",component:Ve},{name:"mood",component:We},{name:"weight",component:Te}];Ee();var w=se(),k=Z(w);{var v=u=>{var f=Ne(),x=g(f),P=p(g(x));P.__click=()=>{_e("/personal-tracker")},h(x);var W=p(x,2);U(W,1,()=>C,F,(G,ee)=>{var D=Je(),K=Z(D),te=g(K);e(ee).component(te,{onUpload:E}),h(K),xe(2),b(G,D)}),h(f),b(u,f)},d=u=>{ve(u,{item:{level:"info",header:"Login to add an entry or see events"}})};$e(k,u=>{$()?u(v):u(d,!1)})}b(H,w),ie(),S()}le(["click"]);export{ht as component};
