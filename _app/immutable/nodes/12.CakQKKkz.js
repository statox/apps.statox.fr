import{s as se,e as k,a as I,A as K,c as C,g as N,b as B,f as u,m as v,i as w,O as J,E as z,n as M,B as ge,t as ae,d as ie,z as A,h as P,j as oe,C as X,G as Ce,k as we,p as ye,K as Ee,y as Te}from"../chunks/scheduler.fAu-Yx5A.js";import{h as pe,u as Pe}from"../chunks/await_block.DTGKniHf.js";import{S as ce,i as ue,b as ee,d as te,m as le,a as Q,t as W,e as ne}from"../chunks/index.DICwlGiI.js";import{P as F}from"../chunks/public.xpUinP6t.js";import{r as $e}from"../chunks/index.CaICv3_n.js";import{g as Le,t as ke,u as Ie}from"../chunks/service.CynkMglu.js";import{s as Ne}from"../chunks/client.CXFlBm-D.js";import{M as Ue}from"../chunks/Main.BOgRpKdc.js";import{e as Y}from"../chunks/each.DxvxzW-o.js";const Be=!1,rt=Object.freeze(Object.defineProperty({__proto__:null,ssr:Be},Symbol.toStringTag,{value:"Module"})),me=()=>$e({path:"/reactor/getEntriesForPublic"}),Se=async l=>{const e=F+"/reactor/addEntry",n=await Le();typeof n=="string"&&await Ne.post(e).auth(n,{type:"bearer"}).field("name",l.name).field("commaSeparatedTags",l.commaSeparatedTags).attach("file",l.file)};function he(l,e,n){const t=l.slice();return t[10]=e[n],t}function _e(l,e,n){const t=l.slice();return t[13]=e[n],t}function de(l){let e,n=l[13]+"",t;return{c(){e=k("span"),t=ae(n),this.h()},l(r){e=C(r,"SPAN",{class:!0});var s=B(e);t=ie(s,n),s.forEach(u),this.h()},h(){v(e,"class","tag svelte-16m67n3")},m(r,s){w(r,e,s),P(e,t)},p(r,s){s&8&&n!==(n=r[13]+"")&&oe(t,n)},d(r){r&&u(e)}}}function Ae(l){let e,n,t;return{c(){e=k("img"),this.h()},l(r){e=C(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){v(e,"class","medium-margin svelte-16m67n3"),X(e.src,n=F+l[10].uri)||v(e,"src",n),v(e,"alt",t=l[10].name)},m(r,s){w(r,e,s)},p(r,s){s&8&&!X(e.src,n=F+r[10].uri)&&v(e,"src",n),s&8&&t!==(t=r[10].name)&&v(e,"alt",t)},d(r){r&&u(e)}}}function De(l){let e,n,t;return{c(){e=k("video"),this.h()},l(r){e=C(r,"VIDEO",{class:!0,style:!0,src:!0,alt:!0}),B(e).forEach(u),this.h()},h(){v(e,"class","medium-margin svelte-16m67n3"),Ce(e,"max-width","100%"),e.controls=!0,X(e.src,n=F+l[10].uri)||v(e,"src",n),v(e,"alt",t=l[10].name)},m(r,s){w(r,e,s)},p(r,s){s&8&&!X(e.src,n=F+r[10].uri)&&v(e,"src",n),s&8&&t!==(t=r[10].name)&&v(e,"alt",t)},d(r){r&&u(e)}}}function ve(l){let e,n,t,r=l[10].name+"",s,o,_,p,f,d,i=`<i class="fas fa-copy"></i>
                    Copy link`,b,a,m,y,U,$,c,E,D,H=Y(l[10].tags),L=[];for(let T=0;T<H.length;T+=1)L[T]=de(_e(l,H,T));function q(){return l[7](l[10])}function O(T,h){return h&8&&(y=null),y==null&&(y=!!T[5](T[10])),y?De:Ae}let j=O(l,-1),S=j(l);return{c(){e=k("div"),n=k("div"),t=k("b"),s=ae(r),o=I(),_=k("div");for(let T=0;T<L.length;T+=1)L[T].c();p=I(),f=k("div"),d=k("button"),d.innerHTML=i,b=I(),a=k("div"),m=k("a"),S.c(),c=I(),this.h()},l(T){e=C(T,"DIV",{});var h=B(e);n=C(h,"DIV",{});var g=B(n);t=C(g,"B",{});var V=B(t);s=ie(V,r),V.forEach(u),g.forEach(u),o=N(h),_=C(h,"DIV",{class:!0});var G=B(_);for(let Z=0;Z<L.length;Z+=1)L[Z].l(G);G.forEach(u),p=N(h),f=C(h,"DIV",{});var R=B(f);d=C(R,"BUTTON",{class:!0,"data-svelte-h":!0}),A(d)!=="svelte-2xhnct"&&(d.innerHTML=i),R.forEach(u),h.forEach(u),b=N(T),a=C(T,"DIV",{});var x=B(a);m=C(x,"A",{href:!0,download:!0,rel:!0,target:!0});var fe=B(m);S.l(fe),fe.forEach(u),c=N(x),x.forEach(u),this.h()},h(){v(_,"class","svelte-16m67n3"),v(d,"class","full-width svelte-16m67n3"),v(m,"href",U=F+l[10].uri),v(m,"download",$=l[10].name),v(m,"rel","noopener noreferrer"),v(m,"target","blank")},m(T,h){w(T,e,h),P(e,n),P(n,t),P(t,s),P(e,o),P(e,_);for(let g=0;g<L.length;g+=1)L[g]&&L[g].m(_,null);P(e,p),P(e,f),P(f,d),w(T,b,h),w(T,a,h),P(a,m),S.m(m,null),P(a,c),E||(D=z(d,"click",q),E=!0)},p(T,h){if(l=T,h&8&&r!==(r=l[10].name+"")&&oe(s,r),h&8){H=Y(l[10].tags);let g;for(g=0;g<H.length;g+=1){const V=_e(l,H,g);L[g]?L[g].p(V,h):(L[g]=de(V),L[g].c(),L[g].m(_,null))}for(;g<L.length;g+=1)L[g].d(1);L.length=H.length}j===(j=O(l,h))&&S?S.p(l,h):(S.d(1),S=j(l),S&&(S.c(),S.m(m,null))),h&8&&U!==(U=F+l[10].uri)&&v(m,"href",U),h&8&&$!==($=l[10].name)&&v(m,"download",$)},d(T){T&&(u(e),u(b),u(a)),ge(L,T),S.d(),E=!1,D()}}}function be(l){let e,n="More...",t,r;return{c(){e=k("button"),e.textContent=n,this.h()},l(s){e=C(s,"BUTTON",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-3fputj"&&(e.textContent=n),this.h()},h(){v(e,"class","full-width medium-margin svelte-16m67n3")},m(s,o){w(s,e,o),t||(r=z(e,"click",l[8]),t=!0)},p:M,d(s){s&&u(e),t=!1,r()}}}function Me(l){let e,n,t,r,s,o,_,p=Y(l[3]),f=[];for(let i=0;i<p.length;i+=1)f[i]=ve(he(l,p,i));let d=l[2].length===0&&l[1]*re<l[0].length&&be(l);return{c(){e=k("input"),n=I(),t=k("div");for(let i=0;i<f.length;i+=1)f[i].c();r=I(),d&&d.c(),s=K(),this.h()},l(i){e=C(i,"INPUT",{class:!0,type:!0,placeholder:!0}),n=N(i),t=C(i,"DIV",{class:!0});var b=B(t);for(let a=0;a<f.length;a+=1)f[a].l(b);b.forEach(u),r=N(i),d&&d.l(i),s=K(),this.h()},h(){v(e,"class","full-width medium-margin svelte-16m67n3"),v(e,"type","text"),v(e,"placeholder","Search by tags or name"),v(t,"class","container svelte-16m67n3")},m(i,b){w(i,e,b),J(e,l[2]),w(i,n,b),w(i,t,b);for(let a=0;a<f.length;a+=1)f[a]&&f[a].m(t,null);w(i,r,b),d&&d.m(i,b),w(i,s,b),o||(_=z(e,"input",l[6]),o=!0)},p(i,[b]){if(b&4&&e.value!==i[2]&&J(e,i[2]),b&56){p=Y(i[3]);let a;for(a=0;a<p.length;a+=1){const m=he(i,p,a);f[a]?f[a].p(m,b):(f[a]=ve(m),f[a].c(),f[a].m(t,null))}for(;a<f.length;a+=1)f[a].d(1);f.length=p.length}i[2].length===0&&i[1]*re<i[0].length?d?d.p(i,b):(d=be(i),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},i:M,o:M,d(i){i&&(u(e),u(n),u(t),u(r),u(s)),ge(f,i),d&&d.d(i),o=!1,_()}}}const re=10;function Oe(l,e,n){let{reactions:t}=e,r=1,s=[],o="";const _=(a,m)=>{if(!m.length||a.name.toLowerCase().includes(m.toLowerCase()))return!0;for(const U of a.tags)if(U.toLowerCase().includes(m.toLowerCase()))return!0;return!1},p=a=>{navigator.clipboard.writeText(F+a.uri),ke.push('<i class="fas fa-check"></i> Link copied to clipboard',{duration:1e3,theme:{"--toastBarHeight":0}})},f=a=>a.s3PresignedUrl.includes(".mp4");function d(){o=this.value,n(2,o)}const i=a=>p(a),b=()=>n(1,r++,r);return l.$$set=a=>{"reactions"in a&&n(0,t=a.reactions)},l.$$.update=()=>{l.$$.dirty&7&&n(3,s=t.filter(a=>_(a,o)).sort((a,m)=>m.creationDateUnix-a.creationDateUnix).slice(0,o.length?void 0:r*re))},[t,r,o,s,p,f,d,i,b]}class Ve extends ce{constructor(e){super(),ue(this,e,Oe,Me,se,{reactions:0})}}function He(l){let e,n="Login to upload content";return{c(){e=k("p"),e.textContent=n},l(t){e=C(t,"P",{"data-svelte-h":!0}),A(e)!=="svelte-k7lhwu"&&(e.textContent=n)},m(t,r){w(t,e,r)},p:M,d(t){t&&u(e)}}}function Re(l){let e,n,t,r="Name",s,o,_,p,f,d="Tags",i,b,a,m,y,U="File",$,c,E,D,H='<i class="fas fa-times-circle"></i>',L,q,O,j="Upload",S,T;return{c(){e=k("div"),n=k("p"),t=k("label"),t.textContent=r,s=I(),o=k("input"),_=I(),p=k("p"),f=k("label"),f.textContent=d,i=I(),b=k("input"),a=I(),m=k("p"),y=k("label"),y.textContent=U,$=I(),c=k("input"),E=I(),D=k("button"),D.innerHTML=H,L=I(),q=k("p"),O=k("button"),O.textContent=j,this.h()},l(h){e=C(h,"DIV",{class:!0});var g=B(e);n=C(g,"P",{class:!0});var V=B(n);t=C(V,"LABEL",{for:!0,"data-svelte-h":!0}),A(t)!=="svelte-bs9sy6"&&(t.textContent=r),s=N(V),o=C(V,"INPUT",{type:!0,class:!0}),V.forEach(u),_=N(g),p=C(g,"P",{class:!0});var G=B(p);f=C(G,"LABEL",{for:!0,"data-svelte-h":!0}),A(f)!=="svelte-1myp42m"&&(f.textContent=d),i=N(G),b=C(G,"INPUT",{type:!0,class:!0}),G.forEach(u),g.forEach(u),a=N(h),m=C(h,"P",{class:!0});var R=B(m);y=C(R,"LABEL",{for:!0,"data-svelte-h":!0}),A(y)!=="svelte-180hc3e"&&(y.textContent=U),$=N(R),c=C(R,"INPUT",{class:!0,type:!0}),E=N(R),D=C(R,"BUTTON",{"data-svelte-h":!0}),A(D)!=="svelte-1q80dng"&&(D.innerHTML=H),R.forEach(u),L=N(h),q=C(h,"P",{});var x=B(q);O=C(x,"BUTTON",{"data-svelte-h":!0}),A(O)!=="svelte-15774uw"&&(O.textContent=j),x.forEach(u),this.h()},h(){v(t,"for","name"),v(o,"type","text"),v(o,"class","svelte-248e0t"),v(n,"class","meta-section-item svelte-248e0t"),v(f,"for","content"),v(b,"type","textarea"),v(b,"class","svelte-248e0t"),v(p,"class","meta-section-item svelte-248e0t"),v(e,"class","meta-section svelte-248e0t"),v(y,"for","file"),v(c,"class","file-input svelte-248e0t"),v(c,"type","file"),v(m,"class","file-section svelte-248e0t")},m(h,g){w(h,e,g),P(e,n),P(n,t),P(n,s),P(n,o),J(o,l[0]),P(e,_),P(e,p),P(p,f),P(p,i),P(p,b),J(b,l[1]),w(h,a,g),w(h,m,g),P(m,y),P(m,$),P(m,c),l[9](c),P(m,E),P(m,D),w(h,L,g),w(h,q,g),P(q,O),S||(T=[z(o,"input",l[6]),z(b,"input",l[7]),z(c,"change",l[8]),z(D,"click",l[10]),z(O,"click",l[5])],S=!0)},p(h,g){g&1&&o.value!==h[0]&&J(o,h[0]),g&2&&J(b,h[1])},d(h){h&&(u(e),u(a),u(m),u(L),u(q)),l[9](null),S=!1,Te(T)}}}function qe(l){let e;function n(s,o){return s[4]?Re:He}let t=n(l),r=t(l);return{c(){r.c(),e=K()},l(s){r.l(s),e=K()},m(s,o){r.m(s,o),w(s,e,o)},p(s,[o]){t===(t=n(s))&&r?r.p(s,o):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},i:M,o:M,d(s){s&&u(e),r.d(s)}}}function ze(l,e,n){let t;we(l,Ie,y=>n(4,t=y));const r=ye();let s,o="",_,p;const f=async()=>{try{if(!(s!=null&&s.length))throw new Error("A name is required for upload");let y;if(p&&p.length&&(y=p[0]),!y)throw new Error("A file is required for upload");await Se({name:s,commaSeparatedTags:o,file:y}),r("upload")}catch(y){const U=`<strong>Entry not created</strong><br/> ${y.message}`;ke.push(U,{theme:{"--toastBarBackground":"#FF0000"}})}};function d(){s=this.value,n(0,s)}function i(){o=this.value,n(1,o)}function b(){p=this.files,n(3,p)}function a(y){Ee[y?"unshift":"push"](()=>{_=y,n(2,_)})}return[s,o,_,p,t,f,d,i,b,a,()=>{n(2,_.value="",_)}]}class Fe extends ce{constructor(e){super(),ue(this,e,ze,qe,se,{})}}function je(l){let e,n="Something went wrong",t,r,s=JSON.stringify(l[3])+"",o;return{c(){e=k("p"),e.textContent=n,t=I(),r=k("p"),o=ae(s)},l(_){e=C(_,"P",{"data-svelte-h":!0}),A(e)!=="svelte-171fb2d"&&(e.textContent=n),t=N(_),r=C(_,"P",{});var p=B(r);o=ie(p,s),p.forEach(u)},m(_,p){w(_,e,p),w(_,t,p),w(_,r,p),P(r,o)},p(_,p){p&1&&s!==(s=JSON.stringify(_[3])+"")&&oe(o,s)},i:M,o:M,d(_){_&&(u(e),u(t),u(r))}}}function Ge(l){let e,n;return e=new Ve({props:{reactions:l[2]}}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,r){le(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.reactions=t[2]),e.$set(s)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function xe(l){let e,n="Loading data";return{c(){e=k("p"),e.textContent=n},l(t){e=C(t,"P",{"data-svelte-h":!0}),A(e)!=="svelte-ezyzhc"&&(e.textContent=n)},m(t,r){w(t,e,r)},p:M,i:M,o:M,d(t){t&&u(e)}}}function Je(l){let e,n,t,r="Reactor",s,o,_="Upload",p,f,d,i,b="Content",a,m,y,U;e=new Ue({props:{title:"Reactor",description:"My collection of memes"}}),f=new Fe({}),f.$on("upload",l[1]);let $={ctx:l,current:null,token:null,hasCatch:!0,pending:xe,then:Ge,catch:je,value:2,error:3,blocks:[,,,]};return pe(y=l[0],$),{c(){ee(e.$$.fragment),n=I(),t=k("h2"),t.textContent=r,s=I(),o=k("h3"),o.textContent=_,p=I(),ee(f.$$.fragment),d=I(),i=k("h3"),i.textContent=b,a=I(),m=K(),$.block.c()},l(c){te(e.$$.fragment,c),n=N(c),t=C(c,"H2",{"data-svelte-h":!0}),A(t)!=="svelte-3o4hy8"&&(t.textContent=r),s=N(c),o=C(c,"H3",{"data-svelte-h":!0}),A(o)!=="svelte-18fi3zp"&&(o.textContent=_),p=N(c),te(f.$$.fragment,c),d=N(c),i=C(c,"H3",{"data-svelte-h":!0}),A(i)!=="svelte-1qnf76d"&&(i.textContent=b),a=N(c),m=K(),$.block.l(c)},m(c,E){le(e,c,E),w(c,n,E),w(c,t,E),w(c,s,E),w(c,o,E),w(c,p,E),le(f,c,E),w(c,d,E),w(c,i,E),w(c,a,E),w(c,m,E),$.block.m(c,$.anchor=E),$.mount=()=>m.parentNode,$.anchor=m,U=!0},p(c,[E]){l=c,$.ctx=l,E&1&&y!==(y=l[0])&&pe(y,$)||Pe($,l,E)},i(c){U||(Q(e.$$.fragment,c),Q(f.$$.fragment,c),Q($.block),U=!0)},o(c){W(e.$$.fragment,c),W(f.$$.fragment,c);for(let E=0;E<3;E+=1){const D=$.blocks[E];W(D)}U=!1},d(c){c&&(u(n),u(t),u(s),u(o),u(p),u(d),u(i),u(a),u(m)),ne(e,c),ne(f,c),$.block.d(c),$.token=null,$=null}}}function Ke(l,e,n){let t=me();return[t,()=>n(0,t=me())]}class st extends ce{constructor(e){super(),ue(this,e,Ke,Je,se,{})}}export{st as component,rt as universal};
