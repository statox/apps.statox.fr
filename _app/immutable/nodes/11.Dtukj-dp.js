import"../chunks/CWj6FrbW.js";import{i as H}from"../chunks/DcwgafQl.js";import{p as T,aA as t,w as _,aB as r,k as W,a4 as S,n as C,g as u,v as I}from"../chunks/CLEsLeyf.js";import{t as A,a as L}from"../chunks/ChHSw3SP.js";import{a as D}from"../chunks/Cvpi8u3q.js";import"../chunks/DF_c0Tbd.js";import"../chunks/BZorNWbl.js";import{A as o,g as K}from"../chunks/BGXm-0PW.js";import{a as R}from"../chunks/Ct5AeG1w.js";import{M as z}from"../chunks/BOTPG7TT.js";import{p as J}from"../chunks/BMUQ3Jz7.js";import{M as B}from"../chunks/DDUw1nZK.js";import{s as f}from"../chunks/yxnpV5re.js";import{a as U}from"../chunks/dozwfbcP.js";import{p as G}from"../chunks/BFAS3Suf.js";import{i as Y}from"../chunks/CY3BqXyN.js";import{e as q,i as y}from"../chunks/DU7BiW-J.js";const j=a=>{if(a===o.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(a===o.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(a===o.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(a===o.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(a===o.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(a===o.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(a===o.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(a===o.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},Z=a=>{if(a===o.NEW)return"moon_phase_icons/1_new_moon.png";if(a===o.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(a===o.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(a===o.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(a===o.FULL)return"moon_phase_icons/5_full_moon.png";if(a===o.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(a===o.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(a===o.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},aa=async()=>{const a=await K(),{moonState:g,sunState:e,upcomingLunarStates:i}=a;return{moonState:g,sunState:{goldenHour:R.fromMillis(e.goldenHour),solarNoon:R.fromMillis(e.solarNoon),sunrise:R.fromMillis(e.sunrise),sunset:R.fromMillis(e.sunset)},upcomingLunarStates:i.map(s=>({date:R.fromMillis(s.tsMillis),lunarState:{...s.lunarState,phasePictureUrl:j(s.lunarState.moonPhase)}}))}};var ea=A('<div class="container svelte-aoqlu7"><div class="content svelte-aoqlu7"><div class="data svelte-aoqlu7"><span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span>Sun rise/set</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-aoqlu7"></div></div>');function oa(a,g){T(g,!1);let e=G(g,"moonState",8),i=G(g,"sunState",8);H();var s=ea(),b=t(s),m=t(b),n=_(t(m),2),p=t(n,!0);r(n);var d=_(n,4),c=t(d);r(d);var l=_(d,4),h=t(l);r(l);var w=_(l,4),E=t(w);r(w);var v=_(w,4),k=t(v,!0);r(v);var N=_(v,4),M=t(N,!0);r(N),r(m);var P=_(m,2);r(b),r(s),W((x,F,O,$,Q,X,V)=>{f(p,e().moonPhaseFr),f(c,`${x??""} days (${F??""}%)`),f(h,`${e().moonVisibilityWindow[0]??""} - ${e().moonVisibilityWindow[1]??""}`),f(E,`${O??""} - ${$??""}`),f(k,Q),f(M,X),U(P,"alt",e().moonPhase),U(P,"src",V)},[()=>e().lunarAge.toFixed(1),()=>(e().lunarAgePercent*100).toFixed(0),()=>i().sunrise.toFormat("HH:mm"),()=>i().sunset.toFormat("HH:mm"),()=>i().solarNoon.toFormat("HH:mm"),()=>i().goldenHour.toFormat("HH:mm"),()=>j(e().moonPhase)],S),L(a,s),C()}var ta=A('<div class="day-header svelte-18sciom"> </div>'),ra=A("<div> </div> <div> </div>",1),na=A('<div class="entry svelte-18sciom"><img class="phase-img svelte-18sciom"> <!></div>'),ia=A('<div class="container svelte-18sciom"><!> <!></div>');function sa(a,g){T(g,!1);let e=G(g,"upcomingLunarStates",8);H();var i=ia(),s=t(i);q(s,1,()=>e().slice(0,7),y,(m,n)=>{let p=()=>u(n).date;var d=ta(),c=t(d,!0);r(d),W(l=>f(c,l),[()=>p().setLocale("fr").toLocaleString({weekday:"long"})],S),L(m,d)});var b=_(s,2);q(b,1,e,y,(m,n,p)=>{let d=()=>u(n).date,c=()=>u(n).lunarState;var l=na(),h=t(l),w=_(h,2);{var E=v=>{var k=ra(),N=I(k),M=t(N,!0);r(N);var P=_(N,2),x=t(P,!0);r(P),W(F=>{f(M,F),f(x,c().moonPhaseFr)},[()=>d().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})],S),L(v,k)};Y(w,v=>{(p===0||p===29||e()[p-1].lunarState.moonPhaseFr!==c().moonPhaseFr)&&v(E)})}r(l),W(v=>{U(h,"alt",c().moonPhase),U(h,"src",v)},[()=>Z(c().moonPhase)],S),L(m,l)}),r(i),L(a,i),C()}var ma=A("<!> <br> <!> <br> <!>",1),pa=A("<p>Loading ephemerides data</p>"),_a=A('<!> <div class="content"><!></div>',1);function Pa(a,g){T(g,!1),J.set("Ephemerides"),H();var e=_a(),i=I(e);z(i,{title:"Ephemerides",description:"Get the ephemerides"});var s=_(i,2),b=t(s);D(b,aa,m=>{var n=pa();L(m,n)},(m,n)=>{var p=S(()=>{var{moonState:k,sunState:N,upcomingLunarStates:M}=u(n);return{moonState:k,sunState:N,upcomingLunarStates:M}}),d=S(()=>u(p).moonState),c=S(()=>u(p).sunState),l=S(()=>u(p).upcomingLunarStates),h=ma(),w=I(h);oa(w,{get moonState(){return u(d)},get sunState(){return u(c)}});var E=_(w,4);sa(E,{get upcomingLunarStates(){return u(l)}});var v=_(E,4);B(v,{item:{level:"info",message:"All data is computed for Paris, France"}}),L(m,h)},(m,n)=>{const p=S(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:u(n)}));B(m,{get item(){return u(p)}})}),r(s),L(a,e),C()}export{Pa as component};
