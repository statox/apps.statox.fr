import"../chunks/DsnmJJEf.js";import"../chunks/CrquYXKP.js";import{h as I,bw as Ae,T as ze,g as e,i as u,bh as ge,p as de,C as Pe,b as G,s as b,e as $,r as f,a as A,d as ue,t as se,f as Y,c as ie,bx as _e,aL as _,n as Fe}from"../chunks/C3-yz8dw.js";import{d as he,s as ne,e as Q}from"../chunks/DUwLERL-.js";import{i as He}from"../chunks/Ceeih1bB.js";import{e as T,i as z}from"../chunks/C63BUUd7.js";import{i as We}from"../chunks/C_vsOW3i.js";import{s as me,a as pe}from"../chunks/k7vEulbC.js";import{t as ve}from"../chunks/L5I2oL6d.js";import{u as Oe}from"../chunks/Byefvy9Z.js";import{M as be}from"../chunks/BCRe70JM.js";import{r as Ue,s as F}from"../chunks/C4tlimJ_.js";import{b as Ie}from"../chunks/CVqt2Uny.js";import{e as xe,p as ye,P as qe}from"../chunks/C0Ua-Vak.js";import{s as le,a as ae}from"../chunks/cHXO9EUa.js";import"../chunks/DgRn7El4.js";import{p as Le}from"../chunks/BQF7YunG.js";import{g as Me}from"../chunks/-sNYeQhT.js";var De=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Ve=["difference","intersection","symmetricDifference","union"],Ee=!1;class ce extends Set{#s=new Map;#e=I(0);#t=I(0);#n=Ae||-1;constructor(o){if(super(),o){for(var h of o)super.add(h);this.#t.v=super.size}Ee||this.#o()}#r(o){return Ae===this.#n?I(o):ze(o)}#o(){Ee=!0;var o=ce.prototype,h=Set.prototype;for(const m of De)o[m]=function(...p){return e(this.#e),h[m].apply(this,p)};for(const m of Ve)o[m]=function(...p){e(this.#e);var M=h[m].apply(this,p);return new ce(M)}}has(o){var h=super.has(o),m=this.#s,p=m.get(o);if(p===void 0){if(!h)return e(this.#e),!1;p=this.#r(!0),m.set(o,p)}return e(p),h}add(o){return super.has(o)||(super.add(o),u(this.#t,super.size),ge(this.#e)),this}delete(o){var h=super.delete(o),m=this.#s,p=m.get(o);return p!==void 0&&(m.delete(o),u(p,!1)),h&&(u(this.#t,super.size),ge(this.#e)),h}clear(){if(super.size!==0){super.clear();var o=this.#s;for(var h of o.values())u(h,!1);o.clear(),u(this.#t,0),ge(this.#e)}}keys(){return this.values()}values(){return e(this.#e),super.values()}entries(){return e(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return e(this.#t)}}var Ge=G('<div><h4>Weight</h4> <!> <div class="input-container svelte-huay37"><button class="svelte-huay37">-</button> <input type="number" step="0.1" class="svelte-huay37"/> <button class="svelte-huay37">+</button></div> <button class="form-action">Submit</button></div>');function Ze(L,o){de(o,!0);const h=()=>pe(ye,"$personalTrackerPassword",m),[m,p]=me();let M=I(Pe([])),c=I(100);const q=async()=>{if(u(M,[],!0),e(c)!==Number(e(c).toFixed(1))&&e(M).push({level:"error",header:"Value have at most 1 number after the comma"}),(e(c)<80||e(c)>110)&&e(M).push({level:"error",header:"Value must be in kg"}),e(M).length)return;const y={type:"weight",data:Math.floor(e(c)*100)};try{await xe(y,h()),o.onUpload()}catch(H){const D=`<strong>Entry not created</strong><br/> ${H.message}`;ve.push(D,{theme:{"--toastBarBackground":"#FF0000"}})}};var S=Ge(),C=b($(S),2);T(C,17,()=>e(M),z,(y,H)=>{be(y,{get item(){return e(H)}})});var j=b(C,2),v=$(j);v.__click=()=>u(c,Number((e(c)-.1).toFixed(2)),!0);var g=b(v,2);Ue(g);var x=b(g,2);x.__click=()=>u(c,Number((e(c)+.1).toFixed(2)),!0),f(j);var k=b(j,2);k.__click=q,f(S),Ie(g,()=>e(c),y=>u(c,y)),A(L,S),ue(),p()}he(["click"]);var Je=G("<button> </button>"),Ke=G('<div><h4>Mood</h4> <!> <div class="options-container svelte-m23i1u"></div> <button class="form-action">Submit</button></div>');function Ne(L,o){de(o,!0);const h=()=>pe(ye,"$personalTrackerPassword",m),[m,p]=me();let M=Pe([]),c=I(5);const q=async()=>{const g={type:"mood",data:e(c)};try{await xe(g,h()),o.onUpload()}catch(x){const y=`<strong>Entry not created</strong><br/> ${x.message}`;ve.push(y,{theme:{"--toastBarBackground":"#FF0000"}})}};var S=Ke(),C=b($(S),2);T(C,17,()=>M,z,(g,x)=>{be(g,{get item(){return e(x)}})});var j=b(C,2);T(j,20,()=>[1,2,3,4,5,6,7,9,10],z,(g,x)=>{var k=Je();k.__click=()=>u(c,x,!0);let y;var H=$(k,!0);f(k),se(()=>{y=le(k,1,"",null,y,{selected:e(c)===x}),ne(H,x)}),A(g,k)}),f(j);var v=b(j,2);v.__click=q,f(S),A(L,S),ue(),p()}he(["click"]);const X={fearful:{_color:"#FFA726",scared:{helpless:{en:"helpless"},frightened:{en:"frightened"}},anxious:{apprehensive:{en:"apprehensive"},worried:{en:"worried"}},insecure:{inadequate:{en:"inadequate"},"self-conscious":{en:"self-conscious"}},weak:{worthless:{en:"worthless"},insignificant:{en:"insignificant"}},rejected:{excluded:{en:"excluded"},persecuted:{en:"persecuted"}},threatened:{nervous:{en:"nervous"},exposed:{en:"exposed"}}},angry:{_color:"#EF5350","let down":{betrayed:{en:"betrayed"},resentful:{en:"resentful"}},humiliated:{disrespected:{en:"disrespected"},ridiculed:{en:"ridiculed"}},bitter:{indignant:{en:"indignant"},violated:{en:"violated"}},mad:{furious:{en:"furious"},jealous:{en:"jealous"}},aggressive:{provoked:{en:"provoked"},hostile:{en:"hostile"}},frustrated:{infuriated:{en:"infuriated"},annoyed:{en:"annoyed"}},distant:{withdrawn:{en:"withdrawn"},numb:{en:"numb"}},critical:{skeptical:{en:"skeptical"},dismissive:{en:"dismissive"}}},disgusted:{_color:"#9E9E9E",disapproving:{judgmental:{en:"judgmental"},disdainful:{en:"disdainful"}},disappointed:{appalled:{en:"appalled"},revolted:{en:"revolted"}},awful:{nauseated:{en:"nauseated"},detestable:{en:"detestable"}},repelled:{horrified:{en:"horrified"},hesitant:{en:"hesitant"}}},sad:{_color:"#42A5F5",lonely:{isolated:{en:"isolated"},abandoned:{en:"abandoned"}},vulnerable:{victimized:{en:"victimized"},fragile:{en:"fragile"}},despair:{grief:{en:"grief"},powerless:{en:"powerless"}},guilty:{ashamed:{en:"ashamed"},remorseful:{en:"remorseful"}},depressed:{inferior:{en:"inferior"},empty:{en:"empty"}},hurt:{embarrassed:{en:"embarrassed"},discouraged:{en:"discouraged"}}},happy:{_color:"#FFEB3B",interested:{curious:{en:"curious"},inquisitive:{en:"inquisitive"}},proud:{successful:{en:"successful"},confident:{en:"confident"}},accepted:{respected:{en:"respected"},valued:{en:"valued"}},powerful:{courageous:{en:"courageous"},creative:{en:"creative"}},peaceful:{loving:{en:"loving"},thankful:{en:"thankful"}},trusting:{sensitive:{en:"sensitive"},intimate:{en:"intimate"}},optimistic:{hopeful:{en:"hopeful"},inspired:{en:"inspired"}},playful:{aroused:{en:"aroused"},cheeky:{en:"cheeky"}},content:{free:{en:"free"},joyful:{en:"joyful"}}},surprised:{_color:"#AB47BC",startled:{shocked:{en:"shocked"},dismayed:{en:"dismayed"}},confused:{disillusioned:{en:"disillusioned"},perplexed:{en:"perplexed"}},amazed:{astonished:{en:"astonished"},awe:{en:"awe"}},excited:{eager:{en:"eager"},energetic:{en:"energetic"}}},bad:{_color:"#66BB6A",bored:{indifferent:{en:"indifferent"},apathetic:{en:"apathetic"}},busy:{pressured:{en:"pressured"},rushed:{en:"rushed"}},stressed:{overwhelmed:{en:"overwhelmed"},"out of control":{en:"out of control"}},tired:{sleepy:{en:"sleepy"},unfocused:{en:"unfocused"}}}};var Qe=_e('<g class="emotion-wedge"><path></path><text class="emotion-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Xe=_e('<g class="subcategory-wedge"><path></path><text class="subcategory-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Ye=_e('<g class="category-wedge"><path></path><text class="category-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Re=G('<button class="selection-item svelte-15n63h9"> </button>'),et=G('<div class="emotion-wheel-container svelte-15n63h9"><svg viewBox="0 0 100 100" class="wheel svelte-15n63h9"><!><!><!><circle cx="50" cy="50" r="0" class="center-circle svelte-15n63h9"></circle></svg></div> <div class="selection svelte-15n63h9"></div> <br/> <button>Submit</button>',1);function tt(L,o){de(o,!0);const h=()=>pe(ye,"$personalTrackerPassword",m),[m,p]=me(),M=async()=>{const t={type:"emotionwheel",data:{emotions:[...c].map(n=>{const[s,l,r,i]=n.split(" - ");return{category:s,subcategory:l,emotion:r,color:i}})}};try{await xe(t,h()),o.onUpload()}catch(n){const l=`<strong>Entry not created</strong><br/> ${n.message}`;ve.push(l,{theme:{"--toastBarBackground":"#FF0000"}})}o.onUpload()},c=new ce,q=a=>{const t=[a.category,a.subcategory,a.emotion,a.color].join(" - ");c.has(t)?c.delete(t):c.add(t)};function S(){const a=[];let t=0;Object.keys(X).forEach(s=>{let l=0;Object.keys(X[s]).filter(i=>!i.startsWith("_")).forEach(i=>{l+=Object.keys(X[s][i]).length});const r=X[s]._color||"#CCCCCC";a.push({name:s,color:r,emotionCount:l,startAngle:0,endAngle:0,subcategories:[]}),t+=l});let n=0;return a.forEach(s=>{const l=s.emotionCount/t*360;s.startAngle=n,s.endAngle=n+l;let r=n;Object.keys(X[s.name]).filter(i=>!i.startsWith("_")).forEach(i=>{const d=Object.keys(X[s.name][i]),w=d.length/s.emotionCount*l;s.subcategories.push({name:i,startAngle:r,endAngle:r+w,emotions:d}),r+=w}),n+=l}),a}const C=S();function j(a,t){const n=parseInt(a.replace("#",""),16),s=Math.min(255,Math.floor((n>>16)+(255-(n>>16))*t/100)),l=Math.min(255,Math.floor((n>>8&255)+(255-(n>>8&255))*t/100)),r=Math.min(255,Math.floor((n&255)+(255-(n&255))*t/100));return"#"+(s<<16|l<<8|r).toString(16).padStart(6,"0")}let v=I(null),g=I(null),x=I(null);function k(a,t,n){u(v,a,!0),u(g,t,!0),u(x,n,!0)}function y(a,t){u(v,a,!0),u(g,t,!0),u(x,null)}function H(a){u(v,a,!0),u(g,null),u(x,null)}function Z(){u(v,null),u(g,null),u(x,null)}function D(a,t,n,s,l=50,r=50){const i=(a-90)*Math.PI/180,d=(t-90)*Math.PI/180,w=l+n*Math.cos(i),E=r+n*Math.sin(i),B=l+s*Math.cos(i),P=r+s*Math.sin(i),W=l+s*Math.cos(d),V=r+s*Math.sin(d),O=l+n*Math.cos(d),U=r+n*Math.sin(d),K=t-a>180?1:0;return`
            M ${w} ${E}
            L ${B} ${P}
            A ${s} ${s} 0 ${K} 1 ${W} ${V}
            L ${O} ${U}
            A ${n} ${n} 0 ${K} 0 ${w} ${E}
            Z
        `}function R(a,t,n){const s=(a+t)/2,l=(s-90)*Math.PI/180,r=50+n*Math.cos(l),i=50+n*Math.sin(l),d=s<180?s-90:s+90;return{x:r,y:i,rotation:d}}var ee=et(),J=Y(ee),re=$(J),$e=$(re);T($e,17,()=>C,z,(a,t)=>{var n=ie(),s=Y(n);T(s,17,()=>e(t).subcategories,z,(l,r)=>{const i=_(()=>(e(r).endAngle-e(r).startAngle)/e(r).emotions.length);var d=ie(),w=Y(d);T(w,17,()=>e(r).emotions,z,(E,B,P)=>{const W=_(()=>e(r).startAngle+P*e(i)),V=_(()=>e(r).startAngle+(P+1)*e(i)),O=_(()=>D(e(W),e(V),30,47)),U=_(()=>R(e(W),e(V),38.5)),K=_(()=>e(x)===e(B)),je=_(()=>[...c].find(Te=>Te.includes(e(B))));var N=Qe();N.__click=()=>q({category:e(t).name,subcategory:e(r).name,emotion:e(B),color:e(t).color});var oe=$(N);let we;var te=b(oe),Be=$(te,!0);f(te),f(N),se(()=>{F(oe,"d",e(O)),we=le(oe,0,"emotion-path svelte-15n63h9",null,we,{highlighted:e(K),selected:e(je)}),ae(oe,`fill: ${e(t).color??""};`),F(te,"x",e(U).x),F(te,"y",e(U).y),F(te,"transform",`rotate(${e(U).rotation??""} ${e(U).x??""} ${e(U).y??""})`),ne(Be,e(B))}),Q("mouseenter",N,()=>k(e(t).name,e(r).name,e(B))),Q("mouseleave",N,Z),A(E,N)}),A(l,d)}),A(a,n)});var ke=b($e);T(ke,17,()=>C,z,(a,t)=>{var n=ie(),s=Y(n);T(s,17,()=>e(t).subcategories,z,(l,r)=>{const i=_(()=>D(e(r).startAngle,e(r).endAngle,17,30)),d=_(()=>R(e(r).startAngle,e(r).endAngle,23.5)),w=_(()=>e(g)===e(r).name&&e(v)===e(t).name),E=_(()=>[...c].find(K=>K.includes(e(r).name))),B=_(()=>j(e(t).color,30));var P=Xe(),W=$(P);let V;var O=b(W),U=$(O,!0);f(O),f(P),se(()=>{F(W,"d",e(i)),V=le(W,0,"subcategory-path svelte-15n63h9",null,V,{highlighted:e(w),selected:e(E)}),ae(W,`fill: ${e(B)??""};`),F(O,"x",e(d).x),F(O,"y",e(d).y),F(O,"transform",`rotate(${e(d).rotation??""} ${e(d).x??""} ${e(d).y??""})`),ne(U,e(r).name)}),Q("mouseenter",P,()=>y(e(t).name,e(r).name)),Q("mouseleave",P,Z),A(l,P)}),A(a,n)});var Se=b(ke);T(Se,17,()=>C,z,(a,t)=>{const n=_(()=>D(e(t).startAngle,e(t).endAngle,0,17)),s=_(()=>R(e(t).startAngle,e(t).endAngle,8.5)),l=_(()=>e(v)===e(t).name),r=_(()=>[...c].find(P=>P.includes(e(t).name)));var i=Ye(),d=$(i);let w;var E=b(d),B=$(E,!0);f(E),f(i),se(()=>{F(d,"d",e(n)),w=le(d,0,"category-path svelte-15n63h9",null,w,{highlighted:e(l),selected:e(r)}),ae(d,`fill: ${e(t).color??""};`),F(E,"x",e(s).x),F(E,"y",e(s).y),F(E,"transform",`rotate(${e(s).rotation??""} ${e(s).x??""} ${e(s).y??""})`),ne(B,e(t).name)}),Q("mouseenter",i,()=>H(e(t).name)),Q("mouseleave",i,Z),A(a,i)}),Fe(),f(re),f(J);var fe=b(J,2);T(fe,21,()=>[...c],z,(a,t)=>{const n=_(()=>{const[r,i,d,w]=e(t).split(" - ");return{category:r,subcategory:i,emotion:d,color:w}});var s=Re();s.__click=()=>c.delete(e(t));var l=$(s);f(s),se(()=>{ae(s,`--color: ${e(n).color??""}`),ne(l,`${e(n).category??""}
            ${e(n).subcategory??""}
            ${e(n).emotion??""}`)}),A(a,s)}),f(fe);var Ce=b(fe,4);Ce.__click=M,A(L,ee),ue(),p()}he(["click"]);var st=G('<div class="input-form svelte-cigsfe"><!></div> <hr class="separator svelte-cigsfe"/>',1),nt=G(`<div class="contents svelte-cigsfe"><h4 class="title-bar svelte-cigsfe">Today's Personal Metrics <button>Back</button></h4> <!></div>`);function $t(L,o){de(o,!1);const h=()=>pe(Oe,"$user",m),[m,p]=me();Le.set({name:"Personal Tracker",iconPath:"/personal_tracker.png",showAuthInHeader:!0});const M=()=>{Me("/personal-tracker"),ve.push("New entry created")};let c=[{name:"emotionWheel",component:tt},{name:"mood",component:Ne},{name:"weight",component:Ze}];We();var q=ie(),S=Y(q);{var C=v=>{qe(v,{children:(g,x)=>{var k=nt(),y=$(k),H=b($(y));H.__click=()=>{Me("/personal-tracker")},f(y);var Z=b(y,2);T(Z,1,()=>c,z,(D,R)=>{var ee=st(),J=Y(ee),re=$(J);e(R).component(re,{onUpload:M}),f(J),Fe(2),A(D,ee)}),f(k),A(g,k)},$$slots:{default:!0}})},j=v=>{be(v,{item:{level:"info",header:"Login to add an entry or see events"}})};He(S,v=>{h()?v(C):v(j,!1)})}A(L,q),ue(),p()}he(["click"]);export{$t as component};
