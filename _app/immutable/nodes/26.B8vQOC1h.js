import"../chunks/NZTpNUN0.js";import"../chunks/WHv88YST.js";import{h as H,bu as be,a8 as je,g as e,i as h,bf as he,p as le,Y as ke,b as L,s as b,e as y,r as p,a as w,d as ce,t as R,f as K,c as re,bv as me,u as _,n as Ae}from"../chunks/BXDEc9at.js";import{e as B,i as T}from"../chunks/Bewy8owc.js";import{d as de,s as ee,e as Z}from"../chunks/rMjN7E44.js";import{i as Be}from"../chunks/DzN6g0OA.js";import{i as Te}from"../chunks/DDjwRVny.js";import{s as Pe,a as Ie}from"../chunks/CKHL-8-y.js";import{t as ve}from"../chunks/DsttWXTE.js";import{u as ze}from"../chunks/5akKLQcs.js";import{M as fe}from"../chunks/0yIdRvEd.js";import{r as Oe,s as U}from"../chunks/Wc9Rb65n.js";import{b as He}from"../chunks/CA3RFMya.js";import{A as we,U as $e}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{c as Me}from"../chunks/Bd9sQ8Nq.js";import{D as pe}from"../chunks/DTyfSRsR.js";import{s as ae,a as oe}from"../chunks/CJ3rIdgZ.js";import"../chunks/Sh-k6eR8.js";import{p as We}from"../chunks/DoNHDqcw.js";import{g as xe}from"../chunks/B3ZiX-8R.js";var De=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],qe=["difference","intersection","symmetricDifference","union"],ye=!1;class ie extends Set{#n=new Map;#e=H(0);#t=H(0);#s=be||-1;constructor(a){if(super(),a){for(var u of a)super.add(u);this.#t.v=super.size}ye||this.#r()}#o(a){return be===this.#s?H(a):je(a)}#r(){ye=!0;var a=ie.prototype,u=Set.prototype;for(const s of De)a[s]=function(...f){return e(this.#e),u[s].apply(this,f)};for(const s of qe)a[s]=function(...f){e(this.#e);var $=u[s].apply(this,f);return new ie($)}}has(a){var u=super.has(a),s=this.#n,f=s.get(a);if(f===void 0){if(!u)return e(this.#e),!1;f=this.#o(!0),s.set(a,f)}return e(f),u}add(a){return super.has(a)||(super.add(a),h(this.#t,super.size),he(this.#e)),this}delete(a){var u=super.delete(a),s=this.#n,f=s.get(a);return f!==void 0&&(s.delete(a),h(f,!1)),u&&(h(this.#t,super.size),he(this.#e)),u}clear(){if(super.size!==0){super.clear();var a=this.#n;for(var u of a.values())h(u,!1);a.clear(),h(this.#t,0),he(this.#e)}}keys(){return this.values()}values(){return e(this.#e),super.values()}entries(){return e(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return e(this.#t)}}var Le=L('<div><h4>Weight</h4> <!> <div class="input-container svelte-huay37"><button class="svelte-huay37">-</button> <input type="number" step="0.1" class="svelte-huay37"/> <button class="svelte-huay37">+</button></div> <button class="form-action">Submit</button></div>');function Ve(W,a){le(a,!0);let u=H(ke([])),s=H(100);const f=async()=>{if(h(u,[],!0),e(s)!==Number(e(s).toFixed(1))&&e(u).push({level:"error",header:"Value have at most 1 number after the comma"}),(e(s)<80||e(s)>110)&&e(u).push({level:"error",header:"Value must be in kg"}),e(u).length)return;const x=pe.now().toUTC().toUnixInteger();try{await Me({event:{timestampUTC:x,type:"weight",value:Math.floor(e(s)*100)}}),a.onUpload()}catch(k){let P=k.message;k instanceof we&&k.code===401?P="Invalid logged in user":k instanceof $e&&(P="User is logged out");const D=`<strong>Entry not created</strong><br/> ${P}`;ve.push(D,{theme:{"--toastBarBackground":"#FF0000"}})}};var $=Le(),F=b(y($),2);B(F,17,()=>e(u),T,(x,k)=>{fe(x,{get item(){return e(k)}})});var E=b(F,2),M=y(E);M.__click=()=>h(s,Number((e(s)-.1).toFixed(2)),!0);var g=b(M,2);Oe(g);var m=b(g,2);m.__click=()=>h(s,Number((e(s)+.1).toFixed(2)),!0),p(E);var v=b(E,2);v.__click=f,p($),He(g,()=>e(s),x=>h(s,x)),w(W,$),ce()}de(["click"]);var Je=L("<button> </button>"),Ne=L('<div><h4>Mood</h4> <!> <div class="options-container svelte-m23i1u"></div> <button class="form-action">Submit</button></div>');function Ze(W,a){le(a,!0);let u=ke([]),s=H(5);const f=async()=>{const g=pe.now().toUTC().toUnixInteger();try{await Me({event:{timestampUTC:g,type:"mood",value:e(s)}}),a.onUpload()}catch(m){let v=m.message;m instanceof we&&m.code===401?v="Invalid logged in user":m instanceof $e&&(v="User is logged out");const x=`<strong>Entry not created</strong><br/> ${v}`;ve.push(x,{theme:{"--toastBarBackground":"#FF0000"}})}};var $=Ne(),F=b(y($),2);B(F,17,()=>u,T,(g,m)=>{fe(g,{get item(){return e(m)}})});var E=b(F,2);B(E,20,()=>[1,2,3,4,5,6,7,9,10],T,(g,m)=>{var v=Je();v.__click=()=>h(s,m,!0);let x;var k=y(v,!0);p(v),R(()=>{x=ae(v,1,"",null,x,{selected:e(s)===m}),ee(k,m)}),w(g,v)}),p(E);var M=b(E,2);M.__click=f,p($),w(W,$),ce()}de(["click"]);const G={fearful:{_color:"#FFA726",scared:{helpless:{en:"helpless"},frightened:{en:"frightened"}},anxious:{apprehensive:{en:"apprehensive"},worried:{en:"worried"}},insecure:{inadequate:{en:"inadequate"},"self-conscious":{en:"self-conscious"}},weak:{worthless:{en:"worthless"},insignificant:{en:"insignificant"}},rejected:{excluded:{en:"excluded"},persecuted:{en:"persecuted"}},threatened:{nervous:{en:"nervous"},exposed:{en:"exposed"}}},angry:{_color:"#EF5350","let down":{betrayed:{en:"betrayed"},resentful:{en:"resentful"}},humiliated:{disrespected:{en:"disrespected"},ridiculed:{en:"ridiculed"}},bitter:{indignant:{en:"indignant"},violated:{en:"violated"}},mad:{furious:{en:"furious"},jealous:{en:"jealous"}},aggressive:{provoked:{en:"provoked"},hostile:{en:"hostile"}},frustrated:{infuriated:{en:"infuriated"},annoyed:{en:"annoyed"}},distant:{withdrawn:{en:"withdrawn"},numb:{en:"numb"}},critical:{skeptical:{en:"skeptical"},dismissive:{en:"dismissive"}}},disgusted:{_color:"#9E9E9E",disapproving:{judgmental:{en:"judgmental"},disdainful:{en:"disdainful"}},disappointed:{appalled:{en:"appalled"},revolted:{en:"revolted"}},awful:{nauseated:{en:"nauseated"},detestable:{en:"detestable"}},repelled:{horrified:{en:"horrified"},hesitant:{en:"hesitant"}}},sad:{_color:"#42A5F5",lonely:{isolated:{en:"isolated"},abandoned:{en:"abandoned"}},vulnerable:{victimized:{en:"victimized"},fragile:{en:"fragile"}},despair:{grief:{en:"grief"},powerless:{en:"powerless"}},guilty:{ashamed:{en:"ashamed"},remorseful:{en:"remorseful"}},depressed:{inferior:{en:"inferior"},empty:{en:"empty"}},hurt:{embarrassed:{en:"embarrassed"},discouraged:{en:"discouraged"}}},happy:{_color:"#FFEB3B",interested:{curious:{en:"curious"},inquisitive:{en:"inquisitive"}},proud:{successful:{en:"successful"},confident:{en:"confident"}},accepted:{respected:{en:"respected"},valued:{en:"valued"}},powerful:{courageous:{en:"courageous"},creative:{en:"creative"}},peaceful:{loving:{en:"loving"},thankful:{en:"thankful"}},trusting:{sensitive:{en:"sensitive"},intimate:{en:"intimate"}},optimistic:{hopeful:{en:"hopeful"},inspired:{en:"inspired"}},playful:{aroused:{en:"aroused"},cheeky:{en:"cheeky"}},content:{free:{en:"free"},joyful:{en:"joyful"}}},surprised:{_color:"#AB47BC",startled:{shocked:{en:"shocked"},dismayed:{en:"dismayed"}},confused:{disillusioned:{en:"disillusioned"},perplexed:{en:"perplexed"}},amazed:{astonished:{en:"astonished"},awe:{en:"awe"}},excited:{eager:{en:"eager"},energetic:{en:"energetic"}}},bad:{_color:"#66BB6A",bored:{indifferent:{en:"indifferent"},apathetic:{en:"apathetic"}},busy:{pressured:{en:"pressured"},rushed:{en:"rushed"}},stressed:{overwhelmed:{en:"overwhelmed"},"out of control":{en:"out of control"}},tired:{sleepy:{en:"sleepy"},unfocused:{en:"unfocused"}}}};var Ge=me('<g class="emotion-wedge"><path></path><text class="emotion-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Ke=me('<g class="subcategory-wedge"><path></path><text class="subcategory-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Qe=me('<g class="category-wedge"><path></path><text class="category-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Ye=L('<button class="selection-item svelte-15n63h9"> </button>'),Xe=L('<div class="emotion-wheel-container svelte-15n63h9"><svg viewBox="0 0 100 100" class="wheel svelte-15n63h9"><!><!><!><circle cx="50" cy="50" r="0" class="center-circle svelte-15n63h9"></circle></svg></div> <div class="selection svelte-15n63h9"></div> <br/> <button>Submit</button>',1);function Re(W,a){le(a,!0);const u=async()=>{console.log("upload"),a.onUpload()},s=new ie,f=i=>{const o={timestampUTC:pe.now().toUTC().toUnixInteger(),type:"emotion",value:i};console.log("selected",JSON.stringify(o));const t=[i.category,i.subcategory,i.emotion,i.color].join(" - ");s.has(t)?s.delete(t):s.add(t)};function $(){const i=[];let n=0;Object.keys(G).forEach(t=>{let c=0;Object.keys(G[t]).filter(l=>!l.startsWith("_")).forEach(l=>{c+=Object.keys(G[t][l]).length});const r=G[t]._color||"#CCCCCC";i.push({name:t,color:r,emotionCount:c,startAngle:0,endAngle:0,subcategories:[]}),n+=c});let o=0;return i.forEach(t=>{const c=t.emotionCount/n*360;t.startAngle=o,t.endAngle=o+c;let r=o;Object.keys(G[t.name]).filter(l=>!l.startsWith("_")).forEach(l=>{const d=Object.keys(G[t.name][l]),A=d.length/t.emotionCount*c;t.subcategories.push({name:l,startAngle:r,endAngle:r+A,emotions:d}),r+=A}),o+=c}),i}const F=$();function E(i,n){const o=parseInt(i.replace("#",""),16),t=Math.min(255,Math.floor((o>>16)+(255-(o>>16))*n/100)),c=Math.min(255,Math.floor((o>>8&255)+(255-(o>>8&255))*n/100)),r=Math.min(255,Math.floor((o&255)+(255-(o&255))*n/100));return"#"+(t<<16|c<<8|r).toString(16).padStart(6,"0")}let M=H(null),g=H(null),m=H(null);function v(i,n,o){h(M,i,!0),h(g,n,!0),h(m,o,!0)}function x(i,n){h(M,i,!0),h(g,n,!0),h(m,null)}function k(i){h(M,i,!0),h(g,null),h(m,null)}function P(){h(M,null),h(g,null),h(m,null)}function D(i,n,o,t,c=50,r=50){const l=(i-90)*Math.PI/180,d=(n-90)*Math.PI/180,A=c+o*Math.cos(l),C=r+o*Math.sin(l),j=c+t*Math.cos(l),S=r+t*Math.sin(l),I=c+t*Math.cos(d),q=r+t*Math.sin(d),z=c+o*Math.cos(d),O=r+o*Math.sin(d),J=n-i>180?1:0;return`
            M ${A} ${C}
            L ${j} ${S}
            A ${t} ${t} 0 ${J} 1 ${I} ${q}
            L ${z} ${O}
            A ${o} ${o} 0 ${J} 0 ${A} ${C}
            Z
        `}function Q(i,n,o){const t=(i+n)/2,c=(t-90)*Math.PI/180,r=50+o*Math.cos(c),l=50+o*Math.sin(c),d=t<180?t-90:t+90;return{x:r,y:l,rotation:d}}var te=Xe(),V=K(te),Y=y(V),ne=y(Y);B(ne,17,()=>F,T,(i,n)=>{var o=re(),t=K(o);B(t,17,()=>e(n).subcategories,T,(c,r)=>{const l=_(()=>(e(r).endAngle-e(r).startAngle)/e(r).emotions.length);var d=re(),A=K(d);B(A,17,()=>e(r).emotions,T,(C,j,S)=>{const I=_(()=>e(r).startAngle+S*e(l)),q=_(()=>e(r).startAngle+(S+1)*e(l)),z=_(()=>D(e(I),e(q),30,47)),O=_(()=>Q(e(I),e(q),38.5)),J=_(()=>e(m)===e(j)),Se=_(()=>[...s].find(Fe=>Fe.includes(e(j))));var N=Ge();N.__click=()=>f({category:e(n).name,subcategory:e(r).name,emotion:e(j),color:e(n).color});var se=y(N);let _e;var X=b(se),Ue=y(X,!0);p(X),p(N),R(()=>{U(se,"d",e(z)),_e=ae(se,0,"emotion-path svelte-15n63h9",null,_e,{highlighted:e(J),selected:e(Se)}),oe(se,`fill: ${e(n).color??""};`),U(X,"x",e(O).x),U(X,"y",e(O).y),U(X,"transform",`rotate(${e(O).rotation??""} ${e(O).x??""} ${e(O).y??""})`),ee(Ue,e(j))}),Z("mouseenter",N,()=>v(e(n).name,e(r).name,e(j))),Z("mouseleave",N,P),w(C,N)}),w(c,d)}),w(i,o)});var ge=b(ne);B(ge,17,()=>F,T,(i,n)=>{var o=re(),t=K(o);B(t,17,()=>e(n).subcategories,T,(c,r)=>{const l=_(()=>D(e(r).startAngle,e(r).endAngle,17,30)),d=_(()=>Q(e(r).startAngle,e(r).endAngle,23.5)),A=_(()=>e(g)===e(r).name&&e(M)===e(n).name),C=_(()=>[...s].find(J=>J.includes(e(r).name))),j=_(()=>E(e(n).color,30));var S=Ke(),I=y(S);let q;var z=b(I),O=y(z,!0);p(z),p(S),R(()=>{U(I,"d",e(l)),q=ae(I,0,"subcategory-path svelte-15n63h9",null,q,{highlighted:e(A),selected:e(C)}),oe(I,`fill: ${e(j)??""};`),U(z,"x",e(d).x),U(z,"y",e(d).y),U(z,"transform",`rotate(${e(d).rotation??""} ${e(d).x??""} ${e(d).y??""})`),ee(O,e(r).name)}),Z("mouseenter",S,()=>x(e(n).name,e(r).name)),Z("mouseleave",S,P),w(c,S)}),w(i,o)});var Ee=b(ge);B(Ee,17,()=>F,T,(i,n)=>{const o=_(()=>D(e(n).startAngle,e(n).endAngle,0,17)),t=_(()=>Q(e(n).startAngle,e(n).endAngle,8.5)),c=_(()=>e(M)===e(n).name),r=_(()=>[...s].find(S=>S.includes(e(n).name)));var l=Qe(),d=y(l);let A;var C=b(d),j=y(C,!0);p(C),p(l),R(()=>{U(d,"d",e(o)),A=ae(d,0,"category-path svelte-15n63h9",null,A,{highlighted:e(c),selected:e(r)}),oe(d,`fill: ${e(n).color??""};`),U(C,"x",e(t).x),U(C,"y",e(t).y),U(C,"transform",`rotate(${e(t).rotation??""} ${e(t).x??""} ${e(t).y??""})`),ee(j,e(n).name)}),Z("mouseenter",l,()=>k(e(n).name)),Z("mouseleave",l,P),w(i,l)}),Ae(),p(Y),p(V);var ue=b(V,2);B(ue,21,()=>[...s],T,(i,n)=>{const o=_(()=>{const[r,l,d,A]=e(n).split(" - ");return{category:r,subcategory:l,emotion:d,color:A}});var t=Ye();t.__click=()=>s.delete(e(n));var c=y(t);p(t),R(()=>{oe(t,`--color: ${e(o).color??""}`),ee(c,`${e(o).category??""}
            ${e(o).subcategory??""}
            ${e(o).emotion??""}`)}),w(i,t)}),p(ue);var Ce=b(ue,4);Ce.__click=u,w(W,te),ce()}de(["click"]);var et=L('<div class="input-form svelte-cigsfe"><!></div> <hr class="separator svelte-cigsfe"/>',1),tt=L(`<div class="contents svelte-cigsfe"><h4 class="title-bar svelte-cigsfe">Today's Personal Metrics <button>Back</button></h4> <!></div>`);function At(W,a){le(a,!1);const u=()=>Ie(ze,"$user",s),[s,f]=Pe();We.set({name:"Personal Tracker",iconPath:"/personal_tracker.png",showAuthInHeader:!0});const $=()=>{xe("/personal-tracker"),ve.push("New entry created")};let F=[{name:"emotionWheel",component:Re},{name:"mood",component:Ze},{name:"weight",component:Ve}];Te();var E=re(),M=K(E);{var g=v=>{var x=tt(),k=y(x),P=b(y(k));P.__click=()=>{xe("/personal-tracker")},p(k);var D=b(k,2);B(D,1,()=>F,T,(Q,te)=>{var V=et(),Y=K(V),ne=y(Y);e(te).component(ne,{onUpload:$}),p(Y),Ae(2),w(Q,V)}),p(x),w(v,x)},m=v=>{fe(v,{item:{level:"info",header:"Login to add an entry or see events"}})};Be(M,v=>{u()?v(g):v(m,!1)})}w(W,E),ce(),f()}de(["click"]);export{At as component};
