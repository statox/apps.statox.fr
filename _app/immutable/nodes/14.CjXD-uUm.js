import"../chunks/DsnmJJEf.js";import"../chunks/Bdxdj0h6.js";import{p as A,h as u,C as F,i as n,b as U,s as o,e as w,g as e,r as M,a as B,d as N,f as R,b0 as S}from"../chunks/C1Jxye1l.js";import{i as $}from"../chunks/BAFXAy0q.js";import{r as q}from"../chunks/Z-lh6Sw0.js";import{b}from"../chunks/DeqYhWtL.js";import{F as z,a as E,c as G,h as H}from"../chunks/CX5b-Dyi.js";import{a as Q,b as j}from"../chunks/DXT-_IUL.js";import{I as D}from"../chunks/ATduD2CH.js";import{o as J}from"../chunks/C5xzD1C9.js";import{d as K}from"../chunks/B5mDzSg_.js";import{M as O}from"../chunks/CHcs1d-1.js";import{t as T}from"../chunks/Be3lftIb.js";import"../chunks/C_0PWwTw.js";import{p as V}from"../chunks/rc8jUsVI.js";/* empty css                */import"../chunks/Cyb1dSsQ.js";import{g as W}from"../chunks/BCGidQ8E.js";var X=U('<div class="input-container svelte-yzduke"><label for="name">Ingredient</label> <!> <label for="quantity">Quantity</label> <input type="number"/> <label for="quantity">Unit</label> <input type="text"/> <button><i class="fa fa-solid fa-plus"></i></button></div>');function Y(f,m){A(m,!0);let a=u(F([])),i=u(""),s=u(void 0),l=u(void 0);const p=()=>{e(i)&&m.onAdd({name:e(i),quantity:e(s),unit:e(l)})};J(async()=>{n(a,(await Q()).ingredients.sort((r,v)=>r<v?1:0).map(r=>r.name),!0)});var c=X(),g=o(w(c),2);O(g,{get options(){return e(a)},get value(){return e(i)},set value(r){n(i,r,!0)}});var t=o(g,4);q(t);var d=o(t,4);q(d);var h=o(d,2);h.__click=p,M(c),b(t,()=>e(s),r=>n(s,r)),b(d,()=>e(l),r=>n(l,r)),B(f,c),N()}K(["click"]);var Z=U('<label for="name">Name</label> <input type="text"/> <label for="ingredients">New ingredient</label> <div><!></div> <label for="ingredients">List of ingredients</label> <div><!></div> <label for="content">Instructions</label> <textarea rows="10" cols="50"></textarea> <!>',1);function ee(f,m){A(m,!0);let a=u(F([])),i=u(!1),s=u(""),l=u(""),p=F([]);const c=t=>{if(p.find(d=>d.name===t.name)){const d=t.name+" already added";T.push(d,{theme:{"--toastBarBackground":"#FF0000"}});return}p.push(t)},g=async()=>{if(n(a,[],!0),e(s)?.length||e(a).push({level:"error",header:"Name must be defined"}),e(l)?.length||e(a).push({level:"error",header:"Content must be defined"}),!e(a).length)try{n(i,!0),await j({name:e(s),content:e(l),ingredients:p}),m.onUpload()}catch(t){H(t)}finally{n(i,!1)}};z(f,{title:"Add a new recipe",backUrl:"/cookbook",get noticeMessages(){return e(a)},children:(t,d)=>{E(t,{children:(h,r)=>{var v=Z(),y=o(R(v),2);q(y);var _=o(y,4),C=w(_);Y(C,{onAdd:c}),M(_);var k=o(_,4),L=w(k);D(L,{get ingredients(){return p},editable:!0}),M(k);var I=o(k,4);S(I);var P=o(I,2);G(P,{onclick:g,get loading(){return e(i)}}),b(y,()=>e(s),x=>n(s,x)),b(I,()=>e(l),x=>n(l,x)),B(h,v)}})},$$slots:{default:!0}}),N()}function ye(f,m){A(m,!1),V.set({name:"Cookbook",showAuthInHeader:!0});const a=()=>{W("/cookbook")};$(),ee(f,{onUpload:a}),N()}export{ye as component};
