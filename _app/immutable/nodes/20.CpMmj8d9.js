import"../chunks/CWj6FrbW.js";import{p as N,aC as T,aO as F,n as W,aA as h,s as m,g as a,aB as g,w as p,v as j,k as z,a7 as G,aP as L,x as I}from"../chunks/CLEsLeyf.js";import{s as A}from"../chunks/yxnpV5re.js";import{t as C,a as S,f as O,k as V}from"../chunks/ChHSw3SP.js";import{b as B}from"../chunks/dozwfbcP.js";import{M as U}from"../chunks/BOTPG7TT.js";import{r as H}from"../chunks/Cmn1-_9W.js";import{P as J}from"../chunks/DShpw_Ss.js";import{e as Q,i as X}from"../chunks/DU7BiW-J.js";import{T as Y}from"../chunks/vaCicukU.js";import"../chunks/DcwgafQl.js";import{p as Z}from"../chunks/CMLHhHfH.js";var $=C('<div id="canvas-container" class="d-flex justify-content-center"><!></div>');function ee(f,s){N(s,!0);let o=T(void 0);const c=e=>{e.setup=()=>{m(o,e,!0),e.createCanvas(600,100)},e.draw=()=>{const t=document.getElementById("canvas-container");if(t){const r=(t==null?void 0:t.clientWidth)||600;e.width!==r&&e.resizeCanvas(r,100);const l=getComputedStyle(document.body),k=l.getPropertyValue("--nc-bg-2")||"white",d=l.getPropertyValue("--nc-tx-1")||"black";e.background(k),e.stroke(d)}const n=Date.now(),y=n-s.keptDuration;for(const r of s.taps){const l=e.map(r,n,y,e.width,0);e.line(l,0,l,e.height)}}};H(()=>{var e,t;s.pause?(e=a(o))==null||e.noLoop():(t=a(o))==null||t.loop()}),F(()=>{var e;(e=a(o))==null||e.remove()});var v=$(),u=h(v);J(u,{sketch:c}),g(v),S(f,v),W()}var te=C("<span> </span> <span> </span> <span> </span>",1),ae=C('<div class="container svelte-1kxd0qm"><span class="col table-head svelte-1kxd0qm">BPM</span> <span class="col table-head svelte-1kxd0qm">Tempo</span> <span class="col table-head svelte-1kxd0qm">Description</span> <!></div>');function oe(f,s){const o=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],c=(t,n)=>t>(n.low??0)&&t<=(n.high??9999),v=t=>{if(t.high&&t.low)return`${t.low} - ${t.high}`;if(t.low)return`>${t.low}`;if(t.high)return`<${t.high}`};var u=ae(),e=p(h(u),6);Q(e,17,()=>o,X,(t,n)=>{var y=te(),r=j(y);let l;var k=h(r,!0);g(r);var d=p(r,2);let b;var D=h(d,!0);g(d);var w=p(d,2);let _;var x=h(w,!0);g(w),z((E,P,q,i)=>{l=B(r,1,"col svelte-1kxd0qm",null,l,E),A(k,P),b=B(d,1,"col svelte-1kxd0qm",null,b,q),A(D,a(n).name),_=B(w,1,"col svelte-1kxd0qm",null,_,i),A(x,a(n).description)},[()=>({selected:c(s.currentBpm,a(n))}),()=>v(a(n)),()=>({selected:c(s.currentBpm,a(n))}),()=>({selected:c(s.currentBpm,a(n))})]),S(t,y)}),g(u),S(f,u)}var ne=(f,s)=>m(s,!a(s)),se=C('<!> <div class="container svelte-1t43gmp"><div>Press the space bar or click/tap anywhere on the page to get a bpm.</div> <div> <br>BPM</div> <div class="controls svelte-1t43gmp"><button class="control-button svelte-1t43gmp">Reset (c)</button> <button class="control-button svelte-1t43gmp"> </button></div> <!> <!></div>',1);function ye(f,s){N(s,!0),Z.set("Tap Tempo");let o=T(G(new Y)),c=T(!1);const v=()=>{a(e)||(a(o).addBeat(),m(o,a(o),!0),m(c,!0),setTimeout(()=>m(c,!1),100))},u=()=>{a(o).reset(),m(o,a(o),!0)};let e=T(!1),t=!0;const n=i=>{const M=" ",K="Enter",R="c";if([M,K,R].includes(i.key)&&(i.preventDefault(),!!t)){if(t=!1,i.key===M){m(e,!1),v();return}if(i.key===K){m(e,!a(e));return}i.key===R&&(u(),m(o,a(o),!0))}},y=i=>{!t&&i.key===" "&&(t=!0,i.preventDefault())};var r=se();V("keydown",L,n),V("keyup",L,y),V("pointerdown",L,v);var l=j(r);U(l,{title:"TapTempo",description:"Tap Tempo Metronome",iconPath:"/tap_tempo.png"});var k=p(l,2),d=p(h(k),2);let b;var D=h(d,!0);I(2),g(d);var w=p(d,2),_=h(w);_.__click=u;var x=p(_,2);x.__click=[ne,e];var E=h(x);g(x),g(w);var P=p(w,2);ee(P,{get taps(){return a(o).taps},get keptDuration(){return a(o).keptDuration},get pause(){return a(e)}});var q=p(P,2);oe(q,{get currentBpm(){return a(o).bpm}}),g(k),z(i=>{b=B(d,1,"bpm svelte-1t43gmp",null,b,i),A(D,a(o).bpm),A(E,`${(a(e)?"Play":"Pause")??""} (Enter)`)},[()=>({tapped:a(c)})]),S(f,r),W()}O(["click"]);export{ye as component};
