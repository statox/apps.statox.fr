import"../chunks/DsnmJJEf.js";import{o as De}from"../chunks/CSozHYSm.js";import{h as D,T as He,bx as Se,g as e,i as u,b7 as ke,p as _e,b as oe,f as he,e as h,s as b,n as fe,r as d,a as O,d as be,c as we,by as Ee,t as ae,aI as k,C as Te}from"../chunks/DkXSg9Km.js";import{d as xe,s as te,e as ne}from"../chunks/Cyetx9DU.js";import{i as Ae}from"../chunks/Dw7qq8GU.js";import{a as B,s as se,b as me,r as ge}from"../chunks/yH9QFfND.js";import{b as Ie,c as $e}from"../chunks/Cgdikhq7.js";import{b as We}from"../chunks/CT0M2yHO.js";import{s as Ve,a as Fe}from"../chunks/Chs2GqvL.js";import{M as Ue}from"../chunks/qNvLz8AQ.js";import{t as pe}from"../chunks/B_ZMb8oH.js";import{e as V,i as U}from"../chunks/DZfzBhg_.js";import{p as ze}from"../chunks/BT1R3jne.js";import{M as Be}from"../chunks/CLLwXVC1.js";import{P as qe,a as Le,e as Me,p as Ge}from"../chunks/-PFtY_iv.js";import"../chunks/CQQT6HDV.js";import"../chunks/B2IgHgbZ.js";import{p as Ne}from"../chunks/vRHFL2XH.js";/* empty css                */import"../chunks/DVKWB0F4.js";import{g as Pe}from"../chunks/Ddf1Vqpa.js";import{p as je}from"../chunks/COzfbDu2.js";import{D as Ze}from"../chunks/CkcISRbr.js";var Je=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Ke=["difference","intersection","symmetricDifference","union"],Ce=!1;class de extends Set{#s=new Map;#e=D(0);#t=D(0);#n=Se||-1;constructor(n){if(super(),n){for(var i of n)super.add(i);this.#t.v=super.size}Ce||this.#a()}#r(n){return Se===this.#n?D(n):He(n)}#a(){Ce=!0;var n=de.prototype,i=Set.prototype;for(const m of Je)n[m]=function(...f){return e(this.#e),i[m].apply(this,f)};for(const m of Ke)n[m]=function(...f){e(this.#e);var H=i[m].apply(this,f);return new de(H)}}has(n){var i=super.has(n),m=this.#s,f=m.get(n);if(f===void 0){if(!i)return e(this.#e),!1;f=this.#r(!0),m.set(n,f)}return e(f),i}add(n){return super.has(n)||(super.add(n),u(this.#t,super.size),ke(this.#e)),this}delete(n){var i=super.delete(n),m=this.#s,f=m.get(n);return f!==void 0&&(m.delete(n),u(f,!1)),i&&(u(this.#t,super.size),ke(this.#e)),i}clear(){if(super.size!==0){super.clear();var n=this.#s;for(var i of n.values())u(i,!1);n.clear(),u(this.#t,0),ke(this.#e)}}keys(){return this.values()}values(){return e(this.#e),super.values()}entries(){return e(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return e(this.#t)}}const Qe=!1,Xe=!0,Ye=!1,zt=Object.freeze(Object.defineProperty({__proto__:null,csr:Xe,prerender:Qe,ssr:Ye},Symbol.toStringTag,{value:"Module"})),re={fearful:{_color:"#FFA726",scared:{helpless:{en:"helpless"},frightened:{en:"frightened"}},anxious:{apprehensive:{en:"apprehensive"},worried:{en:"worried"}},insecure:{inadequate:{en:"inadequate"},"self-conscious":{en:"self-conscious"}},weak:{worthless:{en:"worthless"},insignificant:{en:"insignificant"}},rejected:{excluded:{en:"excluded"},persecuted:{en:"persecuted"}},threatened:{nervous:{en:"nervous"},exposed:{en:"exposed"}}},angry:{_color:"#EF5350","let down":{betrayed:{en:"betrayed"},resentful:{en:"resentful"}},humiliated:{disrespected:{en:"disrespected"},ridiculed:{en:"ridiculed"}},bitter:{indignant:{en:"indignant"},violated:{en:"violated"}},mad:{furious:{en:"furious"},jealous:{en:"jealous"}},aggressive:{provoked:{en:"provoked"},hostile:{en:"hostile"}},frustrated:{infuriated:{en:"infuriated"},annoyed:{en:"annoyed"}},distant:{withdrawn:{en:"withdrawn"},numb:{en:"numb"}},critical:{skeptical:{en:"skeptical"},dismissive:{en:"dismissive"}}},disgusted:{_color:"#9E9E9E",disapproving:{judgmental:{en:"judgmental"},disdainful:{en:"disdainful"}},disappointed:{appalled:{en:"appalled"},revolted:{en:"revolted"}},awful:{nauseated:{en:"nauseated"},detestable:{en:"detestable"}},repelled:{horrified:{en:"horrified"},hesitant:{en:"hesitant"}}},sad:{_color:"#42A5F5",lonely:{isolated:{en:"isolated"},abandoned:{en:"abandoned"}},vulnerable:{victimized:{en:"victimized"},fragile:{en:"fragile"}},despair:{grief:{en:"grief"},powerless:{en:"powerless"}},guilty:{ashamed:{en:"ashamed"},remorseful:{en:"remorseful"}},depressed:{inferior:{en:"inferior"},empty:{en:"empty"}},hurt:{embarrassed:{en:"embarrassed"},discouraged:{en:"discouraged"}}},happy:{_color:"#FFEB3B",interested:{curious:{en:"curious"},inquisitive:{en:"inquisitive"}},proud:{successful:{en:"successful"},confident:{en:"confident"}},accepted:{respected:{en:"respected"},valued:{en:"valued"}},powerful:{courageous:{en:"courageous"},creative:{en:"creative"}},peaceful:{loving:{en:"loving"},thankful:{en:"thankful"}},trusting:{sensitive:{en:"sensitive"},intimate:{en:"intimate"}},optimistic:{hopeful:{en:"hopeful"},inspired:{en:"inspired"}},playful:{aroused:{en:"aroused"},cheeky:{en:"cheeky"}},content:{free:{en:"free"},joyful:{en:"joyful"}}},surprised:{_color:"#AB47BC",startled:{shocked:{en:"shocked"},dismayed:{en:"dismayed"}},confused:{disillusioned:{en:"disillusioned"},perplexed:{en:"perplexed"}},amazed:{astonished:{en:"astonished"},awe:{en:"awe"}},excited:{eager:{en:"eager"},energetic:{en:"energetic"}}},bad:{_color:"#66BB6A",bored:{indifferent:{en:"indifferent"},apathetic:{en:"apathetic"}},busy:{pressured:{en:"pressured"},rushed:{en:"rushed"}},stressed:{overwhelmed:{en:"overwhelmed"},"out of control":{en:"out of control"}},tired:{sleepy:{en:"sleepy"},unfocused:{en:"unfocused"}}}};var Re=Ee('<g class="emotion-wedge"><path></path><text class="emotion-text svelte-is5esu" text-anchor="middle" dominant-baseline="middle"> </text></g>'),et=Ee('<g class="subcategory-wedge"><path></path><text class="subcategory-text svelte-is5esu" text-anchor="middle" dominant-baseline="middle"> </text></g>'),tt=Ee('<g class="category-wedge"><path></path><text class="category-text svelte-is5esu" text-anchor="middle" dominant-baseline="middle"> </text></g>'),st=oe('<button class="selection-item svelte-is5esu"> </button>'),nt=oe('<div class="emotion-wheel-container svelte-is5esu"><svg viewBox="0 0 100 100" class="wheel svelte-is5esu"><!><!><!><circle cx="50" cy="50" r="0" class="center-circle svelte-is5esu"></circle></svg></div> <div class="selection svelte-is5esu"></div>',1);function rt(K,n){_e(n,!0);const i=()=>[...n.selection].map(o=>{const[t,r,s,l]=o.split(" - ");return{category:t,subcategory:r,emotion:s,color:l}}),m=o=>{const t=[o.category,o.subcategory,o.emotion,o.color].join(" - ");n.selection.has(t)?n.selection.delete(t):n.selection.add(t)};function f(){const o=[];let t=0;Object.keys(re).forEach(s=>{let l=0;Object.keys(re[s]).filter(c=>!c.startsWith("_")).forEach(c=>{l+=Object.keys(re[s][c]).length});const a=re[s]._color||"#CCCCCC";o.push({name:s,color:a,emotionCount:l,startAngle:0,endAngle:0,subcategories:[]}),t+=l});let r=0;return o.forEach(s=>{const l=s.emotionCount/t*360;s.startAngle=r,s.endAngle=r+l;let a=r;Object.keys(re[s.name]).filter(c=>!c.startsWith("_")).forEach(c=>{const v=Object.keys(re[s.name][c]),x=v.length/s.emotionCount*l;s.subcategories.push({name:c,startAngle:a,endAngle:a+x,emotions:v}),a+=x}),r+=l}),o}const H=f();function I(o,t){const r=parseInt(o.replace("#",""),16),s=Math.min(255,Math.floor((r>>16)+(255-(r>>16))*t/100)),l=Math.min(255,Math.floor((r>>8&255)+(255-(r>>8&255))*t/100)),a=Math.min(255,Math.floor((r&255)+(255-(r&255))*t/100));return"#"+(s<<16|l<<8|a).toString(16).padStart(6,"0")}let y=D(null),_=D(null),p=D(null);function A(o,t,r){u(y,o,!0),u(_,t,!0),u(p,r,!0)}function M(o,t){u(y,o,!0),u(_,t,!0),u(p,null)}function q(o){u(y,o,!0),u(_,null),u(p,null)}function Q(){u(y,null),u(_,null),u(p,null)}function Z(o,t,r,s,l=50,a=50){const c=(o-90)*Math.PI/180,v=(t-90)*Math.PI/180,x=l+r*Math.cos(c),E=a+r*Math.sin(c),S=l+s*Math.cos(c),F=a+s*Math.sin(c),z=l+s*Math.cos(v),L=a+s*Math.sin(v),W=l+r*Math.cos(v),P=a+r*Math.sin(v),G=t-o>180?1:0;return`
            M ${x} ${E}
            L ${S} ${F}
            A ${s} ${s} 0 ${G} 1 ${z} ${L}
            L ${W} ${P}
            A ${r} ${r} 0 ${G} 0 ${x} ${E}
            Z
        `}function J(o,t,r){const s=(o+t)/2,l=(s-90)*Math.PI/180,a=50+r*Math.cos(l),c=50+r*Math.sin(l),v=s<180?s-90:s+90;return{x:a,y:c,rotation:v}}var ye={getEmotionsData:i},$=nt(),g=he($),j=h(g),C=h(j);V(C,17,()=>H,U,(o,t)=>{var r=we(),s=he(r);V(s,17,()=>e(t).subcategories,U,(l,a)=>{const c=k(()=>(e(a).endAngle-e(a).startAngle)/e(a).emotions.length);var v=we(),x=he(v);V(x,17,()=>e(a).emotions,U,(E,S,F)=>{const z=k(()=>e(a).startAngle+F*e(c)),L=k(()=>e(a).startAngle+(F+1)*e(c)),W=k(()=>Z(e(z),e(L),30,47)),P=k(()=>J(e(z),e(L),38.5)),G=k(()=>e(p)===e(S)),ie=k(()=>[...n.selection].find(le=>le.includes(e(S))));var N=Re();N.__click=()=>m({category:e(t).name,subcategory:e(a).name,emotion:e(S),color:e(t).color});var R=h(N);let ue;var ee=b(R),ve=h(ee,!0);d(ee),d(N),ae(()=>{B(R,"d",e(W)),ue=se(R,0,"emotion-path svelte-is5esu",null,ue,{highlighted:e(G),selected:e(ie)}),me(R,`fill: ${e(t).color??""};`),B(ee,"x",e(P).x),B(ee,"y",e(P).y),B(ee,"transform",`rotate(${e(P).rotation??""} ${e(P).x??""} ${e(P).y??""})`),te(ve,e(S))}),ne("mouseenter",N,()=>A(e(t).name,e(a).name,e(S))),ne("mouseleave",N,Q),O(E,N)}),O(l,v)}),O(o,r)});var T=b(C);V(T,17,()=>H,U,(o,t)=>{var r=we(),s=he(r);V(s,17,()=>e(t).subcategories,U,(l,a)=>{const c=k(()=>Z(e(a).startAngle,e(a).endAngle,17,30)),v=k(()=>J(e(a).startAngle,e(a).endAngle,23.5)),x=k(()=>e(_)===e(a).name&&e(y)===e(t).name),E=k(()=>[...n.selection].find(G=>G.includes(e(a).name))),S=k(()=>I(e(t).color,30));var F=et(),z=h(F);let L;var W=b(z),P=h(W,!0);d(W),d(F),ae(()=>{B(z,"d",e(c)),L=se(z,0,"subcategory-path svelte-is5esu",null,L,{highlighted:e(x),selected:e(E)}),me(z,`fill: ${e(S)??""};`),B(W,"x",e(v).x),B(W,"y",e(v).y),B(W,"transform",`rotate(${e(v).rotation??""} ${e(v).x??""} ${e(v).y??""})`),te(P,e(a).name)}),ne("mouseenter",F,()=>M(e(t).name,e(a).name)),ne("mouseleave",F,Q),O(l,F)}),O(o,r)});var X=b(T);V(X,17,()=>H,U,(o,t)=>{const r=k(()=>Z(e(t).startAngle,e(t).endAngle,0,17)),s=k(()=>J(e(t).startAngle,e(t).endAngle,8.5)),l=k(()=>e(y)===e(t).name),a=k(()=>[...n.selection].find(F=>F.includes(e(t).name)));var c=tt(),v=h(c);let x;var E=b(v),S=h(E,!0);d(E),d(c),ae(()=>{B(v,"d",e(r)),x=se(v,0,"category-path svelte-is5esu",null,x,{highlighted:e(l),selected:e(a)}),me(v,`fill: ${e(t).color??""};`),B(E,"x",e(s).x),B(E,"y",e(s).y),B(E,"transform",`rotate(${e(s).rotation??""} ${e(s).x??""} ${e(s).y??""})`),te(S,e(t).name)}),ne("mouseenter",c,()=>q(e(t).name)),ne("mouseleave",c,Q),O(o,c)}),fe(),d(j),d(g);var Y=b(g,2);return V(Y,21,()=>[...n.selection],U,(o,t)=>{const r=k(()=>{const[a,c,v,x]=e(t).split(" - ");return{category:a,subcategory:c,emotion:v,color:x}});var s=st();s.__click=()=>n.selection.delete(e(t));var l=h(s);d(s),ae(()=>{me(s,`--color: ${e(r).color??""}`),te(l,`${e(r).category??""}
            ${e(r).subcategory??""}
            ${e(r).emotion??""}`)}),O(o,s)}),d(Y),O(K,$),be(ye)}xe(["click"]);var at=oe("<button> </button>"),ot=oe('<div><h4>Mood</h4> <!> <div class="options-container svelte-s4m3ot"></div></div>');function it(K,n){_e(n,!0);let i=ze(n,"value",15,5),m=Te([]);var f=ot(),H=b(h(f),2);V(H,17,()=>m,U,(y,_)=>{Be(y,{get item(){return e(_)}})});var I=b(H,2);V(I,20,()=>[1,2,3,4,5,6,7,8,9,10],U,(y,_)=>{var p=at();p.__click=()=>i(_);let A;var M=h(p,!0);d(p),ae(()=>{A=se(p,1,"",null,A,{selected:i()===_}),te(M,_)}),O(y,p)}),d(I),d(f),O(K,f),be()}xe(["click"]);var lt=oe('<div><h4>Weight</h4> <!> <div class="input-container svelte-1st4ez6"><button class="svelte-1st4ez6">-</button> <input type="number" step="0.1" class="svelte-1st4ez6"/> <button class="svelte-1st4ez6">+</button></div></div>');function ct(K,n){_e(n,!0);let i=ze(n,"value",15,100),m=D(Te([]));var I={validate:()=>(u(m,[],!0),i()!==Number(i().toFixed(1))&&e(m).push({level:"error",header:"Value have at most 1 number after the comma"}),(i()<80||i()>110)&&e(m).push({level:"error",header:"Value must be in kg"}),e(m).length===0),getStorageValue:()=>Math.floor(i()*100)},y=lt(),_=b(h(y),2);V(_,17,()=>e(m),U,(Q,Z)=>{Be(Q,{get item(){return e(Z)}})});var p=b(_,2),A=h(p);A.__click=()=>i(Number((i()-.1).toFixed(2)));var M=b(A,2);ge(M);var q=b(M,2);return q.__click=()=>i(Number((i()+.1).toFixed(2))),d(p),d(y),Ie(M,i),O(K,y),be(I)}xe(["click"]);var dt=oe('<div class="contents svelte-10367lt"><h4 class="title-bar svelte-10367lt"> <button>Back</button></h4> <div><div class="section-header svelte-10367lt"><label class="svelte-10367lt"><input type="checkbox" class="svelte-10367lt"/> <span class="section-title svelte-10367lt">Emotions</span></label></div> <!></div> <hr class="separator svelte-10367lt"/> <div><div class="section-header svelte-10367lt"><label class="svelte-10367lt"><input type="checkbox" class="svelte-10367lt"/> <span class="section-title svelte-10367lt">Mood</span></label></div> <!></div> <hr class="separator svelte-10367lt"/> <div><div class="section-header svelte-10367lt"><label class="svelte-10367lt"><input type="checkbox" class="svelte-10367lt"/> <span class="section-title svelte-10367lt">Weight</span></label></div> <!></div> <hr class="separator svelte-10367lt"/> <div class="submit-container svelte-10367lt"><button class="form-action"> </button></div></div>');function Bt(K,n){_e(n,!0);const i=()=>Fe(Ge,"$personalTrackerPassword",f),m=()=>Fe(Me,"$eventsStore",f),[f,H]=Ve();Ne.set({name:"Personal Tracker",iconPath:"/personal_tracker.png",showAuthInHeader:!0});let I=D(5),y=D(100),_=new de,p=D(!1),A=D(!1),M=D(!1),q;const Q=()=>Ze.now().toUTC().startOf("day").toUnixInteger(),Z=()=>{const $=je.params.timestamp;if($){const g=parseInt($,10);if(!isNaN(g))return g}return Q()},J=k(()=>!!je.params.timestamp);De(async()=>{try{await Me.fetch(i());const $=Z(),g=m().events.find(j=>j.eventDateUnix===$);if(g&&(g.mood!==void 0&&(u(I,g.mood,!0),u(p,!0)),g.weight!==void 0&&(u(y,g.weight/100),u(A,!0)),g.emotionwheel?.emotions)){const j=new de;g.emotionwheel.emotions.forEach(C=>{const T=[C.category,C.subcategory,C.emotion,C.color].join(" - ");j.add(T)}),_.clear(),j.forEach(C=>_.add(C)),u(M,!0)}}catch($){console.error("Failed to load existing event:",$),pe.push("Failed to load existing event",{theme:{"--toastBarBackground":"#FFA500"}})}});const ye=async()=>{if(!e(p)&&!e(A)&&!e(M)){pe.push("Please enable at least one section to submit",{theme:{"--toastBarBackground":"#FFA500"}});return}if(e(A)&&q&&!q.validate())return;const $={};if(e(p)&&($.mood=e(I)),e(A)&&($.weight=q.getStorageValue()),e(M)&&_.size>0){const g=[..._].map(j=>{const[C,T,X,Y]=j.split(" - ");return{category:C,subcategory:T,emotion:X,color:Y}});$.emotionwheel={emotions:g}}try{const g=Z();await Le($,i(),g),Me.invalidate(),Pe("/personal-tracker"),pe.push(e(J)?"Entry updated":"Entry created")}catch(g){let j=g.message;const T=`<strong>Entry not ${e(J)?"updated":"created"}</strong><br/> ${j}`;pe.push(T,{theme:{"--toastBarBackground":"#FF0000"}})}};Ue(K,{message:"Login to add an entry",children:($,g)=>{qe($,{children:(j,C)=>{var T=dt(),X=h(T),Y=h(X),o=b(Y);o.__click=()=>{Pe("/personal-tracker")},d(X);var t=b(X,2);let r;var s=h(t),l=h(s),a=h(l);ge(a),fe(2),d(l),d(s);var c=b(s,2);{var v=w=>{rt(w,{get selection(){return _}})};Ae(c,w=>{e(M)&&w(v)})}d(t);var x=b(t,4);let E;var S=h(x),F=h(S),z=h(F);ge(z),fe(2),d(F),d(S);var L=b(S,2);{var W=w=>{it(w,{get value(){return e(I)},set value(ce){u(I,ce,!0)}})};Ae(L,w=>{e(p)&&w(W)})}d(x);var P=b(x,4);let G;var ie=h(P),N=h(ie),R=h(N);ge(R),fe(2),d(N),d(ie);var ue=b(ie,2);{var ee=w=>{We(ct(w,{get value(){return e(y)},set value(ce){u(y,ce,!0)}}),ce=>q=ce,()=>q)};Ae(ue,w=>{e(A)&&w(ee)})}d(P);var ve=b(P,4),le=h(ve);le.__click=ye;var Oe=h(le,!0);d(le),d(ve),d(T),ae(()=>{te(Y,`${e(J)?"Edit Entry":"Today's Personal Metrics"} `),r=se(t,1,"input-form svelte-10367lt",null,r,{disabled:!e(M)}),E=se(x,1,"input-form svelte-10367lt",null,E,{disabled:!e(p)}),G=se(P,1,"input-form svelte-10367lt",null,G,{disabled:!e(A)}),te(Oe,e(J)?"Update Entry":"Create Entry")}),$e(a,()=>e(M),w=>u(M,w)),$e(z,()=>e(p),w=>u(p,w)),$e(R,()=>e(A),w=>u(A,w)),O(j,T)},$$slots:{default:!0}})},$$slots:{default:!0}}),be(),H()}xe(["click"]);export{Bt as component,zt as universal};
