import"../chunks/DsnmJJEf.js";import"../chunks/CTZYrxuF.js";import{p as Q,c as G,f as _,a,d as R,b as l,g as r,I as J,s as d,e as v,r as i,t as P,j as g}from"../chunks/a6R6ZExM.js";import{d as V,s as D}from"../chunks/CQsW2AK8.js";import{i as X}from"../chunks/CN9CHvWo.js";import{M as he}from"../chunks/DK1iJMIN.js";import{M as $e}from"../chunks/C2HpBzTc.js";import{o as xe}from"../chunks/BNOjIaqR.js";import{i as f}from"../chunks/BsOe4k0P.js";import{e as K,i as N}from"../chunks/BREkJFxE.js";import{a as ye}from"../chunks/CPtmBTpt.js";import{s as ke,a as W}from"../chunks/DaQ1DA65.js";import{u as be}from"../chunks/CSvCa2ro.js";import{M as Me}from"../chunks/DQSBwwkY.js";import"../chunks/RZZgkjFT.js";import"../chunks/Cf5lmGS0.js";import{e as O,p as we,P as Pe}from"../chunks/Bgj1qZP8.js";import{D as De}from"../chunks/CkcISRbr.js";import{g as Y}from"../chunks/CdHaeIBU.js";import"../chunks/VhRqvfRi.js";import{p as Se}from"../chunks/CdbuI7CR.js";/* empty css                */var Te=l("<p>Loading events</p>"),Ee=l('<button class="emotion-item svelte-cyscl8"> </button>'),Le=l('<div class="selection svelte-cyscl8"></div>'),Ue=l('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-value svelte-cyscl8"><!></div> <div class="event-value svelte-cyscl8"><!></div> <div class="event-value svelte-cyscl8"><!></div> <div class="event-actions svelte-cyscl8"><button class="svelte-cyscl8">Edit</button></div></div>'),Ae=l('<div class="events-header svelte-cyscl8"><div>Date</div> <div>Mood</div> <div>Weight</div> <div>Emotions</div> <div>Actions</div></div> <!>',1);function He(S,T){Q(T,!1);const c=()=>W(we,"$personalTrackerPassword",u),h=()=>W(be,"$user",u),n=()=>W(O,"$eventsStore",u),[u,E]=ke();xe(()=>{O.fetch(c())});const z=s=>{Y(`/personal-tracker/add/${s}`)};X();var $=G(),B=_($);{var x=s=>{var y=G(),L=_(y);{var Z=m=>{var k=Te();a(m,k)},ee=m=>{var k=G(),te=_(k);{var ae=p=>{{let b=J(()=>({level:"error",header:"Something went wrong getting events",message:n().error.message}));Me(p,{get item(){return r(b)}})}},re=p=>{var b=Ae(),oe=d(_(b),2);K(oe,1,()=>n().events.sort((U,o)=>o.eventDateUnix-U.eventDateUnix),N,(U,o)=>{const se=J(()=>De.fromSeconds(r(o).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var A=Ue(),H=v(A),ie=v(H,!0);i(H);var q=d(H,2),ve=v(q);{var ne=e=>{var t=g();P(()=>D(t,r(o).mood)),a(e,t)},de=e=>{var t=g("-");a(e,t)};f(ve,e=>{r(o).mood!==void 0?e(ne):e(de,!1)})}i(q);var F=d(q,2),le=v(F);{var ce=e=>{var t=g();P(j=>D(t,`${j??""} kg`),[()=>(r(o).weight/100).toFixed(1)]),a(e,t)},me=e=>{var t=g("-");a(e,t)};f(le,e=>{r(o).weight!==void 0?e(ce):e(me,!1)})}i(F);var I=d(F,2),pe=v(I);{var fe=e=>{var t=Le();K(t,5,()=>r(o).emotionwheel.emotions,N,(j,M)=>{var w=Ee(),ge=v(w);i(w),P(()=>{ye(w,`--color: ${r(M).color??""}`),D(ge,`${r(M).category??""}
                                    ${r(M).subcategory??""}
                                    ${r(M).emotion??""}`)}),a(j,w)}),i(t),a(e,t)},_e=e=>{var t=g("-");a(e,t)};f(pe,e=>{r(o).emotionwheel?.emotions?e(fe):e(_e,!1)})}i(I);var C=d(I,2),ue=v(C);ue.__click=()=>z(r(o).eventDateUnix),i(C),i(A),P(()=>D(ie,r(se))),a(U,A)}),a(p,b)};f(te,p=>{n().error?p(ae):p(re,!1)},!0)}a(m,k)};f(L,m=>{n().loading?m(Z):m(ee,!1)})}a(s,y)};f(B,s=>{h()&&s(x)})}a(S,$),R(),E()}V(["click"]);var qe=l("<div><button>Add an entry</button></div> <!>",1),Fe=l("<!> <!>",1);function st(S,T){Q(T,!1);const c={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};Se.set(c),X();var h=Fe(),n=_(h);$e(n,{get title(){return c.name},get description(){return c.description},get iconPath(){return c.iconPath}});var u=d(n,2);he(u,{message:"Login to see events",requiredScope:"admin",children:(E,z)=>{Pe(E,{children:($,B)=>{var x=qe(),s=_(x),y=v(s);y.__click=()=>Y("/personal-tracker/add"),i(s);var L=d(s,2);He(L,{}),a($,x)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(S,h),R()}V(["click"]);export{st as component};
