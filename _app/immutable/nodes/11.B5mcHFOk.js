import"../chunks/CWj6FrbW.js";import{i as C}from"../chunks/DoJ6nzXR.js";import{p as y,aB as t,w as d,aC as o,k as I,a7 as S,n as B,g as i,v as H}from"../chunks/CLwkvAa9.js";import{t as b,a as w}from"../chunks/DTjFRfZP.js";import{a as D}from"../chunks/D70CLPPX.js";import"../chunks/wh3Jk2pq.js";import"../chunks/Bl5nm9B-.js";import{A as r,g as V}from"../chunks/r2Ic3Yyo.js";import{a as R}from"../chunks/Ct5AeG1w.js";import{M as K}from"../chunks/BsEu9Qde.js";import{p as J}from"../chunks/C6GvbNo4.js";import{M as j}from"../chunks/B0n3PbH2.js";import{s as h}from"../chunks/Cc5B25b1.js";import{a as U,b as Y}from"../chunks/vB8enBEs.js";import{p as T}from"../chunks/qY3aL9mB.js";import{i as Z}from"../chunks/CxmqhxOM.js";import{e as O,i as $}from"../chunks/D8fgoJlV.js";const q=a=>{if(a===r.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(a===r.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(a===r.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(a===r.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(a===r.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(a===r.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(a===r.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(a===r.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},aa=a=>{if(a===r.NEW)return"moon_phase_icons/1_new_moon.png";if(a===r.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(a===r.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(a===r.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(a===r.FULL)return"moon_phase_icons/5_full_moon.png";if(a===r.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(a===r.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(a===r.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},ea=async()=>{const a=await V(),{moonState:l,sunState:e,upcomingLunarStates:s}=a;return{moonState:l,sunState:{goldenHour:R.fromMillis(e.goldenHour),solarNoon:R.fromMillis(e.solarNoon),sunrise:R.fromMillis(e.sunrise),sunset:R.fromMillis(e.sunset)},upcomingLunarStates:s.map(m=>({date:R.fromMillis(m.tsMillis),lunarState:{...m.lunarState,phasePictureUrl:q(m.lunarState.moonPhase)}}))}};var ta=b('<div class="container svelte-rmbwp1"><div class="content svelte-rmbwp1"><div class="data svelte-rmbwp1"><span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span>Sun rise/set</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-rmbwp1"></div></div>');function oa(a,l){y(l,!1);let e=T(l,"moonState",8),s=T(l,"sunState",8);C();var m=ta(),E=t(m),p=t(E),n=d(t(p),2),_=t(n,!0);o(n);var v=d(n,4),g=t(v);o(v);var u=d(v,4),N=t(u);o(u);var c=d(u,4),L=t(c);o(c);var A=d(c,4),M=t(A,!0);o(A);var f=d(A,4),k=t(f,!0);o(f),o(p);var P=d(p,2);o(E),o(m),I((x,W,F,G,z,Q,X)=>{h(_,e().moonPhaseFr),h(g,`${x??""} days (${W??""}%)`),h(N,`${e().moonVisibilityWindow[0]??""} - ${e().moonVisibilityWindow[1]??""}`),h(L,`${F??""} - ${G??""}`),h(M,z),h(k,Q),U(P,"alt",e().moonPhase),U(P,"src",X)},[()=>e().lunarAge.toFixed(1),()=>(e().lunarAgePercent*100).toFixed(0),()=>s().sunrise.toFormat("HH:mm"),()=>s().sunset.toFormat("HH:mm"),()=>s().solarNoon.toFormat("HH:mm"),()=>s().goldenHour.toFormat("HH:mm"),()=>q(e().moonPhase)],S),w(a,m),B()}var ra=b('<div class="day-header svelte-1baztfi"> </div>'),na=b("<div> </div> <div> </div>",1),ia=b('<div><div><img class="phase-img svelte-1baztfi"></div> <!></div>'),sa=b('<div class="container svelte-1baztfi"><!> <!></div>');function ma(a,l){y(l,!1);let e=T(l,"upcomingLunarStates",8);C();var s=sa(),m=t(s);O(m,1,()=>e().slice(0,7),$,(p,n)=>{let _=()=>i(n).date;var v=ra(),g=t(v,!0);o(v),I(u=>h(g,u),[()=>_().setLocale("fr").toLocaleString({weekday:"long"})],S),w(p,v)});var E=d(m,2);O(E,1,e,$,(p,n,_)=>{let v=()=>i(n).date,g=()=>i(n).lunarState;var u=ia();const N=S(()=>_===0||_===29||e()[_-1].lunarState.moonPhaseFr!==g().moonPhaseFr);var c=t(u),L=t(c);o(c);var A=d(c,2);{var M=f=>{var k=na(),P=H(k),x=t(P,!0);o(P);var W=d(P,2),F=t(W,!0);o(W),I(G=>{h(x,G),h(F,g().moonPhaseFr)},[()=>v().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})],S),w(f,k)};Z(A,f=>{i(N)&&f(M)})}o(u),I(f=>{Y(u,1,`entry ${i(N)?"important-day":"other-day"}`,"svelte-1baztfi"),U(L,"alt",g().moonPhase),U(L,"src",f)},[()=>aa(g().moonPhase)],S),w(p,u)}),o(s),w(a,s),B()}var pa=b("<!> <br> <!> <br> <!>",1),_a=b("<p>Loading ephemerides data</p>"),da=b('<!> <div class="content"><!></div>',1);function Ra(a,l){y(l,!1),J.set("Ephemerides"),C();var e=da(),s=H(e);K(s,{title:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"});var m=d(s,2),E=t(m);D(E,ea,p=>{var n=_a();w(p,n)},(p,n)=>{var _=S(()=>{var{moonState:M,sunState:f,upcomingLunarStates:k}=i(n);return{moonState:M,sunState:f,upcomingLunarStates:k}}),v=S(()=>i(_).moonState),g=S(()=>i(_).sunState),u=S(()=>i(_).upcomingLunarStates),N=pa(),c=H(N);oa(c,{get moonState(){return i(v)},get sunState(){return i(g)}});var L=d(c,4);ma(L,{get upcomingLunarStates(){return i(u)}});var A=d(L,4);j(A,{item:{level:"info",message:"All data is computed for Paris, France"}}),w(p,N)},(p,n)=>{const _=S(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:i(n)}));j(p,{get item(){return i(_)}})}),o(m),w(a,e),B()}export{Ra as component};
