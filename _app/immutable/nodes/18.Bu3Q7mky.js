import"../chunks/disclose-version.Bg9kRutz.js";import{i as z}from"../chunks/legacy.OjKiwS2-.js";import{p as N,aY as G,an as I,ao as U,x as W,s as d,g as t,al as m,am as h,ap as S,B as Y,z as p,y as j,w as x,ac as V,aZ as K,A as Z}from"../chunks/index-client.CflxByDC.js";import{s as T}from"../chunks/render.BKP2kCYY.js";import{a as q,t as E,f as P}from"../chunks/template.BNipMNgO.js";import{t as C}from"../chunks/service.CBRyajoN.js";import{M as H}from"../chunks/Main.DhtiWXg0.js";import{p as D}from"../chunks/props.B1tCRvRm.js";import{P as J}from"../chunks/P5.DPIc4DlI.js";import{e as O,i as Q}from"../chunks/each.Z673LCtr.js";import{T as X}from"../chunks/TapTempo.vaCicukU.js";import{p as ee}from"../chunks/Main.svelte_svelte_type_style_lang.BD4FPZbz.js";var te=E('<div id="canvas-container" class="d-flex justify-content-center"><!></div>');function ae(A,g){N(g,!1);let a=S(),f=D(g,"keptDuration",8),v=D(g,"taps",8),w=D(g,"pause",8);const s=e=>{e.setup=()=>{d(a,e),e.createCanvas(600,100)},e.draw=()=>{const n=document.getElementById("canvas-container");if(n){const i=(n==null?void 0:n.clientWidth)||600;e.width!==i&&e.resizeCanvas(i,100);const r=getComputedStyle(document.body),y=r.getPropertyValue("--nc-bg-2")||"white",k=r.getPropertyValue("--nc-tx-1")||"black";e.background(y),e.stroke(k)}const c=Date.now(),b=c-f();for(const i of v()){const r=e.map(i,c,b,e.width,0);e.line(r,0,r,e.height)}}};G(()=>{var e;(e=t(a))==null||e.remove()}),I(()=>(Y(w()),t(a)),()=>{var e,n;w()?(e=t(a))==null||e.noLoop():(n=t(a))==null||n.loop()}),U(),z();var l=te(),o=m(l);J(o,{sketch:s}),h(l),q(A,l),W()}var oe=E('<span class="col svelte-1kxd0qm"> </span> <span class="col svelte-1kxd0qm"> </span> <span class="col svelte-1kxd0qm"> </span>',1),se=E('<div class="container svelte-1kxd0qm"><span class="col table-head svelte-1kxd0qm">BPM</span> <span class="col table-head svelte-1kxd0qm">Tempo</span> <span class="col table-head svelte-1kxd0qm">Description</span> <!></div>');function ne(A,g){let a=D(g,"currentBpm",8);const f=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],v=(o,e)=>o>(e.low??0)&&o<=(e.high??9999),w=o=>{if(o.high&&o.low)return`${o.low} - ${o.high}`;if(o.low)return`>${o.low}`;if(o.high)return`<${o.high}`};var s=se(),l=p(m(s),6);O(l,1,()=>f,Q,(o,e)=>{var n=oe(),c=j(n);const b=V(()=>v(a(),t(e)));x(()=>C(c,"selected",t(b)));var i=m(c,!0);x(()=>T(i,w(t(e)))),h(c);var r=p(c,2);const y=V(()=>v(a(),t(e)));x(()=>C(r,"selected",t(y)));var k=m(r,!0);h(r);var _=p(r,2);const M=V(()=>v(a(),t(e)));x(()=>C(_,"selected",t(M)));var B=m(_,!0);h(_),x(()=>{T(k,t(e).name),T(B,t(e).description)}),q(o,n)}),h(s),q(A,s)}var re=E('<!> <div class="container svelte-1t43gmp"><div>Press the space bar or click/tap anywhere on the page to get a bpm.</div> <div class="bpm svelte-1t43gmp"> <br>BPM</div> <div class="controls svelte-1t43gmp"><button class="control-button svelte-1t43gmp">Reset (c)</button> <button class="control-button svelte-1t43gmp"> </button></div> <!> <!></div>',1);function _e(A,g){N(g,!1),ee.set("Tap Tempo");let a=S(new X),f=S(!1);const v=()=>{t(s)||(t(a).addBeat(),d(a,t(a)),d(f,!0),setTimeout(()=>d(f,!1),100))},w=()=>{t(a).reset(),d(a,t(a))};let s=S(!1),l=!0;const o=u=>{const L=" ",R="Enter",$="c";if([L,R,$].includes(u.key)&&(u.preventDefault(),!!l)){if(l=!1,u.key===L){d(s,!1),v();return}if(u.key===R){d(s,!t(s));return}u.key===$&&(w(),d(a,t(a)))}},e=u=>{!l&&u.key===" "&&(l=!0,u.preventDefault())};z();var n=re();P("keydown",K,o),P("keyup",K,e),P("pointerdown",K,v);var c=j(n);H(c,{title:"TapTempo",description:"Tap Tempo Metronome",iconPath:"/tap_tempo.png"});var b=p(c,2),i=p(m(b),2),r=m(i,!0);Z(2),h(i);var y=p(i,2),k=m(y),_=p(k,2),M=m(_);h(_),h(y);var B=p(y,2);ae(B,{get taps(){return t(a).taps},get keptDuration(){return t(a).keptDuration},get pause(){return t(s)}});var F=p(B,2);ne(F,{get currentBpm(){return t(a).bpm}}),h(b),x(()=>{C(i,"tapped",t(f)),T(r,t(a).bpm),T(M,`${(t(s)?"Play":"Pause")??""} (Enter)`)}),P("click",k,w),P("click",_,()=>d(s,!t(s))),q(A,n),W()}export{_e as component};
