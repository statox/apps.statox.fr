var _e=Object.defineProperty;var se=t=>{throw TypeError(t)};var ge=(t,l,a)=>l in t?_e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a;var U=(t,l,a)=>ge(t,typeof l!="symbol"?l+"":l,a),he=(t,l,a)=>l.has(t)||se("Cannot "+a);var j=(t,l,a)=>(he(t,l,"read from private field"),a?a.call(t):l.get(t)),ne=(t,l,a)=>l.has(t)?se("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(t):l.set(t,a);import"../chunks/CWj6FrbW.js";import{A as X,g as Y,s as Z,C as oe,p as Se,aN as ye,B as Me,E as L,w as r,k as ke,n as ze,F as N,v as Ee}from"../chunks/B6o_wv7S.js";import{s as we}from"../chunks/FKE68SDy.js";import{i as Fe}from"../chunks/Djwtjxlo.js";import{f as xe,t as ue,a as ie}from"../chunks/CYn10qqJ.js";import{r as i}from"../chunks/DP6z5guH.js";import{b as o}from"../chunks/CDqcD15-.js";import{b as Be}from"../chunks/C4q3xt0n.js";import{M as Le}from"../chunks/DUIqsoKf.js";import{P as Ne}from"../chunks/ySrA2UDQ.js";var g;class Xe{constructor(l,a){U(this,"default");ne(this,g,X());U(this,"key","");this.key=l,this.value=a,this.default=a;{const u=localStorage.getItem(l);u&&(this.value=this.deserialize(u))}oe(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return Y(j(this,g))}set value(l){Z(j(this,g),l,!0)}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(l){return JSON.stringify(l)}deserialize(l){return JSON.parse(l)}}g=new WeakMap;function s(t,l){return new Xe(t,l)}var Ye=ue('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1">',1),Ze=ue('<div class="container svelte-1owl04f"><!> <div class="controls svelte-1owl04f"><label for="fps">FPS</label> <span> </span> <span>Grid controls</span><span></span> <label for="gridSize">gridSize</label> <input type="number" step="1"> <label for="blurEnabled">Enable blur</label> <!> <!> <span>Noise controls</span><span></span> <label for="displacementX">displacementX</label> <input type="number" step="0.01"> <label for="displacementY">displacementY</label> <input type="number" step="0.01"> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"> <span>Lines controls</span><span></span> <label for="levelsStart">levelsStart</label> <input type="number" step="0.1"> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option></select> <label for="resetAll">Reset all</label><button>Reset</button></div></div>');function We(t,l){Se(l,!0);let a=X(void 0);const u=1e3;let h=0,H=0,A=0,K=X(0);const v=s("p5-terrain-gridSize",200);let S=u/v.value;oe(()=>{S=u/v.value});let p=s("p5-terrain-blurEnabled",!1),y=s("p5-terrain-blurValue",4),M=s("p5-terrain-displacementX",0),k=s("p5-terrain-displacementY",0),z=s("p5-terrain-displacementZ",.01),d=s("p5-terrain-noiseFactor",.02),b=s("p5-terrain-levelsStart",.2),m=s("p5-terrain-levelsEnd",.8),E=s("p5-terrain-levelsStep",.05),w=s("p5-terrain-margin",.005),_=s("p5-terrain-colorMode","gradient");const ve=()=>{[v,p,y,M,k,z,d,b,m,E,w,_].forEach(n=>n.reset())},pe=(e,n,c)=>n-c<=e&&e<=n+c,ce=e=>{e.setup=()=>{Z(a,e,!0),e.createCanvas(u,u),e.noStroke()},e.draw=()=>{e.background(0);const n=Date.now();n-H>1e3&&(Z(K,A,!0),H=n,A=0),A++,h++;for(let f=0;f<v.value;f++)for(let x=0;x<v.value;x++){const me=e.noise(x*d.value+h*M.value,f*d.value+h*k.value,h*z.value);for(let B=b.value;B<=m.value;B+=E.value){if(!pe(me,B,w.value))continue;let q=255;_.value==="white"?q=255:_.value==="gradient"&&(q=e.map(B,b.value,m.value,100,255)),e.fill(q),e.circle(x*S,f*S,S)}}p.value&&e.filter(e.BLUR,y.value)}};ye(()=>{var e;(e=Y(a))==null||e.remove()});let Q=X(Me(p.value?"on":"off"));var C=Ze(),ee=L(C);Ne(ee,{sketch:ce});var le=r(ee,2),I=r(L(le),2),fe=L(I,!0);N(I);var P=r(I,7);i(P);var te=r(P,4);Le(te,{get value(){return Y(Q)},label:"",design:"slider",$$events:{change:()=>{p.value=!p.value,Z(Q,p.value?"on":"off",!0)}}});var ae=r(te,2);{var de=e=>{var n=Ye(),c=r(Ee(n),2);i(c),o(c,()=>y.value,f=>y.value=f),ie(e,n)};Fe(ae,e=>{p.value&&e(de)})}var R=r(ae,7);i(R);var V=r(R,4);i(V);var D=r(V,4);i(D);var G=r(D,4);i(G);var J=r(G,7);i(J);var O=r(J,4);i(O);var T=r(O,4);i(T);var W=r(T,4);i(W);var F=r(W,4),$=L(F);$.value=$.__value="white";var re=r($);re.value=re.__value="gradient",N(F);var be=r(F,3);be.__click=ve,N(le),N(C),ke(()=>we(fe,Y(K))),o(P,()=>v.value,e=>v.value=e),o(R,()=>M.value,e=>M.value=e),o(V,()=>k.value,e=>k.value=e),o(D,()=>z.value,e=>z.value=e),o(G,()=>d.value,e=>d.value=e),o(J,()=>b.value,e=>b.value=e),o(O,()=>m.value,e=>m.value=e),o(T,()=>E.value,e=>E.value=e),o(W,()=>w.value,e=>w.value=e),Be(F,()=>_.value,e=>_.value=e),ie(t,C),ze()}xe(["click"]);export{We as component};
