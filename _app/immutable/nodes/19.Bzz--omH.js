import"../chunks/NZTpNUN0.js";import{a as ke}from"../chunks/DkK0P85K.js";import{y as W,g as H,s as J,A as pe,x as Ee,z as ue,o as X,C as c,p as l,v as Ce,a as P,B as Fe,E as u,f as Ge}from"../chunks/DyWD_MJs.js";import{d as Le,s as Pe}from"../chunks/BavMw1sQ.js";import{i as V}from"../chunks/Do44c4MR.js";import{c as ee,r as y,b as de}from"../chunks/BPTubluR.js";import{b as M}from"../chunks/C6Ffm4eX.js";import{M as Xe}from"../chunks/DcIHaM4W.js";import{P as Ye}from"../chunks/3yfWr4Ty.js";class Ze{default;#e=W();get value(){return H(this.#e)}set value(a){J(this.#e,a,!0)}key="";constructor(a,n){this.key=a,this.value=n,this.default=n;{const o=localStorage.getItem(a);o&&(this.value=this.deserialize(o))}pe(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(a){return JSON.stringify(a)}deserialize(a){return JSON.parse(a)}}function f(t,a){return new Ze(t,a)}const Re=(t,a,n)=>a-n<=t&&t<=a+n;function qe(t,a){const n=Math.sqrt(t*t+a*a),o=Math.atan2(a,t);return{r:n,theta:o}}const xe=(t,a)=>{const{gridSize:n,colorMode:o,cellSize:x,t:Y,noiseMode:B,noiseFactor:Z,displacementX:m,displacementY:N,displacementZ:h,levelsStart:z,levelsEnd:k,levelsStep:A,levelsMargin:D}=a;t.background(0);const R=t.color(255,0,0),q=t.color(0,255,0);for(let g=0;g<n;g++)for(let S=0;S<n;S++){let _=0;if(B==="carthesian")_=t.noise(S*Z+Y*m,g*Z+Y*N,Y*h);else if(B==="polar"){const{r:b,theta:d}=qe((S-n/2)*Z,(g-n/2)*Z);_=t.noise(d*m,b*N,Y*h)}for(let b=z;b<=k;b+=A||.1){if(!Re(_,b,D))continue;let d=255;if(o==="white")d=255;else if(o==="gradient")d=t.map(b,z,k,100,255);else if(o==="quantized-gradient"){const I=Math.trunc(_*10)/10;d=t.map(I,z,k,100,255)}else if(o==="color-gradient")d=t.lerpColor(R,q,_);else if(o==="color-scaled-gradient"){const I=t.map(_,z,k,0,1);d=t.lerpColor(R,q,I)}t.fill(d),t.circle(S*x,g*x,x)}}};var Be=(t,a)=>a.grid=!a.grid,Ne=X("<br/>"),Ae=X('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1"/>',1),De=X('<div class="control-section svelte-10wynr9"><label for="gridSize">Grid size</label> <input type="number" step="1"/> <label for="blurEnabled">Enable blur</label> <!> <!></div>'),Ie=(t,a)=>a.noise=!a.noise,Ve=X("<br/>"),We=X('<div class="control-section svelte-10wynr9"><label for="noiseMode">Noise Mode</label> <select id="noiseMode-select"><option>Carthesian</option><option>Polar</option></select> <label for="displacementX">displacementX</label> <input type="number" step="0.01"/> <label for="displacementY">displacementY</label> <input type="number" step="0.01"/> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"/> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"/></div>'),He=(t,a)=>a.lines=!a.lines,Je=X("<br/>"),Oe=X('<div class="control-section svelte-10wynr9"><label for="levelsStart">levelsStart</label> <input type="number" step="0.1"/> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"/> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"/> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"/> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option><option>Color Gradient</option><option>Color scaled Gradient</option></select></div>'),Te=X('<div class="container svelte-10wynr9"><div id="canvas-container"><div class="stats"><label for="fps">FPS</label> <span> </span></div> <!></div> <div class="controls-container svelte-10wynr9"><span class="control-header svelte-10wynr9"><button>&nbsp;Grid controls</button></span> <!> <span class="control-header svelte-10wynr9"><button>&nbsp;Noise controls</button></span> <!> <span class="control-header svelte-10wynr9"><button>&nbsp;Lines controls</button></span> <!> <div class="control-section svelte-10wynr9"><label for="resetAll">Reset all</label><button>Reset</button></div></div></div>');function ra(t,a){Ee(a,!0);let n=W(void 0),o=1e3,x=0,Y=0,B=0,Z=W(0);const m=f("p5-terrain-gridSize",200);let N=o/m.value;pe(()=>{N=o/m.value});let h=f("p5-terrain-blurEnabled",!1),z=f("p5-terrain-blurValue",4),k=f("p5-terrain-displacementX",0),A=f("p5-terrain-displacementY",0),D=f("p5-terrain-displacementZ",.01),R=f("p5-terrain-noiseFactor",.02),q=f("p5-terrain-levelsStart",.2),g=f("p5-terrain-levelsEnd",.8),S=f("p5-terrain-levelsStep",.05),_=f("p5-terrain-margin",.005),b=f("p5-terrain-colorMode","gradient"),d=f("p5-terrain-nodeMode","carthesian"),I=W(ue(h.value?"on":"off"));const fe=()=>{[m,h,z,d,k,A,D,R,q,g,S,_,b].forEach(r=>r.reset())},E=ue({grid:!1,noise:!1,lines:!1}),_e=e=>{function r(){const s=Math.min(e.windowWidth,e.windowHeight);o=Math.floor(s*.9),e.resizeCanvas(o,o),N=o/m.value}function v(){const s=Date.now();s-Y>1e3&&(J(Z,B,!0),Y=s,B=0),B++}e.windowResized=()=>{r()},e.setup=()=>{J(n,e,!0),e.createCanvas(o,o),r(),e.noStroke()},e.draw=()=>{v(),x++,xe(e,{gridSize:m.value,colorMode:b.value,noiseMode:d.value,t:x,cellSize:N,noiseFactor:R.value,displacementX:k.value,displacementY:A.value,displacementZ:D.value,levelsStart:q.value,levelsEnd:g.value,levelsMargin:_.value,levelsStep:S.value}),h.value&&e.filter(e.BLUR,z.value)}};ke(()=>{H(n)?.remove()});var O=Te(),T=c(O),Q=c(T),ae=l(c(Q),2),be=c(ae,!0);u(ae),u(Q);var me=l(Q,2);Ye(me,{sketch:_e}),u(T);var le=l(T,2),U=c(le),te=c(U);te.__click=[Be,E],u(U);var re=l(U,2);{var he=e=>{var r=Ne();P(e,r)},ge=e=>{var r=De(),v=l(c(r),2);y(v);var s=l(v,4);Xe(s,{get value(){return H(I)},label:"",design:"slider",$$events:{change:()=>{h.value=!h.value,J(I,h.value?"on":"off",!0)}}});var C=l(s,2);{var F=p=>{var w=Ae(),G=l(Ge(w),2);y(G),M(G,()=>z.value,i=>z.value=i),P(p,w)};V(C,p=>{h.value&&p(F)})}u(r),M(v,()=>m.value,p=>m.value=p),P(e,r)};V(re,e=>{E.grid?e(he):e(ge,!1)})}var j=l(re,2),oe=c(j);oe.__click=[Ie,E],u(j);var ne=l(j,2);{var Se=e=>{var r=Ve();P(e,r)},we=e=>{var r=We(),v=l(c(r),2),s=c(v);s.value=s.__value="carthesian";var C=l(s);C.value=C.__value="polar",u(v);var F=l(v,4);y(F);var p=l(F,4);y(p);var w=l(p,4);y(w);var G=l(w,4);y(G),u(r),de(v,()=>d.value,i=>d.value=i),M(F,()=>k.value,i=>k.value=i),M(p,()=>A.value,i=>A.value=i),M(w,()=>D.value,i=>D.value=i),M(G,()=>R.value,i=>R.value=i),P(e,r)};V(ne,e=>{E.noise?e(Se):e(we,!1)})}var K=l(ne,2),se=c(K);se.__click=[He,E],u(K);var ie=l(K,2);{var ye=e=>{var r=Je();P(e,r)},Me=e=>{var r=Oe(),v=l(c(r),2);y(v);var s=l(v,4);y(s);var C=l(s,4);y(C);var F=l(C,4);y(F);var p=l(F,4),w=c(p);w.value=w.__value="white";var G=l(w);G.value=G.__value="gradient";var i=l(G);i.value=i.__value="quantized-gradient";var $=l(i);$.value=$.__value="color-gradient";var ce=l($);ce.value=ce.__value="color-scaled-gradient",u(p),u(r),M(v,()=>q.value,L=>q.value=L),M(s,()=>g.value,L=>g.value=L),M(C,()=>S.value,L=>S.value=L),M(F,()=>_.value,L=>_.value=L),de(p,()=>b.value,L=>b.value=L),P(e,r)};V(ie,e=>{E.lines?e(ye):e(Me,!1)})}var ve=l(ie,2),ze=l(c(ve));ze.__click=fe,u(ve),u(le),u(O),Ce(()=>{Pe(be,H(Z)),ee(te,1,`collapse-button ${E.grid?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9"),ee(oe,1,`collapse-button ${E.noise?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9"),ee(se,1,`collapse-button ${E.lines?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9")}),P(t,O),Fe()}Le(["click"]);export{ra as component};
