import"../chunks/CWj6FrbW.js";import{i as T}from"../chunks/pJCGvH3V.js";import{p as C,aB as t,w as m,aC as n,k as R,a7 as S,n as D,g as s,v as G}from"../chunks/Bl4IpmnI.js";import{t as L,a as w}from"../chunks/CY7v4bzW.js";import{a as Z}from"../chunks/Bnsck3Bl.js";import"../chunks/DrZlp0Ab.js";import"../chunks/DrzWwfLQ.js";import{A as r,g as aa}from"../chunks/DzxKv2fj.js";import{D as B,a as F}from"../chunks/Ct5AeG1w.js";import{M as ea}from"../chunks/B9LMYJ3h.js";import{p as ta}from"../chunks/BJcB2_rh.js";import{M as $}from"../chunks/Cv3wLDv_.js";import{s as h}from"../chunks/BFGSTxNF.js";import{a as W,b as na}from"../chunks/DPf0jKpV.js";import{p as H}from"../chunks/Dcd7TacF.js";import{i as oa}from"../chunks/BupG4OcQ.js";import{e as j,i as O}from"../chunks/CPCxooNm.js";const q=a=>{if(a===r.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(a===r.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(a===r.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(a===r.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(a===r.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(a===r.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(a===r.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(a===r.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},ra=a=>{if(a===r.NEW)return"moon_phase_icons/1_new_moon.png";if(a===r.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(a===r.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(a===r.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(a===r.FULL)return"moon_phase_icons/5_full_moon.png";if(a===r.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(a===r.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(a===r.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},ia=async()=>{const a=await aa(),{moonState:g,sunState:e,upcomingLunarStates:o}=a;return{moonState:g,sunState:{goldenHour:F.fromMillis(e.goldenHour),solarNoon:F.fromMillis(e.solarNoon),sunrise:F.fromMillis(e.sunrise),sunset:F.fromMillis(e.sunset),dayLength:B.fromMillis(e.dayLengthMs),dayLengthDiff:B.fromMillis(e.dayLengthDiffMs)},upcomingLunarStates:o.map(p=>({date:F.fromMillis(p.tsMillis),lunarState:{...p.lunarState,phasePictureUrl:q(p.lunarState.moonPhase)}}))}};var sa=L('<div class="container svelte-1mhy40n"><div class="content svelte-1mhy40n"><div class="data svelte-1mhy40n"><span><i class="fas fa-moon" aria-hidden="true"></i></span> <span></span> <span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span><i class="fas fa-sun" aria-hidden="true"></i></span> <span></span> <span>Sun rise/set</span> <span> </span> <span>DayLength</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-1mhy40n"></div></div>');function ma(a,g){C(g,!1);let e=H(g,"moonState",8),o=H(g,"sunState",8);T();var p=sa(),A=t(p),d=t(A),i=m(t(d),6),_=t(i,!0);n(i);var l=m(i,4),c=t(l);n(l);var u=m(l,4),N=t(u);n(u);var f=m(u,8),b=t(f);n(f);var y=m(f,4),k=t(y);n(y);var v=m(y,4),E=t(v,!0);n(v);var M=m(v,4),x=t(M,!0);n(M),n(d);var P=m(d,2);n(A),n(p),R((I,U,z,Q,X,V,K,J,Y)=>{h(_,e().moonPhaseFr),h(c,`${I??""} days (${U??""}%)`),h(N,`${e().moonVisibilityWindow[0]??""} - ${e().moonVisibilityWindow[1]??""}`),h(b,`${z??""} - ${Q??""}`),h(k,`${X??""}
                (${o().dayLengthDiff>0?"+":""}${V??""})`),h(E,K),h(x,J),W(P,"alt",e().moonPhase),W(P,"src",Y)},[()=>e().lunarAge.toFixed(1),()=>(e().lunarAgePercent*100).toFixed(0),()=>o().sunrise.toFormat("HH:mm"),()=>o().sunset.toFormat("HH:mm"),()=>o().dayLength.toFormat("h:m"),()=>o().dayLengthDiff.toFormat("m:s"),()=>o().solarNoon.toFormat("HH:mm"),()=>o().goldenHour.toFormat("HH:mm"),()=>q(e().moonPhase)],S),w(a,p),D()}var pa=L('<div class="day-header svelte-1baztfi"> </div>'),da=L("<div> </div> <div> </div>",1),_a=L('<div><div><img class="phase-img svelte-1baztfi"></div> <!></div>'),ua=L('<div class="container svelte-1baztfi"><!> <!></div>');function la(a,g){C(g,!1);let e=H(g,"upcomingLunarStates",8);T();var o=ua(),p=t(o);j(p,1,()=>e().slice(0,7),O,(d,i)=>{let _=()=>s(i).date;var l=pa(),c=t(l,!0);n(l),R(u=>h(c,u),[()=>_().setLocale("fr").toLocaleString({weekday:"long"})],S),w(d,l)});var A=m(p,2);j(A,1,e,O,(d,i,_)=>{let l=()=>s(i).date,c=()=>s(i).lunarState;var u=_a();const N=S(()=>_===0||_===29||e()[_-1].lunarState.moonPhaseFr!==c().moonPhaseFr);var f=t(u),b=t(f);n(f);var y=m(f,2);{var k=v=>{var E=da(),M=G(E),x=t(M,!0);n(M);var P=m(M,2),I=t(P,!0);n(P),R(U=>{h(x,U),h(I,c().moonPhaseFr)},[()=>l().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})],S),w(v,E)};oa(y,v=>{s(N)&&v(k)})}n(u),R(v=>{na(u,1,`entry ${s(N)?"important-day":"other-day"}`,"svelte-1baztfi"),W(b,"alt",c().moonPhase),W(b,"src",v)},[()=>ra(c().moonPhase)],S),w(d,u)}),n(o),w(a,o),D()}var va=L("<!> <br> <!> <br> <!>",1),ga=L("<p>Loading ephemerides data</p>"),ca=L('<!> <div class="content"><!></div>',1);function Ia(a,g){C(g,!1),ta.set("Ephemerides"),T();var e=ca(),o=G(e);ea(o,{title:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"});var p=m(o,2),A=t(p);Z(A,ia,d=>{var i=ga();w(d,i)},(d,i)=>{var _=S(()=>{var{moonState:k,sunState:v,upcomingLunarStates:E}=s(i);return{moonState:k,sunState:v,upcomingLunarStates:E}}),l=S(()=>s(_).moonState),c=S(()=>s(_).sunState),u=S(()=>s(_).upcomingLunarStates),N=va(),f=G(N);ma(f,{get moonState(){return s(l)},get sunState(){return s(c)}});var b=m(f,4);la(b,{get upcomingLunarStates(){return s(u)}});var y=m(b,4);$(y,{item:{level:"info",message:"All data is computed for Paris, France"}}),w(d,N)},(d,i)=>{const _=S(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:s(i)}));$(d,{get item(){return s(_)}})}),n(p),w(a,e),D()}export{Ia as component};
