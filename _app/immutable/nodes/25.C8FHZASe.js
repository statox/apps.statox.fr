import"../chunks/NZTpNUN0.js";import"../chunks/DclJ_rYe.js";import{p as B,c as D,f as m,a as s,d as C,g as r,a8 as S,b as l,e as p,r as c,s as u,t as T}from"../chunks/DuF_ZvDd.js";import{s as L,d as X}from"../chunks/CRgFPoC3.js";import{i as F}from"../chunks/CxNB_SVp.js";import{i as I}from"../chunks/TADQXLml.js";import{a as O,s as U}from"../chunks/BSfKjxuK.js";import{u as V}from"../chunks/Clw9-S28.js";import{M as Y}from"../chunks/CK6cedXX.js";import{M as z}from"../chunks/CyN44Q0Z.js";import{e as j,i as q}from"../chunks/b4olTDCV.js";import{a as Z}from"../chunks/CkcjemhZ.js";import{g as ee}from"../chunks/Bd9sQ8Nq.js";import{D as te}from"../chunks/DTyfSRsR.js";import"../chunks/KC_oNOEL.js";import{p as ae}from"../chunks/B615CH5F.js";import{g as re}from"../chunks/fhuDpDBJ.js";var oe=l('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-value"> </div></div>'),se=l('<h4> </h4> <div class="event svelte-cyscl8"><div>Date</div> <div>Value</div></div> <!>',1),ne=l("<p>Loading events</p>");function ie(_,g){B(g,!1);const h=()=>O(V,"$user",y),[y,$]=U(),n=async()=>(await ee()).reduce((a,e)=>(a[e.type]||(a[e.type]=[]),a[e.type].push(e),a),{});I();var d=D(),f=m(d);{var k=i=>{var a=D(),e=m(a);Z(e,n,o=>{var t=ne();s(o,t)},(o,t)=>{var v=D(),b=m(v);j(b,1,()=>Object.keys(r(t)),q,(G,P)=>{var A=se(),M=m(A),J=p(M,!0);c(M);var K=u(M,4);j(K,1,()=>r(t)[r(P)],q,(N,E)=>{const Q=S(()=>te.fromSeconds(r(E).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var x=oe(),w=p(x),R=p(w,!0);c(w);var H=u(w,2),W=p(H,!0);c(H),c(x),T(()=>{L(R,r(Q)),L(W,r(E).value)}),s(N,x)}),T(()=>L(J,r(P))),s(G,A)}),s(o,v)},(o,t)=>{{let v=S(()=>({level:"error",header:"Something went wrong getting events",message:r(t)}));z(o,{get item(){return r(v)}})}}),s(i,a)};F(f,i=>{h()&&i(k)})}s(_,d),C(),$()}var ve=l("<div><button>Add an entry</button></div> <!>",1),me=l("<!> <!>",1);function Le(_,g){B(g,!1);const h=()=>O(V,"$user",y),[y,$]=U(),n={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};ae.set(n),I();var d=me(),f=m(d);Y(f,{get title(){return n.name},get description(){return n.description},get iconPath(){return n.iconPath}});var k=u(f,2);{var i=e=>{var o=ve(),t=m(o),v=p(t);v.__click=()=>re("/personal-tracker/add"),c(t);var b=u(t,2);ie(b,{}),s(e,o)},a=e=>{z(e,{item:{level:"info",header:"Login to add an entry or see events"}})};F(k,e=>{h()?e(i):e(a,!1)})}s(_,d),C(),$()}X(["click"]);export{Le as component};
