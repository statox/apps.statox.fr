import{s as te,f as k,g as y,h as T,d as v,j as b,i as D,r as ee,H as he,a as A,M as K,c as P,G as f,O as de,l as I,m as L,F as q,w as U,n as le,A as me}from"../chunks/scheduler.N2tVA6Cn.js";import{S as ne,i as se,b as x,d as z,m as O,a as F,t as G,e as H}from"../chunks/index.F8-NL695.js";import{M as ue}from"../chunks/Main.bTe1Nigg.js";import{P as pe}from"../chunks/P5.6dR_2UEj.js";import{e as re}from"../chunks/each.xo_Rzlzl.js";import{T as fe}from"../chunks/TapTempo.Oc7is1s8.js";function ge(s){let t,o,r;return o=new pe({props:{sketch:s[0]}}),{c(){t=k("div"),x(o.$$.fragment),this.h()},l(h){t=y(h,"DIV",{id:!0,class:!0});var i=T(t);z(o.$$.fragment,i),i.forEach(v),this.h()},h(){b(t,"id","canvas-container"),b(t,"class","d-flex justify-content-center")},m(h,i){D(h,t,i),O(o,t,null),r=!0},p:ee,i(h){r||(F(o.$$.fragment,h),r=!0)},o(h){G(o.$$.fragment,h),r=!1},d(h){h&&v(t),H(o)}}}function we(s,t,o){let r,{keptDuration:h}=t,{taps:i}=t,{pause:d}=t;const l=a=>{a.setup=()=>{o(4,r=a),a.createCanvas(600,100)},a.draw=()=>{const w=document.getElementById("canvas-container");if(w){const e=w?.clientWidth||600;a.width!==e&&a.resizeCanvas(e,100);const n=getComputedStyle(document.body),u=n.getPropertyValue("--nc-bg-2")||"white",c=n.getPropertyValue("--nc-tx-1")||"black";a.background(u),a.stroke(c)}const g=Date.now(),_=g-h;for(const e of i){const n=a.map(e,g,_,a.width,0);a.line(n,0,n,a.height)}}};return he(()=>{r?.remove()}),s.$$set=a=>{"keptDuration"in a&&o(1,h=a.keptDuration),"taps"in a&&o(2,i=a.taps),"pause"in a&&o(3,d=a.pause)},s.$$.update=()=>{s.$$.dirty&24&&(d?r?.noLoop():r?.loop())},[l,h,i,d,r]}class ve extends ne{constructor(t){super(),se(this,t,we,ge,te,{keptDuration:1,taps:2,pause:3})}}function ie(s,t,o){const r=s.slice();return r[4]=t[o],r}function ce(s){let t,o=s[3](s[4])+"",r,h,i,d=s[4].name+"",l,a,w,g=s[4].description+"",_;return{c(){t=k("span"),r=I(o),h=A(),i=k("span"),l=I(d),a=A(),w=k("span"),_=I(g),this.h()},l(e){t=y(e,"SPAN",{class:!0});var n=T(t);r=L(n,o),n.forEach(v),h=P(e),i=y(e,"SPAN",{class:!0});var u=T(i);l=L(u,d),u.forEach(v),a=P(e),w=y(e,"SPAN",{class:!0});var c=T(w);_=L(c,g),c.forEach(v),this.h()},h(){b(t,"class","col svelte-1kxd0qm"),q(t,"selected",s[2](s[0],s[4])),b(i,"class","col svelte-1kxd0qm"),q(i,"selected",s[2](s[0],s[4])),b(w,"class","col svelte-1kxd0qm"),q(w,"selected",s[2](s[0],s[4]))},m(e,n){D(e,t,n),f(t,r),D(e,h,n),D(e,i,n),f(i,l),D(e,a,n),D(e,w,n),f(w,_)},p(e,n){n&7&&q(t,"selected",e[2](e[0],e[4])),n&7&&q(i,"selected",e[2](e[0],e[4])),n&7&&q(w,"selected",e[2](e[0],e[4]))},d(e){e&&(v(t),v(h),v(i),v(a),v(w))}}}function _e(s){let t,o,r="BPM",h,i,d="Tempo",l,a,w="Description",g,_=re(s[1]),e=[];for(let n=0;n<_.length;n+=1)e[n]=ce(ie(s,_,n));return{c(){t=k("div"),o=k("span"),o.textContent=r,h=A(),i=k("span"),i.textContent=d,l=A(),a=k("span"),a.textContent=w,g=A();for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=y(n,"DIV",{class:!0});var u=T(t);o=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-cdp0q5"&&(o.textContent=r),h=P(u),i=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-1lklpwv"&&(i.textContent=d),l=P(u),a=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-df2g4a"&&(a.textContent=w),g=P(u);for(let c=0;c<e.length;c+=1)e[c].l(u);u.forEach(v),this.h()},h(){b(o,"class","col table-head svelte-1kxd0qm"),b(i,"class","col table-head svelte-1kxd0qm"),b(a,"class","col table-head svelte-1kxd0qm"),b(t,"class","container svelte-1kxd0qm")},m(n,u){D(n,t,u),f(t,o),f(t,h),f(t,i),f(t,l),f(t,a),f(t,g);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null)},p(n,[u]){if(u&15){_=re(n[1]);let c;for(c=0;c<_.length;c+=1){const C=ie(n,_,c);e[c]?e[c].p(C,u):(e[c]=ce(C),e[c].c(),e[c].m(t,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=_.length}},i:ee,o:ee,d(n){n&&v(t),de(e,n)}}}function ke(s,t,o){let{currentBpm:r}=t;const h=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],i=(l,a)=>l>(a.low??0)&&l<=(a.high??9999),d=l=>{if(l.high&&l.low)return`${l.low} - ${l.high}`;if(l.low)return`>${l.low}`;if(l.high)return`<${l.high}`};return s.$$set=l=>{"currentBpm"in l&&o(0,r=l.currentBpm)},[r,h,i,d]}class ye extends ne{constructor(t){super(),se(this,t,ke,_e,te,{currentBpm:0})}}function be(s){let t,o,r,h="Tap Tempo",i,d,l,a="Press the space bar or click/tap anywhere on the page to get a bpm.",w,g,_=s[0].bpm+"",e,n,u,c,C,B,ae="Reset (c)",W,S,R=s[2]?"Play":"Pause",j,J,Q,$,X,V,M,Y,oe;return t=new ue({props:{title:"TapTempo",description:"Tap Tempo Metronome",iconPath:"/tap_tempo.png"}}),$=new ve({props:{taps:s[0].taps,keptDuration:s[0].keptDuration,pause:s[2]}}),V=new ye({props:{currentBpm:s[0].bpm}}),{c(){x(t.$$.fragment),o=A(),r=k("h3"),r.textContent=h,i=A(),d=k("div"),l=k("div"),l.textContent=a,w=A(),g=k("div"),e=I(_),n=k("br"),u=I("BPM"),c=A(),C=k("div"),B=k("button"),B.textContent=ae,W=A(),S=k("button"),j=I(R),J=I(" (Enter)"),Q=A(),x($.$$.fragment),X=A(),x(V.$$.fragment),this.h()},l(m){z(t.$$.fragment,m),o=P(m),r=y(m,"H3",{"data-svelte-h":!0}),K(r)!=="svelte-zwchjg"&&(r.textContent=h),i=P(m),d=y(m,"DIV",{class:!0});var p=T(d);l=y(p,"DIV",{"data-svelte-h":!0}),K(l)!=="svelte-11wi1xz"&&(l.textContent=a),w=P(p),g=y(p,"DIV",{class:!0});var E=T(g);e=L(E,_),n=y(E,"BR",{}),u=L(E,"BPM"),E.forEach(v),c=P(p),C=y(p,"DIV",{class:!0});var N=T(C);B=y(N,"BUTTON",{class:!0,"data-svelte-h":!0}),K(B)!=="svelte-5hccmf"&&(B.textContent=ae),W=P(N),S=y(N,"BUTTON",{class:!0});var Z=T(S);j=L(Z,R),J=L(Z," (Enter)"),Z.forEach(v),N.forEach(v),Q=P(p),z($.$$.fragment,p),X=P(p),z(V.$$.fragment,p),p.forEach(v),this.h()},h(){b(g,"class","bpm svelte-1t43gmp"),q(g,"tapped",s[1]),b(B,"class","control-button svelte-1t43gmp"),b(S,"class","control-button svelte-1t43gmp"),b(C,"class","controls svelte-1t43gmp"),b(d,"class","container svelte-1t43gmp")},m(m,p){O(t,m,p),D(m,o,p),D(m,r,p),D(m,i,p),D(m,d,p),f(d,l),f(d,w),f(d,g),f(g,e),f(g,n),f(g,u),f(d,c),f(d,C),f(C,B),f(C,W),f(C,S),f(S,j),f(S,J),f(d,Q),O($,d,null),f(d,X),O(V,d,null),M=!0,Y||(oe=[U(window,"keydown",s[5]),U(window,"keyup",s[6]),U(window,"pointerdown",s[3]),U(B,"click",s[4]),U(S,"click",s[7])],Y=!0)},p(m,[p]){(!M||p&1)&&_!==(_=m[0].bpm+"")&&le(e,_),(!M||p&2)&&q(g,"tapped",m[1]),(!M||p&4)&&R!==(R=m[2]?"Play":"Pause")&&le(j,R);const E={};p&1&&(E.taps=m[0].taps),p&1&&(E.keptDuration=m[0].keptDuration),p&4&&(E.pause=m[2]),$.$set(E);const N={};p&1&&(N.currentBpm=m[0].bpm),V.$set(N)},i(m){M||(F(t.$$.fragment,m),F($.$$.fragment,m),F(V.$$.fragment,m),M=!0)},o(m){G(t.$$.fragment,m),G($.$$.fragment,m),G(V.$$.fragment,m),M=!1},d(m){m&&(v(o),v(r),v(i),v(d)),H(t,m),H($),H(V),Y=!1,me(oe)}}}function Ce(s,t,o){let r=new fe,h=!1;const i=()=>{l||(r.addBeat(),o(0,r),o(1,h=!0),setTimeout(()=>o(1,h=!1),100))},d=()=>{r.reset(),o(0,r)};let l=!1,a=!0;return[r,h,l,i,d,e=>{const n=" ",u="Enter",c="c";if([n,u,c].includes(e.key)&&(e.preventDefault(),!!a)){if(a=!1,e.key===n){o(2,l=!1),i();return}if(e.key===u){o(2,l=!l);return}e.key===c&&(d(),o(0,r))}},e=>{const n=" ";!a&&e.key===n&&(a=!0,e.preventDefault())},()=>o(2,l=!l)]}class Se extends ne{constructor(t){super(),se(this,t,Ce,be,te,{})}}export{Se as component};
