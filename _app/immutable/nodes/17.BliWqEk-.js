import{s as Ve,A as ve,i as P,f as _,k as ze,K as _t,e as p,t as Ie,a as E,c as h,b as A,d as Ae,z as N,g as S,l as f,O as oe,D as mt,h as i,a0 as Qe,E as he,a1 as bt,B as ut,y as Ct,a2 as gt,n as de,o as ft,j as Re}from"../chunks/scheduler.aZMkCCdx.js";import{h as Xe,u as kt}from"../chunks/await_block.YzATO51f.js";import{S as qe,i as Fe,a as T,g as xe,t as B,c as Ue,f as $t,b as Ce,d as ge,m as ke,e as $e}from"../chunks/index.Bc1Vv-y6.js";import{c as pt,o as wt}from"../chunks/store.CNuYb_Jl.js";import{u as je,M as ht,t as dt,U as Et}from"../chunks/Main.5g3o7spe.js";import{r as St,a as vt,A as yt}from"../chunks/index.C1H4zXXd.js";import{e as He}from"../chunks/each.CAizsQ3y.js";import{M as Lt,D as xt,a as Ut,b as It}from"../chunks/Main.BY7i3YNI.js";const At=!1,rl=Object.freeze(Object.defineProperty({__proto__:null,ssr:At},Symbol.toStringTag,{value:"Module"})),Ye=async()=>St({path:"/webWatcher/getAllWatchers"}),Ze=async a=>vt({path:"/webWatcher/createWatcher",data:a}),Pt=async a=>vt({path:"/webWatcher/deleteWatcher",data:{id:a}});function et(a,e,n){const t=a.slice();return t[17]=e[n],t}function tt(a){let e,n,t,l,s,r="Close",c,u,o,m,d="Name",w,y,W,k,C="Check interval",L,D,ie,I,O,ce="Notification message (the @mention is automatically added)",j,q,X,le,we="Watcher type",J,H,R,_e="CSS",G,Ee="HASH",K,F,ne="URL",Se,Y,Z,ue,Q,ee,me,be,ae,te=He(a[1]),U=[];for(let b=0;b<te.length;b+=1)U[b]=lt(et(a,te,b));const fe=b=>B(U[b],1,1,()=>{U[b]=null});function re(b){a[12](b)}let se={allowedUnits:["minutes","hours","days"],defaultDuration:{value:1,unit:"hours"}};a[6]!==void 0&&(se.valueInSeconds=a[6]),D=new Lt({props:se}),_t.push(()=>$t(D,"valueInSeconds",re));let M=a[7]==="CSS"&&nt(a);function ye(b,g){return b[8]?Tt:Nt}let z=ye(a),V=z(a);return{c(){e=p("div"),n=p("div"),t=p("h4"),l=Ie(`Add a new clipboard entry
                `),s=p("button"),s.textContent=r,c=E();for(let b=0;b<U.length;b+=1)U[b].c();u=E(),o=p("form"),m=p("label"),m.textContent=d,w=E(),y=p("input"),W=E(),k=p("label"),k.textContent=C,L=E(),Ce(D.$$.fragment),I=E(),O=p("label"),O.textContent=ce,j=E(),q=p("input"),X=E(),le=p("label"),le.textContent=we,J=E(),H=p("select"),R=p("option"),R.textContent=_e,G=p("option"),G.textContent=Ee,K=E(),F=p("label"),F.textContent=ne,Se=E(),Y=p("input"),Z=E(),M&&M.c(),ue=E(),Q=p("br"),ee=E(),V.c(),this.h()},l(b){e=h(b,"DIV",{role:!0,class:!0});var g=A(e);n=h(g,"DIV",{class:!0});var x=A(n);t=h(x,"H4",{class:!0});var $=A(t);l=Ae($,`Add a new clipboard entry
                `),s=h($,"BUTTON",{"data-svelte-h":!0}),N(s)!=="svelte-2m9p61"&&(s.textContent=r),$.forEach(_),c=S(x);for(let Le=0;Le<U.length;Le+=1)U[Le].l(x);u=S(x),o=h(x,"FORM",{class:!0});var v=A(o);m=h(v,"LABEL",{for:!0,"data-svelte-h":!0}),N(m)!=="svelte-bs9sy6"&&(m.textContent=d),w=S(v),y=h(v,"INPUT",{type:!0}),W=S(v),k=h(v,"LABEL",{for:!0,"data-svelte-h":!0}),N(k)!=="svelte-q7xqd"&&(k.textContent=C),L=S(v),ge(D.$$.fragment,v),I=S(v),O=h(v,"LABEL",{for:!0,"data-svelte-h":!0}),N(O)!=="svelte-1nwvu8o"&&(O.textContent=ce),j=S(v),q=h(v,"INPUT",{type:!0}),X=S(v),le=h(v,"LABEL",{for:!0,"data-svelte-h":!0}),N(le)!=="svelte-180kuuc"&&(le.textContent=we),J=S(v),H=h(v,"SELECT",{id:!0});var pe=A(H);R=h(pe,"OPTION",{"data-svelte-h":!0}),N(R)!=="svelte-x0e7ng"&&(R.textContent=_e),G=h(pe,"OPTION",{"data-svelte-h":!0}),N(G)!=="svelte-1f1oya6"&&(G.textContent=Ee),pe.forEach(_),K=S(v),F=h(v,"LABEL",{for:!0,"data-svelte-h":!0}),N(F)!=="svelte-47691s"&&(F.textContent=ne),Se=S(v),Y=h(v,"INPUT",{type:!0}),Z=S(v),M&&M.l(v),ue=S(v),Q=h(v,"BR",{}),ee=S(v),V.l(v),v.forEach(_),x.forEach(_),g.forEach(_),this.h()},h(){f(t,"class","title-bar svelte-tlh79p"),f(m,"for","name"),f(y,"type","text"),f(k,"for","check-interval"),f(O,"for","notification-message"),f(q,"type","textarea"),f(le,"for","watch-type"),R.__value="CSS",oe(R,R.__value),G.__value="HASH",oe(G,G.__value),f(H,"id","watch-type"),a[7]===void 0&&mt(()=>a[14].call(H)),f(F,"for","content"),f(Y,"type","textarea"),f(o,"class","form-content svelte-tlh79p"),f(n,"class","contents svelte-tlh79p"),f(e,"role","dialog"),f(e,"class","modal svelte-tlh79p")},m(b,g){P(b,e,g),i(e,n),i(n,t),i(t,l),i(t,s),i(n,c);for(let x=0;x<U.length;x+=1)U[x]&&U[x].m(n,null);i(n,u),i(n,o),i(o,m),i(o,w),i(o,y),oe(y,a[2]),i(o,W),i(o,k),i(o,L),ke(D,o,null),i(o,I),i(o,O),i(o,j),i(o,q),oe(q,a[3]),i(o,X),i(o,le),i(o,J),i(o,H),i(H,R),i(H,G),Qe(H,a[7],!0),i(o,K),i(o,F),i(o,Se),i(o,Y),oe(Y,a[4]),i(o,Z),M&&M.m(o,null),i(o,ue),i(o,Q),i(o,ee),V.m(o,null),me=!0,be||(ae=[he(s,"click",pt),he(y,"input",a[11]),he(q,"input",a[13]),he(H,"change",a[14]),he(Y,"input",a[15])],be=!0)},p(b,g){if(g&2){te=He(b[1]);let $;for($=0;$<te.length;$+=1){const v=et(b,te,$);U[$]?(U[$].p(v,g),T(U[$],1)):(U[$]=lt(v),U[$].c(),T(U[$],1),U[$].m(n,u))}for(xe(),$=te.length;$<U.length;$+=1)fe($);Ue()}g&4&&y.value!==b[2]&&oe(y,b[2]);const x={};!ie&&g&64&&(ie=!0,x.valueInSeconds=b[6],bt(()=>ie=!1)),D.$set(x),g&8&&oe(q,b[3]),g&128&&Qe(H,b[7]),g&16&&oe(Y,b[4]),b[7]==="CSS"?M?M.p(b,g):(M=nt(b),M.c(),M.m(o,ue)):M&&(M.d(1),M=null),z===(z=ye(b))&&V?V.p(b,g):(V.d(1),V=z(b),V&&(V.c(),V.m(o,null)))},i(b){if(!me){for(let g=0;g<te.length;g+=1)T(U[g]);T(D.$$.fragment,b),me=!0}},o(b){U=U.filter(Boolean);for(let g=0;g<U.length;g+=1)B(U[g]);B(D.$$.fragment,b),me=!1},d(b){b&&_(e),ut(U,b),$e(D),M&&M.d(),V.d(),be=!1,Ct(ae)}}}function lt(a){let e,n;return e=new ht({props:{item:a[17]}}),{c(){Ce(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,l){ke(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.item=t[17]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){$e(e,t)}}}function nt(a){let e,n="CSS selector",t,l,s,r;return{c(){e=p("label"),e.textContent=n,t=E(),l=p("input"),this.h()},l(c){e=h(c,"LABEL",{for:!0,"data-svelte-h":!0}),N(e)!=="svelte-1ib74yx"&&(e.textContent=n),t=S(c),l=h(c,"INPUT",{type:!0}),this.h()},h(){f(e,"for","css-selector"),f(l,"type","textarea")},m(c,u){P(c,e,u),P(c,t,u),P(c,l,u),oe(l,a[5]),s||(r=he(l,"input",a[16]),s=!0)},p(c,u){u&32&&oe(l,c[5])},d(c){c&&(_(e),_(t),_(l)),s=!1,r()}}}function Nt(a){let e,n="Login to upload an entry";return{c(){e=p("span"),e.textContent=n,this.h()},l(t){e=h(t,"SPAN",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-4ab4io"&&(e.textContent=n),this.h()},h(){f(e,"class","form-action svelte-tlh79p")},m(t,l){P(t,e,l)},p:de,d(t){t&&_(e)}}}function Tt(a){let e,n="Submit",t,l;return{c(){e=p("button"),e.textContent=n,this.h()},l(s){e=h(s,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1nfv1d"&&(e.textContent=n),this.h()},h(){f(e,"class","form-action svelte-tlh79p")},m(s,r){P(s,e,r),t||(l=he(e,"click",a[9]),t=!0)},p:de,d(s){s&&_(e),t=!1,l()}}}function Dt(a){let e,n,t=a[0]&&tt(a);return{c(){t&&t.c(),e=ve()},l(l){t&&t.l(l),e=ve()},m(l,s){t&&t.m(l,s),P(l,e,s),n=!0},p(l,[s]){l[0]?t?(t.p(l,s),s&1&&T(t,1)):(t=tt(l),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(xe(),B(t,1,1,()=>{t=null}),Ue())},i(l){n||(T(t),n=!0)},o(l){B(t),n=!1},d(l){l&&_(e),t&&t.d(l)}}}function Bt(a,e,n){let t;ze(a,je,I=>n(8,t=I));let{isOpen:l}=e,{onUpload:s}=e,r=[],c,u,o,m,d,w;const y=async()=>{n(1,r=[]),c!=null&&c.length||r.push({level:"error",header:"name must be defined"}),u||r.push({level:"error",header:"notification message must be defined"}),w==="CSS"&&!m&&r.push({level:"error",header:"A CSS watcher must have a css selector defined"}),d<15*60&&r.push({level:"error",header:"Check interval too small. Must be >= 15mn"});try{new URL(o)}catch{r.push({level:"error",header:"The URL is invalid"})}if(!r.length)try{w==="CSS"?await Ze({name:c,notificationMessage:u,url:o,cssSelector:m,checkIntervalSeconds:d,watchType:w}):w==="HASH"&&await Ze({name:c,notificationMessage:u,url:o,checkIntervalSeconds:d,watchType:w}),s(),pt()}catch(I){let O=I.message;I instanceof yt&&I.code===401?O="Invalid logged in user":I instanceof Et&&(O="User is logged out");const ce=`<strong>Entry not created</strong><br/> ${O}`;dt.push(ce,{theme:{"--toastBarBackground":"#FF0000"}})}};function W(){c=this.value,n(2,c)}function k(I){d=I,n(6,d)}function C(){u=this.value,n(3,u)}function L(){w=gt(this),n(7,w)}function D(){o=this.value,n(4,o)}function ie(){m=this.value,n(5,m)}return a.$$set=I=>{"isOpen"in I&&n(0,l=I.isOpen),"onUpload"in I&&n(10,s=I.onUpload)},[l,r,c,u,o,m,d,w,t,y,s,W,k,C,L,D,ie]}class Mt extends qe{constructor(e){super(),Fe(this,e,Bt,Dt,Ve,{isOpen:0,onUpload:10})}}function at(a){let e,n,t=a[0].name+"",l,s,r,c,u,o,m,d="Check interval",w,y,W,k,C,L,D="Notification message",ie,I,O,ce,j,q,X,le="URL",we,J,H=a[0].url+"",R,_e,G,Ee,K,F,ne,Se="Last check",Y,Z,ue,Q,ee,me="Last content change",be,ae,te,U,fe,re,se,M="Last content",ye,z,V,b;r=new Ut({}),r.$on("delete",a[6]);let g=a[0].watchType==="CSS"&&rt(a),x=a[0].lastErrorDateUnix&&st(a);return{c(){e=p("div"),n=p("h4"),l=Ie(t),s=E(),Ce(r.$$.fragment),c=E(),u=p("div"),o=p("p"),m=p("label"),m.textContent=d,w=E(),y=p("input"),W=E(),k=p("div"),C=p("p"),L=p("label"),L.textContent=D,ie=E(),I=p("input"),ce=E(),j=p("div"),q=p("p"),X=p("label"),X.textContent=le,we=E(),J=p("a"),R=Ie(H),G=E(),g&&g.c(),Ee=E(),K=p("div"),F=p("p"),ne=p("label"),ne.textContent=Se,Y=E(),Z=p("input"),ue=E(),Q=p("p"),ee=p("label"),ee.textContent=me,be=E(),ae=p("input"),te=E(),x&&x.c(),U=E(),fe=p("div"),re=p("p"),se=p("label"),se.textContent=M,ye=E(),z=p("input"),this.h()},l($){e=h($,"DIV",{class:!0});var v=A(e);n=h(v,"H4",{class:!0});var pe=A(n);l=Ae(pe,t),s=S(pe),ge(r.$$.fragment,pe),pe.forEach(_),c=S(v),u=h(v,"DIV",{class:!0});var Le=A(u);o=h(Le,"P",{class:!0});var Pe=A(o);m=h(Pe,"LABEL",{for:!0,"data-svelte-h":!0}),N(m)!=="svelte-q7xqd"&&(m.textContent=d),w=S(Pe),y=h(Pe,"INPUT",{type:!0,class:!0}),Pe.forEach(_),Le.forEach(_),W=S(v),k=h(v,"DIV",{class:!0});var Je=A(k);C=h(Je,"P",{class:!0});var Ne=A(C);L=h(Ne,"LABEL",{for:!0,"data-svelte-h":!0}),N(L)!=="svelte-1rjok9v"&&(L.textContent=D),ie=S(Ne),I=h(Ne,"INPUT",{type:!0,class:!0}),Ne.forEach(_),Je.forEach(_),ce=S(v),j=h(v,"DIV",{class:!0});var Te=A(j);q=h(Te,"P",{class:!0});var De=A(q);X=h(De,"LABEL",{for:!0,"data-svelte-h":!0}),N(X)!=="svelte-47691s"&&(X.textContent=le),we=S(De),J=h(De,"A",{target:!0,rel:!0,href:!0});var Ge=A(J);R=Ae(Ge,H),Ge.forEach(_),De.forEach(_),G=S(Te),g&&g.l(Te),Te.forEach(_),Ee=S(v),K=h(v,"DIV",{class:!0});var Be=A(K);F=h(Be,"P",{class:!0});var Me=A(F);ne=h(Me,"LABEL",{for:!0,"data-svelte-h":!0}),N(ne)!=="svelte-l58ce3"&&(ne.textContent=Se),Y=S(Me),Z=h(Me,"INPUT",{type:!0,class:!0}),Me.forEach(_),ue=S(Be),Q=h(Be,"P",{class:!0});var We=A(Q);ee=h(We,"LABEL",{for:!0,"data-svelte-h":!0}),N(ee)!=="svelte-r6rd2z"&&(ee.textContent=me),be=S(We),ae=h(We,"INPUT",{type:!0,class:!0}),We.forEach(_),Be.forEach(_),te=S(v),x&&x.l(v),U=S(v),fe=h(v,"DIV",{class:!0});var Ke=A(fe);re=h(Ke,"P",{class:!0});var Oe=A(re);se=h(Oe,"LABEL",{for:!0,"data-svelte-h":!0}),N(se)!=="svelte-1hxqr7r"&&(se.textContent=M),ye=S(Oe),z=h(Oe,"INPUT",{type:!0,class:!0}),Oe.forEach(_),Ke.forEach(_),v.forEach(_),this.h()},h(){f(n,"class","item-title svelte-14314pc"),f(m,"for","check-interval"),y.disabled=!0,f(y,"type","textarea"),y.value=a[5],f(y,"class","svelte-14314pc"),f(o,"class","section-1-item svelte-14314pc"),f(u,"class","section svelte-14314pc"),f(L,"for","notification-message"),I.disabled=!0,f(I,"type","textarea"),I.value=O=a[0].notificationMessage,f(I,"class","svelte-14314pc"),f(C,"class","section-2-item svelte-14314pc"),f(k,"class","section svelte-14314pc"),f(X,"for","content"),f(J,"target","_blank"),f(J,"rel","noopener noreferrer"),f(J,"href",_e=a[0].url),f(q,"class","section-3-item svelte-14314pc"),f(j,"class","section svelte-14314pc"),f(ne,"for","last-check"),Z.disabled=!0,f(Z,"type","textarea"),Z.value=a[3],f(Z,"class","svelte-14314pc"),f(F,"class","section-4-item svelte-14314pc"),f(ee,"for","last-update"),ae.disabled=!0,f(ae,"type","textarea"),ae.value=a[4],f(ae,"class","svelte-14314pc"),f(Q,"class","section-4-item svelte-14314pc"),f(K,"class","section svelte-14314pc"),f(se,"for","last-update"),z.disabled=!0,f(z,"type","textarea"),z.value=V=a[0].lastContent,f(z,"class","svelte-14314pc"),f(re,"class","section-3-item svelte-14314pc"),f(fe,"class","section svelte-14314pc"),f(e,"class","item svelte-14314pc")},m($,v){P($,e,v),i(e,n),i(n,l),i(n,s),ke(r,n,null),i(e,c),i(e,u),i(u,o),i(o,m),i(o,w),i(o,y),i(e,W),i(e,k),i(k,C),i(C,L),i(C,ie),i(C,I),i(e,ce),i(e,j),i(j,q),i(q,X),i(q,we),i(q,J),i(J,R),i(j,G),g&&g.m(j,null),i(e,Ee),i(e,K),i(K,F),i(F,ne),i(F,Y),i(F,Z),i(K,ue),i(K,Q),i(Q,ee),i(Q,be),i(Q,ae),i(e,te),x&&x.m(e,null),i(e,U),i(e,fe),i(fe,re),i(re,se),i(re,ye),i(re,z),b=!0},p($,v){(!b||v&1)&&t!==(t=$[0].name+"")&&Re(l,t),(!b||v&1&&O!==(O=$[0].notificationMessage)&&I.value!==O)&&(I.value=O),(!b||v&1)&&H!==(H=$[0].url+"")&&Re(R,H),(!b||v&1&&_e!==(_e=$[0].url))&&f(J,"href",_e),$[0].watchType==="CSS"?g?(g.p($,v),v&1&&T(g,1)):(g=rt($),g.c(),T(g,1),g.m(j,null)):g&&(xe(),B(g,1,1,()=>{g=null}),Ue()),$[0].lastErrorDateUnix?x?x.p($,v):(x=st($),x.c(),x.m(e,U)):x&&(x.d(1),x=null),(!b||v&1&&V!==(V=$[0].lastContent)&&z.value!==V)&&(z.value=V)},i($){b||(T(r.$$.fragment,$),T(g),b=!0)},o($){B(r.$$.fragment,$),B(g),b=!1},d($){$&&_(e),$e(r),g&&g.d(),x&&x.d()}}}function rt(a){let e,n,t,l,s,r,c,u;return l=new It({props:{content:a[0].cssSelector}}),{c(){e=p("p"),n=p("label"),t=Ie(`CSS selector
                        `),Ce(l.$$.fragment),s=E(),r=p("input"),this.h()},l(o){e=h(o,"P",{class:!0});var m=A(e);n=h(m,"LABEL",{for:!0});var d=A(n);t=Ae(d,`CSS selector
                        `),ge(l.$$.fragment,d),d.forEach(_),s=S(m),r=h(m,"INPUT",{type:!0,class:!0}),m.forEach(_),this.h()},h(){f(n,"for","css-selector"),r.disabled=!0,f(r,"type","textarea"),r.value=c=a[0].cssSelector,f(r,"class","svelte-14314pc"),f(e,"class","section-3-item svelte-14314pc")},m(o,m){P(o,e,m),i(e,n),i(n,t),ke(l,n,null),i(e,s),i(e,r),u=!0},p(o,m){const d={};m&1&&(d.content=o[0].cssSelector),l.$set(d),(!u||m&1&&c!==(c=o[0].cssSelector)&&r.value!==c)&&(r.value=c)},i(o){u||(T(l.$$.fragment,o),u=!0)},o(o){B(l.$$.fragment,o),u=!1},d(o){o&&_(e),$e(l)}}}function st(a){let e,n,t,l="Last error",s,r,c,u,o,m,d="Last error message",w,y,W;return{c(){e=p("div"),n=p("p"),t=p("label"),t.textContent=l,s=E(),r=p("input"),u=E(),o=p("p"),m=p("label"),m.textContent=d,w=E(),y=p("input"),this.h()},l(k){e=h(k,"DIV",{class:!0});var C=A(e);n=h(C,"P",{class:!0});var L=A(n);t=h(L,"LABEL",{for:!0,"data-svelte-h":!0}),N(t)!=="svelte-1h8ip7h"&&(t.textContent=l),s=S(L),r=h(L,"INPUT",{type:!0,class:!0}),L.forEach(_),u=S(C),o=h(C,"P",{class:!0});var D=A(o);m=h(D,"LABEL",{for:!0,"data-svelte-h":!0}),N(m)!=="svelte-x18p73"&&(m.textContent=d),w=S(D),y=h(D,"INPUT",{type:!0,class:!0}),D.forEach(_),C.forEach(_),this.h()},h(){f(t,"for","last-check"),r.disabled=!0,f(r,"type","textarea"),r.value=c=a[2](a[0].lastErrorDateUnix),f(r,"class","svelte-14314pc"),f(n,"class","section-4-item svelte-14314pc"),f(m,"for","last-update"),y.disabled=!0,f(y,"type","textarea"),y.value=W=a[0].lastErrorMessage,f(y,"class","svelte-14314pc"),f(o,"class","section-4-item svelte-14314pc"),f(e,"class","section error-section svelte-14314pc")},m(k,C){P(k,e,C),i(e,n),i(n,t),i(n,s),i(n,r),i(e,u),i(e,o),i(o,m),i(o,w),i(o,y)},p(k,C){C&1&&c!==(c=k[2](k[0].lastErrorDateUnix))&&r.value!==c&&(r.value=c),C&1&&W!==(W=k[0].lastErrorMessage)&&y.value!==W&&(y.value=W)},d(k){k&&_(e)}}}function Wt(a){let e,n,t=a[1]&&at(a);return{c(){t&&t.c(),e=ve()},l(l){t&&t.l(l),e=ve()},m(l,s){t&&t.m(l,s),P(l,e,s),n=!0},p(l,[s]){l[1]?t?(t.p(l,s),s&2&&T(t,1)):(t=at(l),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(xe(),B(t,1,1,()=>{t=null}),Ue())},i(l){n||(T(t),n=!0)},o(l){B(t),n=!1},d(l){l&&_(e),t&&t.d(l)}}}function Ot(a,e,n){let t;ze(a,je,d=>n(1,t=d));const l=ft();let{watcher:s}=e;const r=d=>{const w=new Date(d*1e3);return w.toLocaleDateString()+" "+w.toLocaleTimeString()},c=s.lastCheckDateUnix===0?"Never checked before":r(s.lastCheckDateUnix),u=s.lastUpdateDateUnix===0?"Never changed":r(s.lastUpdateDateUnix),o=xt.fromMillis(s.checkIntervalSeconds*1e3).rescale().toHuman(),m=async()=>{if(!s.id){console.error("id must be defined");return}try{await Pt(s.id),l("delete")}catch(d){const w=`<strong>Watcher not deleted</strong><br/> ${d.message}`;dt.push(w,{theme:{"--toastBarBackground":"#FF0000"}})}};return a.$$set=d=>{"watcher"in d&&n(0,s=d.watcher)},[s,t,r,c,u,o,m]}class Ht extends qe{constructor(e){super(),Fe(this,e,Ot,Wt,Ve,{watcher:0})}}function ot(a,e,n){const t=a.slice();return t[3]=e[n],t}function it(a){let e,n;return e=new Ht({props:{watcher:a[3]}}),e.$on("delete",a[2]),{c(){Ce(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,l){ke(e,t,l),n=!0},p(t,l){const s={};l&1&&(s.watcher=t[3]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){$e(e,t)}}}function Vt(a){let e,n,t=He(a[0].sort(ct)),l=[];for(let r=0;r<t.length;r+=1)l[r]=it(ot(a,t,r));const s=r=>B(l[r],1,1,()=>{l[r]=null});return{c(){e=p("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=h(r,"DIV",{class:!0});var c=A(e);for(let u=0;u<l.length;u+=1)l[u].l(c);c.forEach(_),this.h()},h(){f(e,"class","container svelte-c8nodu")},m(r,c){P(r,e,c);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);n=!0},p(r,[c]){if(c&3){t=He(r[0].sort(ct));let u;for(u=0;u<t.length;u+=1){const o=ot(r,t,u);l[u]?(l[u].p(o,c),T(l[u],1)):(l[u]=it(o),l[u].c(),T(l[u],1),l[u].m(e,null))}for(xe(),u=t.length;u<l.length;u+=1)s(u);Ue()}},i(r){if(!n){for(let c=0;c<t.length;c+=1)T(l[c]);n=!0}},o(r){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)B(l[c]);n=!1},d(r){r&&_(e),ut(l,r)}}}const ct=(a,e)=>e.id-a.id;function qt(a,e,n){let{watchers:t}=e;const l=ft(),s=()=>l("delete");return a.$$set=r=>{"watchers"in r&&n(0,t=r.watchers)},[t,l,s]}class Ft extends qe{constructor(e){super(),Fe(this,e,qt,Vt,Ve,{watchers:0})}}function Rt(a){let e,n;return e=new ht({props:{item:{level:"info",header:"Login to list the watchers"}}}),{c(){Ce(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,l){ke(e,t,l),n=!0},p:de,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){$e(e,t)}}}function zt(a){let e,n="Create a new watcher",t,l,s="Add an entry",r,c,u="Watchers",o,m,d,w,y,W,k={ctx:a,current:null,token:null,hasCatch:!0,pending:Gt,then:Jt,catch:jt,value:4,error:5,blocks:[,,,]};return Xe(d=a[0],k),{c(){e=p("h3"),e.textContent=n,t=E(),l=p("button"),l.textContent=s,r=E(),c=p("h3"),c.textContent=u,o=E(),m=ve(),k.block.c()},l(C){e=h(C,"H3",{"data-svelte-h":!0}),N(e)!=="svelte-1mwl5rt"&&(e.textContent=n),t=S(C),l=h(C,"BUTTON",{"data-svelte-h":!0}),N(l)!=="svelte-10yn9w3"&&(l.textContent=s),r=S(C),c=h(C,"H3",{"data-svelte-h":!0}),N(c)!=="svelte-1d5313d"&&(c.textContent=u),o=S(C),m=ve(),k.block.l(C)},m(C,L){P(C,e,L),P(C,t,L),P(C,l,L),P(C,r,L),P(C,c,L),P(C,o,L),P(C,m,L),k.block.m(C,k.anchor=L),k.mount=()=>m.parentNode,k.anchor=m,w=!0,y||(W=he(l,"click",a[3]),y=!0)},p(C,L){a=C,k.ctx=a,L&1&&d!==(d=a[0])&&Xe(d,k)||kt(k,a,L)},i(C){w||(T(k.block),w=!0)},o(C){for(let L=0;L<3;L+=1){const D=k.blocks[L];B(D)}w=!1},d(C){C&&(_(e),_(t),_(l),_(r),_(c),_(o),_(m)),k.block.d(C),k.token=null,k=null,y=!1,W()}}}function jt(a){let e,n="Something went wrong",t,l,s=JSON.stringify(a[5])+"",r;return{c(){e=p("p"),e.textContent=n,t=E(),l=p("p"),r=Ie(s)},l(c){e=h(c,"P",{"data-svelte-h":!0}),N(e)!=="svelte-171fb2d"&&(e.textContent=n),t=S(c),l=h(c,"P",{});var u=A(l);r=Ae(u,s),u.forEach(_)},m(c,u){P(c,e,u),P(c,t,u),P(c,l,u),i(l,r)},p(c,u){u&1&&s!==(s=JSON.stringify(c[5])+"")&&Re(r,s)},i:de,o:de,d(c){c&&(_(e),_(t),_(l))}}}function Jt(a){let e,n;return e=new Ft({props:{watchers:a[4]}}),e.$on("delete",a[2]),{c(){Ce(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,l){ke(e,t,l),n=!0},p(t,l){const s={};l&1&&(s.watchers=t[4]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){$e(e,t)}}}function Gt(a){let e,n="Loading data";return{c(){e=p("p"),e.textContent=n},l(t){e=h(t,"P",{"data-svelte-h":!0}),N(e)!=="svelte-ezyzhc"&&(e.textContent=n)},m(t,l){P(t,e,l)},p:de,i:de,o:de,d(t){t&&_(e)}}}function Kt(a){let e,n="Web Watchers",t,l,s,r,c;const u=[zt,Rt],o=[];function m(d,w){return d[1]?0:1}return l=m(a),s=o[l]=u[l](a),{c(){e=p("h2"),e.textContent=n,t=E(),s.c(),r=ve()},l(d){e=h(d,"H2",{"data-svelte-h":!0}),N(e)!=="svelte-1xt9l7p"&&(e.textContent=n),t=S(d),s.l(d),r=ve()},m(d,w){P(d,e,w),P(d,t,w),o[l].m(d,w),P(d,r,w),c=!0},p(d,[w]){let y=l;l=m(d),l===y?o[l].p(d,w):(xe(),B(o[y],1,1,()=>{o[y]=null}),Ue(),s=o[l],s?s.p(d,w):(s=o[l]=u[l](d),s.c()),T(s,1),s.m(r.parentNode,r))},i(d){c||(T(s),c=!0)},o(d){B(s),c=!1},d(d){d&&(_(e),_(t),_(r)),o[l].d(d)}}}function Qt(a,e,n){let t;ze(a,je,c=>n(1,t=c));let l=Ye();const s=()=>n(0,l=Ye());return[l,t,s,()=>wt(Mt,{onUpload:s})]}class sl extends qe{constructor(e){super(),Fe(this,e,Qt,Kt,Ve,{})}}export{sl as component,rl as universal};
