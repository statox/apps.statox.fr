import"../chunks/NZTpNUN0.js";import"../chunks/CK2DB9Sl.js";import{p as C,c as T,f as p,a as o,d as F,g as a,a8 as S,b as f,e as d,r as m,s as l,t as j}from"../chunks/DPK8yXit.js";import{s as _,d as Z}from"../chunks/DlsYe5r7.js";import{i as I}from"../chunks/BQEplrKJ.js";import{i as O}from"../chunks/CdZ4SmM9.js";import{a as U,s as V}from"../chunks/BzNrHVqy.js";import{u as z}from"../chunks/BhkIZ74U.js";import{M as ee}from"../chunks/mLZ2QDuf.js";import{M as G}from"../chunks/CTL48U9N.js";import{e as q,i as B}from"../chunks/BI0rHxLi.js";import{a as te}from"../chunks/CifkBGsb.js";import{g as ae}from"../chunks/Bd9sQ8Nq.js";import{D as re}from"../chunks/DTyfSRsR.js";import"../chunks/DUx68lld.js";import{p as se}from"../chunks/B_ZCztlZ.js";import{g as oe}from"../chunks/B3lEDe2b.js";var ie=f('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-type"> </div> <div class="event-value"> </div></div>'),ne=f('<h4> </h4> <div class="event svelte-cyscl8"><div>Date</div> <div>Type</div> <div>Value</div></div> <!>',1),ve=f("<p>Loading events</p>");function de(g,h){C(h,!1);const y=()=>U(z,"$user",$),[$,k]=V(),i=async()=>(await ae()).reduce((r,e)=>(r[e.type]||(r[e.type]=[]),r[e.type].push(e),r),{});O();var c=T(),u=p(c);{var b=n=>{var r=T(),e=p(r);te(e,i,s=>{var t=ve();o(s,t)},(s,t)=>{var v=T(),x=p(v);q(x,1,()=>Object.keys(a(t)),B,(J,A)=>{var E=ne(),M=p(E),K=d(M,!0);m(M);var N=l(M,4);q(N,1,()=>a(t)[a(A)],B,(Q,w)=>{const R=S(()=>re.fromSeconds(a(w).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var D=ie(),L=d(D),W=d(L,!0);m(L);var P=l(L,2),X=d(P,!0);m(P);var H=l(P,2),Y=d(H,!0);m(H),m(D),j(()=>{_(W,a(R)),_(X,a(w).type),_(Y,a(w).value)}),o(Q,D)}),j(()=>_(K,a(A))),o(J,E)}),o(s,v)},(s,t)=>{{let v=S(()=>({level:"error",header:"Something went wrong getting events",message:a(t)}));G(s,{get item(){return a(v)}})}}),o(n,r)};I(u,n=>{y()&&n(b)})}o(g,c),F(),k()}var me=f("<div><button>Add an entry</button></div> <!>",1),pe=f("<!> <!>",1);function Te(g,h){C(h,!1);const y=()=>U(z,"$user",$),[$,k]=V(),i={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};se.set(i),O();var c=pe(),u=p(c);ee(u,{get title(){return i.name},get description(){return i.description},get iconPath(){return i.iconPath}});var b=l(u,2);{var n=e=>{var s=me(),t=p(s),v=d(t);v.__click=()=>oe("/personal-tracker/add"),m(t);var x=l(t,2);de(x,{}),o(e,s)},r=e=>{G(e,{item:{level:"info",header:"Login to add an entry or see events"}})};I(b,e=>{y()?e(n):e(r,!1)})}o(g,c),F(),k()}Z(["click"]);export{Te as component};
