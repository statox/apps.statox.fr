import"../chunks/CWj6FrbW.js";import{i as re}from"../chunks/C5AthOGL.js";import{p as G,A as l,B as ie,w as o,s,k as D,g as t,n as H,E as m,F as p,x as O,v as le}from"../chunks/DzPn16lH.js";import{p as ne}from"../chunks/Bqlg-NcU.js";import{g as fe,f as d,a as f,t as ce}from"../chunks/DeWgRYsc.js";import{i as M}from"../chunks/KWIcU4kR.js";import{e as ue,i as me}from"../chunks/BoNBqYmx.js";import{b as pe,r as j}from"../chunks/DsHjUJAI.js";import{b as q,c as de}from"../chunks/DtKymIQs.js";import{b as ve}from"../chunks/Bu1fM7nl.js";import{s as be,a as _e}from"../chunks/B3mQEY0Q.js";import{u as ge,U as he}from"../chunks/8nUP5F81.js";import{A as ke}from"../chunks/B_C2GjN7.js";import{t as ye}from"../chunks/B6K0Eu4b.js";import{M as xe}from"../chunks/DBm_J8Me.js";import{M as Se}from"../chunks/DtRhTZvq.js";import{M as Me}from"../chunks/BEJ15uuo.js";import{u as Ue}from"../chunks/CXSmM8hH.js";import{g as we}from"../chunks/BQCN4dgl.js";const Ae=()=>{we("/clipboard/")};var Ce=(v,r)=>{t(r)!==void 0&&(t(r).value="")},Fe=(v,r)=>s(r,!t(r)),Te=d('Public <i class="fas fa-lock-open"></i>',1),Be=d('Private <i class="fas fa-lock"></i>',1),Ee=d('<i class="sucess-indicator fas fa-check svelte-118mt4a"></i>'),Le=d('<button class="form-action"><!></button> <!>',1),Pe=d('<span class="form-action">Login to upload an entry</span>'),Ie=d('<div class="contents svelte-118mt4a"><h4 class="title-bar svelte-118mt4a">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-118mt4a"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-118mt4a" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Ne(v,r){G(r,!0);const[J,K]=be(),Q=()=>_e(ge,"$user",J);let c=l(ie([])),h=l(""),k=l(""),U=l(void 0),b=l(void 0),y=l(!1),x=l(0),_=l(!1),w=l(!1);const R=async()=>{var a,n;if(s(c,[],!0),(a=t(h))!=null&&a.length||t(c).push({level:"error",header:"name must be defined"}),(n=t(k))!=null&&n.length||t(c).push({level:"error",header:"content must be defined"}),t(x)<0&&t(c).push({level:"error",header:"TTL must be positive"}),t(c).length)return;let e;t(b)&&t(b).length&&(e=t(b)[0]||void 0);try{s(_,!0),s(w,!1),await Ue({name:t(h),content:t(k),ttlSeconds:t(x),isPublic:t(y),file:e}),s(_,!1),r.onUpload(),s(w,!0)}catch(u){s(_,!1);let g=u.message;u instanceof ke&&u.code===401?g="Invalid logged in user":u instanceof he&&(g="User is logged out");const P=`<strong>Entry not created</strong><br/> ${g}`;ye.push(P,{theme:{"--toastBarBackground":"#FF0000"}})}};var A=Ie(),C=m(A),V=o(m(C));V.__click=[Ae],p(C);var N=o(C,2);ue(N,17,()=>t(c),me,(e,a)=>{Se(e,{get item(){return t(a)}})});var F=o(N,2),T=o(m(F),2);j(T);var B=o(T,4);j(B);var E=o(B,4),L=m(E);ve(L,e=>s(U,e),()=>t(U));var W=o(L,2);W.__click=[Ce,U],p(E);var $=o(E,4);Me($,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(x)},set valueInSeconds(e){s(x,e,!0)}});var S=o($,4);let z;S.__click=[Fe,y];var X=m(S);{var Y=e=>{var a=Te();O(),f(e,a)},Z=e=>{var a=Be();O(),f(e,a)};M(X,e=>{t(y)?e(Y):e(Z,!1)})}p(S),p(F);var ee=o(F,2);{var te=e=>{var a=Le(),n=le(a);n.__click=R;var u=m(n);{var g=i=>{xe(i,{size:.5,unit:"em",durationSeconds:.5})},P=i=>{var I=ce("Submit");f(i,I)};M(u,i=>{t(_)?i(g):i(P,!1)})}p(n);var se=o(n,2);{var oe=i=>{var I=Ee();f(i,I)};M(se,i=>{t(w)&&i(oe)})}D(()=>n.disabled=t(_)),f(e,a)},ae=e=>{var a=Pe();f(e,a)};M(ee,e=>{Q()?e(te):e(ae,!1)})}p(A),D(e=>z=pe(S,1,"visibility-status svelte-118mt4a",null,z,e),[()=>({"visibility-public":t(y)})]),q(T,()=>t(h),e=>s(h,e)),q(B,()=>t(k),e=>s(k,e)),de(L,()=>t(b),e=>s(b,e)),f(v,A),H(),K()}fe(["click"]);function at(v,r){G(r,!1),ne.set("Clipboard"),re(),Ne(v,{onUpload:()=>console.log("new entry created")}),H()}export{at as component};
