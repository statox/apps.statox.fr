import"../chunks/NZTpNUN0.js";import{a as U}from"../chunks/CVDCh7bQ.js";import{c as $,f as X,a as G,b as Y,e as v,s as S,r as y,n as N,p as J,i as j,g as V,d as Q,h as Z,ag as T}from"../chunks/OOCdeaM4.js";import{d as q}from"../chunks/DBBHR-3t.js";import{a as tt}from"../chunks/DazWBkG7.js";import{P as et}from"../chunks/DY5ti_Nm.js";import{m as ot}from"../chunks/Dg7M2ZgA.js";import{i as nt}from"../chunks/BMFH8sZT.js";import"../chunks/DRxGxY2p.js";import"../chunks/CaC-JQYF.js";import{p as at}from"../chunks/CgiMXJad.js";/* empty css                */import"../chunks/bMdrnNxv.js";var it=Y(`<div role="dialog" class="modal svelte-529qsy"><div class="contents svelte-529qsy"><h4 class="title-bar svelte-529qsy">Chord Wheel <button>Close</button></h4> <div>This page is an implementation of <a href="https://chordwheel.com/" target="_blank" rel="noopener noreferrer">Jim Fleser's Chord Wheel</a> it is intended for my personal use. If you are using this implementation you should definitely <a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=4" target="_blank" rel="noopener noreferrer">buy his book</a> or <a href="https://apps.apple.com/us/app/the-chord-wheel/id444931977" target="_blank" rel="noopener noreferrer">buy his app</a> (which is much more complete than this page).</div> <div>This tool only works for songs in major keys. <ul><li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=5&amp;Itemid=17" target="_blank" rel="noopener noreferrer">Analyzing songs and compositional styles</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=8:soloing-and-improvisation&amp;catid=8:using-the-chordwheel&amp;Itemid=8" target="_blank" rel="noopener noreferrer">Soloing and improvisation</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=9&amp;Itemid=5" target="_blank" rel="noopener noreferrer">Transpositions</a></li></ul></div></div></div>`);function rt(t,e){var n=$(),a=X(n);{var i=l=>{var s=it(),c=v(s),d=v(c),r=S(v(d));r.__click=function(...u){e.close?.apply(this,u)},y(d),N(4),y(c),y(s),G(l,s)};nt(a,l=>{e.isOpen&&l(i)})}G(t,n)}q(["click"]);const E=Math.PI,C={scale:1,position:0,outerRing:{labels:["B°","F♯°","C♯°","G♯°","D♯°","A♯°","F°","C°","G°","D°","A°","E°"],cellSize:2*E/48,ratio:4,innerDiameter:.82,outerDiameter:1},middleRing:{labels:["Em","Am","Bm","Em","F♯m","Bm","C♯m","F♯m","G♯m","C♯m","D♯m","G♯m","A♯m","E♭m","Fm","B♭m","Cm","Fm","Gm","Cm","Dm","Gm","Am","Dm"],cellSize:2*E/24,ratio:1,innerDiameter:.6,outerDiameter:.82},innerRing:{labels:["C","G","D","A","F♭/E","C♭/B","G♭/F♯","D♭/C♯","A♭/G♯","E♭","B♭","F"],cellSize:2*E/12,ratio:1,innerDiameter:.35,outerDiameter:.6}},P=(t,e)=>{if(t>=0)return t%e;for(;t<0;)t+=e;return t},H=(t,e,n,a,i,l,s)=>{const c=2*(e*(i-s)+a*(s-n)+l*(n-i)),d=((e*e+n*n)*(i-s)+(a*a+i*i)*(s-n)+(l*l+s*s)*(n-i))/c,r=((e*e+n*n)*(l-a)+(a*a+i*i)*(e-l)+(l*l+s*s)*(a-e))/c,u=t.dist(d,r,e,n),m=t.atan2(n-r,e-d),f=t.atan2(s-r,l-d),R=x=>{let o=x;for(;o>t.PI;)o-=t.TWO_PI;for(;o<-t.PI;)o+=t.TWO_PI;return o},g=m,b=f,_=5;let k=g;const p=R(b-g)/_;for(let x=1;x<=_;x++){k+=p;const o=d+u*t.cos(k),A=r+u*t.sin(k);t.vertex(o,A)}},F=(t,e,n,a,i)=>{if(n<0||n>=e.labels.length)throw new Error(`OOB labelIndex: ${n}`);const{cellSize:l,innerDiameter:s,outerDiameter:c,ratio:d}=e,r=t.createVector();r.x=0,r.y=-c/2;const u=n*l*d;r.rotate(u);const m=l/2,f=[r.copy().rotate(-m).setMag(s),r.copy().rotate(-m).setMag(c),r.copy().setMag(c),r.copy().rotate(m).setMag(c),r.copy().rotate(m).setMag(s),r.copy().setMag(s)].map(b=>b.mult(i)),R=r.copy().setMag(s+(c-s)/2).mult(i),g=P(n+a,e.labels.length)*360/e.labels.length;return{vertices:f,center:R,label:e.labels[n],color:`hsb(${g}, 50%, 80%)`,colorHue:g}},z=(t,e)=>{const{scale:n}=e,a=e.innerRing.labels.map((s,c)=>F(t,e.innerRing,c,e.position,n)),i=e.middleRing.labels.map((s,c)=>F(t,e.middleRing,c,e.position*2,n)),l=e.outerRing.labels.map((s,c)=>F(t,e.outerRing,c,e.position,n));return{tilesInnerRing:a,tilesMiddleRing:i,tilesOuterRing:l}},M=(t,e,n)=>{n?(t.strokeWeight(3),t.stroke([0,0,0,1]),t.fill(`hsb(${e.colorHue}, 60%, 90%)`)):(t.strokeWeight(2),t.stroke([0,0,0,.5]),t.fill(`hsb(${e.colorHue}, 50%, 70%)`));const[a,i,l,s,c,d]=e.vertices;t.beginShape(),t.vertex(a.x,a.y),t.vertex(i.x,i.y),H(t,i.x,i.y,l.x,l.y,s.x,s.y),t.vertex(c.x,c.y),H(t,c.x,c.y,d.x,d.y,a.x,a.y),t.endShape(),t.noStroke(),t.fill(0),t.textSize(13),n?(t.textStyle(t.BOLD),t.text(e.label,e.center.x-t.textWidth(e.label)/2,e.center.y),t.textStyle(t.NORMAL)):t.text(e.label,e.center.x-t.textWidth(e.label)/2,e.center.y)},st=(t,e,n,a,i)=>{const l=[n[P(e-1,n.length)],n[P(e,n.length)],n[P(e+1,n.length)],a[P(2*e-1,a.length)],a[P(2*e,a.length)],a[P(2*e+1,a.length)],i[P(e,i.length)]];for(const s of l)M(t,s,!0)},lt=(t,e,n)=>{const{scale:a}=n;t.textSize(10),t.push(),t.rotate(e*(2*t.PI/12)),t.fill(250),t.circle(0,0,n.innerRing.innerDiameter*2*a),t.fill(0);const i=t.createVector();i.x=0,i.y=-n.innerRing.innerDiameter*a;const l="▲";t.text(l,i.x-t.textWidth(l)/2,i.y*.9);const s="Key";t.text(s,i.x-t.textWidth(s)/2,i.y*.75);const c=t.createVector(),d=["♯","♯♯","♯♯♯","♯♯♯♯","7♭/5♯","6♭/6♯","5♭/7♯","♭♭♭♭","♭♭♭","♭♭","♭"];c.y=-n.innerRing.innerDiameter*.85*a,t.push();for(const W of d)t.rotate(2*t.PI/12),t.text(W,-t.textWidth(W)/2,c.y);t.pop();const r=t.createVector();r.y=-n.innerRing.innerDiameter*1.04*a;const u="I";t.text(u,r.x-t.textWidth(u)/2,r.y);const m=t.createVector();m.y=-n.innerRing.outerDiameter*.9*a;const f="maj7,maj9";t.text(f,m.x-t.textWidth(f)/2,m.y),t.push(),t.rotate(-(2*t.PI)/12);const R="IV";t.text(R,r.x-t.textWidth(R)/2,r.y);const g="maj7,maj9";t.text(g,m.x-t.textWidth(g)/2,m.y),t.pop(),t.push(),t.rotate(2*t.PI/12);const b="V";t.text(b,r.x-t.textWidth(b)/2,r.y);const _="7,9,11,sus4,13";t.text(_,m.x-t.textWidth(_)/2,m.y),t.pop(),r.y=-n.middleRing.innerDiameter*1.02*a,m.y=-n.middleRing.outerDiameter*.95*a;const k="III";t.text(k,r.x-t.textWidth(k)/2,r.y);const w="m7";t.text(w,m.x-t.textWidth(w)/2,m.y),t.push(),t.rotate(-(2*t.PI)/24);const p="II";t.text(p,r.x-t.textWidth(p)/2,r.y);const x="m7,m9";t.text(x,m.x-t.textWidth(x)/2,m.y),t.pop(),t.push();const o="V I";t.rotate(2*t.PI/24),t.text(o,r.x-t.textWidth(o)/2,r.y);const A="m7,m9";t.text(A,m.x-t.textWidth(A)/2,m.y),t.pop();const I="V II°";r.y=-n.outerRing.innerDiameter*1.015*a,m.y=-n.outerRing.outerDiameter*.96*a,t.text(I,r.x-t.textWidth(I)/2,r.y);const h="m7♭5";t.text(h,m.x-t.textWidth(h)/2,m.y)},L=(t,e)=>{if(e){t.position--,t.innerRing.labels.unshift(t.innerRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.outerRing.labels.unshift(t.outerRing.labels.pop());return}t.position++,t.innerRing.labels.push(t.innerRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.outerRing.labels.push(t.outerRing.labels.shift())};var ct=Y('<h2>Chord wheel <span><button aria-label="info"><i class="fa fa-info-circle" aria-hidden="true"></i></button></span></h2> <div class="d-flex justify-content-center svelte-laba2m"><!></div> <div class="justify-content-center svelte-laba2m"><p><button aria-label="rotate shape counter clockwise" class="fa fa-undo"></button> Shape rotation <button aria-label="rotate shape clockwise" class="fa fa-repeat"></button></p> <p><button aria-label="rotate wheel counter clockwise" class="fa fa-undo"></button> Wheel rotation <button aria-label="rotate wheel clockwise" class="fa fa-repeat"></button></p> <p>On mobile you can also swipe left/right to rotate the shape and up/down to rotate the wheel</p></div>',1);function It(t,e){J(e,!0),at.set({name:"Chord Wheel",description:"Find chords in a scale",iconPath:"/chord_wheel.png"});let n,a,i=Z(0);const l=()=>{L(C,!0),a=z(n,C)},s=()=>{L(C,!1),a=z(n,C)},c=o=>{function A(){const h=Math.max(Math.min(o.windowWidth,o.windowHeight),560);o.resizeCanvas(h*.8,h*.8),C.scale=h/2*.75,a=z(o,C)}o.setup=()=>{n=o,o.createCanvas(100,100),A(),o.colorMode(o.HSB)},o.draw=()=>{o.translate(o.width/2,o.height/2);const h=getComputedStyle(document.body),W=h.getPropertyValue("--nc-bg-1"),O=h.getPropertyValue("--nc-bg-2");o.background(W),o.fill(O),o.circle(0,0,o.width),a.tilesInnerRing.forEach(D=>M(o,D)),a.tilesMiddleRing.forEach(D=>M(o,D)),a.tilesOuterRing.forEach(D=>M(o,D)),st(o,V(i),a.tilesInnerRing,a.tilesMiddleRing,a.tilesOuterRing),lt(o,V(i),C)},o.keyPressed=h=>{![o.LEFT_ARROW,o.RIGHT_ARROW,o.UP_ARROW,o.DOWN_ARROW].includes(o.key)||h.altKey||(h.preventDefault(),o.key===o.LEFT_ARROW&&T(i,-1),o.key===o.RIGHT_ARROW&&T(i),o.key===o.UP_ARROW&&s(),o.key===o.DOWN_ARROW&&l())};let I;o.mouseDragged=h=>{if(h.target?.className!=="p5Canvas")return;if(h.preventDefault(),!I){I={x:o.mouseX,y:o.mouseY};return}const W=o.mouseX-I.x,O=o.mouseY-I.y,D=Math.abs(W),B=Math.abs(O);D<50&&B<50||(D>B?W<0?T(i,-1):T(i):O>0?l():s(),I={x:o.mouseX,y:o.mouseY})},o.windowResized=()=>{A()}};U(()=>{n?.remove()});var d=ct(),r=X(d),u=S(v(r)),m=v(u);m.__click=()=>ot.open(rt),tt(m,"",{},{position:"relative"}),y(u),y(r);var f=S(r,2),R=v(f);et(R,{sketch:c}),y(f);var g=S(f,2),b=v(g),_=v(b);_.__click=()=>j(i,V(i)-1);var k=S(_,2);k.__click=()=>j(i,V(i)+1),y(b);var w=S(b,2),p=v(w);p.__click=s;var x=S(p,2);x.__click=l,y(w),N(2),y(g),G(t,d),Q()}q(["click"]);export{It as component};
