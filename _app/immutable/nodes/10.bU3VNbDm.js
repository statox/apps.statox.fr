import{s as A,a as _,f as g,l as P,c as w,g as y,h as M,d as o,m as S,M as T,j as E,F as B,k as U,i as r,G as j,w as k,n as O,A as V,o as D}from"../chunks/scheduler.N2tVA6Cn.js";import{S as N,i as G,b as H,d as W,m as q,a as F,t as L,e as R}from"../chunks/index.F8-NL695.js";import{M as z}from"../chunks/Main.bTe1Nigg.js";function J(m){let s,p,e,d,l,c=m[0]?"show src":"hide src",f,i,n,$="Capture",b,u,I,h,v,C,x;return s=new z({props:{title:"Pot",description:"A WIP honey pot",iconPath:"/pot.png"}}),{c(){H(s.$$.fragment),p=_(),e=g("video"),d=_(),l=g("button"),f=P(c),i=_(),n=g("button"),n.textContent=$,b=_(),u=g("canvas"),I=_(),h=g("img"),this.h()},l(t){W(s.$$.fragment,t),p=w(t),e=y(t,"VIDEO",{id:!0,class:!0}),M(e).forEach(o),d=w(t),l=y(t,"BUTTON",{});var a=M(l);f=S(a,c),a.forEach(o),i=w(t),n=y(t,"BUTTON",{id:!0,"data-svelte-h":!0}),T(n)!=="svelte-j87h5p"&&(n.textContent=$),b=w(t),u=y(t,"CANVAS",{id:!0,style:!0}),M(u).forEach(o),I=w(t),h=y(t,"IMG",{alt:!0}),this.h()},h(){E(e,"id","video"),e.autoplay=!0,e.playsInline=!0,E(e,"class","svelte-17nkj1a"),B(e,"hidden",m[0]),E(n,"id","capture"),E(u,"id","canvas"),U(u,"display","none"),E(h,"alt","The captured camera")},m(t,a){q(s,t,a),r(t,p,a),r(t,e,a),r(t,d,a),r(t,l,a),j(l,f),r(t,i,a),r(t,n,a),r(t,b,a),r(t,u,a),r(t,I,a),r(t,h,a),v=!0,C||(x=[k(l,"click",m[2]),k(n,"click",m[1])],C=!0)},p(t,[a]){(!v||a&1)&&B(e,"hidden",t[0]),(!v||a&1)&&c!==(c=t[0]?"show src":"hide src")&&O(f,c)},i(t){v||(F(s.$$.fragment,t),v=!0)},o(t){L(s.$$.fragment,t),v=!1},d(t){t&&(o(p),o(e),o(d),o(l),o(i),o(n),o(b),o(u),o(I),o(h)),R(s,t),C=!1,V(x)}}}function K(m,s,p){let e,d;const l=()=>{const i=document.getElementById("canvas");if(!i)throw new Error("canvas not available");const n=i.getContext("2d");if(e=document.getElementById("video"),d=document.getElementById("photo"),!n)throw new Error("no context available");if(!d||!e)throw new Error("no photo or video available");n.drawImage(e,0,0,e.videoWidth,e.videoHeight,0,0,i.width,i.height);var $=i.toDataURL("image/png");d.setAttribute("src",$)};let c=!0;const f=()=>p(0,c=!c);return D(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then(function(i){e=document.getElementById("video"),e.srcObject=i}).catch(function(i){console.error("Error accessing media devices.",i)})}),[c,l,f]}class Z extends N{constructor(s){super(),G(this,s,K,J,A,{})}}export{Z as component};
