import"../chunks/DsnmJJEf.js";import"../chunks/CTZYrxuF.js";import{p as K,c as W,f as g,a as r,d as N,g as t,I as z,b as d,s as v,e as n,r as o,t as w,j as u}from"../chunks/a6R6ZExM.js";import{d as O,s as M}from"../chunks/CQsW2AK8.js";import{i as Q}from"../chunks/CN9CHvWo.js";import{M as le}from"../chunks/DK1iJMIN.js";import{M as me}from"../chunks/C2HpBzTc.js";import{a as pe}from"../chunks/BbpJsF2L.js";import{i as P}from"../chunks/BsOe4k0P.js";import{e as B,i as C}from"../chunks/BREkJFxE.js";import{a as _e}from"../chunks/CPtmBTpt.js";import{s as fe,a as J}from"../chunks/DaQ1DA65.js";import{u as ue}from"../chunks/CSvCa2ro.js";import{M as ge}from"../chunks/DQSBwwkY.js";import{g as he,p as $e,P as ye}from"../chunks/C3wahdqe.js";import{D as xe}from"../chunks/CkcISRbr.js";import{g as R}from"../chunks/CuE5N8om.js";import"../chunks/BF5MbYtv.js";import{p as ke}from"../chunks/CdbuI7CR.js";/* empty css                */var be=d('<button class="emotion-item svelte-cyscl8"> </button>'),we=d('<div class="selection svelte-cyscl8"></div>'),Me=d('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-value svelte-cyscl8"><!></div> <div class="event-value svelte-cyscl8"><!></div> <div class="event-value svelte-cyscl8"><!></div> <div class="event-actions svelte-cyscl8"><button class="svelte-cyscl8">Edit</button></div></div>'),Pe=d('<div class="events-header svelte-cyscl8"><div>Date</div> <div>Mood</div> <div>Weight</div> <div>Emotions</div> <div>Actions</div></div> <!>',1),De=d("<p>Loading events</p>");function Ee(D,E){K(E,!1);const c=()=>J($e,"$personalTrackerPassword",m),h=()=>J(ue,"$user",m),[m,T]=fe(),A=async()=>(await he(c())).sort((l,p)=>p.eventDateUnix-l.eventDateUnix),I=s=>{R(`/personal-tracker/add/${s}`)};Q();var $=W(),j=g($);{var y=s=>{var l=W(),p=g(l);pe(p,A,_=>{var f=De();r(_,f)},(_,f)=>{var x=Pe(),V=v(g(x),2);B(V,1,()=>t(f),C,(X,i)=>{const Y=z(()=>xe.fromSeconds(t(i).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var L=Me(),S=n(L),Z=n(S,!0);o(S);var U=v(S,2),ee=n(U);{var te=e=>{var a=u();w(()=>M(a,t(i).mood)),r(e,a)},ae=e=>{var a=u("-");r(e,a)};P(ee,e=>{t(i).mood!==void 0?e(te):e(ae,!1)})}o(U);var H=v(U,2),re=n(H);{var se=e=>{var a=u();w(F=>M(a,`${F??""} kg`),[()=>(t(i).weight/100).toFixed(1)]),r(e,a)},oe=e=>{var a=u("-");r(e,a)};P(re,e=>{t(i).weight!==void 0?e(se):e(oe,!1)})}o(H);var q=v(H,2),ie=n(q);{var ne=e=>{var a=we();B(a,5,()=>t(i).emotionwheel.emotions,C,(F,k)=>{var b=be(),ce=n(b);o(b),w(()=>{_e(b,`--color: ${t(k).color??""}`),M(ce,`${t(k).category??""}
                                    ${t(k).subcategory??""}
                                    ${t(k).emotion??""}`)}),r(F,b)}),o(a),r(e,a)},ve=e=>{var a=u("-");r(e,a)};P(ie,e=>{t(i).emotionwheel?.emotions?e(ne):e(ve,!1)})}o(q);var G=v(q,2),de=n(G);de.__click=()=>I(t(i).eventDateUnix),o(G),o(L),w(()=>M(Z,t(Y))),r(X,L)}),r(_,x)},(_,f)=>{{let x=z(()=>({level:"error",header:"Something went wrong getting events",message:t(f)}));ge(_,{get item(){return t(x)}})}}),r(s,l)};P(j,s=>{h()&&s(y)})}r(D,$),N(),T()}O(["click"]);var Te=d("<div><button>Add an entry</button></div> <!>",1),Ae=d("<!> <!>",1);function Xe(D,E){K(E,!1);const c={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};ke.set(c),Q();var h=Ae(),m=g(h);me(m,{get title(){return c.name},get description(){return c.description},get iconPath(){return c.iconPath}});var T=v(m,2);le(T,{message:"Login to see events",requiredScope:"admin",children:(A,I)=>{ye(A,{children:($,j)=>{var y=Te(),s=g(y),l=n(s);l.__click=()=>R("/personal-tracker/add"),o(s);var p=v(s,2);Ee(p,{}),r($,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(D,h),N()}O(["click"]);export{Xe as component};
