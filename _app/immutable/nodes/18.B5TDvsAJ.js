import{s as Be,A as ue,i as I,f as v,k as Qe,K as wt,e as d,t as pe,a as k,c as p,b as y,d as ve,z as D,g as E,l as f,P as se,D as St,h as u,Q as rt,E as ie,a4 as yt,B as Xe,y as $t,S as It,n as ce,o as Ye,p as Lt,G as Ke,j as $e,a5 as Ut}from"../chunks/scheduler.gZqC1beF.js";import{h as ot,u as At}from"../chunks/await_block.B9g0VIvX.js";import{S as We,i as Me,a as P,g as Pe,t as V,c as Ne,f as Dt,b as be,d as ge,m as Ce,e as ke}from"../chunks/index.qAIlD2bD.js";import{c as kt,o as Pt}from"../chunks/store.BjeKRW9D.js";import{u as Ze,M as Et,U as Nt}from"../chunks/Main.D2sh8YUr.js";import{r as Tt,a as et,A as Bt}from"../chunks/index.BjVS39Qu.js";import{e as De}from"../chunks/each.oQ_PnMYc.js";import{t as zt}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.2t_ERt9_.js";import{M as Wt,a as Mt,b as xt}from"../chunks/Main.CpkIBGXI.js";import{D as Ot}from"../chunks/datetime.BvUHwVSq.js";import"../chunks/entry.Cyt9u_XI.js";import{p as Vt}from"../chunks/Main.svelte_svelte_type_style_lang.BdzA82ZS.js";const Ht=!1,$l=Object.freeze(Object.defineProperty({__proto__:null,ssr:Ht},Symbol.toStringTag,{value:"Module"})),it=async()=>Tt({path:"/webWatcher/getAllWatchers"}),ct=async a=>et({path:"/webWatcher/createWatcher",data:a}),qt=async a=>et({path:"/webWatcher/deleteWatcher",data:{id:a}}),Ft=async a=>et({path:"/webWatcher/toggleWatcherEnabled",data:a});function ut(a,e,l){const t=a.slice();return t[17]=e[l],t}function ft(a){let e,l,t,n,r,o="Close",i,s,c,h,C="Name",w,b,_,m,g="Check interval",$,x,X,L,q,Ee="Notification message (the @mention is automatically added)",ze,G,fe,re,Y="Watcher type",Z,F,ee,Ie="CSS",R,_e="HASH",me,te,Le="URL",we,J,le,ne,Ue,Se,ae,ye,oe,K=De(a[1]),U=[];for(let z=0;z<K.length;z+=1)U[z]=ht(ut(a,K,z));const Te=z=>V(U[z],1,1,()=>{U[z]=null});function he(z){a[12](z)}let Ae={allowedUnits:["minutes","hours","days"],defaultDuration:{value:1,unit:"hours"}};a[6]!==void 0&&(Ae.valueInSeconds=a[6]),x=new Wt({props:Ae}),wt.push(()=>Dt(x,"valueInSeconds",he));let O=a[7]==="CSS"&&dt(a);function de(z,A){return z[8]?jt:Rt}let Q=de(a),j=Q(a);return{c(){e=d("div"),l=d("div"),t=d("h3"),n=pe(`Add a new clipboard entry
                `),r=d("button"),r.textContent=o,i=k();for(let z=0;z<U.length;z+=1)U[z].c();s=k(),c=d("form"),h=d("label"),h.textContent=C,w=k(),b=d("input"),_=k(),m=d("label"),m.textContent=g,$=k(),be(x.$$.fragment),L=k(),q=d("label"),q.textContent=Ee,ze=k(),G=d("input"),fe=k(),re=d("label"),re.textContent=Y,Z=k(),F=d("select"),ee=d("option"),ee.textContent=Ie,R=d("option"),R.textContent=_e,me=k(),te=d("label"),te.textContent=Le,we=k(),J=d("input"),le=k(),O&&O.c(),ne=k(),Ue=d("br"),Se=k(),j.c(),this.h()},l(z){e=p(z,"DIV",{role:!0,class:!0});var A=y(e);l=p(A,"DIV",{class:!0});var B=y(l);t=p(B,"H3",{class:!0});var N=y(t);n=ve(N,`Add a new clipboard entry
                `),r=p(N,"BUTTON",{"data-svelte-h":!0}),D(r)!=="svelte-2m9p61"&&(r.textContent=o),N.forEach(v),i=E(B);for(let H=0;H<U.length;H+=1)U[H].l(B);s=E(B),c=p(B,"FORM",{class:!0});var S=y(c);h=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),D(h)!=="svelte-bs9sy6"&&(h.textContent=C),w=E(S),b=p(S,"INPUT",{type:!0}),_=E(S),m=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),D(m)!=="svelte-q7xqd"&&(m.textContent=g),$=E(S),ge(x.$$.fragment,S),L=E(S),q=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),D(q)!=="svelte-1nwvu8o"&&(q.textContent=Ee),ze=E(S),G=p(S,"INPUT",{type:!0}),fe=E(S),re=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),D(re)!=="svelte-180kuuc"&&(re.textContent=Y),Z=E(S),F=p(S,"SELECT",{id:!0});var W=y(F);ee=p(W,"OPTION",{"data-svelte-h":!0}),D(ee)!=="svelte-x0e7ng"&&(ee.textContent=Ie),R=p(W,"OPTION",{"data-svelte-h":!0}),D(R)!=="svelte-1f1oya6"&&(R.textContent=_e),W.forEach(v),me=E(S),te=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),D(te)!=="svelte-47691s"&&(te.textContent=Le),we=E(S),J=p(S,"INPUT",{type:!0}),le=E(S),O&&O.l(S),ne=E(S),Ue=p(S,"BR",{}),Se=E(S),j.l(S),S.forEach(v),B.forEach(v),A.forEach(v),this.h()},h(){f(t,"class","title-bar svelte-tlh79p"),f(h,"for","name"),f(b,"type","text"),f(m,"for","check-interval"),f(q,"for","notification-message"),f(G,"type","textarea"),f(re,"for","watch-type"),ee.__value="CSS",se(ee,ee.__value),R.__value="HASH",se(R,R.__value),f(F,"id","watch-type"),a[7]===void 0&&St(()=>a[14].call(F)),f(te,"for","content"),f(J,"type","textarea"),f(c,"class","form-content svelte-tlh79p"),f(l,"class","contents svelte-tlh79p"),f(e,"role","dialog"),f(e,"class","modal svelte-tlh79p")},m(z,A){I(z,e,A),u(e,l),u(l,t),u(t,n),u(t,r),u(l,i);for(let B=0;B<U.length;B+=1)U[B]&&U[B].m(l,null);u(l,s),u(l,c),u(c,h),u(c,w),u(c,b),se(b,a[2]),u(c,_),u(c,m),u(c,$),Ce(x,c,null),u(c,L),u(c,q),u(c,ze),u(c,G),se(G,a[3]),u(c,fe),u(c,re),u(c,Z),u(c,F),u(F,ee),u(F,R),rt(F,a[7],!0),u(c,me),u(c,te),u(c,we),u(c,J),se(J,a[4]),u(c,le),O&&O.m(c,null),u(c,ne),u(c,Ue),u(c,Se),j.m(c,null),ae=!0,ye||(oe=[ie(r,"click",kt),ie(b,"input",a[11]),ie(G,"input",a[13]),ie(F,"change",a[14]),ie(J,"input",a[15])],ye=!0)},p(z,A){if(A&2){K=De(z[1]);let N;for(N=0;N<K.length;N+=1){const S=ut(z,K,N);U[N]?(U[N].p(S,A),P(U[N],1)):(U[N]=ht(S),U[N].c(),P(U[N],1),U[N].m(l,s))}for(Pe(),N=K.length;N<U.length;N+=1)Te(N);Ne()}A&4&&b.value!==z[2]&&se(b,z[2]);const B={};!X&&A&64&&(X=!0,B.valueInSeconds=z[6],yt(()=>X=!1)),x.$set(B),A&8&&se(G,z[3]),A&128&&rt(F,z[7]),A&16&&se(J,z[4]),z[7]==="CSS"?O?O.p(z,A):(O=dt(z),O.c(),O.m(c,ne)):O&&(O.d(1),O=null),Q===(Q=de(z))&&j?j.p(z,A):(j.d(1),j=Q(z),j&&(j.c(),j.m(c,null)))},i(z){if(!ae){for(let A=0;A<K.length;A+=1)P(U[A]);P(x.$$.fragment,z),ae=!0}},o(z){U=U.filter(Boolean);for(let A=0;A<U.length;A+=1)V(U[A]);V(x.$$.fragment,z),ae=!1},d(z){z&&v(e),Xe(U,z),ke(x),O&&O.d(),j.d(),ye=!1,$t(oe)}}}function ht(a){let e,l;return e=new Et({props:{item:a[17]}}),{c(){be(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,n){Ce(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.item=t[17]),e.$set(r)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function dt(a){let e,l="CSS selector",t,n,r,o;return{c(){e=d("label"),e.textContent=l,t=k(),n=d("input"),this.h()},l(i){e=p(i,"LABEL",{for:!0,"data-svelte-h":!0}),D(e)!=="svelte-1ib74yx"&&(e.textContent=l),t=E(i),n=p(i,"INPUT",{type:!0}),this.h()},h(){f(e,"for","css-selector"),f(n,"type","textarea")},m(i,s){I(i,e,s),I(i,t,s),I(i,n,s),se(n,a[5]),r||(o=ie(n,"input",a[16]),r=!0)},p(i,s){s&32&&se(n,i[5])},d(i){i&&(v(e),v(t),v(n)),r=!1,o()}}}function Rt(a){let e,l="Login to upload an entry";return{c(){e=d("span"),e.textContent=l,this.h()},l(t){e=p(t,"SPAN",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-4ab4io"&&(e.textContent=l),this.h()},h(){f(e,"class","form-action svelte-tlh79p")},m(t,n){I(t,e,n)},p:ce,d(t){t&&v(e)}}}function jt(a){let e,l="Submit",t,n;return{c(){e=d("button"),e.textContent=l,this.h()},l(r){e=p(r,"BUTTON",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1nfv1d"&&(e.textContent=l),this.h()},h(){f(e,"class","form-action svelte-tlh79p")},m(r,o){I(r,e,o),t||(n=ie(e,"click",a[9]),t=!0)},p:ce,d(r){r&&v(e),t=!1,n()}}}function Gt(a){let e,l,t=a[0]&&ft(a);return{c(){t&&t.c(),e=ue()},l(n){t&&t.l(n),e=ue()},m(n,r){t&&t.m(n,r),I(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&P(t,1)):(t=ft(n),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(Pe(),V(t,1,1,()=>{t=null}),Ne())},i(n){l||(P(t),l=!0)},o(n){V(t),l=!1},d(n){n&&v(e),t&&t.d(n)}}}function Jt(a,e,l){let t;Qe(a,Ze,L=>l(8,t=L));let{isOpen:n}=e,{onUpload:r}=e,o=[],i,s,c,h,C,w;const b=async()=>{l(1,o=[]),i!=null&&i.length||o.push({level:"error",header:"name must be defined"}),s||o.push({level:"error",header:"notification message must be defined"}),w==="CSS"&&!h&&o.push({level:"error",header:"A CSS watcher must have a css selector defined"}),C<15*60&&o.push({level:"error",header:"Check interval too small. Must be >= 15mn"});try{new URL(c)}catch{o.push({level:"error",header:"The URL is invalid"})}if(!o.length)try{w==="CSS"?await ct({name:i,notificationMessage:s,url:c,cssSelector:h,checkIntervalSeconds:C,watchType:w}):w==="HASH"&&await ct({name:i,notificationMessage:s,url:c,checkIntervalSeconds:C,watchType:w}),r(),kt()}catch(L){let q=L.message;L instanceof Bt&&L.code===401?q="Invalid logged in user":L instanceof Nt&&(q="User is logged out");const Ee=`<strong>Entry not created</strong><br/> ${q}`;zt.push(Ee,{theme:{"--toastBarBackground":"#FF0000"}})}};function _(){i=this.value,l(2,i)}function m(L){C=L,l(6,C)}function g(){s=this.value,l(3,s)}function $(){w=It(this),l(7,w)}function x(){c=this.value,l(4,c)}function X(){h=this.value,l(5,h)}return a.$$set=L=>{"isOpen"in L&&l(0,n=L.isOpen),"onUpload"in L&&l(10,r=L.onUpload)},[n,o,i,s,c,h,C,w,t,b,r,_,m,g,$,x,X]}class Kt extends We{constructor(e){super(),Me(this,e,Jt,Gt,Be,{isOpen:0,onUpload:10})}}function pt(a,e,l){const t=a.slice();return t[11]=e[l],t}function Qt(a){let e,l,t,n,r,o=De(a[3]),i=[];for(let s=0;s<o.length;s+=1)i[s]=vt(pt(a,o,s));return{c(){e=d("div"),l=d("div"),t=d("div"),n=pe(a[1]),r=k();for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=p(s,"DIV",{class:!0});var c=y(e);l=p(c,"DIV",{role:!0,class:!0,"aria-labelledby":!0,style:!0,id:!0});var h=y(l);t=p(h,"DIV",{class:!0,id:!0});var C=y(t);n=ve(C,a[1]),C.forEach(v),r=E(h);for(let w=0;w<i.length;w+=1)i[w].l(h);h.forEach(v),c.forEach(v),this.h()},h(){f(t,"class","legend"),f(t,"id",`label-${a[6]}`),f(l,"role","radiogroup"),f(l,"class","group-container svelte-1n7axnp"),f(l,"aria-labelledby",`label-${a[6]}`),Ke(l,"font-size",a[4]+"px"),f(l,"id",`group-${a[6]}`),f(e,"class","s s--multi svelte-1n7axnp")},m(s,c){I(s,e,c),u(e,l),u(l,t),u(t,n),u(l,r);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(l,null)},p(s,c){if(c&2&&$e(n,s[1]),c&73){o=De(s[3]);let h;for(h=0;h<o.length;h+=1){const C=pt(s,o,h);i[h]?i[h].p(C,c):(i[h]=vt(C),i[h].c(),i[h].m(l,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=o.length}c&16&&Ke(l,"font-size",s[4]+"px")},d(s){s&&v(e),Xe(i,s)}}}function Xt(a){let e,l,t,n,r,o,i;return{c(){e=d("div"),l=d("span"),t=pe(a[1]),n=k(),r=d("button"),this.h()},l(s){e=p(s,"DIV",{class:!0,style:!0});var c=y(e);l=p(c,"SPAN",{id:!0});var h=y(l);t=ve(h,a[1]),h.forEach(v),n=E(c),r=p(c,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var C=y(r);C.forEach(v),c.forEach(v),this.h()},h(){f(l,"id",`switch-${a[6]}`),f(r,"role","switch"),f(r,"aria-checked",a[5]),f(r,"aria-labelledby",`switch-${a[6]}`),f(r,"class","svelte-1n7axnp"),f(e,"class","s s--slider svelte-1n7axnp"),Ke(e,"font-size",a[4]+"px")},m(s,c){I(s,e,c),u(e,l),u(l,t),u(e,n),u(e,r),o||(i=ie(r,"click",a[7]),o=!0)},p(s,c){c&2&&$e(t,s[1]),c&32&&f(r,"aria-checked",s[5]),c&16&&Ke(e,"font-size",s[4]+"px")},d(s){s&&v(e),o=!1,i()}}}function Yt(a){let e,l,t,n,r,o,i="on",s,c,h="off",C,w;return{c(){e=d("div"),l=d("span"),t=pe(a[1]),n=k(),r=d("button"),o=d("span"),o.textContent=i,s=k(),c=d("span"),c.textContent=h,this.h()},l(b){e=p(b,"DIV",{class:!0});var _=y(e);l=p(_,"SPAN",{id:!0,class:!0});var m=y(l);t=ve(m,a[1]),m.forEach(v),n=E(_),r=p(_,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var g=y(r);o=p(g,"SPAN",{class:!0,"data-svelte-h":!0}),D(o)!=="svelte-oik0f3"&&(o.textContent=i),s=E(g),c=p(g,"SPAN",{class:!0,"data-svelte-h":!0}),D(c)!=="svelte-10sksj5"&&(c.textContent=h),g.forEach(v),_.forEach(v),this.h()},h(){f(l,"id",`switch-${a[6]}`),f(l,"class","svelte-1n7axnp"),f(o,"class","svelte-1n7axnp"),f(c,"class","svelte-1n7axnp"),f(r,"role","switch"),f(r,"aria-checked",a[5]),f(r,"aria-labelledby",`switch-${a[6]}`),f(r,"class","svelte-1n7axnp"),f(e,"class","s s--inner svelte-1n7axnp")},m(b,_){I(b,e,_),u(e,l),u(l,t),u(e,n),u(e,r),u(r,o),u(r,s),u(r,c),C||(w=ie(r,"click",a[7]),C=!0)},p(b,_){_&2&&$e(t,b[1]),_&32&&f(r,"aria-checked",b[5])},d(b){b&&v(e),C=!1,w()}}}function vt(a){let e,l,t,n=!1,r,o,i=a[11]+"",s,c,h,C,w,b;return C=Ut(a[9][0]),{c(){e=d("input"),r=k(),o=d("label"),s=pe(i),c=k(),this.h()},l(_){e=p(_,"INPUT",{type:!0,id:!0,class:!0}),r=E(_),o=p(_,"LABEL",{for:!0,class:!0});var m=y(o);s=ve(m,i),c=E(m),m.forEach(v),this.h()},h(){f(e,"type","radio"),f(e,"id",l=`${a[11]}-${a[6]}`),e.__value=t=a[11],se(e,e.__value),f(e,"class","svelte-1n7axnp"),f(o,"for",h=`${a[11]}-${a[6]}`),f(o,"class","svelte-1n7axnp"),C.p(e)},m(_,m){I(_,e,m),e.checked=e.__value===a[0],I(_,r,m),I(_,o,m),u(o,s),u(o,c),w||(b=ie(e,"change",a[8]),w=!0)},p(_,m){m&8&&l!==(l=`${_[11]}-${_[6]}`)&&f(e,"id",l),m&8&&t!==(t=_[11])&&(e.__value=t,se(e,e.__value),n=!0),(n||m&9)&&(e.checked=e.__value===_[0]),m&8&&i!==(i=_[11]+"")&&$e(s,i),m&8&&h!==(h=`${_[11]}-${_[6]}`)&&f(o,"for",h)},d(_){_&&(v(e),v(r),v(o)),C.r(),w=!1,b()}}}function Zt(a){let e;function l(r,o){return r[2]=="inner"?Yt:r[2]=="slider"?Xt:Qt}let t=l(a),n=t(a);return{c(){n.c(),e=ue()},l(r){n.l(r),e=ue()},m(r,o){n.m(r,o),I(r,e,o)},p(r,[o]){t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:ce,o:ce,d(r){r&&v(e),n.d(r)}}}function el(a,e,l){let{label:t}=e,{design:n="inner label"}=e,{options:r=[]}=e,{fontSize:o=16}=e,{value:i="on"}=e,s=!0;const c=Math.floor(Math.random()*100),h=Ye();function C(_){const m=_.target,g=m==null?void 0:m.getAttribute("aria-checked");l(5,s=g!=="true"),l(0,i=s===!0?"on":"off"),h("change",i)}Lt(()=>{l(5,s=i==="on")});const w=[[]];function b(){i=this.__value,l(0,i)}return a.$$set=_=>{"label"in _&&l(1,t=_.label),"design"in _&&l(2,n=_.design),"options"in _&&l(3,r=_.options),"fontSize"in _&&l(4,o=_.fontSize),"value"in _&&l(0,i=_.value)},[i,t,n,r,o,s,c,C,b,w]}class tl extends We{constructor(e){super(),Me(this,e,el,Zt,Be,{label:1,design:2,options:3,fontSize:4,value:0})}}function _t(a){let e,l,t,n=a[0].name+"",r,o,i,s,c,h,C,w,b,_,m="Check interval",g,$,x,X,L,q,Ee="Notification message",ze,G,fe,re,Y,Z,F,ee="URL",Ie,R,_e=a[0].url+"",me,te,Le,we,J,le,ne,Ue="Last check",Se,ae,ye,oe,K,U="Last content change",Te,he,Ae,O,de,Q,j,z="Last content",A,B,N,S;s=new tl({props:{value:a[8],label:"Enabled",design:"slider"}}),s.$on("change",a[7]),h=new Mt({}),h.$on("delete",a[6]);let W=a[0].watchType==="CSS"&&mt(a),H=a[0].lastErrorDateUnix&&bt(a);return{c(){e=d("div"),l=d("h3"),t=d("div"),r=pe(n),o=k(),i=d("div"),be(s.$$.fragment),c=k(),be(h.$$.fragment),C=k(),w=d("div"),b=d("p"),_=d("label"),_.textContent=m,g=k(),$=d("input"),x=k(),X=d("div"),L=d("p"),q=d("label"),q.textContent=Ee,ze=k(),G=d("input"),re=k(),Y=d("div"),Z=d("p"),F=d("label"),F.textContent=ee,Ie=k(),R=d("a"),me=pe(_e),Le=k(),W&&W.c(),we=k(),J=d("div"),le=d("p"),ne=d("label"),ne.textContent=Ue,Se=k(),ae=d("input"),ye=k(),oe=d("p"),K=d("label"),K.textContent=U,Te=k(),he=d("input"),Ae=k(),H&&H.c(),O=k(),de=d("div"),Q=d("p"),j=d("label"),j.textContent=z,A=k(),B=d("input"),this.h()},l(M){e=p(M,"DIV",{class:!0});var T=y(e);l=p(T,"H3",{class:!0});var xe=y(l);t=p(xe,"DIV",{class:!0});var tt=y(t);r=ve(tt,n),tt.forEach(v),o=E(xe),i=p(xe,"DIV",{class:!0});var Oe=y(i);ge(s.$$.fragment,Oe),c=E(Oe),ge(h.$$.fragment,Oe),Oe.forEach(v),xe.forEach(v),C=E(T),w=p(T,"DIV",{class:!0});var lt=y(w);b=p(lt,"P",{class:!0});var Ve=y(b);_=p(Ve,"LABEL",{for:!0,"data-svelte-h":!0}),D(_)!=="svelte-q7xqd"&&(_.textContent=m),g=E(Ve),$=p(Ve,"INPUT",{type:!0,class:!0}),Ve.forEach(v),lt.forEach(v),x=E(T),X=p(T,"DIV",{class:!0});var nt=y(X);L=p(nt,"P",{class:!0});var He=y(L);q=p(He,"LABEL",{for:!0,"data-svelte-h":!0}),D(q)!=="svelte-1rjok9v"&&(q.textContent=Ee),ze=E(He),G=p(He,"INPUT",{type:!0,class:!0}),He.forEach(v),nt.forEach(v),re=E(T),Y=p(T,"DIV",{class:!0});var qe=y(Y);Z=p(qe,"P",{class:!0});var Fe=y(Z);F=p(Fe,"LABEL",{for:!0,"data-svelte-h":!0}),D(F)!=="svelte-47691s"&&(F.textContent=ee),Ie=E(Fe),R=p(Fe,"A",{target:!0,rel:!0,href:!0});var at=y(R);me=ve(at,_e),at.forEach(v),Fe.forEach(v),Le=E(qe),W&&W.l(qe),qe.forEach(v),we=E(T),J=p(T,"DIV",{class:!0});var Re=y(J);le=p(Re,"P",{class:!0});var je=y(le);ne=p(je,"LABEL",{for:!0,"data-svelte-h":!0}),D(ne)!=="svelte-l58ce3"&&(ne.textContent=Ue),Se=E(je),ae=p(je,"INPUT",{type:!0,class:!0}),je.forEach(v),ye=E(Re),oe=p(Re,"P",{class:!0});var Ge=y(oe);K=p(Ge,"LABEL",{for:!0,"data-svelte-h":!0}),D(K)!=="svelte-r6rd2z"&&(K.textContent=U),Te=E(Ge),he=p(Ge,"INPUT",{type:!0,class:!0}),Ge.forEach(v),Re.forEach(v),Ae=E(T),H&&H.l(T),O=E(T),de=p(T,"DIV",{class:!0});var st=y(de);Q=p(st,"P",{class:!0});var Je=y(Q);j=p(Je,"LABEL",{for:!0,"data-svelte-h":!0}),D(j)!=="svelte-1hxqr7r"&&(j.textContent=z),A=E(Je),B=p(Je,"INPUT",{type:!0,class:!0}),Je.forEach(v),st.forEach(v),T.forEach(v),this.h()},h(){f(t,"class","item-name svelte-zz97hg"),f(i,"class","item-actions svelte-zz97hg"),f(l,"class","item-title svelte-zz97hg"),f(_,"for","check-interval"),$.disabled=!0,f($,"type","textarea"),$.value=a[5],f($,"class","svelte-zz97hg"),f(b,"class","section-1-item svelte-zz97hg"),f(w,"class","section svelte-zz97hg"),f(q,"for","notification-message"),G.disabled=!0,f(G,"type","textarea"),G.value=fe=a[0].notificationMessage,f(G,"class","svelte-zz97hg"),f(L,"class","section-2-item svelte-zz97hg"),f(X,"class","section svelte-zz97hg"),f(F,"for","content"),f(R,"target","_blank"),f(R,"rel","noopener noreferrer"),f(R,"href",te=a[0].url),f(Z,"class","section-3-item svelte-zz97hg"),f(Y,"class","section svelte-zz97hg"),f(ne,"for","last-check"),ae.disabled=!0,f(ae,"type","textarea"),ae.value=a[3],f(ae,"class","svelte-zz97hg"),f(le,"class","section-4-item svelte-zz97hg"),f(K,"for","last-update"),he.disabled=!0,f(he,"type","textarea"),he.value=a[4],f(he,"class","svelte-zz97hg"),f(oe,"class","section-4-item svelte-zz97hg"),f(J,"class","section svelte-zz97hg"),f(j,"for","last-update"),B.disabled=!0,f(B,"type","textarea"),B.value=N=a[0].lastContent,f(B,"class","svelte-zz97hg"),f(Q,"class","section-3-item svelte-zz97hg"),f(de,"class","section svelte-zz97hg"),f(e,"class","item svelte-zz97hg")},m(M,T){I(M,e,T),u(e,l),u(l,t),u(t,r),u(l,o),u(l,i),Ce(s,i,null),u(i,c),Ce(h,i,null),u(e,C),u(e,w),u(w,b),u(b,_),u(b,g),u(b,$),u(e,x),u(e,X),u(X,L),u(L,q),u(L,ze),u(L,G),u(e,re),u(e,Y),u(Y,Z),u(Z,F),u(Z,Ie),u(Z,R),u(R,me),u(Y,Le),W&&W.m(Y,null),u(e,we),u(e,J),u(J,le),u(le,ne),u(le,Se),u(le,ae),u(J,ye),u(J,oe),u(oe,K),u(oe,Te),u(oe,he),u(e,Ae),H&&H.m(e,null),u(e,O),u(e,de),u(de,Q),u(Q,j),u(Q,A),u(Q,B),S=!0},p(M,T){(!S||T&1)&&n!==(n=M[0].name+"")&&$e(r,n),(!S||T&1&&fe!==(fe=M[0].notificationMessage)&&G.value!==fe)&&(G.value=fe),(!S||T&1)&&_e!==(_e=M[0].url+"")&&$e(me,_e),(!S||T&1&&te!==(te=M[0].url))&&f(R,"href",te),M[0].watchType==="CSS"?W?(W.p(M,T),T&1&&P(W,1)):(W=mt(M),W.c(),P(W,1),W.m(Y,null)):W&&(Pe(),V(W,1,1,()=>{W=null}),Ne()),M[0].lastErrorDateUnix?H?H.p(M,T):(H=bt(M),H.c(),H.m(e,O)):H&&(H.d(1),H=null),(!S||T&1&&N!==(N=M[0].lastContent)&&B.value!==N)&&(B.value=N)},i(M){S||(P(s.$$.fragment,M),P(h.$$.fragment,M),P(W),S=!0)},o(M){V(s.$$.fragment,M),V(h.$$.fragment,M),V(W),S=!1},d(M){M&&v(e),ke(s),ke(h),W&&W.d(),H&&H.d()}}}function mt(a){let e,l,t,n,r,o,i,s;return n=new xt({props:{content:a[0].cssSelector}}),{c(){e=d("p"),l=d("label"),t=pe(`CSS selector
                        `),be(n.$$.fragment),r=k(),o=d("input"),this.h()},l(c){e=p(c,"P",{class:!0});var h=y(e);l=p(h,"LABEL",{for:!0});var C=y(l);t=ve(C,`CSS selector
                        `),ge(n.$$.fragment,C),C.forEach(v),r=E(h),o=p(h,"INPUT",{type:!0,class:!0}),h.forEach(v),this.h()},h(){f(l,"for","css-selector"),o.disabled=!0,f(o,"type","textarea"),o.value=i=a[0].cssSelector,f(o,"class","svelte-zz97hg"),f(e,"class","section-3-item svelte-zz97hg")},m(c,h){I(c,e,h),u(e,l),u(l,t),Ce(n,l,null),u(e,r),u(e,o),s=!0},p(c,h){const C={};h&1&&(C.content=c[0].cssSelector),n.$set(C),(!s||h&1&&i!==(i=c[0].cssSelector)&&o.value!==i)&&(o.value=i)},i(c){s||(P(n.$$.fragment,c),s=!0)},o(c){V(n.$$.fragment,c),s=!1},d(c){c&&v(e),ke(n)}}}function bt(a){let e,l,t,n="Last error",r,o,i,s,c,h,C="Last error message",w,b,_;return{c(){e=d("div"),l=d("p"),t=d("label"),t.textContent=n,r=k(),o=d("input"),s=k(),c=d("p"),h=d("label"),h.textContent=C,w=k(),b=d("input"),this.h()},l(m){e=p(m,"DIV",{class:!0});var g=y(e);l=p(g,"P",{class:!0});var $=y(l);t=p($,"LABEL",{for:!0,"data-svelte-h":!0}),D(t)!=="svelte-1h8ip7h"&&(t.textContent=n),r=E($),o=p($,"INPUT",{type:!0,class:!0}),$.forEach(v),s=E(g),c=p(g,"P",{class:!0});var x=y(c);h=p(x,"LABEL",{for:!0,"data-svelte-h":!0}),D(h)!=="svelte-x18p73"&&(h.textContent=C),w=E(x),b=p(x,"INPUT",{type:!0,class:!0}),x.forEach(v),g.forEach(v),this.h()},h(){f(t,"for","last-check"),o.disabled=!0,f(o,"type","textarea"),o.value=i=a[2](a[0].lastErrorDateUnix),f(o,"class","svelte-zz97hg"),f(l,"class","section-4-item svelte-zz97hg"),f(h,"for","last-update"),b.disabled=!0,f(b,"type","textarea"),b.value=_=a[0].lastErrorMessage,f(b,"class","svelte-zz97hg"),f(c,"class","section-4-item svelte-zz97hg"),f(e,"class","section error-section svelte-zz97hg")},m(m,g){I(m,e,g),u(e,l),u(l,t),u(l,r),u(l,o),u(e,s),u(e,c),u(c,h),u(c,w),u(c,b)},p(m,g){g&1&&i!==(i=m[2](m[0].lastErrorDateUnix))&&o.value!==i&&(o.value=i),g&1&&_!==(_=m[0].lastErrorMessage)&&b.value!==_&&(b.value=_)},d(m){m&&v(e)}}}function ll(a){let e,l,t=a[1]&&_t(a);return{c(){t&&t.c(),e=ue()},l(n){t&&t.l(n),e=ue()},m(n,r){t&&t.m(n,r),I(n,e,r),l=!0},p(n,[r]){n[1]?t?(t.p(n,r),r&2&&P(t,1)):(t=_t(n),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(Pe(),V(t,1,1,()=>{t=null}),Ne())},i(n){l||(P(t),l=!0)},o(n){V(t),l=!1},d(n){n&&v(e),t&&t.d(n)}}}function nl(a,e,l){let t;Qe(a,Ze,b=>l(1,t=b));const n=Ye();let{watcher:r}=e;const o=b=>{const _=new Date(b*1e3);return _.toLocaleDateString()+" "+_.toLocaleTimeString()},i=r.lastCheckDateUnix===0?"Never checked before":o(r.lastCheckDateUnix),s=r.lastUpdateDateUnix===0?"Never changed":o(r.lastUpdateDateUnix),c=Ot.fromMillis(r.checkIntervalSeconds*1e3).rescale().toHuman(),h=async()=>{if(!r.id){console.error("id must be defined");return}try{await qt(r.id),n("delete")}catch(b){const _=`<strong>Watcher not deleted</strong><br/> ${b.message}`;zt.push(_,{theme:{"--toastBarBackground":"#FF0000"}})}},C=async b=>{await Ft({watcherId:r.id,setToEnabled:b.detail==="on"}),n("update")};let w=r.archivalDateUnix?"off":"on";return a.$$set=b=>{"watcher"in b&&l(0,r=b.watcher)},[r,t,o,i,s,c,h,C,w]}class al extends We{constructor(e){super(),Me(this,e,nl,ll,Be,{watcher:0})}}function gt(a,e,l){const t=a.slice();return t[5]=e[l],t}function Ct(a){let e,l;return e=new al({props:{watcher:a[5]}}),e.$on("delete",a[3]),e.$on("update",a[4]),{c(){be(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,n){Ce(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.watcher=t[5]),e.$set(r)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function sl(a){let e,l,t=De(a[0].sort(a[2])),n=[];for(let o=0;o<t.length;o+=1)n[o]=Ct(gt(a,t,o));const r=o=>V(n[o],1,1,()=>{n[o]=null});return{c(){e=d("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=p(o,"DIV",{class:!0});var i=y(e);for(let s=0;s<n.length;s+=1)n[s].l(i);i.forEach(v),this.h()},h(){f(e,"class","container svelte-c8nodu")},m(o,i){I(o,e,i);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);l=!0},p(o,[i]){if(i&7){t=De(o[0].sort(o[2]));let s;for(s=0;s<t.length;s+=1){const c=gt(o,t,s);n[s]?(n[s].p(c,i),P(n[s],1)):(n[s]=Ct(c),n[s].c(),P(n[s],1),n[s].m(e,null))}for(Pe(),s=t.length;s<n.length;s+=1)r(s);Ne()}},i(o){if(!l){for(let i=0;i<t.length;i+=1)P(n[i]);l=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)V(n[i]);l=!1},d(o){o&&v(e),Xe(n,o)}}}function rl(a,e,l){let{watchers:t}=e;const n=Ye(),r=(s,c)=>s.archivalDateUnix===null&&c.archivalDateUnix!==null?-1:s.archivalDateUnix!==null&&c.archivalDateUnix===null?1:c.id-s.id,o=()=>n("delete"),i=()=>n("update");return a.$$set=s=>{"watchers"in s&&l(0,t=s.watchers)},[t,n,r,o,i]}class ol extends We{constructor(e){super(),Me(this,e,rl,sl,Be,{watchers:0})}}function il(a){let e,l;return e=new Et({props:{item:{level:"info",header:"Login to list the watchers"}}}),{c(){be(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,n){Ce(e,t,n),l=!0},p:ce,i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function cl(a){let e,l="Create a new watcher",t,n,r="Add an entry",o,i,s="Watchers",c,h,C,w,b,_,m={ctx:a,current:null,token:null,hasCatch:!0,pending:hl,then:fl,catch:ul,value:4,error:5,blocks:[,,,]};return ot(C=a[0],m),{c(){e=d("h2"),e.textContent=l,t=k(),n=d("button"),n.textContent=r,o=k(),i=d("h2"),i.textContent=s,c=k(),h=ue(),m.block.c()},l(g){e=p(g,"H2",{"data-svelte-h":!0}),D(e)!=="svelte-1syw717"&&(e.textContent=l),t=E(g),n=p(g,"BUTTON",{"data-svelte-h":!0}),D(n)!=="svelte-10yn9w3"&&(n.textContent=r),o=E(g),i=p(g,"H2",{"data-svelte-h":!0}),D(i)!=="svelte-19rsvuf"&&(i.textContent=s),c=E(g),h=ue(),m.block.l(g)},m(g,$){I(g,e,$),I(g,t,$),I(g,n,$),I(g,o,$),I(g,i,$),I(g,c,$),I(g,h,$),m.block.m(g,m.anchor=$),m.mount=()=>h.parentNode,m.anchor=h,w=!0,b||(_=ie(n,"click",a[3]),b=!0)},p(g,$){a=g,m.ctx=a,$&1&&C!==(C=a[0])&&ot(C,m)||At(m,a,$)},i(g){w||(P(m.block),w=!0)},o(g){for(let $=0;$<3;$+=1){const x=m.blocks[$];V(x)}w=!1},d(g){g&&(v(e),v(t),v(n),v(o),v(i),v(c),v(h)),m.block.d(g),m.token=null,m=null,b=!1,_()}}}function ul(a){let e,l="Something went wrong",t,n,r=JSON.stringify(a[5])+"",o;return{c(){e=d("p"),e.textContent=l,t=k(),n=d("p"),o=pe(r)},l(i){e=p(i,"P",{"data-svelte-h":!0}),D(e)!=="svelte-171fb2d"&&(e.textContent=l),t=E(i),n=p(i,"P",{});var s=y(n);o=ve(s,r),s.forEach(v)},m(i,s){I(i,e,s),I(i,t,s),I(i,n,s),u(n,o)},p(i,s){s&1&&r!==(r=JSON.stringify(i[5])+"")&&$e(o,r)},i:ce,o:ce,d(i){i&&(v(e),v(t),v(n))}}}function fl(a){let e,l;return e=new ol({props:{watchers:a[4]}}),e.$on("delete",a[2]),e.$on("update",a[2]),{c(){be(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,n){Ce(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.watchers=t[4]),e.$set(r)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function hl(a){let e,l="Loading data";return{c(){e=d("p"),e.textContent=l},l(t){e=p(t,"P",{"data-svelte-h":!0}),D(e)!=="svelte-ezyzhc"&&(e.textContent=l)},m(t,n){I(t,e,n)},p:ce,i:ce,o:ce,d(t){t&&v(e)}}}function dl(a){let e,l,t,n;const r=[cl,il],o=[];function i(s,c){return s[1]?0:1}return e=i(a),l=o[e]=r[e](a),{c(){l.c(),t=ue()},l(s){l.l(s),t=ue()},m(s,c){o[e].m(s,c),I(s,t,c),n=!0},p(s,[c]){let h=e;e=i(s),e===h?o[e].p(s,c):(Pe(),V(o[h],1,1,()=>{o[h]=null}),Ne(),l=o[e],l?l.p(s,c):(l=o[e]=r[e](s),l.c()),P(l,1),l.m(t.parentNode,t))},i(s){n||(P(l),n=!0)},o(s){V(l),n=!1},d(s){s&&v(t),o[e].d(s)}}}function pl(a,e,l){let t;Qe(a,Ze,i=>l(1,t=i)),Vt.set("Web Watchers");let n=it();const r=()=>l(0,n=it());return[n,t,r,()=>Pt(Kt,{onUpload:r})]}class Il extends We{constructor(e){super(),Me(this,e,pl,dl,Be,{})}}export{Il as component,$l as universal};
