import"../chunks/DsnmJJEf.js";import"../chunks/CbJJCuUa.js";import{p as D,h as s,C as ae,b as g,s as r,a as n,d as H,e as c,f as re,g as t,i as a,t as oe,r as f,n as j,j as se}from"../chunks/BI5tnybL.js";import{i as ie}from"../chunks/BU96bRAZ.js";import{g as N}from"../chunks/CQfaKTAK.js";import"../chunks/DlRVxj54.js";import{p as le}from"../chunks/L3zL1n65.js";/* empty css                */import"../chunks/DKXeG7-1.js";import{d as ne}from"../chunks/BHBOcJDT.js";import{i as L}from"../chunks/BcTGm7Fo.js";import{e as ce,i as fe}from"../chunks/V4cWF7mx.js";import{r as q,s as ue}from"../chunks/Db8wGxCz.js";import{b as z,d as de}from"../chunks/u1KJTtVJ.js";import{b as pe}from"../chunks/Dsp9gY7N.js";import{A as me}from"../chunks/CuMzzfZD.js";import"../chunks/RZZgkjFT.js";import{U as ve}from"../chunks/BWptIUEw.js";import{M as be}from"../chunks/BwGSCHVW.js";import{t as ge}from"../chunks/DFOQ394W.js";import{M as _e}from"../chunks/CKwsCUeU.js";import{M as he}from"../chunks/D4b6Boo_.js";import{M as xe}from"../chunks/BFaOzMgQ.js";import{u as ye}from"../chunks/CFI2AmZf.js";var Me=g('Public <i class="fas fa-lock-open"></i>',1),ke=g('Private <i class="fas fa-lock"></i>',1),Se=g('<i class="sucess-indicator fas fa-check svelte-5gxvc6"></i>'),Pe=g('<!> <form class="form-content svelte-5gxvc6"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-5gxvc6" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <button class="form-action"><!></button> <!>',1),Ce=g('<div class="contents svelte-5gxvc6"><h4 class="title-bar svelte-5gxvc6">Add a new clipboard entry <button>Back</button></h4> <!></div>');function Ue(P,_){D(_,!0);let i=s(ae([])),h=s(""),x=s(""),y=s(void 0),u=s(void 0),d=s(!1),M=s(0),p=s(!1),C=s(!1);const O=async()=>{if(a(i,[],!0),t(h)?.length||t(i).push({level:"error",header:"name must be defined"}),t(M)<0&&t(i).push({level:"error",header:"TTL must be positive"}),t(i).length)return;let m;if(t(u)&&t(u).length&&(m=t(u)[0]||void 0),!t(x)?.length&&!m){t(i).push({level:"error",header:"Either content or file must be defined"});return}try{a(p,!0),a(C,!1),await ye({name:t(h),content:t(x),ttlSeconds:t(M),isPublic:t(d),file:m}),a(p,!1),_.onUpload(),a(C,!0)}catch(v){a(p,!1);let l=v.message;v instanceof me&&v.code===401?l="Invalid logged in user":v instanceof ve&&(l="User is logged out");const k=`<strong>Entry not created</strong><br/> ${l}`;ge.push(k,{theme:{"--toastBarBackground":"#FF0000"}})}},G=()=>{N("/clipboard/")};var U=Ce(),A=c(U),J=r(c(A));J.__click=G,f(A);var K=r(A,2);be(K,{message:"Login to add an entry",requiredScope:"admin",children:(m,v)=>{var l=Pe(),k=re(l);ce(k,17,()=>t(i),fe,(e,o)=>{he(e,{get item(){return t(o)}})});var I=r(k,2),T=r(c(I),2);q(T);var w=r(T,4);q(w);var E=r(w,4),F=c(E);pe(F,e=>a(y,e),()=>t(y));var Q=r(F,2);Q.__click=()=>{t(y)!==void 0&&(t(y).value="")},f(E);var B=r(E,4);xe(B,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(M)},set valueInSeconds(e){a(M,e,!0)}});var S=r(B,4);let $;S.__click=()=>a(d,!t(d));var R=c(S);{var V=e=>{var o=Me();j(),n(e,o)},W=e=>{var o=ke();j(),n(e,o)};L(R,e=>{t(d)?e(V):e(W,!1)})}f(S),f(I);var b=r(I,2);b.__click=O;var X=c(b);{var Y=e=>{_e(e,{size:.5,unit:"em",durationSeconds:.5})},Z=e=>{var o=se("Submit");n(e,o)};L(X,e=>{t(p)?e(Y):e(Z,!1)})}f(b);var ee=r(b,2);{var te=e=>{var o=Se();n(e,o)};L(ee,e=>{t(C)&&e(te)})}oe(()=>{$=ue(S,1,"visibility-status svelte-5gxvc6",null,$,{"visibility-public":t(d)}),b.disabled=t(p)}),z(T,()=>t(h),e=>a(h,e)),z(w,()=>t(x),e=>a(x,e)),de(F,()=>t(u),e=>a(u,e)),n(m,l)},$$slots:{default:!0}}),f(U),n(P,U),H()}ne(["click"]);function Ye(P,_){D(_,!1);const i={name:"Clipboard",description:"My universal clipboard app",iconPath:"/clipboard.png",showAuthInHeader:!0};le.set(i),ie(),Ue(P,{onUpload:()=>N("/clipboard")}),H()}export{Ye as component};
