var _e=Object.defineProperty;var ie=l=>{throw TypeError(l)};var ge=(l,t,a)=>t in l?_e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;var K=(l,t,a)=>ge(l,typeof t!="symbol"?t+"":t,a),he=(l,t,a)=>t.has(l)||ie("Cannot "+a);var ee=(l,t,a)=>(he(l,t,"read from private field"),a?a.call(l):t.get(l)),ne=(l,t,a)=>t.has(l)?ie("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(l):t.set(l,a);import"../chunks/CWj6FrbW.js";import{A as G,g as R,s as B,C as ue,p as Se,B as ze,aO as Me,E as C,w as r,k as ye,n as we,F,v as Ee}from"../chunks/I8Oq6K5_.js";import{s as ke}from"../chunks/DRU8cbEw.js";import{i as Ce}from"../chunks/CLIFNVQM.js";import{f as Fe,t as ve,a as se}from"../chunks/CtuybYrQ.js";import{r as u}from"../chunks/BKam2jIy.js";import{b as v}from"../chunks/BcNfVtUj.js";import{b as Le}from"../chunks/CUSbk-Jw.js";import{M as Xe}from"../chunks/CQbBgCIp.js";import{P as Ye}from"../chunks/u9MJM6mA.js";var X;class Ze{constructor(t,a){K(this,"default");ne(this,X,G());K(this,"key","");this.key=t,this.value=a,this.default=a;{const o=localStorage.getItem(t);o&&(this.value=this.deserialize(o))}ue(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return R(ee(this,X))}set value(t){B(ee(this,X),t,!0)}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(t){return JSON.stringify(t)}deserialize(t){return JSON.parse(t)}}X=new WeakMap;function n(l,t){return new Ze(l,t)}const xe=(l,t,a)=>t-a<=l&&l<=t+a,Ge=(l,t)=>{const{gridSize:a,colorMode:o,cellSize:S,t:z,noiseFactor:M,displacementX:Y,displacementY:c,displacementZ:L,levelsStart:i,levelsEnd:p,levelsStep:y,levelsMargin:w}=t;l.background(0);const _=l.color(255,0,0),g=l.color(0,255,0);for(let d=0;d<a;d++)for(let f=0;f<a;f++){const m=l.noise(f*M+z*Y,d*M+z*c,z*L);for(let b=i;b<=p;b+=y){if(!xe(m,b,w))continue;let s=255;if(o==="white")s=255;else if(o==="gradient")s=l.map(b,i,p,100,255);else if(o==="quantized-gradient"){const E=Math.trunc(m*10)/10;s=l.map(E,i,p,100,255)}else if(o==="color-gradient")s=l.lerpColor(_,g,m);else if(o==="color-scaled-gradient"){const E=l.map(m,i,p,0,1);s=l.lerpColor(_,g,E)}l.fill(s),l.circle(f*S,d*S,S)}}};var Re=ve('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1">',1),Be=ve('<div class="container svelte-1iua5de"><div id="canvas-container"><div class="stats"><label for="fps">FPS</label> <span> </span></div> <!></div> <div class="controls svelte-1iua5de"><span class="control-header svelte-1iua5de">Grid controls</span><span></span> <label for="gridSize">gridSize</label> <input type="number" step="1"> <label for="blurEnabled">Enable blur</label> <!> <!> <span class="control-header svelte-1iua5de">Noise controls</span><span></span> <label for="displacementX">displacementX</label> <input type="number" step="0.01"> <label for="displacementY">displacementY</label> <input type="number" step="0.01"> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"> <span class="control-header svelte-1iua5de">Lines controls</span><span></span> <label for="levelsStart">levelsStart</label> <input type="number" step="0.1"> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option><option>Color Gradient</option><option>Color scaled Gradient</option></select> <label for="resetAll">Reset all</label><button>Reset</button></div></div>');function $e(l,t){Se(t,!0);let a=G(void 0),o=1e3,S=0,z=0,M=0,Y=G(0);const c=n("p5-terrain-gridSize",200);let L=o/c.value;ue(()=>{L=o/c.value});let i=n("p5-terrain-blurEnabled",!1),p=n("p5-terrain-blurValue",4),y=n("p5-terrain-displacementX",0),w=n("p5-terrain-displacementY",0),_=n("p5-terrain-displacementZ",.01),g=n("p5-terrain-noiseFactor",.02),d=n("p5-terrain-levelsStart",.2),f=n("p5-terrain-levelsEnd",.8),m=n("p5-terrain-levelsStep",.05),b=n("p5-terrain-margin",.005),s=n("p5-terrain-colorMode","gradient"),E=G(ze(i.value?"on":"off"));const ce=()=>{[c,i,p,y,w,_,g,d,f,m,b,s].forEach(h=>h.reset())},pe=e=>{function h(){const k=Math.min(e.windowWidth,e.windowHeight);o=Math.floor(k*.8),e.resizeCanvas(o,o),L=o/c.value}function x(){const k=Date.now();k-z>1e3&&(B(Y,M,!0),z=k,M=0),M++}e.windowResized=()=>{h()},e.setup=()=>{B(a,e,!0),e.createCanvas(o,o),h(),e.noStroke()},e.draw=()=>{x(),S++,Ge(e,{gridSize:c.value,colorMode:s.value,t:S,cellSize:L,noiseFactor:g.value,displacementX:y.value,displacementY:w.value,displacementZ:_.value,levelsStart:d.value,levelsEnd:f.value,levelsMargin:b.value,levelsStep:m.value}),i.value&&e.filter(e.BLUR,p.value)}};Me(()=>{var e;(e=R(a))==null||e.remove()});var P=Be(),q=C(P),A=C(q),le=r(C(A),2),de=C(le,!0);F(le),F(A);var fe=r(A,2);Ye(fe,{sketch:pe}),F(q);var te=r(q,2),D=r(C(te),5);u(D);var ae=r(D,4);Xe(ae,{get value(){return R(E)},label:"",design:"slider",$$events:{change:()=>{i.value=!i.value,B(E,i.value?"on":"off",!0)}}});var re=r(ae,2);{var me=e=>{var h=Re(),x=r(Ee(h),2);u(x),v(x,()=>p.value,k=>p.value=k),se(e,h)};Ce(re,e=>{i.value&&e(me)})}var I=r(re,7);u(I);var N=r(I,4);u(N);var O=r(N,4);u(O);var V=r(O,4);u(V);var W=r(V,7);u(W);var H=r(W,4);u(H);var J=r(H,4);u(J);var T=r(J,4);u(T);var Z=r(T,4),$=C(Z);$.value=$.__value="white";var Q=r($);Q.value=Q.__value="gradient";var U=r(Q);U.value=U.__value="quantized-gradient";var j=r(U);j.value=j.__value="color-gradient";var oe=r(j);oe.value=oe.__value="color-scaled-gradient",F(Z);var be=r(Z,3);be.__click=ce,F(te),F(P),ye(()=>ke(de,R(Y))),v(D,()=>c.value,e=>c.value=e),v(I,()=>y.value,e=>y.value=e),v(N,()=>w.value,e=>w.value=e),v(O,()=>_.value,e=>_.value=e),v(V,()=>g.value,e=>g.value=e),v(W,()=>d.value,e=>d.value=e),v(H,()=>f.value,e=>f.value=e),v(J,()=>m.value,e=>m.value=e),v(T,()=>b.value,e=>b.value=e),Le(Z,()=>s.value,e=>s.value=e),se(l,P),we()}Fe(["click"]);export{$e as component};
