import"../chunks/CWj6FrbW.js";import{i as T}from"../chunks/DoJ6nzXR.js";import{p as C,aB as t,w as m,aC as o,k as R,a7 as S,n as D,g as s,v as G}from"../chunks/CLwkvAa9.js";import{t as L,a as w}from"../chunks/DTjFRfZP.js";import{a as Z}from"../chunks/D70CLPPX.js";import"../chunks/gprNfWEB.js";import"../chunks/BFzSmv2r.js";import{A as r,g as aa}from"../chunks/Dy_y87ej.js";import{D as B,a as F}from"../chunks/Ct5AeG1w.js";import{M as ea}from"../chunks/BsEu9Qde.js";import{p as ta}from"../chunks/1asO6sIK.js";import{M as $}from"../chunks/B0n3PbH2.js";import{s as h}from"../chunks/Cc5B25b1.js";import{a as W,b as oa}from"../chunks/vB8enBEs.js";import{p as H}from"../chunks/qY3aL9mB.js";import{i as na}from"../chunks/CxmqhxOM.js";import{e as j,i as O}from"../chunks/D8fgoJlV.js";const q=a=>{if(a===r.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(a===r.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(a===r.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(a===r.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(a===r.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(a===r.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(a===r.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(a===r.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},ra=a=>{if(a===r.NEW)return"moon_phase_icons/1_new_moon.png";if(a===r.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(a===r.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(a===r.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(a===r.FULL)return"moon_phase_icons/5_full_moon.png";if(a===r.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(a===r.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(a===r.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},ia=async()=>{const a=await aa(),{moonState:g,sunState:e,upcomingLunarStates:n}=a;return{moonState:g,sunState:{goldenHour:F.fromMillis(e.goldenHour),solarNoon:F.fromMillis(e.solarNoon),sunrise:F.fromMillis(e.sunrise),sunset:F.fromMillis(e.sunset),dayLength:B.fromMillis(e.dayLengthMs),dayLengthDiff:B.fromMillis(e.dayLengthDiffMs)},upcomingLunarStates:n.map(p=>({date:F.fromMillis(p.tsMillis),lunarState:{...p.lunarState,phasePictureUrl:q(p.lunarState.moonPhase)}}))}};var sa=L('<div class="container svelte-rmbwp1"><div class="content svelte-rmbwp1"><div class="data svelte-rmbwp1"><span><i class="fas fa-moon" aria-hidden="true"></i></span> <span></span> <span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span><i class="fas fa-sun" aria-hidden="true"></i></span> <span></span> <span>Sun rise/set</span> <span> </span> <span>DayLength</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-rmbwp1"></div></div>');function ma(a,g){C(g,!1);let e=H(g,"moonState",8),n=H(g,"sunState",8);T();var p=sa(),E=t(p),d=t(E),i=m(t(d),6),_=t(i,!0);o(i);var l=m(i,4),c=t(l);o(l);var u=m(l,4),b=t(u);o(u);var f=m(u,8),N=t(f);o(f);var A=m(f,4),y=t(A);o(A);var v=m(A,4),M=t(v,!0);o(v);var k=m(v,4),x=t(k,!0);o(k),o(d);var P=m(d,2);o(E),o(p),R((I,U,z,Q,X,V,K,J,Y)=>{h(_,e().moonPhaseFr),h(c,`${I??""} days (${U??""}%)`),h(b,`${e().moonVisibilityWindow[0]??""} - ${e().moonVisibilityWindow[1]??""}`),h(N,`${z??""} - ${Q??""}`),h(y,`${X??""}
                (${n().dayLengthDiff>0?"+":""}${V??""})`),h(M,K),h(x,J),W(P,"alt",e().moonPhase),W(P,"src",Y)},[()=>e().lunarAge.toFixed(1),()=>(e().lunarAgePercent*100).toFixed(0),()=>n().sunrise.toFormat("HH:mm"),()=>n().sunset.toFormat("HH:mm"),()=>n().dayLength.toFormat("h:m"),()=>n().dayLengthDiff.toFormat("m:s"),()=>n().solarNoon.toFormat("HH:mm"),()=>n().goldenHour.toFormat("HH:mm"),()=>q(e().moonPhase)],S),w(a,p),D()}var pa=L('<div class="day-header svelte-1baztfi"> </div>'),da=L("<div> </div> <div> </div>",1),_a=L('<div><div><img class="phase-img svelte-1baztfi"></div> <!></div>'),ua=L('<div class="container svelte-1baztfi"><!> <!></div>');function la(a,g){C(g,!1);let e=H(g,"upcomingLunarStates",8);T();var n=ua(),p=t(n);j(p,1,()=>e().slice(0,7),O,(d,i)=>{let _=()=>s(i).date;var l=pa(),c=t(l,!0);o(l),R(u=>h(c,u),[()=>_().setLocale("fr").toLocaleString({weekday:"long"})],S),w(d,l)});var E=m(p,2);j(E,1,e,O,(d,i,_)=>{let l=()=>s(i).date,c=()=>s(i).lunarState;var u=_a();const b=S(()=>_===0||_===29||e()[_-1].lunarState.moonPhaseFr!==c().moonPhaseFr);var f=t(u),N=t(f);o(f);var A=m(f,2);{var y=v=>{var M=da(),k=G(M),x=t(k,!0);o(k);var P=m(k,2),I=t(P,!0);o(P),R(U=>{h(x,U),h(I,c().moonPhaseFr)},[()=>l().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})],S),w(v,M)};na(A,v=>{s(b)&&v(y)})}o(u),R(v=>{oa(u,1,`entry ${s(b)?"important-day":"other-day"}`,"svelte-1baztfi"),W(N,"alt",c().moonPhase),W(N,"src",v)},[()=>ra(c().moonPhase)],S),w(d,u)}),o(n),w(a,n),D()}var va=L("<!> <br> <!> <br> <!>",1),ga=L("<p>Loading ephemerides data</p>"),ca=L('<!> <div class="content"><!></div>',1);function Ia(a,g){C(g,!1),ta.set("Ephemerides"),T();var e=ca(),n=G(e);ea(n,{title:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"});var p=m(n,2),E=t(p);Z(E,ia,d=>{var i=ga();w(d,i)},(d,i)=>{var _=S(()=>{var{moonState:y,sunState:v,upcomingLunarStates:M}=s(i);return{moonState:y,sunState:v,upcomingLunarStates:M}}),l=S(()=>s(_).moonState),c=S(()=>s(_).sunState),u=S(()=>s(_).upcomingLunarStates),b=va(),f=G(b);ma(f,{get moonState(){return s(l)},get sunState(){return s(c)}});var N=m(f,4);la(N,{get upcomingLunarStates(){return s(u)}});var A=m(N,4);$(A,{item:{level:"info",message:"All data is computed for Paris, France"}}),w(d,b)},(d,i)=>{const _=S(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:s(i)}));$(d,{get item(){return s(_)}})}),o(p),w(a,e),D()}export{Ia as component};
