import"../chunks/NZTpNUN0.js";import"../chunks/DxsUBIQY.js";import{p as O,h as l,a8 as ie,b as m,s as o,g as e,i as s,t as $,a as n,d as q,e as c,r as u,n as j,f as le,j as ne}from"../chunks/Brv8g2mx.js";import{i as fe}from"../chunks/CdKWMwlC.js";import"../chunks/C_CBfQ16.js";import{p as ce}from"../chunks/DWDG2EIs.js";/* empty css                */import{d as ue}from"../chunks/BlLNWVag.js";import{i as k}from"../chunks/D2xXzMMK.js";import{e as me,i as pe}from"../chunks/CjXiWo-Z.js";import{r as z}from"../chunks/BJ0eyrNi.js";import{s as de}from"../chunks/mz9VyEVN.js";import{b as D,d as ve}from"../chunks/DLiMpzP4.js";import{b as be}from"../chunks/BUzOKWAa.js";import{s as ge,a as _e}from"../chunks/DgiLbMs0.js";import{u as he}from"../chunks/DcTyZsse.js";import{A as xe}from"../chunks/Bpc9y5Hx.js";import{U as ye}from"../chunks/BWptIUEw.js";import{t as ke}from"../chunks/D_MrBeRO.js";import{M as Se}from"../chunks/DUQniNzl.js";import{M as Me}from"../chunks/D81XBudN.js";import{M as Ue}from"../chunks/YOoBGTjM.js";import{u as Ce}from"../chunks/DdnE7Smg.js";import{g as Pe}from"../chunks/B2pKv2Vq.js";var Te=m('Public <i class="fas fa-lock-open"></i>',1),we=m('Private <i class="fas fa-lock"></i>',1),Ae=m('<i class="sucess-indicator fas fa-check svelte-5gxvc6"></i>'),Fe=m('<button class="form-action"><!></button> <!>',1),Ie=m('<span class="form-action">Login to upload an entry</span>'),Le=m('<div class="contents svelte-5gxvc6"><h4 class="title-bar svelte-5gxvc6">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-5gxvc6"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-5gxvc6" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Be(S,b){O(b,!0);const G=()=>_e(he,"$user",H),[H,J]=ge();let f=l(ie([])),g=l(""),_=l(""),h=l(void 0),p=l(void 0),d=l(!1),x=l(0),v=l(!1),M=l(!1);const K=async()=>{if(s(f,[],!0),e(g)?.length||e(f).push({level:"error",header:"name must be defined"}),e(_)?.length||e(f).push({level:"error",header:"content must be defined"}),e(x)<0&&e(f).push({level:"error",header:"TTL must be positive"}),e(f).length)return;let t;e(p)&&e(p).length&&(t=e(p)[0]||void 0);try{s(v,!0),s(M,!1),await Ce({name:e(g),content:e(_),ttlSeconds:e(x),isPublic:e(d),file:t}),s(v,!1),b.onUpload(),s(M,!0)}catch(a){s(v,!1);let i=a.message;a instanceof xe&&a.code===401?i="Invalid logged in user":a instanceof ye&&(i="User is logged out");const I=`<strong>Entry not created</strong><br/> ${i}`;ke.push(I,{theme:{"--toastBarBackground":"#FF0000"}})}},Q=()=>{Pe("/clipboard/")};var U=Le(),C=c(U),R=o(c(C));R.__click=Q,u(C);var B=o(C,2);me(B,17,()=>e(f),pe,(t,a)=>{Me(t,{get item(){return e(a)}})});var P=o(B,2),T=o(c(P),2);z(T);var w=o(T,4);z(w);var A=o(w,4),F=c(A);be(F,t=>s(h,t),()=>e(h));var V=o(F,2);V.__click=()=>{e(h)!==void 0&&(e(h).value="")},u(A);var E=o(A,4);Ue(E,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return e(x)},set valueInSeconds(t){s(x,t,!0)}});var y=o(E,4);let N;y.__click=()=>s(d,!e(d));var W=c(y);{var X=t=>{var a=Te();j(),n(t,a)},Y=t=>{var a=we();j(),n(t,a)};k(W,t=>{e(d)?t(X):t(Y,!1)})}u(y),u(P);var Z=o(P,2);{var ee=t=>{var a=Fe(),i=le(a);i.__click=K;var I=c(i);{var ae=r=>{Se(r,{size:.5,unit:"em",durationSeconds:.5})},se=r=>{var L=ne("Submit");n(r,L)};k(I,r=>{e(v)?r(ae):r(se,!1)})}u(i);var oe=o(i,2);{var re=r=>{var L=Ae();n(r,L)};k(oe,r=>{e(M)&&r(re)})}$(()=>i.disabled=e(v)),n(t,a)},te=t=>{var a=Ie();n(t,a)};k(Z,t=>{G()?t(ee):t(te,!1)})}u(U),$(()=>N=de(y,1,"visibility-status svelte-5gxvc6",null,N,{"visibility-public":e(d)})),D(T,()=>e(g),t=>s(g,t)),D(w,()=>e(_),t=>s(_,t)),ve(F,()=>e(p),t=>s(p,t)),n(S,U),q(),J()}ue(["click"]);function rt(S,b){O(b,!1),ce.set("Clipboard"),fe(),Be(S,{onUpload:()=>console.log("new entry created")}),q()}export{rt as component};
