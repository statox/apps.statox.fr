import"../chunks/NZTpNUN0.js";import{p as B,h as M,a5 as C,b as y,s,e as v,i as F,g as o,a as d,d as I,r as f,t as V,c as H,f as D}from"../chunks/OOCdeaM4.js";import{d as $,s as W}from"../chunks/DBBHR-3t.js";import{e as T,i as E}from"../chunks/80iJqotc.js";import{i as J}from"../chunks/BMFH8sZT.js";import{c as K}from"../chunks/BuKKo_mU.js";import{b as Q}from"../chunks/nZKWwJkn.js";import{s as R,a as X}from"../chunks/BY6cWyRb.js";import{t as N}from"../chunks/Du_j8uFv.js";import{u as Y}from"../chunks/bMdrnNxv.js";import{M as S}from"../chunks/DKcpRBkl.js";import{r as Z}from"../chunks/C2XHBoXy.js";import{b as ee}from"../chunks/CCHh_OeQ.js";import{A as O,U as P}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{c as j}from"../chunks/Bd9sQ8Nq.js";import{D as q}from"../chunks/DTyfSRsR.js";import{s as te}from"../chunks/DazWBkG7.js";import"../chunks/DRxGxY2p.js";import"../chunks/BJMzbe0X.js";import{p as oe}from"../chunks/Zs3ZkE6R.js";import{g as L}from"../chunks/DqAq5Sus.js";var re=y('<div><h4>Track weight</h4> <!> <form class="form-content"><label for="weight">Weight</label> <input type="number" step="0.1"/> <br/> <button class="form-action">Submit</button></form></div>');function ae(g,p){B(p,!0);let n=M(C([])),r=M(0);const b=async()=>{if(F(n,[],!0),o(r)!==Number(o(r).toFixed(1))&&o(n).push({level:"error",header:"Value have at most 1 number after the comma"}),(o(r)<80||o(r)>110)&&o(n).push({level:"error",header:"Value must be in kg"}),o(n).length)return;const a=q.now().toUTC().toUnixInteger();try{await j({event:{timestampUTC:a,type:"weight",value:Math.floor(o(r)*100)}}),p.onUpload()}catch(t){let e=t.message;t instanceof O&&t.code===401?e="Invalid logged in user":t instanceof P&&(e="User is logged out");const l=`<strong>Entry not created</strong><br/> ${e}`;N.push(l,{theme:{"--toastBarBackground":"#FF0000"}})}};var i=re(),u=s(v(i),2);T(u,17,()=>o(n),E,(a,t)=>{S(a,{get item(){return o(t)}})});var m=s(u,2),c=s(v(m),2);Z(c);var h=s(c,4);h.__click=b,f(m),f(i),ee(c,()=>o(r),a=>F(r,a)),d(g,i),I()}$(["click"]);var se=y("<button> </button>"),ne=y('<div><h4>Track mood</h4> <!> <form class="form-content"><label for="mood">Mood</label> <!> <br/> <button class="form-action">Submit</button></form></div>');function ie(g,p){B(p,!0);let n=C([]),r=M(5);const b=async()=>{const a=q.now().toUTC().toUnixInteger();try{await j({event:{timestampUTC:a,type:"mood",value:o(r)}}),p.onUpload()}catch(t){let e=t.message;t instanceof O&&t.code===401?e="Invalid logged in user":t instanceof P&&(e="User is logged out");const l=`<strong>Entry not created</strong><br/> ${e}`;N.push(l,{theme:{"--toastBarBackground":"#FF0000"}})}};var i=ne(),u=s(v(i),2);T(u,17,()=>n,E,(a,t)=>{S(a,{get item(){return o(t)}})});var m=s(u,2),c=s(v(m),2);T(c,16,()=>[1,2,3,4,5,6,7,9,10],E,(a,t)=>{var e=se();e.__click=()=>F(r,t,!0);let l;var w=v(e,!0);f(e),V(()=>{l=te(e,1,"",null,l,{selected:o(r)===t}),W(w,t)}),d(a,e)});var h=s(c,4);h.__click=b,f(m),f(i),d(g,i),I()}$(["click"]);var me=y("<option> </option>"),ce=y("<button>Back</button> <select></select> <!>",1);function $e(g,p){B(p,!0);const n=()=>X(Y,"$user",r),[r,b]=R();oe.set("Personal Tracker");const i=()=>{L("/personal-tracker"),N.push("New entry created")};let u=[{name:"mood",component:ie},{name:"weight",component:ae}],m=M(C(u[0]));var c=H(),h=D(c);{var a=e=>{var l=ce(),w=D(l);w.__click=()=>L("/personal-tracker");var x=s(w,2);T(x,21,()=>u,E,(_,k)=>{var U=me(),G=v(U,!0);f(U);var A={};V(()=>{W(G,o(k).name),A!==(A=o(k))&&(U.value=(U.__value=o(k))??"")}),d(_,U)}),f(x);var z=s(x,2);K(z,()=>o(m).component,(_,k)=>{k(_,{onUpload:i})}),Q(x,()=>o(m),_=>F(m,_)),d(e,l)},t=e=>{S(e,{item:{level:"info",header:"Login to add an entry or see events"}})};J(h,e=>{n()?e(a):e(t,!1)})}d(g,c),I(),b()}$(["click"]);export{$e as component};
