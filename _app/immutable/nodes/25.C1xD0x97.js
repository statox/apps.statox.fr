import"../chunks/DsnmJJEf.js";import"../chunks/CYMEFg2K.js";import{p as N,c as $,f as o,a,d as Q,g as t,I as J,b as d,e as _,r as v,s as T,t as k,j as B}from"../chunks/BJRZRhu8.js";import{s as b,d as ft}from"../chunks/B3kKxc5b.js";import{i as R}from"../chunks/CqJ2fdgF.js";import{M as _t}from"../chunks/DpJBG4EJ.js";import{M as ut}from"../chunks/Bye5-0Tv.js";import{a as gt}from"../chunks/ItrR6YhR.js";import{i as D}from"../chunks/Bf4rEyHI.js";import{e as C,i as F}from"../chunks/CD5Q4Pji.js";import{a as ht}from"../chunks/BYDnD9tF.js";import{s as yt,a as K}from"../chunks/Elmngvfr.js";import{u as $t}from"../chunks/Ds0xSSFg.js";import{M as kt}from"../chunks/eIcGAGwT.js";import{g as bt,p as wt,P as xt}from"../chunks/CC3ew83H.js";import{D as Pt}from"../chunks/CkcISRbr.js";import"../chunks/BH7JXOrj.js";import{p as Mt}from"../chunks/DxqDe86E.js";/* empty css                */import{g as Dt}from"../chunks/C6_Neh06.js";var Tt=d('<button class="emotion-item svelte-cyscl8"> </button>'),Lt=d('<div class="selection"></div>'),At=d('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-value"><!></div></div>'),Et=d('<h4> </h4> <div class="event svelte-cyscl8"><div>Date</div> <div>Value</div></div> <!>',1),Ht=d("<p>Loading events</p>");function St(L,A){N(A,!1);const m=()=>K(wt,"$personalTrackerPassword",u),w=()=>K($t,"$user",u),[u,E]=yt(),H=async()=>(await bt(m())).reduce((e,r)=>(e[r.type]||(e[r.type]=[]),e[r.type].push(r),e),{});R();var S=$(),j=o(S);{var G=s=>{var e=$(),r=o(e);gt(r,H,n=>{var p=Ht();a(n,p)},(n,p)=>{var x=$(),W=o(x);C(W,1,()=>Object.keys(t(p)),F,(X,O)=>{var V=Et(),I=o(V),Y=_(I,!0);v(I);var Z=T(I,4);C(Z,1,()=>t(p)[t(O)],F,(tt,i)=>{const at=J(()=>Pt.fromSeconds(t(i).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var U=At(),q=_(U),et=_(q,!0);v(q);var z=T(q,2),rt=_(z);{var ot=l=>{var g=B();k(()=>b(g,t(i).data)),a(l,g)},st=l=>{var g=$(),nt=o(g);{var it=c=>{var h=B();k(()=>b(h,t(i).data)),a(c,h)},vt=c=>{var h=$(),dt=o(h);{var mt=f=>{var y=Lt();C(y,5,()=>t(i).data.emotions,F,(lt,P)=>{var M=Tt(),ct=_(M);v(M),k(()=>{ht(M,`--color: ${t(P).color??""}`),b(ct,`${t(P).category??""}
                                        ${t(P).subcategory??""}
                                        ${t(P).emotion??""}`)}),a(lt,M)}),v(y),a(f,y)},pt=f=>{var y=B("Unknown type of data");a(f,y)};D(dt,f=>{t(i).type==="emotionwheel"?f(mt):f(pt,!1)},!0)}a(c,h)};D(nt,c=>{t(i).type==="weight"?c(it):c(vt,!1)},!0)}a(l,g)};D(rt,l=>{t(i).type==="mood"?l(ot):l(st,!1)})}v(z),v(U),k(()=>b(et,t(at))),a(tt,U)}),k(()=>b(Y,t(O))),a(X,V)}),a(n,x)},(n,p)=>{{let x=J(()=>({level:"error",header:"Something went wrong getting events",message:t(p)}));kt(n,{get item(){return t(x)}})}}),a(s,e)};D(j,s=>{w()&&s(G)})}a(L,S),Q(),E()}var jt=d("<div><button>Add an entry</button></div> <!>",1),It=d("<!> <!>",1);function ea(L,A){N(A,!1);const m={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};Mt.set(m),R();var w=It(),u=o(w);ut(u,{get title(){return m.name},get description(){return m.description},get iconPath(){return m.iconPath}});var E=T(u,2);_t(E,{message:"Login to see events",children:(H,S)=>{xt(H,{children:(j,G)=>{var s=jt(),e=o(s),r=_(e);r.__click=()=>Dt("/personal-tracker/add"),v(e);var n=T(e,2);St(n,{}),a(j,s)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(L,w),Q()}ft(["click"]);export{ea as component};
