import{s as ne,e as g,a as I,H as J,c as k,g as U,b as S,f,m as w,i as C,O as F,C as O,n as D,M as ve,t as re,d as ae,z as x,B as ce,h as T,j as oe,k as ge,p as ke,J as Ce,y as we}from"../chunks/scheduler.BmPMPFrP.js";import{h as ue,u as ye}from"../chunks/await_block.DljTd--5.js";import{S as se,i as ie,b as Z,d as ee,m as te,a as Q,t as W,e as le}from"../chunks/index.G_7h3MTf.js";import{P as j}from"../chunks/public.xpUinP6t.js";import{r as Te}from"../chunks/index.CVPO2cSW.js";import{g as Ee,t as be,u as Pe}from"../chunks/service.bvqNZiN0.js";import{s as $e}from"../chunks/client.CXFlBm-D.js";import{M as Le}from"../chunks/Main.DK2P2x96.js";import{e as X}from"../chunks/each.DWqwohTF.js";const Ne=!1,et=Object.freeze(Object.defineProperty({__proto__:null,ssr:Ne},Symbol.toStringTag,{value:"Module"})),fe=()=>Te({path:"/reactor/getEntriesForPublic"}),Ie=async l=>{const e=j+"/reactor/addEntry",n=await Ee();typeof n=="string"&&await $e.post(e).auth(n,{type:"bearer"}).field("name",l.name).field("commaSeparatedTags",l.commaSeparatedTags).attach("file",l.file)};function pe(l,e,n){const t=l.slice();return t[9]=e[n],t}function he(l,e,n){const t=l.slice();return t[12]=e[n],t}function _e(l){let e,n=l[12]+"",t;return{c(){e=g("span"),t=re(n),this.h()},l(a){e=k(a,"SPAN",{class:!0});var r=S(e);t=ae(r,n),r.forEach(f),this.h()},h(){w(e,"class","tag svelte-18w5grc")},m(a,r){C(a,e,r),T(e,t)},p(a,r){r&4&&n!==(n=a[12]+"")&&oe(t,n)},d(a){a&&f(e)}}}function me(l){let e,n,t,a=l[9].name+"",r,i,m,h,p,d,o=`<i class="fas fa-copy"></i>
                    Copy link`,c,u,v,b,B,$,s,y,A,z,R,M=X(l[9].tags),E=[];for(let P=0;P<M.length;P+=1)E[P]=_e(he(l,M,P));function K(){return l[6](l[9])}return{c(){e=g("div"),n=g("div"),t=g("b"),r=re(a),i=I(),m=g("div");for(let P=0;P<E.length;P+=1)E[P].c();h=I(),p=g("div"),d=g("button"),d.innerHTML=o,c=I(),u=g("div"),v=g("a"),b=g("img"),A=I(),this.h()},l(P){e=k(P,"DIV",{});var L=S(e);n=k(L,"DIV",{});var _=S(n);t=k(_,"B",{});var N=S(t);r=ae(N,a),N.forEach(f),_.forEach(f),i=U(L),m=k(L,"DIV",{});var V=S(m);for(let Y=0;Y<E.length;Y+=1)E[Y].l(V);V.forEach(f),h=U(L),p=k(L,"DIV",{});var q=S(p);d=k(q,"BUTTON",{"data-svelte-h":!0}),x(d)!=="svelte-1dbrmo2"&&(d.innerHTML=o),q.forEach(f),L.forEach(f),c=U(P),u=k(P,"DIV",{});var H=S(u);v=k(H,"A",{href:!0,download:!0,rel:!0,target:!0});var G=S(v);b=k(G,"IMG",{src:!0,alt:!0}),G.forEach(f),A=U(H),H.forEach(f),this.h()},h(){ce(b.src,B=j+l[9].uri)||w(b,"src",B),w(b,"alt",$=l[9].name),w(v,"href",s=j+l[9].uri),w(v,"download",y=l[9].name),w(v,"rel","noopener noreferrer"),w(v,"target","blank")},m(P,L){C(P,e,L),T(e,n),T(n,t),T(t,r),T(e,i),T(e,m);for(let _=0;_<E.length;_+=1)E[_]&&E[_].m(m,null);T(e,h),T(e,p),T(p,d),C(P,c,L),C(P,u,L),T(u,v),T(v,b),T(u,A),z||(R=O(d,"click",K),z=!0)},p(P,L){if(l=P,L&4&&a!==(a=l[9].name+"")&&oe(r,a),L&4){M=X(l[9].tags);let _;for(_=0;_<M.length;_+=1){const N=he(l,M,_);E[_]?E[_].p(N,L):(E[_]=_e(N),E[_].c(),E[_].m(m,null))}for(;_<E.length;_+=1)E[_].d(1);E.length=M.length}L&4&&!ce(b.src,B=j+l[9].uri)&&w(b,"src",B),L&4&&$!==($=l[9].name)&&w(b,"alt",$),L&4&&s!==(s=j+l[9].uri)&&w(v,"href",s),L&4&&y!==(y=l[9].name)&&w(v,"download",y)},d(P){P&&(f(e),f(c),f(u)),ve(E,P),z=!1,R()}}}function de(l){let e,n="More...",t,a;return{c(){e=g("button"),e.textContent=n,this.h()},l(r){e=k(r,"BUTTON",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-3fputj"&&(e.textContent=n),this.h()},h(){w(e,"class","full-width medium-margin svelte-18w5grc")},m(r,i){C(r,e,i),t||(a=O(e,"click",l[7]),t=!0)},p:D,d(r){r&&f(e),t=!1,a()}}}function Ue(l){let e,n,t,a,r,i,m,h=X(l[2]),p=[];for(let o=0;o<h.length;o+=1)p[o]=me(pe(l,h,o));let d=l[1].length===0&&de(l);return{c(){e=g("input"),n=I(),t=g("div");for(let o=0;o<p.length;o+=1)p[o].c();a=I(),d&&d.c(),r=J(),this.h()},l(o){e=k(o,"INPUT",{class:!0,type:!0,placeholder:!0}),n=U(o),t=k(o,"DIV",{class:!0});var c=S(t);for(let u=0;u<p.length;u+=1)p[u].l(c);c.forEach(f),a=U(o),d&&d.l(o),r=J(),this.h()},h(){w(e,"class","full-width medium-margin svelte-18w5grc"),w(e,"type","text"),w(e,"placeholder","Search by tags or name"),w(t,"class","container svelte-18w5grc")},m(o,c){C(o,e,c),F(e,l[1]),C(o,n,c),C(o,t,c);for(let u=0;u<p.length;u+=1)p[u]&&p[u].m(t,null);C(o,a,c),d&&d.m(o,c),C(o,r,c),i||(m=O(e,"input",l[5]),i=!0)},p(o,[c]){if(c&2&&e.value!==o[1]&&F(e,o[1]),c&12){h=X(o[2]);let u;for(u=0;u<h.length;u+=1){const v=pe(o,h,u);p[u]?p[u].p(v,c):(p[u]=me(v),p[u].c(),p[u].m(t,null))}for(;u<p.length;u+=1)p[u].d(1);p.length=h.length}o[1].length===0?d?d.p(o,c):(d=de(o),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null)},i:D,o:D,d(o){o&&(f(e),f(n),f(t),f(a),f(r)),ve(p,o),d&&d.d(o),i=!1,m()}}}const Be=3;function Se(l,e,n){let{reactions:t}=e,a=1,r=[],i="";const m=(c,u)=>{if(!u.length||c.name.toLowerCase().includes(u.toLowerCase()))return!0;for(const b of c.tags)if(b.toLowerCase().includes(u.toLowerCase()))return!0;return!1},h=c=>{navigator.clipboard.writeText(j+c.uri),be.push('<i class="fas fa-check"></i> Link copied to clipboard',{duration:1e3,theme:{"--toastBarHeight":0}})};function p(){i=this.value,n(1,i)}const d=c=>h(c),o=()=>n(0,a++,a);return l.$$set=c=>{"reactions"in c&&n(4,t=c.reactions)},l.$$.update=()=>{l.$$.dirty&19&&n(2,r=t.filter(c=>m(c,i)).sort((c,u)=>u.creationDateUnix-c.creationDateUnix).slice(0,i.length?void 0:a*Be))},[a,i,r,h,t,p,d,o]}class Ae extends se{constructor(e){super(),ie(this,e,Se,Ue,ne,{reactions:4})}}function Me(l){let e,n="Login to upload content";return{c(){e=g("p"),e.textContent=n},l(t){e=k(t,"P",{"data-svelte-h":!0}),x(e)!=="svelte-k7lhwu"&&(e.textContent=n)},m(t,a){C(t,e,a)},p:D,d(t){t&&f(e)}}}function xe(l){let e,n,t,a="Name",r,i,m,h,p,d="Tags",o,c,u,v,b,B="File",$,s,y,A,z='<i class="fas fa-times-circle"></i>',R,M,E,K="Upload",P,L;return{c(){e=g("div"),n=g("p"),t=g("label"),t.textContent=a,r=I(),i=g("input"),m=I(),h=g("p"),p=g("label"),p.textContent=d,o=I(),c=g("input"),u=I(),v=g("p"),b=g("label"),b.textContent=B,$=I(),s=g("input"),y=I(),A=g("button"),A.innerHTML=z,R=I(),M=g("p"),E=g("button"),E.textContent=K,this.h()},l(_){e=k(_,"DIV",{class:!0});var N=S(e);n=k(N,"P",{class:!0});var V=S(n);t=k(V,"LABEL",{for:!0,"data-svelte-h":!0}),x(t)!=="svelte-bs9sy6"&&(t.textContent=a),r=U(V),i=k(V,"INPUT",{type:!0,class:!0}),V.forEach(f),m=U(N),h=k(N,"P",{class:!0});var q=S(h);p=k(q,"LABEL",{for:!0,"data-svelte-h":!0}),x(p)!=="svelte-1myp42m"&&(p.textContent=d),o=U(q),c=k(q,"INPUT",{type:!0,class:!0}),q.forEach(f),N.forEach(f),u=U(_),v=k(_,"P",{class:!0});var H=S(v);b=k(H,"LABEL",{for:!0,"data-svelte-h":!0}),x(b)!=="svelte-180hc3e"&&(b.textContent=B),$=U(H),s=k(H,"INPUT",{class:!0,type:!0}),y=U(H),A=k(H,"BUTTON",{"data-svelte-h":!0}),x(A)!=="svelte-1q80dng"&&(A.innerHTML=z),H.forEach(f),R=U(_),M=k(_,"P",{});var G=S(M);E=k(G,"BUTTON",{"data-svelte-h":!0}),x(E)!=="svelte-15774uw"&&(E.textContent=K),G.forEach(f),this.h()},h(){w(t,"for","name"),w(i,"type","text"),w(i,"class","svelte-248e0t"),w(n,"class","meta-section-item svelte-248e0t"),w(p,"for","content"),w(c,"type","textarea"),w(c,"class","svelte-248e0t"),w(h,"class","meta-section-item svelte-248e0t"),w(e,"class","meta-section svelte-248e0t"),w(b,"for","file"),w(s,"class","file-input svelte-248e0t"),w(s,"type","file"),w(v,"class","file-section svelte-248e0t")},m(_,N){C(_,e,N),T(e,n),T(n,t),T(n,r),T(n,i),F(i,l[0]),T(e,m),T(e,h),T(h,p),T(h,o),T(h,c),F(c,l[1]),C(_,u,N),C(_,v,N),T(v,b),T(v,$),T(v,s),l[9](s),T(v,y),T(v,A),C(_,R,N),C(_,M,N),T(M,E),P||(L=[O(i,"input",l[6]),O(c,"input",l[7]),O(s,"change",l[8]),O(A,"click",l[10]),O(E,"click",l[5])],P=!0)},p(_,N){N&1&&i.value!==_[0]&&F(i,_[0]),N&2&&F(c,_[1])},d(_){_&&(f(e),f(u),f(v),f(R),f(M)),l[9](null),P=!1,we(L)}}}function De(l){let e;function n(r,i){return r[4]?xe:Me}let t=n(l),a=t(l);return{c(){a.c(),e=J()},l(r){a.l(r),e=J()},m(r,i){a.m(r,i),C(r,e,i)},p(r,[i]){t===(t=n(r))&&a?a.p(r,i):(a.d(1),a=t(r),a&&(a.c(),a.m(e.parentNode,e)))},i:D,o:D,d(r){r&&f(e),a.d(r)}}}function He(l,e,n){let t;ge(l,Pe,b=>n(4,t=b));const a=ke();let r,i="",m,h;const p=async()=>{try{if(!(r!=null&&r.length))throw new Error("A name is required for upload");let b;if(h&&h.length&&(b=h[0]),!b)throw new Error("A file is required for upload");await Ie({name:r,commaSeparatedTags:i,file:b}),a("upload")}catch(b){const B=`<strong>Entry not created</strong><br/> ${b.message}`;be.push(B,{theme:{"--toastBarBackground":"#FF0000"}})}};function d(){r=this.value,n(0,r)}function o(){i=this.value,n(1,i)}function c(){h=this.files,n(3,h)}function u(b){Ce[b?"unshift":"push"](()=>{m=b,n(2,m)})}return[r,i,m,h,t,p,d,o,c,u,()=>{n(2,m.value="",m)}]}class Oe extends se{constructor(e){super(),ie(this,e,He,De,ne,{})}}function Re(l){let e,n="Something went wrong",t,a,r=JSON.stringify(l[3])+"",i;return{c(){e=g("p"),e.textContent=n,t=I(),a=g("p"),i=re(r)},l(m){e=k(m,"P",{"data-svelte-h":!0}),x(e)!=="svelte-171fb2d"&&(e.textContent=n),t=U(m),a=k(m,"P",{});var h=S(a);i=ae(h,r),h.forEach(f)},m(m,h){C(m,e,h),C(m,t,h),C(m,a,h),T(a,i)},p(m,h){h&1&&r!==(r=JSON.stringify(m[3])+"")&&oe(i,r)},i:D,o:D,d(m){m&&(f(e),f(t),f(a))}}}function Ve(l){let e,n;return e=new Ae({props:{reactions:l[2]}}),{c(){Z(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,a){te(e,t,a),n=!0},p(t,a){const r={};a&1&&(r.reactions=t[2]),e.$set(r)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){le(e,t)}}}function qe(l){let e,n="Loading data";return{c(){e=g("p"),e.textContent=n},l(t){e=k(t,"P",{"data-svelte-h":!0}),x(e)!=="svelte-ezyzhc"&&(e.textContent=n)},m(t,a){C(t,e,a)},p:D,i:D,o:D,d(t){t&&f(e)}}}function ze(l){let e,n,t,a="Reactor",r,i,m="Upload",h,p,d,o,c="Content",u,v,b,B;e=new Le({props:{title:"Reactor",description:"My collection of memes"}}),p=new Oe({}),p.$on("upload",l[1]);let $={ctx:l,current:null,token:null,hasCatch:!0,pending:qe,then:Ve,catch:Re,value:2,error:3,blocks:[,,,]};return ue(b=l[0],$),{c(){Z(e.$$.fragment),n=I(),t=g("h2"),t.textContent=a,r=I(),i=g("h3"),i.textContent=m,h=I(),Z(p.$$.fragment),d=I(),o=g("h3"),o.textContent=c,u=I(),v=J(),$.block.c()},l(s){ee(e.$$.fragment,s),n=U(s),t=k(s,"H2",{"data-svelte-h":!0}),x(t)!=="svelte-3o4hy8"&&(t.textContent=a),r=U(s),i=k(s,"H3",{"data-svelte-h":!0}),x(i)!=="svelte-18fi3zp"&&(i.textContent=m),h=U(s),ee(p.$$.fragment,s),d=U(s),o=k(s,"H3",{"data-svelte-h":!0}),x(o)!=="svelte-1qnf76d"&&(o.textContent=c),u=U(s),v=J(),$.block.l(s)},m(s,y){te(e,s,y),C(s,n,y),C(s,t,y),C(s,r,y),C(s,i,y),C(s,h,y),te(p,s,y),C(s,d,y),C(s,o,y),C(s,u,y),C(s,v,y),$.block.m(s,$.anchor=y),$.mount=()=>v.parentNode,$.anchor=v,B=!0},p(s,[y]){l=s,$.ctx=l,y&1&&b!==(b=l[0])&&ue(b,$)||ye($,l,y)},i(s){B||(Q(e.$$.fragment,s),Q(p.$$.fragment,s),Q($.block),B=!0)},o(s){W(e.$$.fragment,s),W(p.$$.fragment,s);for(let y=0;y<3;y+=1){const A=$.blocks[y];W(A)}B=!1},d(s){s&&(f(n),f(t),f(r),f(i),f(h),f(d),f(o),f(u),f(v)),le(e,s),le(p,s),$.block.d(s),$.token=null,$=null}}}function Fe(l,e,n){let t=fe();return[t,()=>n(0,t=fe())]}class tt extends se{constructor(e){super(),ie(this,e,Fe,ze,ne,{})}}export{tt as component,et as universal};
