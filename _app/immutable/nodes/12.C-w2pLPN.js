import"../chunks/NZTpNUN0.js";import"../chunks/DRxGxY2p.js";import{p as O,h as l,a5 as ie,b as m,s as r,g as t,i as s,t as $,a as n,d as q,e as c,r as u,n as j,f as le,j as ne}from"../chunks/OOCdeaM4.js";import{i as fe}from"../chunks/c3q9pMCF.js";import"../chunks/BuN-Fgeb.js";import{p as ce}from"../chunks/Zs3ZkE6R.js";/* empty css                */import{u as ue}from"../chunks/bMdrnNxv.js";import{d as me}from"../chunks/DBBHR-3t.js";import{e as pe,i as de}from"../chunks/80iJqotc.js";import{i as k}from"../chunks/BMFH8sZT.js";import{r as z}from"../chunks/C2XHBoXy.js";import{s as ve}from"../chunks/DazWBkG7.js";import{b as D,d as be}from"../chunks/CCHh_OeQ.js";import{b as ge}from"../chunks/BZoYCivA.js";import{s as _e,a as he}from"../chunks/BY6cWyRb.js";import{A as xe,U as ye}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{t as ke}from"../chunks/Du_j8uFv.js";import{M as Se}from"../chunks/C1Xki9n9.js";import{M as Me}from"../chunks/DKcpRBkl.js";import{M as Ue}from"../chunks/Y_imNMTD.js";import{u as Ce}from"../chunks/Do2kYWHR.js";import{g as Pe}from"../chunks/uzpfujBj.js";var Te=m('Public <i class="fas fa-lock-open"></i>',1),we=m('Private <i class="fas fa-lock"></i>',1),Ae=m('<i class="sucess-indicator fas fa-check svelte-5gxvc6"></i>'),Ee=m('<button class="form-action"><!></button> <!>',1),Fe=m('<span class="form-action">Login to upload an entry</span>'),Ie=m('<div class="contents svelte-5gxvc6"><h4 class="title-bar svelte-5gxvc6">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-5gxvc6"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-5gxvc6" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Le(S,b){O(b,!0);const G=()=>he(ue,"$user",H),[H,J]=_e();let f=l(ie([])),g=l(""),_=l(""),h=l(void 0),p=l(void 0),d=l(!1),x=l(0),v=l(!1),M=l(!1);const K=async()=>{if(s(f,[],!0),t(g)?.length||t(f).push({level:"error",header:"name must be defined"}),t(x)<0&&t(f).push({level:"error",header:"TTL must be positive"}),t(f).length)return;let e;if(t(p)&&t(p).length&&(e=t(p)[0]||void 0),!t(_)?.length&&!e){t(f).push({level:"error",header:"Either content or file must be defined"});return}try{s(v,!0),s(M,!1),await Ce({name:t(g),content:t(_),ttlSeconds:t(x),isPublic:t(d),file:e}),s(v,!1),b.onUpload(),s(M,!0)}catch(a){s(v,!1);let i=a.message;a instanceof xe&&a.code===401?i="Invalid logged in user":a instanceof ye&&(i="User is logged out");const F=`<strong>Entry not created</strong><br/> ${i}`;ke.push(F,{theme:{"--toastBarBackground":"#FF0000"}})}},Q=()=>{Pe("/clipboard/")};var U=Ie(),C=c(U),R=r(c(C));R.__click=Q,u(C);var L=r(C,2);pe(L,17,()=>t(f),de,(e,a)=>{Me(e,{get item(){return t(a)}})});var P=r(L,2),T=r(c(P),2);z(T);var w=r(T,4);z(w);var A=r(w,4),E=c(A);ge(E,e=>s(h,e),()=>t(h));var V=r(E,2);V.__click=()=>{t(h)!==void 0&&(t(h).value="")},u(A);var B=r(A,4);Ue(B,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(x)},set valueInSeconds(e){s(x,e,!0)}});var y=r(B,4);let N;y.__click=()=>s(d,!t(d));var W=c(y);{var X=e=>{var a=Te();j(),n(e,a)},Y=e=>{var a=we();j(),n(e,a)};k(W,e=>{t(d)?e(X):e(Y,!1)})}u(y),u(P);var Z=r(P,2);{var ee=e=>{var a=Ee(),i=le(a);i.__click=K;var F=c(i);{var ae=o=>{Se(o,{size:.5,unit:"em",durationSeconds:.5})},se=o=>{var I=ne("Submit");n(o,I)};k(F,o=>{t(v)?o(ae):o(se,!1)})}u(i);var re=r(i,2);{var oe=o=>{var I=Ae();n(o,I)};k(re,o=>{t(M)&&o(oe)})}$(()=>i.disabled=t(v)),n(e,a)},te=e=>{var a=Fe();n(e,a)};k(Z,e=>{G()?e(ee):e(te,!1)})}u(U),$(()=>N=ve(y,1,"visibility-status svelte-5gxvc6",null,N,{"visibility-public":t(d)})),D(T,()=>t(g),e=>s(g,e)),D(w,()=>t(_),e=>s(_,e)),be(E,()=>t(p),e=>s(p,e)),n(S,U),q(),J()}me(["click"]);function ot(S,b){O(b,!1),ce.set("Clipboard"),fe(),Le(S,{onUpload:()=>console.log("new entry created")}),q()}export{ot as component};
