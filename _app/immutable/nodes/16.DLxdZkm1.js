var Ge=Object.defineProperty;var fe=l=>{throw TypeError(l)};var Le=(l,e,r)=>e in l?Ge(l,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[e]=r;var le=(l,e,r)=>Le(l,typeof e!="symbol"?e+"":e,r),Pe=(l,e,r)=>e.has(l)||fe("Cannot "+r);var te=(l,e,r)=>(Pe(l,e,"read from private field"),r?r.call(l):e.get(l)),_e=(l,e,r)=>e.has(l)?fe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,r);import"../chunks/CWj6FrbW.js";import{A as W,g as H,s as J,C as he,p as Xe,B as be,aO as Ye,E as c,w as a,k as Ze,n as Re,F as u,v as Be}from"../chunks/I8Oq6K5_.js";import{s as Ne}from"../chunks/DRU8cbEw.js";import{i as V}from"../chunks/CLIFNVQM.js";import{f as xe,t as P,a as L}from"../chunks/CtuybYrQ.js";import{b as ae,r as z}from"../chunks/BKam2jIy.js";import{b as w}from"../chunks/BcNfVtUj.js";import{b as me}from"../chunks/CUSbk-Jw.js";import{M as Ae}from"../chunks/BXnR543D.js";import{P as De}from"../chunks/u9MJM6mA.js";var O;class Ie{constructor(e,r){le(this,"default");_e(this,O,W());le(this,"key","");this.key=e,this.value=r,this.default=r;{const n=localStorage.getItem(e);n&&(this.value=this.deserialize(n))}he(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return H(te(this,O))}set value(e){J(te(this,O),e,!0)}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e)}}O=new WeakMap;function f(l,e){return new Ie(l,e)}const Oe=(l,e,r)=>e-r<=l&&l<=e+r;function Ve(l,e){const r=Math.sqrt(l*l+e*e),n=Math.atan2(e,l);return{r,theta:n}}const We=(l,e)=>{const{gridSize:r,colorMode:n,cellSize:B,t:X,noiseMode:N,noiseFactor:Y,displacementX:m,displacementY:x,displacementZ:h,levelsStart:k,levelsEnd:q,levelsStep:A,levelsMargin:D}=e;l.background(0);const Z=l.color(255,0,0),R=l.color(0,255,0);for(let g=0;g<r;g++)for(let S=0;S<r;S++){let _=0;if(N==="carthesian")_=l.noise(S*Y+X*m,g*Y+X*x,X*h);else if(N==="polar"){const{r:b,theta:p}=Ve((S-r/2)*Y,(g-r/2)*Y);_=l.noise(p*m,b*x,X*h)}for(let b=k;b<=q;b+=A||.1){if(!Oe(_,b,D))continue;let p=255;if(n==="white")p=255;else if(n==="gradient")p=l.map(b,k,q,100,255);else if(n==="quantized-gradient"){const I=Math.trunc(_*10)/10;p=l.map(I,k,q,100,255)}else if(n==="color-gradient")p=l.lerpColor(Z,R,_);else if(n==="color-scaled-gradient"){const I=l.map(_,k,q,0,1);p=l.lerpColor(Z,R,I)}l.fill(p),l.circle(S*B,g*B,B)}}};var He=(l,e)=>e.grid=!e.grid,Je=P("<br>"),Te=P('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1">',1),Qe=P('<div class="control-section svelte-1qmp6lp"><label for="gridSize">Grid size</label> <input type="number" step="1"> <label for="blurEnabled">Enable blur</label> <!> <!></div>'),Ue=(l,e)=>e.noise=!e.noise,je=P("<br>"),Ke=P('<div class="control-section svelte-1qmp6lp"><label for="noiseMode">Noise Mode</label> <select id="noiseMode-select"><option>Carthesian</option><option>Polar</option></select> <label for="displacementX">displacementX</label> <input type="number" step="0.01"> <label for="displacementY">displacementY</label> <input type="number" step="0.01"> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"></div>'),$e=(l,e)=>e.lines=!e.lines,el=P("<br>"),ll=P('<div class="control-section svelte-1qmp6lp"><label for="levelsStart">levelsStart</label> <input type="number" step="0.1"> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option><option>Color Gradient</option><option>Color scaled Gradient</option></select></div>'),tl=P('<div class="container svelte-1qmp6lp"><div id="canvas-container"><div class="stats"><label for="fps">FPS</label> <span> </span></div> <!></div> <div class="controls-container svelte-1qmp6lp"><span class="control-header svelte-1qmp6lp"><button>&nbsp;Grid controls</button></span> <!> <span class="control-header svelte-1qmp6lp"><button>&nbsp;Noise controls</button></span> <!> <span class="control-header svelte-1qmp6lp"><button>&nbsp;Lines controls</button></span> <!> <div class="control-section svelte-1qmp6lp"><label for="resetAll">Reset all</label><button>Reset</button></div></div></div>');function fl(l,e){Xe(e,!0);let r=W(void 0),n=1e3,B=0,X=0,N=0,Y=W(0);const m=f("p5-terrain-gridSize",200);let x=n/m.value;he(()=>{x=n/m.value});let h=f("p5-terrain-blurEnabled",!1),k=f("p5-terrain-blurValue",4),q=f("p5-terrain-displacementX",0),A=f("p5-terrain-displacementY",0),D=f("p5-terrain-displacementZ",.01),Z=f("p5-terrain-noiseFactor",.02),R=f("p5-terrain-levelsStart",.2),g=f("p5-terrain-levelsEnd",.8),S=f("p5-terrain-levelsStep",.05),_=f("p5-terrain-margin",.005),b=f("p5-terrain-colorMode","gradient"),p=f("p5-terrain-nodeMode","carthesian"),I=W(be(h.value?"on":"off"));const ge=()=>{[m,h,k,p,q,A,D,Z,R,g,S,_,b].forEach(o=>o.reset())},y=be({grid:!1,noise:!1,lines:!1}),Se=t=>{function o(){const s=Math.min(t.windowWidth,t.windowHeight);n=Math.floor(s*.8),t.resizeCanvas(n,n),x=n/m.value}function v(){const s=Date.now();s-X>1e3&&(J(Y,N,!0),X=s,N=0),N++}t.windowResized=()=>{o()},t.setup=()=>{J(r,t,!0),t.createCanvas(n,n),o(),t.noStroke()},t.draw=()=>{v(),B++,We(t,{gridSize:m.value,colorMode:b.value,noiseMode:p.value,t:B,cellSize:x,noiseFactor:Z.value,displacementX:q.value,displacementY:A.value,displacementZ:D.value,levelsStart:R.value,levelsEnd:g.value,levelsMargin:_.value,levelsStep:S.value}),h.value&&t.filter(t.BLUR,k.value)}};Ye(()=>{var t;(t=H(r))==null||t.remove()});var T=tl(),Q=c(T),U=c(Q),re=a(c(U),2),Me=c(re,!0);u(re),u(U);var ze=a(U,2);De(ze,{sketch:Se}),u(Q);var oe=a(Q,2),j=c(oe),ne=c(j);ne.__click=[He,y],u(j);var se=a(j,2);{var we=t=>{var o=Je();L(t,o)},ke=t=>{var o=Qe(),v=a(c(o),2);z(v);var s=a(v,4);Ae(s,{get value(){return H(I)},label:"",design:"slider",$$events:{change:()=>{h.value=!h.value,J(I,h.value?"on":"off",!0)}}});var E=a(s,2);{var C=d=>{var M=Te(),F=a(Be(M),2);z(F),w(F,()=>k.value,i=>k.value=i),L(d,M)};V(E,d=>{h.value&&d(C)})}u(o),w(v,()=>m.value,d=>m.value=d),L(t,o)};V(se,t=>{y.grid?t(we):t(ke,!1)})}var K=a(se,2),ie=c(K);ie.__click=[Ue,y],u(K);var ve=a(K,2);{var qe=t=>{var o=je();L(t,o)},ye=t=>{var o=Ke(),v=a(c(o),2),s=c(v);s.value=s.__value="carthesian";var E=a(s);E.value=E.__value="polar",u(v);var C=a(v,4);z(C);var d=a(C,4);z(d);var M=a(d,4);z(M);var F=a(M,4);z(F),u(o),me(v,()=>p.value,i=>p.value=i),w(C,()=>q.value,i=>q.value=i),w(d,()=>A.value,i=>A.value=i),w(M,()=>D.value,i=>D.value=i),w(F,()=>Z.value,i=>Z.value=i),L(t,o)};V(ve,t=>{y.noise?t(qe):t(ye,!1)})}var $=a(ve,2),ce=c($);ce.__click=[$e,y],u($);var ue=a($,2);{var Ee=t=>{var o=el();L(t,o)},Ce=t=>{var o=ll(),v=a(c(o),2);z(v);var s=a(v,4);z(s);var E=a(s,4);z(E);var C=a(E,4);z(C);var d=a(C,4),M=c(d);M.value=M.__value="white";var F=a(M);F.value=F.__value="gradient";var i=a(F);i.value=i.__value="quantized-gradient";var ee=a(i);ee.value=ee.__value="color-gradient";var de=a(ee);de.value=de.__value="color-scaled-gradient",u(d),u(o),w(v,()=>R.value,G=>R.value=G),w(s,()=>g.value,G=>g.value=G),w(E,()=>S.value,G=>S.value=G),w(C,()=>_.value,G=>_.value=G),me(d,()=>b.value,G=>b.value=G),L(t,o)};V(ue,t=>{y.lines?t(Ee):t(Ce,!1)})}var pe=a(ue,2),Fe=a(c(pe));Fe.__click=ge,u(pe),u(oe),u(T),Ze(()=>{Ne(Me,H(Y)),ae(ne,1,`collapse-button ${y.grid?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1qmp6lp"),ae(ie,1,`collapse-button ${y.noise?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1qmp6lp"),ae(ce,1,`collapse-button ${y.lines?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1qmp6lp")}),L(l,T),Re()}xe(["click"]);export{fl as component};
