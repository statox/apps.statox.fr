import"../chunks/CWj6FrbW.js";import{i as re}from"../chunks/B0Nd7lmp.js";import{p as G,A as l,B as ie,w as o,s,k as z,g as t,n as H,E as m,F as p,x as D,v as le}from"../chunks/B6o_wv7S.js";import{p as ne}from"../chunks/DSccAMCx.js";import{f as ce,t as d,a as c,j as fe}from"../chunks/CYn10qqJ.js";import{i as M}from"../chunks/Djwtjxlo.js";import{e as ue,i as me}from"../chunks/BheDjL-C.js";import{b as pe,r as O}from"../chunks/DP6z5guH.js";import{b as q,c as de}from"../chunks/CDqcD15-.js";import{b as ve}from"../chunks/BhA3HE1X.js";import{s as be,a as _e}from"../chunks/D6zfRGpK.js";import{u as ge,U as he}from"../chunks/DlTC-tci.js";import{A as ke}from"../chunks/Cqg18zzu.js";import{t as ye}from"../chunks/DSu-V8Lv.js";import{M as xe}from"../chunks/DZDJjoXM.js";import{M as Se}from"../chunks/IcbHl3ve.js";import{M as Me}from"../chunks/BjxtDz0c.js";import{u as Ue}from"../chunks/CMYcBvA2.js";import{g as we}from"../chunks/Cq-Fwrr5.js";const Ae=()=>{we("/clipboard/")};var Ce=(v,r)=>{t(r)!==void 0&&(t(r).value="")},Fe=(v,r)=>s(r,!t(r)),Te=d('Public <i class="fas fa-lock-open"></i>',1),Be=d('Private <i class="fas fa-lock"></i>',1),Ee=d('<i class="sucess-indicator fas fa-check svelte-118mt4a"></i>'),Le=d('<button class="form-action"><!></button> <!>',1),Pe=d('<span class="form-action">Login to upload an entry</span>'),Ie=d('<div class="contents svelte-118mt4a"><h4 class="title-bar svelte-118mt4a">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-118mt4a"><label for="name">Name</label> <input type="text"> <label for="content">Content</label> <input type="textarea"> <label for="file">File</label> <span><input class="file-input svelte-118mt4a" type="file"> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Ne(v,r){G(r,!0);const[J,K]=be(),Q=()=>_e(ge,"$user",J);let f=l(ie([])),h=l(""),k=l(""),U=l(void 0),b=l(void 0),y=l(!1),x=l(0),_=l(!1),w=l(!1);const R=async()=>{var a,n;if(s(f,[],!0),(a=t(h))!=null&&a.length||t(f).push({level:"error",header:"name must be defined"}),(n=t(k))!=null&&n.length||t(f).push({level:"error",header:"content must be defined"}),t(x)<0&&t(f).push({level:"error",header:"TTL must be positive"}),t(f).length)return;let e;t(b)&&t(b).length&&(e=t(b)[0]||void 0);try{s(_,!0),s(w,!1),await Ue({name:t(h),content:t(k),ttlSeconds:t(x),isPublic:t(y),file:e}),s(_,!1),r.onUpload(),s(w,!0)}catch(u){s(_,!1);let g=u.message;u instanceof ke&&u.code===401?g="Invalid logged in user":u instanceof he&&(g="User is logged out");const P=`<strong>Entry not created</strong><br/> ${g}`;ye.push(P,{theme:{"--toastBarBackground":"#FF0000"}})}};var A=Ie(),C=m(A),V=o(m(C));V.__click=[Ae],p(C);var N=o(C,2);ue(N,17,()=>t(f),me,(e,a)=>{Se(e,{get item(){return t(a)}})});var F=o(N,2),T=o(m(F),2);O(T);var B=o(T,4);O(B);var E=o(B,4),L=m(E);ve(L,e=>s(U,e),()=>t(U));var W=o(L,2);W.__click=[Ce,U],p(E);var $=o(E,4);Me($,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(x)},set valueInSeconds(e){s(x,e,!0)}});var S=o($,4);let j;S.__click=[Fe,y];var X=m(S);{var Y=e=>{var a=Te();D(),c(e,a)},Z=e=>{var a=Be();D(),c(e,a)};M(X,e=>{t(y)?e(Y):e(Z,!1)})}p(S),p(F);var ee=o(F,2);{var te=e=>{var a=Le(),n=le(a);n.__click=R;var u=m(n);{var g=i=>{xe(i,{size:.5,unit:"em",durationSeconds:.5})},P=i=>{var I=fe("Submit");c(i,I)};M(u,i=>{t(_)?i(g):i(P,!1)})}p(n);var se=o(n,2);{var oe=i=>{var I=Ee();c(i,I)};M(se,i=>{t(w)&&i(oe)})}z(()=>n.disabled=t(_)),c(e,a)},ae=e=>{var a=Pe();c(e,a)};M(ee,e=>{Q()?e(te):e(ae,!1)})}p(A),z(e=>j=pe(S,1,"visibility-status svelte-118mt4a",null,j,e),[()=>({"visibility-public":t(y)})]),q(T,()=>t(h),e=>s(h,e)),q(B,()=>t(k),e=>s(k,e)),de(L,()=>t(b),e=>s(b,e)),c(v,A),H(),K()}ce(["click"]);function at(v,r){G(r,!1),ne.set("Clipboard"),re(),Ne(v,{onUpload:()=>console.log("new entry created")}),H()}export{at as component};
