import{s as Ne,H as re,i as L,n as O,f as h,k as Me,p as ct,a0 as Se,e as u,c as f,z as I,a as x,b as y,g,m as c,h as r,O as $,C as Z,y as nt,t as je,d as We,j as Ve,M as it}from"../chunks/scheduler.R-jylA_b.js";import{h as Xe,u as ut}from"../chunks/await_block.D1eTC3Gg.js";import{S as Ue,i as Te,a as te,g as at,c as rt,t as oe,b as Oe,d as ze,m as He,e as qe}from"../chunks/index.DI-pr5GC.js";import{u as Fe,t as ot}from"../chunks/service.BWz8gYdn.js";import{r as ft,a as pt}from"../chunks/index.DmyiyXkN.js";import{e as Ze}from"../chunks/each.Bh1Z-Mx_.js";const ht=!1,Mt=Object.freeze(Object.defineProperty({__proto__:null,ssr:ht},Symbol.toStringTag,{value:"Module"})),dt=async()=>await ft({path:"/webWatcher/getAllWatchers"}),vt=async a=>pt({path:"/webWatcher/createWatcher",data:a});function _t(a){let e,s="Login to upload content";return{c(){e=u("p"),e.textContent=s},l(l){e=f(l,"P",{"data-svelte-h":!0}),I(e)!=="svelte-k7lhwu"&&(e.textContent=s)},m(l,t){L(l,e,t)},p:O,d(l){l&&h(e)}}}function mt(a){let e,s,l,t="Name",o,n,p,i,_,w="Check interval (seconds)",v,m,C,d,k,N,B="Notification message (the @mention is automatically added)",J,G,le,S,z,T,Y="URL",K,Q,ce,U,j,ie="CSS selector",se,H,W,D,X,he="Upload",V,de;return{c(){e=u("div"),s=u("p"),l=u("label"),l.textContent=t,o=x(),n=u("input"),p=x(),i=u("p"),_=u("label"),_.textContent=w,v=x(),m=u("input"),C=x(),d=u("div"),k=u("p"),N=u("label"),N.textContent=B,J=x(),G=u("input"),le=x(),S=u("div"),z=u("p"),T=u("label"),T.textContent=Y,K=x(),Q=u("input"),ce=x(),U=u("p"),j=u("label"),j.textContent=ie,se=x(),H=u("input"),W=x(),D=u("p"),X=u("button"),X.textContent=he,this.h()},l(b){e=f(b,"DIV",{class:!0});var E=y(e);s=f(E,"P",{class:!0});var q=y(s);l=f(q,"LABEL",{for:!0,"data-svelte-h":!0}),I(l)!=="svelte-bs9sy6"&&(l.textContent=t),o=g(q),n=f(q,"INPUT",{type:!0,class:!0}),q.forEach(h),p=g(E),i=f(E,"P",{class:!0});var ue=y(i);_=f(ue,"LABEL",{for:!0,"data-svelte-h":!0}),I(_)!=="svelte-fnhv3x"&&(_.textContent=w),v=g(ue),m=f(ue,"INPUT",{type:!0,class:!0}),ue.forEach(h),E.forEach(h),C=g(b),d=f(b,"DIV",{class:!0});var ve=y(d);k=f(ve,"P",{class:!0});var F=y(k);N=f(F,"LABEL",{for:!0,"data-svelte-h":!0}),I(N)!=="svelte-dkopgm"&&(N.textContent=B),J=g(F),G=f(F,"INPUT",{type:!0,class:!0}),F.forEach(h),ve.forEach(h),le=g(b),S=f(b,"DIV",{class:!0});var ne=y(S);z=f(ne,"P",{class:!0});var M=y(z);T=f(M,"LABEL",{for:!0,"data-svelte-h":!0}),I(T)!=="svelte-47691s"&&(T.textContent=Y),K=g(M),Q=f(M,"INPUT",{type:!0,class:!0}),M.forEach(h),ce=g(ne),U=f(ne,"P",{class:!0});var R=y(U);j=f(R,"LABEL",{for:!0,"data-svelte-h":!0}),I(j)!=="svelte-1ib74yx"&&(j.textContent=ie),se=g(R),H=f(R,"INPUT",{type:!0,class:!0}),R.forEach(h),ne.forEach(h),W=g(b),D=f(b,"P",{});var me=y(D);X=f(me,"BUTTON",{"data-svelte-h":!0}),I(X)!=="svelte-15774uw"&&(X.textContent=he),me.forEach(h),this.h()},h(){c(l,"for","name"),c(n,"type","text"),c(n,"class","svelte-19dtsjx"),c(s,"class","section-1-item svelte-19dtsjx"),c(_,"for","check-interval"),c(m,"type","number"),c(m,"class","svelte-19dtsjx"),c(i,"class","section-1-item svelte-19dtsjx"),c(e,"class","section svelte-19dtsjx"),c(N,"for","notification-message"),c(G,"type","textarea"),c(G,"class","svelte-19dtsjx"),c(k,"class","section-2-item svelte-19dtsjx"),c(d,"class","section svelte-19dtsjx"),c(T,"for","content"),c(Q,"type","textarea"),c(Q,"class","svelte-19dtsjx"),c(z,"class","section-3-item svelte-19dtsjx"),c(j,"for","css-selector"),c(H,"type","textarea"),c(H,"class","svelte-19dtsjx"),c(U,"class","section-3-item svelte-19dtsjx"),c(S,"class","section svelte-19dtsjx")},m(b,E){L(b,e,E),r(e,s),r(s,l),r(s,o),r(s,n),$(n,a[0]),r(e,p),r(e,i),r(i,_),r(i,v),r(i,m),$(m,a[4]),L(b,C,E),L(b,d,E),r(d,k),r(k,N),r(k,J),r(k,G),$(G,a[1]),L(b,le,E),L(b,S,E),r(S,z),r(z,T),r(z,K),r(z,Q),$(Q,a[2]),r(S,ce),r(S,U),r(U,j),r(U,se),r(U,H),$(H,a[3]),L(b,W,E),L(b,D,E),r(D,X),V||(de=[Z(n,"input",a[7]),Z(m,"input",a[8]),Z(G,"input",a[9]),Z(Q,"input",a[10]),Z(H,"input",a[11]),Z(X,"click",a[6])],V=!0)},p(b,E){E&1&&n.value!==b[0]&&$(n,b[0]),E&16&&Se(m.value)!==b[4]&&$(m,b[4]),E&2&&$(G,b[1]),E&4&&$(Q,b[2]),E&8&&$(H,b[3])},d(b){b&&(h(e),h(C),h(d),h(le),h(S),h(W),h(D)),V=!1,nt(de)}}}function bt(a){let e;function s(o,n){return o[5]?mt:_t}let l=s(a),t=l(a);return{c(){t.c(),e=re()},l(o){t.l(o),e=re()},m(o,n){t.m(o,n),L(o,e,n)},p(o,[n]){l===(l=s(o))&&t?t.p(o,n):(t.d(1),t=l(o),t&&(t.c(),t.m(e.parentNode,e)))},i:O,o:O,d(o){o&&h(e),t.d(o)}}}function Ct(a,e,s){let l;Me(a,Fe,N=>s(5,l=N));const t=ct();let o,n,p,i,_=15*60;const w=async()=>{if(!o.length||!p||!n||!i){console.error("name should be defined");return}try{await vt({name:o,notificationMessage:n,url:p,cssSelector:i,checkIntervalSeconds:_}),t("upload")}catch(N){const B=`<strong>Entry not created</strong><br/> ${N.message}`;ot.push(B,{theme:{"--toastBarBackground":"#FF0000"}})}};function v(){o=this.value,s(0,o)}function m(){_=Se(this.value),s(4,_)}function C(){n=this.value,s(1,n)}function d(){p=this.value,s(2,p)}function k(){i=this.value,s(3,i)}return[o,n,p,i,_,l,w,v,m,C,d,k]}class kt extends Ue{constructor(e){super(),Te(this,e,Ct,bt,Ne,{})}}function et(a){let e,s,l=a[0].name+"",t,o,n,p='<i class="fas fa-trash-alt"></i>',i,_,w,v,m="Check interval (seconds)",C,d,k,N,B,J,G="Notification message",le,S,z,T,Y,K,Q="URL",ce,U,j=a[0].url+"",ie,se,H,W,D,X="CSS selector",he,V,de,b,E,q,ue="Last check",ve,F,ne,M,R,me="Last content change",$e,fe,De,_e,ae,pe,Re="Last content",Ae,ee,be,Be,Je;return{c(){e=u("div"),s=u("h4"),t=je(l),o=x(),n=u("button"),n.innerHTML=p,i=x(),_=u("div"),w=u("p"),v=u("label"),v.textContent=m,C=x(),d=u("input"),k=x(),N=u("div"),B=u("p"),J=u("label"),J.textContent=G,le=x(),S=u("input"),z=x(),T=u("div"),Y=u("p"),K=u("label"),K.textContent=Q,ce=x(),U=u("a"),ie=je(j),H=x(),W=u("p"),D=u("label"),D.textContent=X,he=x(),V=u("input"),de=x(),b=u("div"),E=u("p"),q=u("label"),q.textContent=ue,ve=x(),F=u("input"),ne=x(),M=u("p"),R=u("label"),R.textContent=me,$e=x(),fe=u("input"),De=x(),_e=u("div"),ae=u("p"),pe=u("label"),pe.textContent=Re,Ae=x(),ee=u("input"),this.h()},l(A){e=f(A,"DIV",{class:!0});var P=y(e);s=f(P,"H4",{class:!0});var Ce=y(s);t=We(Ce,l),o=g(Ce),n=f(Ce,"BUTTON",{class:!0,"data-svelte-h":!0}),I(n)!=="svelte-1luhlg0"&&(n.innerHTML=p),Ce.forEach(h),i=g(P),_=f(P,"DIV",{class:!0});var Ge=y(_);w=f(Ge,"P",{class:!0});var ke=y(w);v=f(ke,"LABEL",{for:!0,"data-svelte-h":!0}),I(v)!=="svelte-fnhv3x"&&(v.textContent=m),C=g(ke),d=f(ke,"INPUT",{type:!0,class:!0}),ke.forEach(h),Ge.forEach(h),k=g(P),N=f(P,"DIV",{class:!0});var Ye=y(N);B=f(Ye,"P",{class:!0});var xe=y(B);J=f(xe,"LABEL",{for:!0,"data-svelte-h":!0}),I(J)!=="svelte-1rjok9v"&&(J.textContent=G),le=g(xe),S=f(xe,"INPUT",{type:!0,class:!0}),xe.forEach(h),Ye.forEach(h),z=g(P),T=f(P,"DIV",{class:!0});var ge=y(T);Y=f(ge,"P",{class:!0});var Ee=y(Y);K=f(Ee,"LABEL",{for:!0,"data-svelte-h":!0}),I(K)!=="svelte-47691s"&&(K.textContent=Q),ce=g(Ee),U=f(Ee,"A",{target:!0,rel:!0,href:!0});var Ke=y(U);ie=We(Ke,j),Ke.forEach(h),Ee.forEach(h),H=g(ge),W=f(ge,"P",{class:!0});var ye=y(W);D=f(ye,"LABEL",{for:!0,"data-svelte-h":!0}),I(D)!=="svelte-1ib74yx"&&(D.textContent=X),he=g(ye),V=f(ye,"INPUT",{type:!0,class:!0}),ye.forEach(h),ge.forEach(h),de=g(P),b=f(P,"DIV",{class:!0});var we=y(b);E=f(we,"P",{class:!0});var Le=y(E);q=f(Le,"LABEL",{for:!0,"data-svelte-h":!0}),I(q)!=="svelte-l58ce3"&&(q.textContent=ue),ve=g(Le),F=f(Le,"INPUT",{type:!0,class:!0}),Le.forEach(h),ne=g(we),M=f(we,"P",{class:!0});var Pe=y(M);R=f(Pe,"LABEL",{for:!0,"data-svelte-h":!0}),I(R)!=="svelte-r6rd2z"&&(R.textContent=me),$e=g(Pe),fe=f(Pe,"INPUT",{type:!0,class:!0}),Pe.forEach(h),we.forEach(h),De=g(P),_e=f(P,"DIV",{class:!0});var Qe=y(_e);ae=f(Qe,"P",{class:!0});var Ie=y(ae);pe=f(Ie,"LABEL",{for:!0,"data-svelte-h":!0}),I(pe)!=="svelte-1hxqr7r"&&(pe.textContent=Re),Ae=g(Ie),ee=f(Ie,"INPUT",{type:!0,class:!0}),Ie.forEach(h),Qe.forEach(h),P.forEach(h),this.h()},h(){c(n,"class","delete-button svelte-1b24s2e"),c(s,"class","item-title svelte-1b24s2e"),c(v,"for","check-interval"),d.disabled=!0,c(d,"type","number"),c(d,"class","svelte-1b24s2e"),c(w,"class","section-1-item svelte-1b24s2e"),c(_,"class","section svelte-1b24s2e"),c(J,"for","notification-message"),S.disabled=!0,c(S,"type","textarea"),c(S,"class","svelte-1b24s2e"),c(B,"class","section-2-item svelte-1b24s2e"),c(N,"class","section svelte-1b24s2e"),c(K,"for","content"),c(U,"target","_blank"),c(U,"rel","noopener noreferrer"),c(U,"href",se=a[0].url),c(Y,"class","section-3-item svelte-1b24s2e"),c(D,"for","css-selector"),V.disabled=!0,c(V,"type","textarea"),c(V,"class","svelte-1b24s2e"),c(W,"class","section-3-item svelte-1b24s2e"),c(T,"class","section svelte-1b24s2e"),c(q,"for","last-check"),F.disabled=!0,c(F,"type","textarea"),F.value=a[2],c(F,"class","svelte-1b24s2e"),c(E,"class","section-4-item svelte-1b24s2e"),c(R,"for","last-update"),fe.disabled=!0,c(fe,"type","textarea"),fe.value=a[3],c(fe,"class","svelte-1b24s2e"),c(M,"class","section-4-item svelte-1b24s2e"),c(b,"class","section svelte-1b24s2e"),c(pe,"for","last-update"),ee.disabled=!0,c(ee,"type","textarea"),ee.value=be=a[0].lastContent,c(ee,"class","svelte-1b24s2e"),c(ae,"class","section-3-item svelte-1b24s2e"),c(_e,"class","section svelte-1b24s2e"),c(e,"class","item svelte-1b24s2e")},m(A,P){L(A,e,P),r(e,s),r(s,t),r(s,o),r(s,n),r(e,i),r(e,_),r(_,w),r(w,v),r(w,C),r(w,d),$(d,a[0].checkIntervalSeconds),r(e,k),r(e,N),r(N,B),r(B,J),r(B,le),r(B,S),$(S,a[0].notificationMessage),r(e,z),r(e,T),r(T,Y),r(Y,K),r(Y,ce),r(Y,U),r(U,ie),r(T,H),r(T,W),r(W,D),r(W,he),r(W,V),$(V,a[0].cssSelector),r(e,de),r(e,b),r(b,E),r(E,q),r(E,ve),r(E,F),r(b,ne),r(b,M),r(M,R),r(M,$e),r(M,fe),r(e,De),r(e,_e),r(_e,ae),r(ae,pe),r(ae,Ae),r(ae,ee),Be||(Je=[Z(n,"click",a[4]),Z(d,"input",a[5]),Z(S,"input",a[6]),Z(V,"input",a[7])],Be=!0)},p(A,P){P&1&&l!==(l=A[0].name+"")&&Ve(t,l),P&1&&Se(d.value)!==A[0].checkIntervalSeconds&&$(d,A[0].checkIntervalSeconds),P&1&&$(S,A[0].notificationMessage),P&1&&j!==(j=A[0].url+"")&&Ve(ie,j),P&1&&se!==(se=A[0].url)&&c(U,"href",se),P&1&&$(V,A[0].cssSelector),P&1&&be!==(be=A[0].lastContent)&&ee.value!==be&&(ee.value=be)},d(A){A&&h(e),Be=!1,nt(Je)}}}function xt(a){let e,s=a[1]&&et(a);return{c(){s&&s.c(),e=re()},l(l){s&&s.l(l),e=re()},m(l,t){s&&s.m(l,t),L(l,e,t)},p(l,[t]){l[1]?s?s.p(l,t):(s=et(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:O,o:O,d(l){l&&h(e),s&&s.d(l)}}}function gt(a,e,s){let l;Me(a,Fe,m=>s(1,l=m));let{watcher:t}=e;const o=m=>{const C=new Date(m*1e3);return C.toLocaleDateString()+" "+C.toLocaleTimeString()},n=t.lastCheckDateUnix===0?"Never checked before":o(t.lastCheckDateUnix),p=t.lastUpdateDateUnix===0?"Never changed":o(t.lastUpdateDateUnix),i=async()=>{if(!t.id){console.error("id must be defined");return}ot.push("TODO implement deletion",{theme:{"--toastBarBackground":"#FF0000"}})};function _(){t.checkIntervalSeconds=Se(this.value),s(0,t)}function w(){t.notificationMessage=this.value,s(0,t)}function v(){t.cssSelector=this.value,s(0,t)}return a.$$set=m=>{"watcher"in m&&s(0,t=m.watcher)},[t,l,n,p,i,_,w,v]}class Et extends Ue{constructor(e){super(),Te(this,e,gt,xt,Ne,{watcher:0})}}function tt(a,e,s){const l=a.slice();return l[1]=e[s],l}function lt(a){let e,s;return e=new Et({props:{watcher:a[1]}}),{c(){Oe(e.$$.fragment)},l(l){ze(e.$$.fragment,l)},m(l,t){He(e,l,t),s=!0},p(l,t){const o={};t&1&&(o.watcher=l[1]),e.$set(o)},i(l){s||(te(e.$$.fragment,l),s=!0)},o(l){oe(e.$$.fragment,l),s=!1},d(l){qe(e,l)}}}function yt(a){let e,s,l=Ze(a[0].sort(st)),t=[];for(let n=0;n<l.length;n+=1)t[n]=lt(tt(a,l,n));const o=n=>oe(t[n],1,1,()=>{t[n]=null});return{c(){e=u("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=f(n,"DIV",{class:!0});var p=y(e);for(let i=0;i<t.length;i+=1)t[i].l(p);p.forEach(h),this.h()},h(){c(e,"class","container svelte-c8nodu")},m(n,p){L(n,e,p);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null);s=!0},p(n,[p]){if(p&1){l=Ze(n[0].sort(st));let i;for(i=0;i<l.length;i+=1){const _=tt(n,l,i);t[i]?(t[i].p(_,p),te(t[i],1)):(t[i]=lt(_),t[i].c(),te(t[i],1),t[i].m(e,null))}for(at(),i=l.length;i<t.length;i+=1)o(i);rt()}},i(n){if(!s){for(let p=0;p<l.length;p+=1)te(t[p]);s=!0}},o(n){t=t.filter(Boolean);for(let p=0;p<t.length;p+=1)oe(t[p]);s=!1},d(n){n&&h(e),it(t,n)}}}const st=(a,e)=>e.id-a.id;function wt(a,e,s){let{watchers:l}=e;return a.$$set=t=>{"watchers"in t&&s(0,l=t.watchers)},[l]}class Lt extends Ue{constructor(e){super(),Te(this,e,wt,yt,Ne,{watchers:0})}}function Pt(a){let e,s="Login to list the watchers";return{c(){e=u("p"),e.textContent=s},l(l){e=f(l,"P",{"data-svelte-h":!0}),I(e)!=="svelte-jtzxnq"&&(e.textContent=s)},m(l,t){L(l,e,t)},p:O,i:O,o:O,d(l){l&&h(e)}}}function It(a){let e,s,l="Create a new watcher",t,o,n,p,i="Watchers",_,w,v,m;o=new kt({}),o.$on("upload",a[3]);let C={ctx:a,current:null,token:null,hasCatch:!0,pending:Ut,then:St,catch:Nt,value:4,error:5,blocks:[,,,]};return Xe(v=a[0],C),{c(){e=u("details"),s=u("summary"),s.textContent=l,t=x(),Oe(o.$$.fragment),n=x(),p=u("h3"),p.textContent=i,_=x(),w=re(),C.block.c()},l(d){e=f(d,"DETAILS",{});var k=y(e);s=f(k,"SUMMARY",{"data-svelte-h":!0}),I(s)!=="svelte-155u8eb"&&(s.textContent=l),t=g(k),ze(o.$$.fragment,k),k.forEach(h),n=g(d),p=f(d,"H3",{"data-svelte-h":!0}),I(p)!=="svelte-1d5313d"&&(p.textContent=i),_=g(d),w=re(),C.block.l(d)},m(d,k){L(d,e,k),r(e,s),r(e,t),He(o,e,null),L(d,n,k),L(d,p,k),L(d,_,k),L(d,w,k),C.block.m(d,C.anchor=k),C.mount=()=>w.parentNode,C.anchor=w,m=!0},p(d,k){a=d,C.ctx=a,k&1&&v!==(v=a[0])&&Xe(v,C)||ut(C,a,k)},i(d){m||(te(o.$$.fragment,d),te(C.block),m=!0)},o(d){oe(o.$$.fragment,d);for(let k=0;k<3;k+=1){const N=C.blocks[k];oe(N)}m=!1},d(d){d&&(h(e),h(n),h(p),h(_),h(w)),qe(o),C.block.d(d),C.token=null,C=null}}}function Nt(a){let e,s="Something went wrong",l,t,o=JSON.stringify(a[5])+"",n;return{c(){e=u("p"),e.textContent=s,l=x(),t=u("p"),n=je(o)},l(p){e=f(p,"P",{"data-svelte-h":!0}),I(e)!=="svelte-171fb2d"&&(e.textContent=s),l=g(p),t=f(p,"P",{});var i=y(t);n=We(i,o),i.forEach(h)},m(p,i){L(p,e,i),L(p,l,i),L(p,t,i),r(t,n)},p(p,i){i&1&&o!==(o=JSON.stringify(p[5])+"")&&Ve(n,o)},i:O,o:O,d(p){p&&(h(e),h(l),h(t))}}}function St(a){let e,s;return e=new Lt({props:{watchers:a[4]}}),{c(){Oe(e.$$.fragment)},l(l){ze(e.$$.fragment,l)},m(l,t){He(e,l,t),s=!0},p(l,t){const o={};t&1&&(o.watchers=l[4]),e.$set(o)},i(l){s||(te(e.$$.fragment,l),s=!0)},o(l){oe(e.$$.fragment,l),s=!1},d(l){qe(e,l)}}}function Ut(a){let e,s="Loading data";return{c(){e=u("p"),e.textContent=s},l(l){e=f(l,"P",{"data-svelte-h":!0}),I(e)!=="svelte-ezyzhc"&&(e.textContent=s)},m(l,t){L(l,e,t)},p:O,i:O,o:O,d(l){l&&h(e)}}}function Tt(a){let e,s="Web Watchers",l,t,o,n,p;const i=[It,Pt],_=[];function w(v,m){return v[1]?0:1}return t=w(a),o=_[t]=i[t](a),{c(){e=u("h2"),e.textContent=s,l=x(),o.c(),n=re()},l(v){e=f(v,"H2",{"data-svelte-h":!0}),I(e)!=="svelte-1xt9l7p"&&(e.textContent=s),l=g(v),o.l(v),n=re()},m(v,m){L(v,e,m),L(v,l,m),_[t].m(v,m),L(v,n,m),p=!0},p(v,[m]){let C=t;t=w(v),t===C?_[t].p(v,m):(at(),oe(_[C],1,1,()=>{_[C]=null}),rt(),o=_[t],o?o.p(v,m):(o=_[t]=i[t](v),o.c()),te(o,1),o.m(n.parentNode,n))},i(v){p||(te(o),p=!0)},o(v){oe(o),p=!1},d(v){v&&(h(e),h(l),h(n)),_[t].d(v)}}}function $t(a,e,s){let l;Me(a,Fe,p=>s(1,l=p));const t=()=>l?dt():[];let o=t();return[o,l,t,()=>s(0,o=t())]}class Ot extends Ue{constructor(e){super(),Te(this,e,$t,Tt,Ne,{})}}export{Ot as component,Mt as universal};
