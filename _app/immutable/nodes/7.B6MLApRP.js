import"../chunks/NZTpNUN0.js";import{p as E,u as L,b as M,s,f as S,g as r,a as j,d as D,e as p,h as t,i as l,r as d,j as F}from"../chunks/BjuhH6lp.js";import{d as H}from"../chunks/BHQPUIUI.js";import{i as N}from"../chunks/Cw8fytvj.js";import{r as _}from"../chunks/DEs50KOR.js";import{b as h}from"../chunks/BszEGJcu.js";import{s as O,a as P}from"../chunks/u5ZAmcyg.js";import{g as b}from"../chunks/BPf85_O0.js";import{l as R,c as T,u as Z}from"../chunks/BuYtuJi8.js";import{M as z}from"../chunks/DaF2b9q9.js";var B=M('<h2>Login</h2> <form><section><label for="username">Username</label> <input id="username" name="username" type="text" autocomplete="username" required/></section> <section><label for="current-password">Password</label> <input id="current-password" name="password" type="password" autocomplete="current-password" required/></section> <button>Sign in</button></form> <!>',1);function re(w,$){E($,!0);const c=()=>O(Z,"$user",k),[k,y]=P();let o=p(""),i=p(""),a=p(void 0);const I=async()=>{try{await R(r(o),r(i)),await T(),c()?.status=="logged_in"?b("/auth/me"):t(a,new Error("Invalid password or username"),!0)}catch(e){if(e?.message==='{"message":"UNAUTHORIZED"}'){t(a,"Invalid password or username");return}t(a,e,!0)}};L(()=>{c()?.status=="logged_in"&&b("/auth/me")});var f=B(),n=s(S(f),2),u=l(n),g=s(l(u),2);_(g),d(u);var m=s(u,2),v=s(l(m),2);_(v),d(m);var U=s(m,2);U.__click=I,d(n);var q=s(n,2);{var x=e=>{{let A=F(()=>({level:"error",header:"Failed auth",message:r(a).toString()}));z(e,{get item(){return r(A)}})}};N(q,e=>{r(a)&&e(x)})}h(g,()=>r(o),e=>t(o,e)),h(v,()=>r(i),e=>t(i,e)),j(w,f),D(),y()}H(["click"]);export{re as component};
