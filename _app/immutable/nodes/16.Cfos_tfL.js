import{s as Ie,H as ue,i as w,n as j,f as h,k as $e,p as nt,a0 as Ne,e as u,c as f,z as I,a as k,b as y,g as x,m as i,h as r,O as T,C as te,y as Qe,t as Xe,d as Ze,j as et,M as at}from"../chunks/scheduler.R-jylA_b.js";import{h as Fe,u as rt}from"../chunks/await_block.D1eTC3Gg.js";import{S as Se,i as Ue,a as ne,g as tt,c as lt,t as fe,b as Ae,d as Be,m as je,e as We}from"../chunks/index.DI-pr5GC.js";import{u as Ve,t as st}from"../chunks/service.BWz8gYdn.js";import{r as ot,a as ct}from"../chunks/index.DmyiyXkN.js";import{e as Re}from"../chunks/each.Bh1Z-Mx_.js";const it=!1,Bt=Object.freeze(Object.defineProperty({__proto__:null,ssr:it},Symbol.toStringTag,{value:"Module"})),ut=async()=>await ot({path:"/webWatcher/getAllWatchers"}),ft=async a=>ct({path:"/webWatcher/createWatcher",data:a});function pt(a){let e,s="Login to upload content";return{c(){e=u("p"),e.textContent=s},l(l){e=f(l,"P",{"data-svelte-h":!0}),I(e)!=="svelte-k7lhwu"&&(e.textContent=s)},m(l,t){w(l,e,t)},p:j,d(l){l&&h(e)}}}function ht(a){let e,s,l,t="Name",o,n,p,c,_,E="Check interval (seconds)",v,C,m,d,b,N,A="Notification message (the @mention is automatically added)",H,q,ae,S,W,D,F="URL",R,J,pe,U,G,Y="CSS selector",K,Q,re,$,X,Z="Upload",V,le;return{c(){e=u("div"),s=u("p"),l=u("label"),l.textContent=t,o=k(),n=u("input"),p=k(),c=u("p"),_=u("label"),_.textContent=E,v=k(),C=u("input"),m=k(),d=u("div"),b=u("p"),N=u("label"),N.textContent=A,H=k(),q=u("input"),ae=k(),S=u("div"),W=u("p"),D=u("label"),D.textContent=F,R=k(),J=u("input"),pe=k(),U=u("p"),G=u("label"),G.textContent=Y,K=k(),Q=u("input"),re=k(),$=u("p"),X=u("button"),X.textContent=Z,this.h()},l(g){e=f(g,"DIV",{class:!0});var L=y(e);s=f(L,"P",{class:!0});var M=y(s);l=f(M,"LABEL",{for:!0,"data-svelte-h":!0}),I(l)!=="svelte-bs9sy6"&&(l.textContent=t),o=x(M),n=f(M,"INPUT",{type:!0,class:!0}),M.forEach(h),p=x(L),c=f(L,"P",{class:!0});var oe=y(c);_=f(oe,"LABEL",{for:!0,"data-svelte-h":!0}),I(_)!=="svelte-fnhv3x"&&(_.textContent=E),v=x(oe),C=f(oe,"INPUT",{type:!0,class:!0}),oe.forEach(h),L.forEach(h),m=x(g),d=f(g,"DIV",{class:!0});var ee=y(d);b=f(ee,"P",{class:!0});var O=y(b);N=f(O,"LABEL",{for:!0,"data-svelte-h":!0}),I(N)!=="svelte-dkopgm"&&(N.textContent=A),H=x(O),q=f(O,"INPUT",{type:!0,class:!0}),O.forEach(h),ee.forEach(h),ae=x(g),S=f(g,"DIV",{class:!0});var he=y(S);W=f(he,"P",{class:!0});var ce=y(W);D=f(ce,"LABEL",{for:!0,"data-svelte-h":!0}),I(D)!=="svelte-47691s"&&(D.textContent=F),R=x(ce),J=f(ce,"INPUT",{type:!0,class:!0}),ce.forEach(h),pe=x(he),U=f(he,"P",{class:!0});var z=y(U);G=f(z,"LABEL",{for:!0,"data-svelte-h":!0}),I(G)!=="svelte-1ib74yx"&&(G.textContent=Y),K=x(z),Q=f(z,"INPUT",{type:!0,class:!0}),z.forEach(h),he.forEach(h),re=x(g),$=f(g,"P",{});var ve=y($);X=f(ve,"BUTTON",{"data-svelte-h":!0}),I(X)!=="svelte-15774uw"&&(X.textContent=Z),ve.forEach(h),this.h()},h(){i(l,"for","name"),i(n,"type","text"),i(n,"class","svelte-19dtsjx"),i(s,"class","section-1-item svelte-19dtsjx"),i(_,"for","check-interval"),i(C,"type","number"),i(C,"class","svelte-19dtsjx"),i(c,"class","section-1-item svelte-19dtsjx"),i(e,"class","section svelte-19dtsjx"),i(N,"for","notification-message"),i(q,"type","textarea"),i(q,"class","svelte-19dtsjx"),i(b,"class","section-2-item svelte-19dtsjx"),i(d,"class","section svelte-19dtsjx"),i(D,"for","content"),i(J,"type","textarea"),i(J,"class","svelte-19dtsjx"),i(W,"class","section-3-item svelte-19dtsjx"),i(G,"for","css-selector"),i(Q,"type","textarea"),i(Q,"class","svelte-19dtsjx"),i(U,"class","section-3-item svelte-19dtsjx"),i(S,"class","section svelte-19dtsjx")},m(g,L){w(g,e,L),r(e,s),r(s,l),r(s,o),r(s,n),T(n,a[0]),r(e,p),r(e,c),r(c,_),r(c,v),r(c,C),T(C,a[4]),w(g,m,L),w(g,d,L),r(d,b),r(b,N),r(b,H),r(b,q),T(q,a[1]),w(g,ae,L),w(g,S,L),r(S,W),r(W,D),r(W,R),r(W,J),T(J,a[2]),r(S,pe),r(S,U),r(U,G),r(U,K),r(U,Q),T(Q,a[3]),w(g,re,L),w(g,$,L),r($,X),V||(le=[te(n,"input",a[7]),te(C,"input",a[8]),te(q,"input",a[9]),te(J,"input",a[10]),te(Q,"input",a[11]),te(X,"click",a[6])],V=!0)},p(g,L){L&1&&n.value!==g[0]&&T(n,g[0]),L&16&&Ne(C.value)!==g[4]&&T(C,g[4]),L&2&&T(q,g[1]),L&4&&T(J,g[2]),L&8&&T(Q,g[3])},d(g){g&&(h(e),h(m),h(d),h(ae),h(S),h(re),h($)),V=!1,Qe(le)}}}function dt(a){let e;function s(o,n){return o[5]?ht:pt}let l=s(a),t=l(a);return{c(){t.c(),e=ue()},l(o){t.l(o),e=ue()},m(o,n){t.m(o,n),w(o,e,n)},p(o,[n]){l===(l=s(o))&&t?t.p(o,n):(t.d(1),t=l(o),t&&(t.c(),t.m(e.parentNode,e)))},i:j,o:j,d(o){o&&h(e),t.d(o)}}}function vt(a,e,s){let l;$e(a,Ve,N=>s(5,l=N));const t=nt();let o,n,p,c,_=15*60;const E=async()=>{if(!o.length||!p||!n||!c){console.error("name should be defined");return}try{await ft({name:o,notificationMessage:n,url:p,cssSelector:c,checkIntervalSeconds:_}),t("upload")}catch(N){const A=`<strong>Entry not created</strong><br/> ${N.message}`;st.push(A,{theme:{"--toastBarBackground":"#FF0000"}})}};function v(){o=this.value,s(0,o)}function C(){_=Ne(this.value),s(4,_)}function m(){n=this.value,s(1,n)}function d(){p=this.value,s(2,p)}function b(){c=this.value,s(3,c)}return[o,n,p,c,_,l,E,v,C,m,d,b]}class _t extends Se{constructor(e){super(),Ue(this,e,vt,dt,Ie,{})}}function Je(a){let e,s,l=a[0].name+"",t,o,n,p='<i class="fas fa-trash-alt"></i>',c,_,E,v,C="Check interval (seconds)",m,d,b,N,A,H,q="Notification message",ae,S,W,D,F,R,J="URL",pe,U,G,Y,K,Q="CSS selector",re,$,X,Z,V,le,g="Last check",L,M,oe,ee,O,he="Last content change",ce,z,ve,_e,ie,de,Me="Last content",Te,se,me,De,Oe;return{c(){e=u("div"),s=u("h4"),t=Xe(l),o=k(),n=u("button"),n.innerHTML=p,c=k(),_=u("div"),E=u("p"),v=u("label"),v.textContent=C,m=k(),d=u("input"),b=k(),N=u("div"),A=u("p"),H=u("label"),H.textContent=q,ae=k(),S=u("input"),W=k(),D=u("div"),F=u("p"),R=u("label"),R.textContent=J,pe=k(),U=u("input"),G=k(),Y=u("p"),K=u("label"),K.textContent=Q,re=k(),$=u("input"),X=k(),Z=u("div"),V=u("p"),le=u("label"),le.textContent=g,L=k(),M=u("input"),oe=k(),ee=u("p"),O=u("label"),O.textContent=he,ce=k(),z=u("input"),ve=k(),_e=u("div"),ie=u("p"),de=u("label"),de.textContent=Me,Te=k(),se=u("input"),this.h()},l(B){e=f(B,"DIV",{class:!0});var P=y(e);s=f(P,"H4",{class:!0});var be=y(s);t=Ze(be,l),o=x(be),n=f(be,"BUTTON",{class:!0,"data-svelte-h":!0}),I(n)!=="svelte-1luhlg0"&&(n.innerHTML=p),be.forEach(h),c=x(P),_=f(P,"DIV",{class:!0});var ze=y(_);E=f(ze,"P",{class:!0});var Ce=y(E);v=f(Ce,"LABEL",{for:!0,"data-svelte-h":!0}),I(v)!=="svelte-fnhv3x"&&(v.textContent=C),m=x(Ce),d=f(Ce,"INPUT",{type:!0,class:!0}),Ce.forEach(h),ze.forEach(h),b=x(P),N=f(P,"DIV",{class:!0});var He=y(N);A=f(He,"P",{class:!0});var ke=y(A);H=f(ke,"LABEL",{for:!0,"data-svelte-h":!0}),I(H)!=="svelte-1rjok9v"&&(H.textContent=q),ae=x(ke),S=f(ke,"INPUT",{type:!0,class:!0}),ke.forEach(h),He.forEach(h),W=x(P),D=f(P,"DIV",{class:!0});var xe=y(D);F=f(xe,"P",{class:!0});var ge=y(F);R=f(ge,"LABEL",{for:!0,"data-svelte-h":!0}),I(R)!=="svelte-47691s"&&(R.textContent=J),pe=x(ge),U=f(ge,"INPUT",{type:!0,class:!0}),ge.forEach(h),G=x(xe),Y=f(xe,"P",{class:!0});var ye=y(Y);K=f(ye,"LABEL",{for:!0,"data-svelte-h":!0}),I(K)!=="svelte-1ib74yx"&&(K.textContent=Q),re=x(ye),$=f(ye,"INPUT",{type:!0,class:!0}),ye.forEach(h),xe.forEach(h),X=x(P),Z=f(P,"DIV",{class:!0});var Ee=y(Z);V=f(Ee,"P",{class:!0});var we=y(V);le=f(we,"LABEL",{for:!0,"data-svelte-h":!0}),I(le)!=="svelte-l58ce3"&&(le.textContent=g),L=x(we),M=f(we,"INPUT",{type:!0,class:!0}),we.forEach(h),oe=x(Ee),ee=f(Ee,"P",{class:!0});var Le=y(ee);O=f(Le,"LABEL",{for:!0,"data-svelte-h":!0}),I(O)!=="svelte-r6rd2z"&&(O.textContent=he),ce=x(Le),z=f(Le,"INPUT",{type:!0,class:!0}),Le.forEach(h),Ee.forEach(h),ve=x(P),_e=f(P,"DIV",{class:!0});var qe=y(_e);ie=f(qe,"P",{class:!0});var Pe=y(ie);de=f(Pe,"LABEL",{for:!0,"data-svelte-h":!0}),I(de)!=="svelte-1hxqr7r"&&(de.textContent=Me),Te=x(Pe),se=f(Pe,"INPUT",{type:!0,class:!0}),Pe.forEach(h),qe.forEach(h),P.forEach(h),this.h()},h(){i(n,"class","delete-button svelte-1b24s2e"),i(s,"class","item-title svelte-1b24s2e"),i(v,"for","check-interval"),d.disabled=!0,i(d,"type","number"),i(d,"class","svelte-1b24s2e"),i(E,"class","section-1-item svelte-1b24s2e"),i(_,"class","section svelte-1b24s2e"),i(H,"for","notification-message"),S.disabled=!0,i(S,"type","textarea"),i(S,"class","svelte-1b24s2e"),i(A,"class","section-2-item svelte-1b24s2e"),i(N,"class","section svelte-1b24s2e"),i(R,"for","content"),U.disabled=!0,i(U,"type","textarea"),i(U,"class","svelte-1b24s2e"),i(F,"class","section-3-item svelte-1b24s2e"),i(K,"for","css-selector"),$.disabled=!0,i($,"type","textarea"),i($,"class","svelte-1b24s2e"),i(Y,"class","section-3-item svelte-1b24s2e"),i(D,"class","section svelte-1b24s2e"),i(le,"for","last-check"),M.disabled=!0,i(M,"type","textarea"),M.value=a[2],i(M,"class","svelte-1b24s2e"),i(V,"class","section-4-item svelte-1b24s2e"),i(O,"for","last-update"),z.disabled=!0,i(z,"type","textarea"),z.value=a[3],i(z,"class","svelte-1b24s2e"),i(ee,"class","section-4-item svelte-1b24s2e"),i(Z,"class","section svelte-1b24s2e"),i(de,"for","last-update"),se.disabled=!0,i(se,"type","textarea"),se.value=me=a[0].lastContent,i(se,"class","svelte-1b24s2e"),i(ie,"class","section-3-item svelte-1b24s2e"),i(_e,"class","section svelte-1b24s2e"),i(e,"class","item svelte-1b24s2e")},m(B,P){w(B,e,P),r(e,s),r(s,t),r(s,o),r(s,n),r(e,c),r(e,_),r(_,E),r(E,v),r(E,m),r(E,d),T(d,a[0].checkIntervalSeconds),r(e,b),r(e,N),r(N,A),r(A,H),r(A,ae),r(A,S),T(S,a[0].notificationMessage),r(e,W),r(e,D),r(D,F),r(F,R),r(F,pe),r(F,U),T(U,a[0].url),r(D,G),r(D,Y),r(Y,K),r(Y,re),r(Y,$),T($,a[0].cssSelector),r(e,X),r(e,Z),r(Z,V),r(V,le),r(V,L),r(V,M),r(Z,oe),r(Z,ee),r(ee,O),r(ee,ce),r(ee,z),r(e,ve),r(e,_e),r(_e,ie),r(ie,de),r(ie,Te),r(ie,se),De||(Oe=[te(n,"click",a[4]),te(d,"input",a[5]),te(S,"input",a[6]),te(U,"input",a[7]),te($,"input",a[8])],De=!0)},p(B,P){P&1&&l!==(l=B[0].name+"")&&et(t,l),P&1&&Ne(d.value)!==B[0].checkIntervalSeconds&&T(d,B[0].checkIntervalSeconds),P&1&&T(S,B[0].notificationMessage),P&1&&T(U,B[0].url),P&1&&T($,B[0].cssSelector),P&1&&me!==(me=B[0].lastContent)&&se.value!==me&&(se.value=me)},d(B){B&&h(e),De=!1,Qe(Oe)}}}function mt(a){let e,s=a[1]&&Je(a);return{c(){s&&s.c(),e=ue()},l(l){s&&s.l(l),e=ue()},m(l,t){s&&s.m(l,t),w(l,e,t)},p(l,[t]){l[1]?s?s.p(l,t):(s=Je(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:j,o:j,d(l){l&&h(e),s&&s.d(l)}}}function bt(a,e,s){let l;$e(a,Ve,m=>s(1,l=m));let{watcher:t}=e;const o=m=>{const d=new Date(m*1e3);return d.toLocaleDateString()+" "+d.toLocaleTimeString()},n=t.lastCheckDateUnix===0?"Never checked before":o(t.lastCheckDateUnix),p=t.lastUpdateDateUnix===0?"Never changed":o(t.lastUpdateDateUnix),c=async()=>{if(!t.id){console.error("id must be defined");return}st.push("TODO implement deletion",{theme:{"--toastBarBackground":"#FF0000"}})};function _(){t.checkIntervalSeconds=Ne(this.value),s(0,t)}function E(){t.notificationMessage=this.value,s(0,t)}function v(){t.url=this.value,s(0,t)}function C(){t.cssSelector=this.value,s(0,t)}return a.$$set=m=>{"watcher"in m&&s(0,t=m.watcher)},[t,l,n,p,c,_,E,v,C]}class Ct extends Se{constructor(e){super(),Ue(this,e,bt,mt,Ie,{watcher:0})}}function Ge(a,e,s){const l=a.slice();return l[1]=e[s],l}function Ye(a){let e,s;return e=new Ct({props:{watcher:a[1]}}),{c(){Ae(e.$$.fragment)},l(l){Be(e.$$.fragment,l)},m(l,t){je(e,l,t),s=!0},p(l,t){const o={};t&1&&(o.watcher=l[1]),e.$set(o)},i(l){s||(ne(e.$$.fragment,l),s=!0)},o(l){fe(e.$$.fragment,l),s=!1},d(l){We(e,l)}}}function kt(a){let e,s,l=Re(a[0].sort(Ke)),t=[];for(let n=0;n<l.length;n+=1)t[n]=Ye(Ge(a,l,n));const o=n=>fe(t[n],1,1,()=>{t[n]=null});return{c(){e=u("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=f(n,"DIV",{class:!0});var p=y(e);for(let c=0;c<t.length;c+=1)t[c].l(p);p.forEach(h),this.h()},h(){i(e,"class","container svelte-c8nodu")},m(n,p){w(n,e,p);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(n,[p]){if(p&1){l=Re(n[0].sort(Ke));let c;for(c=0;c<l.length;c+=1){const _=Ge(n,l,c);t[c]?(t[c].p(_,p),ne(t[c],1)):(t[c]=Ye(_),t[c].c(),ne(t[c],1),t[c].m(e,null))}for(tt(),c=l.length;c<t.length;c+=1)o(c);lt()}},i(n){if(!s){for(let p=0;p<l.length;p+=1)ne(t[p]);s=!0}},o(n){t=t.filter(Boolean);for(let p=0;p<t.length;p+=1)fe(t[p]);s=!1},d(n){n&&h(e),at(t,n)}}}const Ke=(a,e)=>e.id-a.id;function xt(a,e,s){let{watchers:l}=e;return a.$$set=t=>{"watchers"in t&&s(0,l=t.watchers)},[l]}class gt extends Se{constructor(e){super(),Ue(this,e,xt,kt,Ie,{watchers:0})}}function yt(a){let e,s="Login to list the watchers";return{c(){e=u("p"),e.textContent=s},l(l){e=f(l,"P",{"data-svelte-h":!0}),I(e)!=="svelte-jtzxnq"&&(e.textContent=s)},m(l,t){w(l,e,t)},p:j,i:j,o:j,d(l){l&&h(e)}}}function Et(a){let e,s,l="Create a new watcher",t,o,n,p,c="Watchers",_,E,v,C;o=new _t({}),o.$on("upload",a[3]);let m={ctx:a,current:null,token:null,hasCatch:!0,pending:Pt,then:Lt,catch:wt,value:4,error:5,blocks:[,,,]};return Fe(v=a[0],m),{c(){e=u("details"),s=u("summary"),s.textContent=l,t=k(),Ae(o.$$.fragment),n=k(),p=u("h3"),p.textContent=c,_=k(),E=ue(),m.block.c()},l(d){e=f(d,"DETAILS",{});var b=y(e);s=f(b,"SUMMARY",{"data-svelte-h":!0}),I(s)!=="svelte-155u8eb"&&(s.textContent=l),t=x(b),Be(o.$$.fragment,b),b.forEach(h),n=x(d),p=f(d,"H3",{"data-svelte-h":!0}),I(p)!=="svelte-1d5313d"&&(p.textContent=c),_=x(d),E=ue(),m.block.l(d)},m(d,b){w(d,e,b),r(e,s),r(e,t),je(o,e,null),w(d,n,b),w(d,p,b),w(d,_,b),w(d,E,b),m.block.m(d,m.anchor=b),m.mount=()=>E.parentNode,m.anchor=E,C=!0},p(d,b){a=d,m.ctx=a,b&1&&v!==(v=a[0])&&Fe(v,m)||rt(m,a,b)},i(d){C||(ne(o.$$.fragment,d),ne(m.block),C=!0)},o(d){fe(o.$$.fragment,d);for(let b=0;b<3;b+=1){const N=m.blocks[b];fe(N)}C=!1},d(d){d&&(h(e),h(n),h(p),h(_),h(E)),We(o),m.block.d(d),m.token=null,m=null}}}function wt(a){let e,s="Something went wrong",l,t,o=JSON.stringify(a[5])+"",n;return{c(){e=u("p"),e.textContent=s,l=k(),t=u("p"),n=Xe(o)},l(p){e=f(p,"P",{"data-svelte-h":!0}),I(e)!=="svelte-171fb2d"&&(e.textContent=s),l=x(p),t=f(p,"P",{});var c=y(t);n=Ze(c,o),c.forEach(h)},m(p,c){w(p,e,c),w(p,l,c),w(p,t,c),r(t,n)},p(p,c){c&1&&o!==(o=JSON.stringify(p[5])+"")&&et(n,o)},i:j,o:j,d(p){p&&(h(e),h(l),h(t))}}}function Lt(a){let e,s;return e=new gt({props:{watchers:a[4]}}),{c(){Ae(e.$$.fragment)},l(l){Be(e.$$.fragment,l)},m(l,t){je(e,l,t),s=!0},p(l,t){const o={};t&1&&(o.watchers=l[4]),e.$set(o)},i(l){s||(ne(e.$$.fragment,l),s=!0)},o(l){fe(e.$$.fragment,l),s=!1},d(l){We(e,l)}}}function Pt(a){let e,s="Loading data";return{c(){e=u("p"),e.textContent=s},l(l){e=f(l,"P",{"data-svelte-h":!0}),I(e)!=="svelte-ezyzhc"&&(e.textContent=s)},m(l,t){w(l,e,t)},p:j,i:j,o:j,d(l){l&&h(e)}}}function It(a){let e,s="Web Watchers",l,t,o,n,p;const c=[Et,yt],_=[];function E(v,C){return v[1]?0:1}return t=E(a),o=_[t]=c[t](a),{c(){e=u("h2"),e.textContent=s,l=k(),o.c(),n=ue()},l(v){e=f(v,"H2",{"data-svelte-h":!0}),I(e)!=="svelte-1xt9l7p"&&(e.textContent=s),l=x(v),o.l(v),n=ue()},m(v,C){w(v,e,C),w(v,l,C),_[t].m(v,C),w(v,n,C),p=!0},p(v,[C]){let m=t;t=E(v),t===m?_[t].p(v,C):(tt(),fe(_[m],1,1,()=>{_[m]=null}),lt(),o=_[t],o?o.p(v,C):(o=_[t]=c[t](v),o.c()),ne(o,1),o.m(n.parentNode,n))},i(v){p||(ne(o),p=!0)},o(v){fe(o),p=!1},d(v){v&&(h(e),h(l),h(n)),_[t].d(v)}}}function Nt(a,e,s){let l;$e(a,Ve,p=>s(1,l=p));const t=()=>l?ut():[];let o=t();return[o,l,t,()=>s(0,o=t())]}class jt extends Se{constructor(e){super(),Ue(this,e,Nt,It,Ie,{})}}export{jt as component,Bt as universal};
