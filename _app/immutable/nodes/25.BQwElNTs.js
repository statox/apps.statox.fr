import"../chunks/DsnmJJEf.js";import"../chunks/CrquYXKP.js";import{p as R,c as k,f as n,a as t,d as W,g as a,I as Q,b as d,e as u,r as v,s as L,t as b,j as G}from"../chunks/C3-yz8dw.js";import{s as w,d as ga}from"../chunks/DUwLERL-.js";import{i as x}from"../chunks/Ceeih1bB.js";import{i as X}from"../chunks/C_vsOW3i.js";import{a as z,s as Y}from"../chunks/k7vEulbC.js";import{u as Z}from"../chunks/Byefvy9Z.js";import{M as ya}from"../chunks/cADELSPa.js";import{M as aa}from"../chunks/BCRe70JM.js";import{a as ha}from"../chunks/BczP4ff2.js";import{e as O,i as V}from"../chunks/C63BUUd7.js";import{a as $a}from"../chunks/cHXO9EUa.js";import{g as ka,p as ba,P as wa}from"../chunks/BqoTyx3n.js";import{D as xa}from"../chunks/CkcISRbr.js";import"../chunks/DIkBcL1r.js";import{p as Pa}from"../chunks/BQF7YunG.js";import{g as Ma}from"../chunks/CkLSbQrT.js";var Da=d('<button class="emotion-item svelte-cyscl8"> </button>'),Ta=d('<div class="selection"></div>'),La=d('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-value"><!></div></div>'),Aa=d('<h4> </h4> <div class="event svelte-cyscl8"><div>Date</div> <div>Value</div></div> <!>',1),Ea=d("<p>Loading events</p>");function Ha(A,E){R(E,!1);const H=()=>z(ba,"$personalTrackerPassword",P),S=()=>z(Z,"$user",P),[P,m]=Y(),M=async()=>(await ka(H())).reduce((e,o)=>(e[o.type]||(e[o.type]=[]),e[o.type].push(o),e),{});X();var g=k(),j=n(g);{var I=c=>{var e=k(),o=n(e);ha(o,M,l=>{var r=Ea();t(l,r)},(l,r)=>{var s=k(),U=n(s);O(U,1,()=>Object.keys(a(r)),V,(q,J)=>{var K=Aa(),B=n(K),ta=u(B,!0);v(B);var ea=L(B,4);O(ea,1,()=>a(r)[a(J)],V,(ra,i)=>{const oa=Q(()=>xa.fromSeconds(a(i).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var C=La(),F=u(C),sa=u(F,!0);v(F);var N=L(F,2),na=u(N);{var ia=p=>{var y=G();b(()=>w(y,a(i).data)),t(p,y)},va=p=>{var y=k(),da=n(y);{var ma=f=>{var h=G();b(()=>w(h,a(i).data)),t(f,h)},ca=f=>{var h=k(),la=n(h);{var pa=_=>{var $=Ta();O($,5,()=>a(i).data.emotions,V,(_a,D)=>{var T=Da(),ua=u(T);v(T),b(()=>{$a(T,`--color: ${a(D).color??""}`),w(ua,`${a(D).category??""}
                                        ${a(D).subcategory??""}
                                        ${a(D).emotion??""}`)}),t(_a,T)}),v($),t(_,$)},fa=_=>{var $=G("Unknown type of data");t(_,$)};x(la,_=>{a(i).type==="emotionwheel"?_(pa):_(fa,!1)},!0)}t(f,h)};x(da,f=>{a(i).type==="weight"?f(ma):f(ca,!1)},!0)}t(p,y)};x(na,p=>{a(i).type==="mood"?p(ia):p(va,!1)})}v(N),v(C),b(()=>w(sa,a(oa))),t(ra,C)}),b(()=>w(ta,a(J))),t(q,K)}),t(l,s)},(l,r)=>{{let s=Q(()=>({level:"error",header:"Something went wrong getting events",message:a(r)}));aa(l,{get item(){return a(s)}})}}),t(c,e)};x(j,c=>{S()&&c(I)})}t(A,g),W(),m()}var Sa=d("<div><button>Add an entry</button></div> <!>",1),ja=d("<!> <!>",1);function Za(A,E){R(E,!1);const H=()=>z(Z,"$user",S),[S,P]=Y(),m={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};Pa.set(m),X();var M=ja(),g=n(M);ya(g,{get title(){return m.name},get description(){return m.description},get iconPath(){return m.iconPath}});var j=L(g,2);{var I=e=>{wa(e,{children:(o,l)=>{var r=Sa(),s=n(r),U=u(s);U.__click=()=>Ma("/personal-tracker/add"),v(s);var q=L(s,2);Ha(q,{}),t(o,r)},$$slots:{default:!0}})},c=e=>{aa(e,{item:{level:"info",header:"Login to add an entry or see events"}})};x(j,e=>{H()?e(I):e(c,!1)})}t(A,M),W(),P()}ga(["click"]);export{Za as component};
