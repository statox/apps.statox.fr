import"../chunks/DsnmJJEf.js";import{o as ze}from"../chunks/BNOjIaqR.js";import{h as D,T as Be,bx as $e,g as e,i as v,bh as ke,p as _e,b as re,f as he,e as h,s as b,n as fe,r as u,a as O,d as be,c as we,by as Ee,t as ne,aJ as x,C as je}from"../chunks/a6R6ZExM.js";import{d as xe,s as X,e as te}from"../chunks/CQsW2AK8.js";import{i as Ae}from"../chunks/BsOe4k0P.js";import{s as B,r as ge}from"../chunks/BYGGVGA-.js";import{s as Y,a as me}from"../chunks/CPtmBTpt.js";import{b as Oe,c as Me}from"../chunks/C26RCAgx.js";import{b as De}from"../chunks/aZQ-FGJ9.js";import{s as He,a as We}from"../chunks/DaQ1DA65.js";import{M as Ie}from"../chunks/DK1iJMIN.js";import{t as pe}from"../chunks/Cf5lmGS0.js";import{e as L,i as G}from"../chunks/BREkJFxE.js";import{p as Ce}from"../chunks/CcnYXD9S.js";import{M as Te}from"../chunks/DQSBwwkY.js";import{P as Ve,e as Ue,p as qe,g as Le}from"../chunks/C3wahdqe.js";import"../chunks/CTZYrxuF.js";import"../chunks/BF5MbYtv.js";import{p as Ge}from"../chunks/CdbuI7CR.js";/* empty css                */import"../chunks/CSvCa2ro.js";import{g as Se}from"../chunks/CuE5N8om.js";import{p as Fe}from"../chunks/DAEPJQLp.js";import{D as Je}from"../chunks/CkcISRbr.js";var Ne=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Ze=["difference","intersection","symmetricDifference","union"],Pe=!1;class ce extends Set{#s=new Map;#e=D(0);#t=D(0);#n=$e||-1;constructor(r){if(super(),r){for(var i of r)super.add(i);this.#t.v=super.size}Pe||this.#a()}#r(r){return $e===this.#n?D(r):Be(r)}#a(){Pe=!0;var r=ce.prototype,i=Set.prototype;for(const m of Ne)r[m]=function(...g){return e(this.#e),i[m].apply(this,g)};for(const m of Ze)r[m]=function(...g){e(this.#e);var F=i[m].apply(this,g);return new ce(F)}}has(r){var i=super.has(r),m=this.#s,g=m.get(r);if(g===void 0){if(!i)return e(this.#e),!1;g=this.#r(!0),m.set(r,g)}return e(g),i}add(r){return super.has(r)||(super.add(r),v(this.#t,super.size),ke(this.#e)),this}delete(r){var i=super.delete(r),m=this.#s,g=m.get(r);return g!==void 0&&(m.delete(r),v(g,!1)),i&&(v(this.#t,super.size),ke(this.#e)),i}clear(){if(super.size!==0){super.clear();var r=this.#s;for(var i of r.values())v(i,!1);r.clear(),v(this.#t,0),ke(this.#e)}}keys(){return this.values()}values(){return e(this.#e),super.values()}entries(){return e(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return e(this.#t)}}const Ke=!1,Qe=!0,Xe=!1,zt=Object.freeze(Object.defineProperty({__proto__:null,csr:Qe,prerender:Ke,ssr:Xe},Symbol.toStringTag,{value:"Module"})),se={fearful:{_color:"#FFA726",scared:{helpless:{en:"helpless"},frightened:{en:"frightened"}},anxious:{apprehensive:{en:"apprehensive"},worried:{en:"worried"}},insecure:{inadequate:{en:"inadequate"},"self-conscious":{en:"self-conscious"}},weak:{worthless:{en:"worthless"},insignificant:{en:"insignificant"}},rejected:{excluded:{en:"excluded"},persecuted:{en:"persecuted"}},threatened:{nervous:{en:"nervous"},exposed:{en:"exposed"}}},angry:{_color:"#EF5350","let down":{betrayed:{en:"betrayed"},resentful:{en:"resentful"}},humiliated:{disrespected:{en:"disrespected"},ridiculed:{en:"ridiculed"}},bitter:{indignant:{en:"indignant"},violated:{en:"violated"}},mad:{furious:{en:"furious"},jealous:{en:"jealous"}},aggressive:{provoked:{en:"provoked"},hostile:{en:"hostile"}},frustrated:{infuriated:{en:"infuriated"},annoyed:{en:"annoyed"}},distant:{withdrawn:{en:"withdrawn"},numb:{en:"numb"}},critical:{skeptical:{en:"skeptical"},dismissive:{en:"dismissive"}}},disgusted:{_color:"#9E9E9E",disapproving:{judgmental:{en:"judgmental"},disdainful:{en:"disdainful"}},disappointed:{appalled:{en:"appalled"},revolted:{en:"revolted"}},awful:{nauseated:{en:"nauseated"},detestable:{en:"detestable"}},repelled:{horrified:{en:"horrified"},hesitant:{en:"hesitant"}}},sad:{_color:"#42A5F5",lonely:{isolated:{en:"isolated"},abandoned:{en:"abandoned"}},vulnerable:{victimized:{en:"victimized"},fragile:{en:"fragile"}},despair:{grief:{en:"grief"},powerless:{en:"powerless"}},guilty:{ashamed:{en:"ashamed"},remorseful:{en:"remorseful"}},depressed:{inferior:{en:"inferior"},empty:{en:"empty"}},hurt:{embarrassed:{en:"embarrassed"},discouraged:{en:"discouraged"}}},happy:{_color:"#FFEB3B",interested:{curious:{en:"curious"},inquisitive:{en:"inquisitive"}},proud:{successful:{en:"successful"},confident:{en:"confident"}},accepted:{respected:{en:"respected"},valued:{en:"valued"}},powerful:{courageous:{en:"courageous"},creative:{en:"creative"}},peaceful:{loving:{en:"loving"},thankful:{en:"thankful"}},trusting:{sensitive:{en:"sensitive"},intimate:{en:"intimate"}},optimistic:{hopeful:{en:"hopeful"},inspired:{en:"inspired"}},playful:{aroused:{en:"aroused"},cheeky:{en:"cheeky"}},content:{free:{en:"free"},joyful:{en:"joyful"}}},surprised:{_color:"#AB47BC",startled:{shocked:{en:"shocked"},dismayed:{en:"dismayed"}},confused:{disillusioned:{en:"disillusioned"},perplexed:{en:"perplexed"}},amazed:{astonished:{en:"astonished"},awe:{en:"awe"}},excited:{eager:{en:"eager"},energetic:{en:"energetic"}}},bad:{_color:"#66BB6A",bored:{indifferent:{en:"indifferent"},apathetic:{en:"apathetic"}},busy:{pressured:{en:"pressured"},rushed:{en:"rushed"}},stressed:{overwhelmed:{en:"overwhelmed"},"out of control":{en:"out of control"}},tired:{sleepy:{en:"sleepy"},unfocused:{en:"unfocused"}}}};var Ye=Ee('<g class="emotion-wedge"><path></path><text class="emotion-text svelte-is5esu" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Re=Ee('<g class="subcategory-wedge"><path></path><text class="subcategory-text svelte-is5esu" text-anchor="middle" dominant-baseline="middle"> </text></g>'),et=Ee('<g class="category-wedge"><path></path><text class="category-text svelte-is5esu" text-anchor="middle" dominant-baseline="middle"> </text></g>'),tt=re('<button class="selection-item svelte-is5esu"> </button>'),st=re('<div class="emotion-wheel-container svelte-is5esu"><svg viewBox="0 0 100 100" class="wheel svelte-is5esu"><!><!><!><circle cx="50" cy="50" r="0" class="center-circle svelte-is5esu"></circle></svg></div> <div class="selection svelte-is5esu"></div>',1);function nt(Q,r){_e(r,!0);const i=()=>[...r.selection].map(o=>{const[t,n,s,l]=o.split(" - ");return{category:t,subcategory:n,emotion:s,color:l}}),m=o=>{const t=[o.category,o.subcategory,o.emotion,o.color].join(" - ");r.selection.has(t)?r.selection.delete(t):r.selection.add(t)};function g(){const o=[];let t=0;Object.keys(se).forEach(s=>{let l=0;Object.keys(se[s]).filter(c=>!c.startsWith("_")).forEach(c=>{l+=Object.keys(se[s][c]).length});const a=se[s]._color||"#CCCCCC";o.push({name:s,color:a,emotionCount:l,startAngle:0,endAngle:0,subcategories:[]}),t+=l});let n=0;return o.forEach(s=>{const l=s.emotionCount/t*360;s.startAngle=n,s.endAngle=n+l;let a=n;Object.keys(se[s.name]).filter(c=>!c.startsWith("_")).forEach(c=>{const d=Object.keys(se[s.name][c]),w=d.length/s.emotionCount*l;s.subcategories.push({name:c,startAngle:a,endAngle:a+w,emotions:d}),a+=w}),n+=l}),o}const F=g();function I(o,t){const n=parseInt(o.replace("#",""),16),s=Math.min(255,Math.floor((n>>16)+(255-(n>>16))*t/100)),l=Math.min(255,Math.floor((n>>8&255)+(255-(n>>8&255))*t/100)),a=Math.min(255,Math.floor((n&255)+(255-(n&255))*t/100));return"#"+(s<<16|l<<8|a).toString(16).padStart(6,"0")}let _=D(null),f=D(null),p=D(null);function E(o,t,n){v(_,o,!0),v(f,t,!0),v(p,n,!0)}function T(o,t){v(_,o,!0),v(f,t,!0),v(p,null)}function ae(o){v(_,o,!0),v(f,null),v(p,null)}function Z(){v(_,null),v(f,null),v(p,null)}function V(o,t,n,s,l=50,a=50){const c=(o-90)*Math.PI/180,d=(t-90)*Math.PI/180,w=l+n*Math.cos(c),M=a+n*Math.sin(c),j=l+s*Math.cos(c),S=a+s*Math.sin(c),W=l+s*Math.cos(d),J=a+s*Math.sin(d),C=l+n*Math.cos(d),z=a+n*Math.sin(d),q=t-o>180?1:0;return`
            M ${w} ${M}
            L ${j} ${S}
            A ${s} ${s} 0 ${q} 1 ${W} ${J}
            L ${C} ${z}
            A ${n} ${n} 0 ${q} 0 ${w} ${M}
            Z
        `}function oe(o,t,n){const s=(o+t)/2,l=(s-90)*Math.PI/180,a=50+n*Math.cos(l),c=50+n*Math.sin(l),d=s<180?s-90:s+90;return{x:a,y:c,rotation:d}}var $={getEmotionsData:i},P=st(),y=he(P),H=h(y),k=h(H);L(k,17,()=>F,G,(o,t)=>{var n=we(),s=he(n);L(s,17,()=>e(t).subcategories,G,(l,a)=>{const c=x(()=>(e(a).endAngle-e(a).startAngle)/e(a).emotions.length);var d=we(),w=he(d);L(w,17,()=>e(a).emotions,G,(M,j,S)=>{const W=x(()=>e(a).startAngle+S*e(c)),J=x(()=>e(a).startAngle+(S+1)*e(c)),C=x(()=>V(e(W),e(J),30,47)),z=x(()=>oe(e(W),e(J),38.5)),q=x(()=>e(p)===e(j)),ue=x(()=>[...r.selection].find(ye=>ye.includes(e(j))));var N=Ye();N.__click=()=>m({category:e(t).name,subcategory:e(a).name,emotion:e(j),color:e(t).color});var ee=h(N);let ve;var K=b(ee),ie=h(K,!0);u(K),u(N),ne(()=>{B(ee,"d",e(C)),ve=Y(ee,0,"emotion-path svelte-is5esu",null,ve,{highlighted:e(q),selected:e(ue)}),me(ee,`fill: ${e(t).color??""};`),B(K,"x",e(z).x),B(K,"y",e(z).y),B(K,"transform",`rotate(${e(z).rotation??""} ${e(z).x??""} ${e(z).y??""})`),X(ie,e(j))}),te("mouseenter",N,()=>E(e(t).name,e(a).name,e(j))),te("mouseleave",N,Z),O(M,N)}),O(l,d)}),O(o,n)});var U=b(k);L(U,17,()=>F,G,(o,t)=>{var n=we(),s=he(n);L(s,17,()=>e(t).subcategories,G,(l,a)=>{const c=x(()=>V(e(a).startAngle,e(a).endAngle,17,30)),d=x(()=>oe(e(a).startAngle,e(a).endAngle,23.5)),w=x(()=>e(f)===e(a).name&&e(_)===e(t).name),M=x(()=>[...r.selection].find(q=>q.includes(e(a).name))),j=x(()=>I(e(t).color,30));var S=Re(),W=h(S);let J;var C=b(W),z=h(C,!0);u(C),u(S),ne(()=>{B(W,"d",e(c)),J=Y(W,0,"subcategory-path svelte-is5esu",null,J,{highlighted:e(w),selected:e(M)}),me(W,`fill: ${e(j)??""};`),B(C,"x",e(d).x),B(C,"y",e(d).y),B(C,"transform",`rotate(${e(d).rotation??""} ${e(d).x??""} ${e(d).y??""})`),X(z,e(a).name)}),te("mouseenter",S,()=>T(e(t).name,e(a).name)),te("mouseleave",S,Z),O(l,S)}),O(o,n)});var R=b(U);L(R,17,()=>F,G,(o,t)=>{const n=x(()=>V(e(t).startAngle,e(t).endAngle,0,17)),s=x(()=>oe(e(t).startAngle,e(t).endAngle,8.5)),l=x(()=>e(_)===e(t).name),a=x(()=>[...r.selection].find(S=>S.includes(e(t).name)));var c=et(),d=h(c);let w;var M=b(d),j=h(M,!0);u(M),u(c),ne(()=>{B(d,"d",e(n)),w=Y(d,0,"category-path svelte-is5esu",null,w,{highlighted:e(l),selected:e(a)}),me(d,`fill: ${e(t).color??""};`),B(M,"x",e(s).x),B(M,"y",e(s).y),B(M,"transform",`rotate(${e(s).rotation??""} ${e(s).x??""} ${e(s).y??""})`),X(j,e(t).name)}),te("mouseenter",c,()=>ae(e(t).name)),te("mouseleave",c,Z),O(o,c)}),fe(),u(H),u(y);var de=b(y,2);return L(de,21,()=>[...r.selection],G,(o,t)=>{const n=x(()=>{const[a,c,d,w]=e(t).split(" - ");return{category:a,subcategory:c,emotion:d,color:w}});var s=tt();s.__click=()=>r.selection.delete(e(t));var l=h(s);u(s),ne(()=>{me(s,`--color: ${e(n).color??""}`),X(l,`${e(n).category??""}
            ${e(n).subcategory??""}
            ${e(n).emotion??""}`)}),O(o,s)}),u(de),O(Q,P),be($)}xe(["click"]);var rt=re("<button> </button>"),at=re('<div><h4>Mood</h4> <!> <div class="options-container svelte-s4m3ot"></div></div>');function ot(Q,r){_e(r,!0);let i=Ce(r,"value",15,5),m=je([]);var g=at(),F=b(h(g),2);L(F,17,()=>m,G,(_,f)=>{Te(_,{get item(){return e(f)}})});var I=b(F,2);L(I,20,()=>[1,2,3,4,5,6,7,8,9,10],G,(_,f)=>{var p=rt();p.__click=()=>i(f);let E;var T=h(p,!0);u(p),ne(()=>{E=Y(p,1,"",null,E,{selected:i()===f}),X(T,f)}),O(_,p)}),u(I),u(g),O(Q,g),be()}xe(["click"]);var it=re('<div><h4>Weight</h4> <!> <div class="input-container svelte-1st4ez6"><button class="svelte-1st4ez6">-</button> <input type="number" step="0.1" class="svelte-1st4ez6"/> <button class="svelte-1st4ez6">+</button></div></div>');function lt(Q,r){_e(r,!0);let i=Ce(r,"value",15,100),m=D(je([]));var I={validate:()=>(v(m,[],!0),i()!==Number(i().toFixed(1))&&e(m).push({level:"error",header:"Value have at most 1 number after the comma"}),(i()<80||i()>110)&&e(m).push({level:"error",header:"Value must be in kg"}),e(m).length===0),getStorageValue:()=>Math.floor(i()*100)},_=it(),f=b(h(_),2);L(f,17,()=>e(m),G,(Z,V)=>{Te(Z,{get item(){return e(V)}})});var p=b(f,2),E=h(p);E.__click=()=>i(Number((i()-.1).toFixed(2)));var T=b(E,2);ge(T);var ae=b(T,2);return ae.__click=()=>i(Number((i()+.1).toFixed(2))),u(p),u(_),Oe(T,i),O(Q,_),be(I)}xe(["click"]);var ct=re('<div class="contents svelte-10367lt"><h4 class="title-bar svelte-10367lt"> <button>Back</button></h4> <div><div class="section-header svelte-10367lt"><label class="svelte-10367lt"><input type="checkbox" class="svelte-10367lt"/> <span class="section-title svelte-10367lt">Emotions</span></label></div> <!></div> <hr class="separator svelte-10367lt"/> <div><div class="section-header svelte-10367lt"><label class="svelte-10367lt"><input type="checkbox" class="svelte-10367lt"/> <span class="section-title svelte-10367lt">Mood</span></label></div> <!></div> <hr class="separator svelte-10367lt"/> <div><div class="section-header svelte-10367lt"><label class="svelte-10367lt"><input type="checkbox" class="svelte-10367lt"/> <span class="section-title svelte-10367lt">Weight</span></label></div> <!></div> <hr class="separator svelte-10367lt"/> <div class="submit-container svelte-10367lt"><button class="form-action"> </button></div></div>');function Bt(Q,r){_e(r,!0);const i=()=>We(qe,"$personalTrackerPassword",m),[m,g]=He();Ge.set({name:"Personal Tracker",iconPath:"/personal_tracker.png",showAuthInHeader:!0});let F=D(5),I=D(100),_=new ce,f=D(!1),p=D(!1),E=D(!1),T;const ae=()=>Je.now().toUTC().startOf("day").toUnixInteger(),Z=()=>{const $=Fe.params.timestamp;if($){const P=parseInt($,10);if(!isNaN(P))return P}return ae()},V=x(()=>!!Fe.params.timestamp);ze(async()=>{try{const $=await Le(i()),P=Z(),y=$.find(H=>H.eventDateUnix===P);if(y&&(y.mood!==void 0&&(v(F,y.mood,!0),v(f,!0)),y.weight!==void 0&&(v(I,y.weight/100),v(p,!0)),y.emotionwheel?.emotions)){const H=new ce;y.emotionwheel.emotions.forEach(k=>{const U=[k.category,k.subcategory,k.emotion,k.color].join(" - ");H.add(U)}),_.clear(),H.forEach(k=>_.add(k)),v(E,!0)}}catch($){console.error("Failed to load existing event:",$),pe.push("Failed to load existing event",{theme:{"--toastBarBackground":"#FFA500"}})}});const oe=async()=>{if(!e(f)&&!e(p)&&!e(E)){pe.push("Please enable at least one section to submit",{theme:{"--toastBarBackground":"#FFA500"}});return}if(e(p)&&T&&!T.validate())return;const $={};if(e(f)&&($.mood=e(F)),e(p)&&($.weight=T.getStorageValue()),e(E)&&_.size>0){const P=[..._].map(y=>{const[H,k,U,R]=y.split(" - ");return{category:H,subcategory:k,emotion:U,color:R}});$.emotionwheel={emotions:P}}try{const P=Z();await Ue($,i(),P),Se("/personal-tracker"),pe.push(e(V)?"Entry updated":"Entry created")}catch(P){let y=P.message;const k=`<strong>Entry not ${e(V)?"updated":"created"}</strong><br/> ${y}`;pe.push(k,{theme:{"--toastBarBackground":"#FF0000"}})}};Ie(Q,{message:"Login to add an entry",children:($,P)=>{Ve($,{children:(y,H)=>{var k=ct(),U=h(k),R=h(U),de=b(R);de.__click=()=>{Se("/personal-tracker")},u(U);var o=b(U,2);let t;var n=h(o),s=h(n),l=h(s);ge(l),fe(2),u(s),u(n);var a=b(n,2);{var c=A=>{nt(A,{get selection(){return _}})};Ae(a,A=>{e(E)&&A(c)})}u(o);var d=b(o,4);let w;var M=h(d),j=h(M),S=h(j);ge(S),fe(2),u(j),u(M);var W=b(M,2);{var J=A=>{ot(A,{get value(){return e(F)},set value(le){v(F,le,!0)}})};Ae(W,A=>{e(f)&&A(J)})}u(d);var C=b(d,4);let z;var q=h(C),ue=h(q),N=h(ue);ge(N),fe(2),u(ue),u(q);var ee=b(q,2);{var ve=A=>{De(lt(A,{get value(){return e(I)},set value(le){v(I,le,!0)}}),le=>T=le,()=>T)};Ae(ee,A=>{e(p)&&A(ve)})}u(C);var K=b(C,4),ie=h(K);ie.__click=oe;var ye=h(ie,!0);u(ie),u(K),u(k),ne(()=>{X(R,`${e(V)?"Edit Entry":"Today's Personal Metrics"} `),t=Y(o,1,"input-form svelte-10367lt",null,t,{disabled:!e(E)}),w=Y(d,1,"input-form svelte-10367lt",null,w,{disabled:!e(f)}),z=Y(C,1,"input-form svelte-10367lt",null,z,{disabled:!e(p)}),X(ye,e(V)?"Update Entry":"Create Entry")}),Me(l,()=>e(E),A=>v(E,A)),Me(S,()=>e(f),A=>v(f,A)),Me(N,()=>e(p),A=>v(p,A)),O(y,k)},$$slots:{default:!0}})},$$slots:{default:!0}}),be(),g()}xe(["click"]);export{Bt as component,zt as universal};
