import"../chunks/CWj6FrbW.js";import{i as te}from"../chunks/CU0QmhD1.js";import{p as z,A as i,B as ae,w as o,s as r,k as I,g as t,n as D,E as c,F as u,x as N}from"../chunks/D7Iq_oEs.js";import{p as se}from"../chunks/BzFq-7CX.js";import{f as oe,t as _,a as m,j as re}from"../chunks/6Mp4TzzX.js";import{i as E}from"../chunks/BHUurzv7.js";import{e as le,i as ie}from"../chunks/BZoveuJY.js";import{b as ne,r as $}from"../chunks/CHVQtzBs.js";import{b as j,a as fe}from"../chunks/DkX4YCPt.js";import{b as ce}from"../chunks/C6ZF0PI7.js";import{s as ue,a as me}from"../chunks/XeRfgqW9.js";import{u as pe,U as de}from"../chunks/qr39O0Gr.js";import{A as ve}from"../chunks/BxwJthj1.js";import{t as be}from"../chunks/B5B4nQiO.js";import{M as _e}from"../chunks/DLkGyeFp.js";import{M as ge}from"../chunks/Jo_1U8Q0.js";import{M as he}from"../chunks/CpYfVfsj.js";import{u as ye}from"../chunks/BFbubrkX.js";import{g as ke}from"../chunks/CFbLEv5D.js";const we=()=>{ke("/clipboard/")};var xe=(p,s)=>{t(s)!==void 0&&(t(s).value="")},Me=(p,s)=>r(s,!t(s)),Se=_('Public <i class="fas fa-lock-open"></i>',1),Ce=_('Private <i class="fas fa-lock"></i>',1),Ue=_('<button class="form-action"><!></button>'),qe=_('<span class="form-action">Login to upload an entry</span>'),Ae=_('<div class="contents svelte-s8wqdr"><h4 class="title-bar svelte-s8wqdr">Add a new clipboard entry <button>Close</button></h4> <!> <form class="form-content svelte-s8wqdr"><label for="name">Name</label> <input type="text"> <label for="content">Content</label> <input type="textarea"> <label for="file">File</label> <span><input class="file-input svelte-s8wqdr" type="file"> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Fe(p,s){z(s,!0);const[O,G]=ue(),H=()=>me(pe,"$user",O);let n=i(ae([])),g=i(""),h=i(""),M=i(void 0),d=i(void 0),y=i(!1),k=i(0),v=i(!1);const J=async()=>{var a,x;if(r(n,[],!0),(a=t(g))!=null&&a.length||t(n).push({level:"error",header:"name must be defined"}),(x=t(h))!=null&&x.length||t(n).push({level:"error",header:"content must be defined"}),t(k)<0&&t(n).push({level:"error",header:"TTL must be positive"}),t(n).length)return;let e;t(d)&&t(d).length&&(e=t(d)[0]||void 0);try{r(v,!0),await ye({name:t(g),content:t(h),ttlSeconds:t(k),isPublic:t(y),file:e}),r(v,!1),s.onUpload()}catch(f){r(v,!1);let b=f.message;f instanceof ve&&f.code===401?b="Invalid logged in user":f instanceof de&&(b="User is logged out");const l=`<strong>Entry not created</strong><br/> ${b}`;be.push(l,{theme:{"--toastBarBackground":"#FF0000"}})}};var S=Ae(),C=c(S),K=o(c(C));K.__click=[we],u(C);var L=o(C,2);le(L,17,()=>t(n),ie,(e,a)=>{ge(e,{get item(){return t(a)}})});var U=o(L,2),q=o(c(U),2);$(q);var A=o(q,4);$(A);var F=o(A,4),T=c(F);ce(T,e=>r(M,e),()=>t(M));var Q=o(T,2);Q.__click=[xe,M],u(F);var P=o(F,4);he(P,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(k)},set valueInSeconds(e){r(k,e,!0)}});var w=o(P,4);let B;w.__click=[Me,y];var R=c(w);{var V=e=>{var a=Se();N(),m(e,a)},W=e=>{var a=Ce();N(),m(e,a)};E(R,e=>{t(y)?e(V):e(W,!1)})}u(w),u(U);var X=o(U,2);{var Y=e=>{var a=Ue();a.__click=J;var x=c(a);{var f=l=>{_e(l,{size:.5,unit:"em",durationSeconds:.5})},b=l=>{var ee=re("Submit");m(l,ee)};E(x,l=>{t(v)?l(f):l(b,!1)})}u(a),I(()=>a.disabled=t(v)),m(e,a)},Z=e=>{var a=qe();m(e,a)};E(X,e=>{H()?e(Y):e(Z,!1)})}u(S),I(e=>B=ne(w,1,"visibility-status svelte-s8wqdr",null,B,e),[()=>({"visibility-public":t(y)})]),j(q,()=>t(g),e=>r(g,e)),j(A,()=>t(h),e=>r(h,e)),fe(T,()=>t(d),e=>r(d,e)),m(p,S),D(),G()}oe(["click"]);function We(p,s){z(s,!1),se.set("Clipboard"),te(),Fe(p,{onUpload:()=>console.log("new entry created")}),D()}export{We as component};
