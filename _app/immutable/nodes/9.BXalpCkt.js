import"../chunks/CWj6FrbW.js";import{i as re}from"../chunks/CQPOWANv.js";import{p as G,y as l,z as ie,o,s,k as D,g as t,n as H,B as u,C as p,v as O,f as le}from"../chunks/Cv-zmWGa.js";import{p as ne}from"../chunks/CN7LDHjJ.js";import{d as fe}from"../chunks/BQtkqI2r.js";import{f as d,a as f,t as ce}from"../chunks/BkdBIW1u.js";import{i as M}from"../chunks/CyUgAfMk.js";import{e as me,i as ue}from"../chunks/C3DfYh4M.js";import{b as pe,r as j}from"../chunks/BJbKFSGg.js";import{b as q,c as de}from"../chunks/D0SmWeCk.js";import{b as ve}from"../chunks/LqmtLzKb.js";import{s as be,a as _e}from"../chunks/DDEIsCTc.js";import{u as ge,U as he}from"../chunks/RbvtgwLs.js";import{A as ye}from"../chunks/CPudKDqT.js";import{t as ke}from"../chunks/OnRlDVDx.js";import{M as Se}from"../chunks/aMTpbFIL.js";import{M as xe}from"../chunks/CqV0nrHm.js";import{M as Me}from"../chunks/DAbdFS1J.js";import{u as Ce}from"../chunks/bAzOMXiW.js";import{g as Ue}from"../chunks/vJYzJQhG.js";const Te=()=>{Ue("/clipboard/")};var we=(v,r)=>{t(r)!==void 0&&(t(r).value="")},Ae=(v,r)=>s(r,!t(r)),Be=d('Public <i class="fas fa-lock-open"></i>',1),Fe=d('Private <i class="fas fa-lock"></i>',1),Le=d('<i class="sucess-indicator fas fa-check svelte-118mt4a"></i>'),Pe=d('<button class="form-action"><!></button> <!>',1),Ee=d('<span class="form-action">Login to upload an entry</span>'),Ie=d('<div class="contents svelte-118mt4a"><h4 class="title-bar svelte-118mt4a">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-118mt4a"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-118mt4a" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function ze(v,r){G(r,!0);const[J,K]=be(),Q=()=>_e(ge,"$user",J);let c=l(ie([])),h=l(""),y=l(""),C=l(void 0),b=l(void 0),k=l(!1),S=l(0),_=l(!1),U=l(!1);const R=async()=>{var a,n;if(s(c,[],!0),(a=t(h))!=null&&a.length||t(c).push({level:"error",header:"name must be defined"}),(n=t(y))!=null&&n.length||t(c).push({level:"error",header:"content must be defined"}),t(S)<0&&t(c).push({level:"error",header:"TTL must be positive"}),t(c).length)return;let e;t(b)&&t(b).length&&(e=t(b)[0]||void 0);try{s(_,!0),s(U,!1),await Ce({name:t(h),content:t(y),ttlSeconds:t(S),isPublic:t(k),file:e}),s(_,!1),r.onUpload(),s(U,!0)}catch(m){s(_,!1);let g=m.message;m instanceof ye&&m.code===401?g="Invalid logged in user":m instanceof he&&(g="User is logged out");const E=`<strong>Entry not created</strong><br/> ${g}`;ke.push(E,{theme:{"--toastBarBackground":"#FF0000"}})}};var T=Ie(),w=u(T),V=o(u(w));V.__click=[Te],p(w);var z=o(w,2);me(z,17,()=>t(c),ue,(e,a)=>{xe(e,{get item(){return t(a)}})});var A=o(z,2),B=o(u(A),2);j(B);var F=o(B,4);j(F);var L=o(F,4),P=u(L);ve(P,e=>s(C,e),()=>t(C));var W=o(P,2);W.__click=[we,C],p(L);var N=o(L,4);Me(N,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(S)},set valueInSeconds(e){s(S,e,!0)}});var x=o(N,4);let $;x.__click=[Ae,k];var X=u(x);{var Y=e=>{var a=Be();O(),f(e,a)},Z=e=>{var a=Fe();O(),f(e,a)};M(X,e=>{t(k)?e(Y):e(Z,!1)})}p(x),p(A);var ee=o(A,2);{var te=e=>{var a=Pe(),n=le(a);n.__click=R;var m=u(n);{var g=i=>{Se(i,{size:.5,unit:"em",durationSeconds:.5})},E=i=>{var I=ce("Submit");f(i,I)};M(m,i=>{t(_)?i(g):i(E,!1)})}p(n);var se=o(n,2);{var oe=i=>{var I=Le();f(i,I)};M(se,i=>{t(U)&&i(oe)})}D(()=>n.disabled=t(_)),f(e,a)},ae=e=>{var a=Ee();f(e,a)};M(ee,e=>{Q()?e(te):e(ae,!1)})}p(T),D(e=>$=pe(x,1,"visibility-status svelte-118mt4a",null,$,e),[()=>({"visibility-public":t(k)})]),q(B,()=>t(h),e=>s(h,e)),q(F,()=>t(y),e=>s(y,e)),de(P,()=>t(b),e=>s(b,e)),f(v,T),H(),K()}fe(["click"]);function st(v,r){G(r,!1),ne.set("Clipboard"),re(),ze(v,{onUpload:()=>console.log("new entry created")}),H()}export{st as component};
