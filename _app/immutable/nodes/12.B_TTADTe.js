import{s as T,a as _,e as g,t as P,g as y,c as E,b as x,f as i,d as U,z as j,l as b,F as M,G as k,i as r,h as A,E as S,j as N,y as O,p as V}from"../chunks/scheduler.gZqC1beF.js";import{S as D,i as G,b as H,d as W,m as q,a as z,t as F,e as L}from"../chunks/index.qAIlD2bD.js";import{M as R}from"../chunks/Main.Dy6-HEVR.js";import"../chunks/entry.CSB_QlYM.js";import{p as J}from"../chunks/Main.svelte_svelte_type_style_lang.DyiJIzHr.js";import"../chunks/auth0-spa-js.production.esm.D13UjCU2.js";function K(u){let n,p,e,d,l,c=u[0]?"show src":"hide src",f,o,s,$="Capture",w,m,I,h,v,C,B;return n=new R({props:{title:"Pot",description:"A WIP honey pot",iconPath:"/pot.png"}}),{c(){H(n.$$.fragment),p=_(),e=g("video"),d=_(),l=g("button"),f=P(c),o=_(),s=g("button"),s.textContent=$,w=_(),m=g("canvas"),I=_(),h=g("img"),this.h()},l(t){W(n.$$.fragment,t),p=y(t),e=E(t,"VIDEO",{id:!0,class:!0}),x(e).forEach(i),d=y(t),l=E(t,"BUTTON",{});var a=x(l);f=U(a,c),a.forEach(i),o=y(t),s=E(t,"BUTTON",{id:!0,"data-svelte-h":!0}),j(s)!=="svelte-j87h5p"&&(s.textContent=$),w=y(t),m=E(t,"CANVAS",{id:!0,style:!0}),x(m).forEach(i),I=y(t),h=E(t,"IMG",{alt:!0}),this.h()},h(){b(e,"id","video"),e.autoplay=!0,e.playsInline=!0,b(e,"class","svelte-17nkj1a"),M(e,"hidden",u[0]),b(s,"id","capture"),b(m,"id","canvas"),k(m,"display","none"),b(h,"alt","The captured camera")},m(t,a){q(n,t,a),r(t,p,a),r(t,e,a),r(t,d,a),r(t,l,a),A(l,f),r(t,o,a),r(t,s,a),r(t,w,a),r(t,m,a),r(t,I,a),r(t,h,a),v=!0,C||(B=[S(l,"click",u[2]),S(s,"click",u[1])],C=!0)},p(t,[a]){(!v||a&1)&&M(e,"hidden",t[0]),(!v||a&1)&&c!==(c=t[0]?"show src":"hide src")&&N(f,c)},i(t){v||(z(n.$$.fragment,t),v=!0)},o(t){F(n.$$.fragment,t),v=!1},d(t){t&&(i(p),i(e),i(d),i(l),i(o),i(s),i(w),i(m),i(I),i(h)),L(n,t),C=!1,O(B)}}}function Q(u,n,p){J.set("Test pot");let e,d;const l=()=>{const o=document.getElementById("canvas");if(!o)throw new Error("canvas not available");const s=o.getContext("2d");if(e=document.getElementById("video"),d=document.getElementById("photo"),!s)throw new Error("no context available");if(!d||!e)throw new Error("no photo or video available");s.drawImage(e,0,0,e.videoWidth,e.videoHeight,0,0,o.width,o.height);var $=o.toDataURL("image/png");d.setAttribute("src",$)};let c=!0;const f=()=>p(0,c=!c);return V(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then(function(o){e=document.getElementById("video"),e.srcObject=o}).catch(function(o){console.error("Error accessing media devices.",o)})}),[c,l,f]}class ot extends D{constructor(n){super(),G(this,n,Q,K,T,{})}}export{ot as component};
