import"../chunks/CWj6FrbW.js";import{i as T}from"../chunks/DoJ6nzXR.js";import{p as C,aB as o,w as _,aC as t,k as U,a7 as h,n as B,g as u,v as G}from"../chunks/CLwkvAa9.js";import{t as L,a as N}from"../chunks/DTjFRfZP.js";import{a as D}from"../chunks/D70CLPPX.js";import"../chunks/BDPBxEOZ.js";import"../chunks/BJgVZliD.js";import{A as r,g as K}from"../chunks/DGI-1x0s.js";import{a as M}from"../chunks/Ct5AeG1w.js";import{M as z}from"../chunks/BsEu9Qde.js";import{p as J}from"../chunks/DI-6wRFK.js";import{M as q}from"../chunks/B0n3PbH2.js";import{s as S}from"../chunks/Cc5B25b1.js";import{a as x}from"../chunks/vB8enBEs.js";import{p as H}from"../chunks/qY3aL9mB.js";import{i as Y}from"../chunks/CxmqhxOM.js";import{e as y,i as j}from"../chunks/D8fgoJlV.js";const O=a=>{if(a===r.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(a===r.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(a===r.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(a===r.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(a===r.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(a===r.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(a===r.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(a===r.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},Z=a=>{if(a===r.NEW)return"moon_phase_icons/1_new_moon.png";if(a===r.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(a===r.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(a===r.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(a===r.FULL)return"moon_phase_icons/5_full_moon.png";if(a===r.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(a===r.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(a===r.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},aa=async()=>{const a=await K(),{moonState:v,sunState:e,upcomingLunarStates:i}=a;return{moonState:v,sunState:{goldenHour:M.fromMillis(e.goldenHour),solarNoon:M.fromMillis(e.solarNoon),sunrise:M.fromMillis(e.sunrise),sunset:M.fromMillis(e.sunset)},upcomingLunarStates:i.map(s=>({date:M.fromMillis(s.tsMillis),lunarState:{...s.lunarState,phasePictureUrl:O(s.lunarState.moonPhase)}}))}};var ea=L('<div class="container svelte-aoqlu7"><div class="content svelte-aoqlu7"><div class="data svelte-aoqlu7"><span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span>Sun rise/set</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-aoqlu7"></div></div>');function oa(a,v){C(v,!1);let e=H(v,"moonState",8),i=H(v,"sunState",8);T();var s=ea(),E=o(s),m=o(E),n=_(o(m),2),p=o(n,!0);t(n);var d=_(n,4),g=o(d);t(d);var l=_(d,4),w=o(l);t(l);var c=_(l,4),P=o(c);t(c);var k=_(c,4),f=o(k,!0);t(k);var b=_(k,4),A=o(b,!0);t(b),t(m);var R=_(m,2);t(E),t(s),U((W,F,I,$,Q,X,V)=>{S(p,e().moonPhaseFr),S(g,`${W??""} days (${F??""}%)`),S(w,`${e().moonVisibilityWindow[0]??""} - ${e().moonVisibilityWindow[1]??""}`),S(P,`${I??""} - ${$??""}`),S(f,Q),S(A,X),x(R,"alt",e().moonPhase),x(R,"src",V)},[()=>e().lunarAge.toFixed(1),()=>(e().lunarAgePercent*100).toFixed(0),()=>i().sunrise.toFormat("HH:mm"),()=>i().sunset.toFormat("HH:mm"),()=>i().solarNoon.toFormat("HH:mm"),()=>i().goldenHour.toFormat("HH:mm"),()=>O(e().moonPhase)],h),N(a,s),B()}var ta=L('<div class="day-header svelte-1roweuk"> </div>'),ra=L("<div> </div> <div> </div>",1),na=L('<div class="entry svelte-1roweuk"><div><img class="phase-img svelte-1roweuk"></div> <!></div>'),ia=L('<div class="container svelte-1roweuk"><!> <!></div>');function sa(a,v){C(v,!1);let e=H(v,"upcomingLunarStates",8);T();var i=ia(),s=o(i);y(s,1,()=>e().slice(0,7),j,(m,n)=>{let p=()=>u(n).date;var d=ta(),g=o(d,!0);t(d),U(l=>S(g,l),[()=>p().setLocale("fr").toLocaleString({weekday:"long"})],h),N(m,d)});var E=_(s,2);y(E,1,e,j,(m,n,p)=>{let d=()=>u(n).date,g=()=>u(n).lunarState;var l=na(),w=o(l),c=o(w);t(w);var P=_(w,2);{var k=f=>{var b=ra(),A=G(b),R=o(A,!0);t(A);var W=_(A,2),F=o(W,!0);t(W),U(I=>{S(R,I),S(F,g().moonPhaseFr)},[()=>d().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})],h),N(f,b)};Y(P,f=>{(p===0||p===29||e()[p-1].lunarState.moonPhaseFr!==g().moonPhaseFr)&&f(k)})}t(l),U(f=>{x(c,"alt",g().moonPhase),x(c,"src",f)},[()=>Z(g().moonPhase)],h),N(m,l)}),t(i),N(a,i),B()}var ma=L("<!> <br> <!> <br> <!>",1),pa=L("<p>Loading ephemerides data</p>"),_a=L('<!> <div class="content"><!></div>',1);function Ma(a,v){C(v,!1),J.set("Ephemerides"),T();var e=_a(),i=G(e);z(i,{title:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"});var s=_(i,2),E=o(s);D(E,aa,m=>{var n=pa();N(m,n)},(m,n)=>{var p=h(()=>{var{moonState:f,sunState:b,upcomingLunarStates:A}=u(n);return{moonState:f,sunState:b,upcomingLunarStates:A}}),d=h(()=>u(p).moonState),g=h(()=>u(p).sunState),l=h(()=>u(p).upcomingLunarStates),w=ma(),c=G(w);oa(c,{get moonState(){return u(d)},get sunState(){return u(g)}});var P=_(c,4);sa(P,{get upcomingLunarStates(){return u(l)}});var k=_(P,4);q(k,{item:{level:"info",message:"All data is computed for Paris, France"}}),N(m,w)},(m,n)=>{const p=h(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:u(n)}));q(m,{get item(){return u(p)}})}),t(s),N(a,e),B()}export{Ma as component};
