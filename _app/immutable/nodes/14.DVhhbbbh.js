import{g as Kt,a as Mt,u as Rt,b as Xt,c as Yt}from"../chunks/api.BbUpoDeQ.js";import{s as se,D as jt,e as v,c as C,z as X,m as L,F as Re,i as S,E as te,n as le,f as h,y as Ke,a as A,t as H,b as B,g as N,d as M,a5 as Fe,h as m,k as qt,l as Wt,aa as Ft,A as Y,B as pe,j as je,G as Ve,K as Qt,q as Xe,L as We,O as Qe}from"../chunks/scheduler.B3gxbuV4.js";import{S as Le,i as Se,g as Z,t as $,c as x,a as y,b as fe,d as ge,m as ue,e as he}from"../chunks/index.D4Ghn6ud.js";import{e as z,u as Zt,o as xt}from"../chunks/each.BG3x12hU.js";import{c as el,o as tl}from"../chunks/store.9BnpkKOj.js";/* empty css                          */import{M as ll}from"../chunks/Main.DhctXHZH.js";import{w as zt}from"../chunks/index.CLUFn2xY.js";import{b as nl}from"../chunks/paths.CWnArlYq.js";import{t as sl,U as rl}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.MU1LmPUq.js";import{A as ol}from"../chunks/index.KLo_gDv9.js";import{h as il,u as al}from"../chunks/await_block.hv1NBf3l.js";import{g as cl}from"../chunks/entry.Syk3EfVI.js";const fl=!1,ul=async()=>({chords:await Kt()}),nn=Object.freeze(Object.defineProperty({__proto__:null,load:ul,ssr:fl},Symbol.toStringTag,{value:"Module"})),{clearTimeout:Ze,setTimeout:xe,window:ze}=Mt;function hl(i){let t=!1,s=()=>{t=!1},l,e,r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" class="svelte-1kbb9q3"><path d="M12 6H0l6-6z"></path></svg> <span class="screen-reader-text svelte-1kbb9q3">Back to top</span>',n,a;return jt(i[3]),{c(){e=v("button"),e.innerHTML=r,this.h()},l(o){e=C(o,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-ed45ug"&&(e.innerHTML=r),this.h()},h(){L(e,"class","top-link svelte-1kbb9q3"),Re(e,"hide",i[1])},m(o,u){S(o,e,u),n||(a=[te(ze,"scroll",()=>{t=!0,Ze(l),l=xe(s,100),i[3]()}),te(e,"click",i[2])],n=!0)},p(o,[u]){u&1&&!t&&(t=!0,Ze(l),scrollTo(ze.pageXOffset,o[0]),l=xe(s,100)),u&2&&Re(e,"hide",o[1])},i:le,o:le,d(o){o&&h(e),n=!1,Ke(a)}}}function _l(i,t,s){let l,e=!0,r;const n=u=>{u>0?s(1,e=!1):s(1,e=!0),r&&clearTimeout(r),r=setTimeout(()=>{s(1,e=!0)},3e3)},a=()=>{const u=document.documentElement.scrollTop||document.body.scrollTop;u>0&&(window.requestAnimationFrame(a),window.scrollTo(0,u-u/2))};function o(){s(0,l=ze.pageYOffset)}return i.$$.update=()=>{i.$$.dirty&1&&n(l)},[l,e,a,o]}class dl extends Le{constructor(t){super(),Se(this,t,_l,hl,se,{})}}const Oe=zt();let Jt=[];const et=localStorage.getItem("failedVisitCounts");if(et!==null)try{Jt=JSON.parse(et)}catch{console.error("Couldnt parse failedVisitCounts from local storage")}const He=zt(Jt);He.subscribe(i=>{localStorage.setItem("failedVisitCounts",JSON.stringify(i))});const Je=i=>i==="doc"?"fas fa-file-word":i==="pdf"?"fas fa-file-pdf":i==="youtube"?"fa fa-youtube":"fas fa-link";function ml(i){let t,s,l,e,r,n,a,o,u;return{c(){t=v("span"),l=A(),e=v("span"),r=v("a"),n=H(i[2]),this.h()},l(c){t=C(c,"SPAN",{class:!0}),B(t).forEach(h),l=N(c),e=C(c,"SPAN",{});var _=B(e);r=C(_,"A",{href:!0,target:!0,rel:!0,title:!0});var f=B(r);n=M(f,i[2]),f.forEach(h),_.forEach(h),this.h()},h(){L(t,"class",s=Fe(Je(i[0].type))+" svelte-1gxig14"),L(r,"href",a=i[3](i[0])),L(r,"target","_blank"),L(r,"rel","noopener noreferrer"),L(r,"title",i[1])},m(c,_){S(c,t,_),S(c,l,_),S(c,e,_),m(e,r),m(r,n),o||(u=te(r,"click",i[4]),o=!0)},p(c,[_]){_&1&&s!==(s=Fe(Je(c[0].type))+" svelte-1gxig14")&&L(t,"class",s),_&1&&a!==(a=c[3](c[0]))&&L(r,"href",a),_&2&&L(r,"title",c[1])},i:le,o:le,d(c){c&&(h(t),h(l),h(e)),o=!1,u()}}}function gl(i,t,s){let l;qt(i,He,c=>s(6,l=c));let{chord:e}=t,{showArtist:r=!1}=t,n;Oe.subscribe(c=>{if(c&&c.has(e.url)){const _=c.get(e.url),f=new Date(_.lastAccessDateUnix*1e3);s(1,n=`visits: ${_.count} - last: ${f.toLocaleDateString()}`)}});const a=(r?e.artist+" - ":"")+e.title,o=c=>c.type==="doc"?`${nl}/docviewer/${c.url}`:c.url,u=async()=>{try{await Rt(e.url);const c=Wt(Oe),_=c.get(e.url)||{count:0,lastAccessDateUnix:0};_.count++,_.lastAccessDateUnix=Date.now()/1e3,c.set(e.url,_),Oe.set(c)}catch(c){let _=c.message;c instanceof ol&&c.code===401?_="Invalid logged in user":c instanceof rl&&(_="User is logged out"),Ft(He,l=[...l,e.url],l);const f=`<strong>Visit not counted</strong><br/> ${_}`;sl.push(f,{initial:0,theme:{"--toastBarBackground":"#FF0000"}})}};return i.$$set=c=>{"chord"in c&&s(0,e=c.chord),"showArtist"in c&&s(5,r=c.showArtist)},[e,n,a,o,u,r]}class Pe extends Le{constructor(t){super(),Se(this,t,gl,ml,se,{chord:0,showArtist:5})}}function tt(i,t,s){const l=i.slice();l[5]=t[s];const e=l[3].get(l[5].url);return l[6]=e,l}function lt(i){let t,s,l,e,r,n=i[6]&&nt(i);return l=new Pe({props:{chord:i[5],showArtist:!0}}),{c(){t=v("li"),n&&n.c(),s=A(),fe(l.$$.fragment),e=A(),this.h()},l(a){t=C(a,"LI",{class:!0});var o=B(t);n&&n.l(o),s=N(o),ge(l.$$.fragment,o),e=N(o),o.forEach(h),this.h()},h(){L(t,"class","ul2col-item")},m(a,o){S(a,t,o),n&&n.m(t,null),m(t,s),ue(l,t,null),m(t,e),r=!0},p(a,o){a[6]?n?n.p(a,o):(n=nt(a),n.c(),n.m(t,s)):n&&(n.d(1),n=null);const u={};o&1&&(u.chord=a[5]),l.$set(u)},i(a){r||(y(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&h(t),n&&n.d(),he(l)}}}function nt(i){let t,s=i[6].count+"",l,e;return{c(){t=H("("),l=H(s),e=H(")")},l(r){t=M(r,"("),l=M(r,s),e=M(r,")")},m(r,n){S(r,t,n),S(r,l,n),S(r,e,n)},p(r,n){n&9&&s!==(s=r[6].count+"")&&je(l,s)},d(r){r&&(h(t),h(l),h(e))}}}function st(i){let t=i[4](i[5],i[1],i[2]),s,l,e=t&&lt(i);return{c(){e&&e.c(),s=Y()},l(r){e&&e.l(r),s=Y()},m(r,n){e&&e.m(r,n),S(r,s,n),l=!0},p(r,n){n&7&&(t=r[4](r[5],r[1],r[2])),t?e?(e.p(r,n),n&7&&y(e,1)):(e=lt(r),e.c(),y(e,1),e.m(s.parentNode,s)):e&&(Z(),$(e,1,1,()=>{e=null}),x())},i(r){l||(y(e),l=!0)},o(r){$(e),l=!1},d(r){r&&h(s),e&&e.d(r)}}}function rt(i){let t,s,l=z(i[0]),e=[];for(let n=0;n<l.length;n+=1)e[n]=st(tt(i,l,n));const r=n=>$(e[n],1,1,()=>{e[n]=null});return{c(){t=v("ul");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=C(n,"UL",{class:!0});var a=B(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(h),this.h()},h(){L(t,"class","ul2col-container")},m(n,a){S(n,t,a);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);s=!0},p(n,a){if(a&31){l=z(n[0]);let o;for(o=0;o<l.length;o+=1){const u=tt(n,l,o);e[o]?(e[o].p(u,a),y(e[o],1)):(e[o]=st(u),e[o].c(),y(e[o],1),e[o].m(t,null))}for(Z(),o=l.length;o<e.length;o+=1)r(o);x()}},i(n){if(!s){for(let a=0;a<l.length;a+=1)y(e[a]);s=!0}},o(n){e=e.filter(Boolean);for(let a=0;a<e.length;a+=1)$(e[a]);s=!1},d(n){n&&h(t),pe(e,n)}}}function pl(i){let t=i[0],s,l,e=rt(i);return{c(){e.c(),s=Y()},l(r){e.l(r),s=Y()},m(r,n){e.m(r,n),S(r,s,n),l=!0},p(r,[n]){n&1&&se(t,t=r[0])?(Z(),$(e,1,1,le),x(),e=rt(r),e.c(),y(e,1),e.m(s.parentNode,s)):e.p(r,n)},i(r){l||(y(e),l=!0)},o(r){$(e),l=!1},d(r){r&&h(s),e.d(r)}}}function kl(i,t,s){let{searchString:l}=t,{chords:e}=t,{filters:r}=t,n;Oe.subscribe(o=>{o&&(s(3,n=o),s(0,e=e.sort((u,c)=>{const _=o.get(u.url),f=o.get(c.url);return _&&f?f.lastAccessDateUnix-_.lastAccessDateUnix:_?-1:f?1:u.artist!=c.artist?u.artist.toLowerCase()<c.artist.toLowerCase()?-1:1:u.title.toLowerCase()<c.title.toLowerCase()?-1:1})))});const a=(o,u,c)=>c[o.type]===!1?!1:u.length===0||o.artist.toLowerCase().match(u.toLowerCase())?!0:o.title.toLowerCase().match(u.toLowerCase());return i.$$set=o=>{"searchString"in o&&s(1,l=o.searchString),"chords"in o&&s(0,e=o.chords),"filters"in o&&s(2,r=o.filters)},[e,l,r,n,a]}class bl extends Le{constructor(t){super(),Se(this,t,kl,pl,se,{searchString:1,chords:0,filters:2})}}const vl=(i,t)=>i<t?-1:i>t?1:0,Ge=(i,t)=>{const s=i.toLowerCase(),l=t.toLowerCase();return vl(s,l)},{Boolean:Gt}=Mt;function ot(i,t,s){const l=i.slice();l[14]=t[s];const e=l[8](l[14].name,l[0],l[1]);l[15]=e;const r=l[9](l[14].name,l[0]);return l[16]=r,l}function it(i,t,s){const l=i.slice();return l[20]=t[s],l}function qe(i){const t=i.slice(),s=t[16]?t[5][t[14].name]:t[15];return t[19]=s,t}function at(i,t,s){const l=i.slice();return l[23]=t[s],l}function ct(i){let t,s,l=i[23].letter.toUpperCase()+"",e,r;return{c(){t=v("li"),s=v("a"),e=H(l),r=A(),this.h()},l(n){t=C(n,"LI",{class:!0});var a=B(t);s=C(a,"A",{href:!0,class:!0});var o=B(s);e=M(o,l),o.forEach(h),r=N(a),a.forEach(h),this.h()},h(){L(s,"href","#"+i[23].tag),L(s,"class","navigationLink svelte-1deg5s8"),L(t,"class","navigationBtn svelte-1deg5s8")},m(n,a){S(n,t,a),m(t,s),m(s,e),m(t,r)},p:le,d(n){n&&h(t)}}}function ft(i){let t,s,l=i[14].name+"",e,r,n=i[0],a,o,u=ht(i);return{c(){t=v("tr"),s=v("td"),e=H(l),r=A(),u.c(),a=A(),this.h()},l(c){t=C(c,"TR",{class:!0});var _=B(t);s=C(_,"TD",{id:!0,class:!0});var f=B(s);e=M(f,l),r=N(f),u.l(f),f.forEach(h),a=N(_),_.forEach(h),this.h()},h(){L(s,"id",i[14].tag),L(s,"class","svelte-1deg5s8"),L(t,"class","svelte-1deg5s8")},m(c,_){S(c,t,_),m(t,s),m(s,e),m(s,r),u.m(s,null),m(t,a),o=!0},p(c,_){_&1&&se(n,n=c[0])?(Z(),$(u,1,1,le),x(),u=ht(c),u.c(),y(u,1),u.m(s,null)):u.p(c,_)},i(c){o||(y(u),o=!0)},o(c){$(u),o=!1},d(c){c&&h(t),u.d(c)}}}function ut(i){let t,s,l,e;return s=new Pe({props:{chord:i[20]}}),{c(){t=v("li"),fe(s.$$.fragment),l=A(),this.h()},l(r){t=C(r,"LI",{class:!0});var n=B(t);ge(s.$$.fragment,n),l=N(n),n.forEach(h),this.h()},h(){L(t,"class","ul2col-item")},m(r,n){S(r,t,n),ue(s,t,null),m(t,l),e=!0},p(r,n){const a={};n&3&&(a.chord=r[20]),s.$set(a)},i(r){e||(y(s.$$.fragment,r),e=!0)},o(r){$(s.$$.fragment,r),e=!1},d(r){r&&h(t),he(s)}}}function ht(i){let t,s,l=z(i[19]),e=[];for(let n=0;n<l.length;n+=1)e[n]=ut(it(i,l,n));const r=n=>$(e[n],1,1,()=>{e[n]=null});return{c(){t=v("ul");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=C(n,"UL",{class:!0});var a=B(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(h),this.h()},h(){L(t,"class","ul2col-container")},m(n,a){S(n,t,a);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);s=!0},p(n,a){if(a&931){l=z(n[19]);let o;for(o=0;o<l.length;o+=1){const u=it(n,l,o);e[o]?(e[o].p(u,a),y(e[o],1)):(e[o]=ut(u),e[o].c(),y(e[o],1),e[o].m(t,null))}for(Z(),o=l.length;o<e.length;o+=1)r(o);x()}},i(n){if(!s){for(let a=0;a<l.length;a+=1)y(e[a]);s=!0}},o(n){e=e.filter(Gt);for(let a=0;a<e.length;a+=1)$(e[a]);s=!1},d(n){n&&h(t),pe(e,n)}}}function _t(i){let t,s,l=(i[16]||i[15].length>0)&&ft(qe(i));return{c(){l&&l.c(),t=Y()},l(e){l&&l.l(e),t=Y()},m(e,r){l&&l.m(e,r),S(e,t,r),s=!0},p(e,r){e[16]||e[15].length>0?l?(l.p(qe(e),r),r&3&&y(l,1)):(l=ft(qe(e)),l.c(),y(l,1),l.m(t.parentNode,t)):l&&(Z(),$(l,1,1,()=>{l=null}),x())},i(e){s||(y(l),s=!0)},o(e){$(l),s=!1},d(e){e&&h(t),l&&l.d(e)}}}function Cl(i){let t=!1,s=()=>{t=!1},l,e,r=`${i[3]}px`,n,a,o,u,c;jt(i[11]);let _=z(i[6]),f=[];for(let p=0;p<_.length;p+=1)f[p]=ct(at(i,_,p));let w=z(i[7]),d=[];for(let p=0;p<w.length;p+=1)d[p]=_t(ot(i,w,p));const U=p=>$(d[p],1,1,()=>{d[p]=null});return{c(){e=v("ol");for(let p=0;p<f.length;p+=1)f[p].c();n=A(),a=v("table");for(let p=0;p<d.length;p+=1)d[p].c();this.h()},l(p){e=C(p,"OL",{id:!0,class:!0});var k=B(e);for(let I=0;I<f.length;I+=1)f[I].l(k);k.forEach(h),n=N(p),a=C(p,"TABLE",{id:!0});var g=B(a);for(let I=0;I<d.length;I+=1)d[I].l(g);g.forEach(h),this.h()},h(){L(e,"id","indexList"),L(e,"class","navigationBar disable-scrollbars svelte-1deg5s8"),Ve(e,"--barTop",r),L(a,"id","artistTable")},m(p,k){S(p,e,k);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(e,null);S(p,n,k),S(p,a,k);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(a,null);i[12](a),o=!0,u||(c=te(window,"scroll",()=>{t=!0,clearTimeout(l),l=setTimeout(s,100),i[11]()}),u=!0)},p(p,[k]){if(k&4&&!t&&(t=!0,clearTimeout(l),scrollTo(window.pageXOffset,p[2]),l=setTimeout(s,100)),k&64){_=z(p[6]);let g;for(g=0;g<_.length;g+=1){const I=at(p,_,g);f[g]?f[g].p(I,k):(f[g]=ct(I),f[g].c(),f[g].m(e,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=_.length}if(k&8&&r!==(r=`${p[3]}px`)&&Ve(e,"--barTop",r),k&931){w=z(p[7]);let g;for(g=0;g<w.length;g+=1){const I=ot(p,w,g);d[g]?(d[g].p(I,k),y(d[g],1)):(d[g]=_t(I),d[g].c(),y(d[g],1),d[g].m(a,null))}for(Z(),g=w.length;g<d.length;g+=1)U(g);x()}},i(p){if(!o){for(let k=0;k<w.length;k+=1)y(d[k]);o=!0}},o(p){d=d.filter(Gt);for(let k=0;k<d.length;k+=1)$(d[k]);o=!1},d(p){p&&(h(e),h(n),h(a)),pe(f,p),pe(d,p),i[12](null),u=!1,c()}}}function wl(i,t,s){let{searchString:l=""}=t,{chords:e}=t,{filters:r}=t;const n=e.reduce((k,g)=>{const I=g.artist;return k[I]||(k[I]=[]),k[I].push(g),k},{}),a=[],o=Object.keys(n).sort(Ge).map((k,g,I)=>{if(g===0||k[0].toLowerCase()!=I[g-1][0].toLowerCase()){const T="anchor_letter_"+k[0];return a.push({letter:k[0],tag:T}),{name:k,tag:T}}return{name:k}});let u,c=0,_;const f=k=>{if(_){var g=_.getBoundingClientRect();if(g.top<20){s(3,c=20);return}s(3,c=g.top)}},w=(k,g,I)=>n[k].sort((E,P)=>E.title<P.title?-1:1).filter(E=>{const P=E.type;return I[P]===!1?!1:g.length===0?!0:!!E.title.toLowerCase().match(g.toLowerCase())}),d=(k,g)=>!!k.toLowerCase().match(g.toLowerCase());function U(){s(2,u=window.pageYOffset)}function p(k){Qt[k?"unshift":"push"](()=>{_=k,s(4,_)})}return i.$$set=k=>{"searchString"in k&&s(0,l=k.searchString),"chords"in k&&s(10,e=k.chords),"filters"in k&&s(1,r=k.filters)},i.$$.update=()=>{i.$$.dirty&4&&f()},[l,r,u,c,_,n,a,o,w,d,e,U,p]}class Ll extends Le{constructor(t){super(),Se(this,t,wl,Cl,se,{searchString:0,chords:10,filters:1})}}function dt(i,t,s){const l=i.slice();return l[5]=t[s],l}function mt(i,t,s){const l=i.slice();return l[8]=t[s],l}function gt(i){let t,s,l=i[3](i[5])+"",e,r,n,a,o,u=z(i[2][i[5]]),c=[];for(let f=0;f<u.length;f+=1)c[f]=kt(mt(i,u,f));const _=f=>$(c[f],1,1,()=>{c[f]=null});return{c(){t=v("div"),s=v("span"),e=H(l),r=A(),n=v("ul");for(let f=0;f<c.length;f+=1)c[f].c();a=A(),this.h()},l(f){t=C(f,"DIV",{});var w=B(t);s=C(w,"SPAN",{});var d=B(s);e=M(d,l),d.forEach(h),r=N(w),n=C(w,"UL",{class:!0});var U=B(n);for(let p=0;p<c.length;p+=1)c[p].l(U);U.forEach(h),a=N(w),w.forEach(h),this.h()},h(){L(n,"class","ul2col-container")},m(f,w){S(f,t,w),m(t,s),m(s,e),m(t,r),m(t,n);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(n,null);m(t,a),o=!0},p(f,w){if((!o||w&4)&&l!==(l=f[3](f[5])+"")&&je(e,l),w&6){u=z(f[2][f[5]]);let d;for(d=0;d<u.length;d+=1){const U=mt(f,u,d);c[d]?(c[d].p(U,w),y(c[d],1)):(c[d]=kt(U),c[d].c(),y(c[d],1),c[d].m(n,null))}for(Z(),d=u.length;d<c.length;d+=1)_(d);x()}},i(f){if(!o){for(let w=0;w<u.length;w+=1)y(c[w]);o=!0}},o(f){c=c.filter(Boolean);for(let w=0;w<c.length;w+=1)$(c[w]);o=!1},d(f){f&&h(t),pe(c,f)}}}function pt(i){let t,s,l,e;return s=new Pe({props:{chord:i[8],showArtist:!0}}),{c(){t=v("li"),fe(s.$$.fragment),l=A(),this.h()},l(r){t=C(r,"LI",{class:!0});var n=B(t);ge(s.$$.fragment,n),l=N(n),n.forEach(h),this.h()},h(){L(t,"class","ul2col-item")},m(r,n){S(r,t,n),ue(s,t,null),m(t,l),e=!0},p(r,n){const a={};n&4&&(a.chord=r[8]),s.$set(a)},i(r){e||(y(s.$$.fragment,r),e=!0)},o(r){$(s.$$.fragment,r),e=!1},d(r){r&&h(t),he(s)}}}function kt(i){let t,s,l=i[1][i[8].type]&&pt(i);return{c(){l&&l.c(),t=Y()},l(e){l&&l.l(e),t=Y()},m(e,r){l&&l.m(e,r),S(e,t,r),s=!0},p(e,r){e[1][e[8].type]?l?(l.p(e,r),r&6&&y(l,1)):(l=pt(e),l.c(),y(l,1),l.m(t.parentNode,t)):l&&(Z(),$(l,1,1,()=>{l=null}),x())},i(e){s||(y(l),s=!0)},o(e){$(l),s=!1},d(e){e&&h(t),l&&l.d(e)}}}function bt(i){let t=i[0].length===0||i[5].toLowerCase().match(i[0].toLowerCase()),s,l,e=t&&gt(i);return{c(){e&&e.c(),s=Y()},l(r){e&&e.l(r),s=Y()},m(r,n){e&&e.m(r,n),S(r,s,n),l=!0},p(r,n){n&5&&(t=r[0].length===0||r[5].toLowerCase().match(r[0].toLowerCase())),t?e?(e.p(r,n),n&5&&y(e,1)):(e=gt(r),e.c(),y(e,1),e.m(s.parentNode,s)):e&&(Z(),$(e,1,1,()=>{e=null}),x())},i(r){l||(y(e),l=!0)},o(r){$(e),l=!1},d(r){r&&h(s),e&&e.d(r)}}}function Sl(i){let t,s,l=z(Object.keys(i[2]).sort(Ge)),e=[];for(let n=0;n<l.length;n+=1)e[n]=bt(dt(i,l,n));const r=n=>$(e[n],1,1,()=>{e[n]=null});return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=Y()},l(n){for(let a=0;a<e.length;a+=1)e[a].l(n);t=Y()},m(n,a){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(n,a);S(n,t,a),s=!0},p(n,[a]){if(a&15){l=z(Object.keys(n[2]).sort(Ge));let o;for(o=0;o<l.length;o+=1){const u=dt(n,l,o);e[o]?(e[o].p(u,a),y(e[o],1)):(e[o]=bt(u),e[o].c(),y(e[o],1),e[o].m(t.parentNode,t))}for(Z(),o=l.length;o<e.length;o+=1)r(o);x()}},i(n){if(!s){for(let a=0;a<l.length;a+=1)y(e[a]);s=!0}},o(n){e=e.filter(Boolean);for(let a=0;a<e.length;a+=1)$(e[a]);s=!1},d(n){n&&h(t),pe(e,n)}}}function Tl(i,t,s){let{searchString:l}=t,{chords:e}=t,{filters:r}=t;const n=o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase(),a={};for(const o of e)o.tags.forEach(c=>{a[c]||s(2,a[c]=[],a),a[c].push(o)});return Object.keys(a).forEach(o=>{a[o].sort((u,c)=>{const _=u.artist.toLowerCase(),f=c.artist.toLowerCase(),w=u.title.toLowerCase(),d=c.title.toLowerCase();return _<f?-1:_>f?1:w<d?-1:1})}),i.$$set=o=>{"searchString"in o&&s(0,l=o.searchString),"chords"in o&&s(4,e=o.chords),"filters"in o&&s(1,r=o.filters)},[l,r,a,n,e]}class El extends Le{constructor(t){super(),Se(this,t,Tl,Sl,se,{searchString:0,chords:4,filters:1})}}function vt(i,t,s){const l=i.slice();l[5]=t[s];const e=l[3].get(l[5].url);return l[6]=e,l}function Ct(i){let t,s,l,e,r,n=i[6]&&wt(i);return l=new Pe({props:{chord:i[5],showArtist:!0}}),{c(){t=v("li"),n&&n.c(),s=A(),fe(l.$$.fragment),e=A(),this.h()},l(a){t=C(a,"LI",{class:!0});var o=B(t);n&&n.l(o),s=N(o),ge(l.$$.fragment,o),e=N(o),o.forEach(h),this.h()},h(){L(t,"class","ul2col-item")},m(a,o){S(a,t,o),n&&n.m(t,null),m(t,s),ue(l,t,null),m(t,e),r=!0},p(a,o){a[6]?n?n.p(a,o):(n=wt(a),n.c(),n.m(t,s)):n&&(n.d(1),n=null);const u={};o&1&&(u.chord=a[5]),l.$set(u)},i(a){r||(y(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&h(t),n&&n.d(),he(l)}}}function wt(i){let t,s=i[6].count+"",l,e;return{c(){t=H("("),l=H(s),e=H(")")},l(r){t=M(r,"("),l=M(r,s),e=M(r,")")},m(r,n){S(r,t,n),S(r,l,n),S(r,e,n)},p(r,n){n&9&&s!==(s=r[6].count+"")&&je(l,s)},d(r){r&&(h(t),h(l),h(e))}}}function Lt(i){let t=i[4](i[5],i[1],i[2]),s,l,e=t&&Ct(i);return{c(){e&&e.c(),s=Y()},l(r){e&&e.l(r),s=Y()},m(r,n){e&&e.m(r,n),S(r,s,n),l=!0},p(r,n){n&7&&(t=r[4](r[5],r[1],r[2])),t?e?(e.p(r,n),n&7&&y(e,1)):(e=Ct(r),e.c(),y(e,1),e.m(s.parentNode,s)):e&&(Z(),$(e,1,1,()=>{e=null}),x())},i(r){l||(y(e),l=!0)},o(r){$(e),l=!1},d(r){r&&h(s),e&&e.d(r)}}}function St(i){let t,s,l=z(i[0]),e=[];for(let n=0;n<l.length;n+=1)e[n]=Lt(vt(i,l,n));const r=n=>$(e[n],1,1,()=>{e[n]=null});return{c(){t=v("ul");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=C(n,"UL",{class:!0});var a=B(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(h),this.h()},h(){L(t,"class","ul2col-container")},m(n,a){S(n,t,a);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);s=!0},p(n,a){if(a&31){l=z(n[0]);let o;for(o=0;o<l.length;o+=1){const u=vt(n,l,o);e[o]?(e[o].p(u,a),y(e[o],1)):(e[o]=Lt(u),e[o].c(),y(e[o],1),e[o].m(t,null))}for(Z(),o=l.length;o<e.length;o+=1)r(o);x()}},i(n){if(!s){for(let a=0;a<l.length;a+=1)y(e[a]);s=!0}},o(n){e=e.filter(Boolean);for(let a=0;a<e.length;a+=1)$(e[a]);s=!1},d(n){n&&h(t),pe(e,n)}}}function yl(i){let t=i[0],s,l,e=St(i);return{c(){e.c(),s=Y()},l(r){e.l(r),s=Y()},m(r,n){e.m(r,n),S(r,s,n),l=!0},p(r,[n]){n&1&&se(t,t=r[0])?(Z(),$(e,1,1,le),x(),e=St(r),e.c(),y(e,1),e.m(s.parentNode,s)):e.p(r,n)},i(r){l||(y(e),l=!0)},o(r){$(e),l=!1},d(r){r&&h(s),e.d(r)}}}function Al(i,t,s){let{searchString:l}=t,{chords:e}=t,{filters:r}=t,n;Oe.subscribe(o=>{o&&(s(3,n=o),s(0,e=e.sort((u,c)=>{const _=o.get(u.url),f=o.get(c.url);return _&&f?_.count!==f.count?f.count-_.count:f.lastAccessDateUnix-_.lastAccessDateUnix:_?-1:f?1:u.artist!=c.artist?u.artist.toLowerCase()<c.artist.toLowerCase()?-1:1:u.title.toLowerCase()<c.title.toLowerCase()?-1:1})))});const a=(o,u,c)=>c[o.type]===!1?!1:u.length===0||o.artist.toLowerCase().match(u.toLowerCase())?!0:o.title.toLowerCase().match(u.toLowerCase());return i.$$set=o=>{"searchString"in o&&s(1,l=o.searchString),"chords"in o&&s(0,e=o.chords),"filters"in o&&s(2,r=o.filters)},[e,l,r,n,a]}class Nl extends Le{constructor(t){super(),Se(this,t,Al,yl,se,{searchString:1,chords:0,filters:2})}}function Tt(i){const t=i[1](i[3]);i[4]=t;const s=i[2](i[3]);i[5]=s}function Et(i,t,s){const l=i.slice();return l[6]=t[s],l}function yt(i){let t,s,l,e,r,n="Close",a,o,u,c={ctx:i,current:null,token:null,hasCatch:!0,pending:Ul,then:Dl,catch:Bl,value:3,error:9};return il(Xt(),c),{c(){t=v("div"),s=v("div"),l=v("h3"),e=H(`Urls checks
                `),r=v("button"),r.textContent=n,a=A(),c.block.c(),this.h()},l(_){t=C(_,"DIV",{role:!0,class:!0});var f=B(t);s=C(f,"DIV",{class:!0});var w=B(s);l=C(w,"H3",{class:!0});var d=B(l);e=M(d,`Urls checks
                `),r=C(d,"BUTTON",{"data-svelte-h":!0}),X(r)!=="svelte-2m9p61"&&(r.textContent=n),d.forEach(h),a=N(w),c.block.l(w),w.forEach(h),f.forEach(h),this.h()},h(){L(l,"class","title-bar svelte-1b7k28l"),L(s,"class","contents svelte-1b7k28l"),L(t,"role","dialog"),L(t,"class","modal svelte-1b7k28l")},m(_,f){S(_,t,f),m(t,s),m(s,l),m(l,e),m(l,r),m(s,a),c.block.m(s,c.anchor=null),c.mount=()=>s,c.anchor=null,o||(u=te(r,"click",el),o=!0)},p(_,f){i=_,al(c,i,f)},d(_){_&&h(t),c.block.d(),c.token=null,c=null,o=!1,u()}}}function Bl(i){let t,s,l=i[9].message+"",e;return{c(){t=v("p"),s=H("Could not retrieve checks: "),e=H(l),this.h()},l(r){t=C(r,"P",{style:!0});var n=B(t);s=M(n,"Could not retrieve checks: "),e=M(n,l),n.forEach(h),this.h()},h(){Ve(t,"color","red")},m(r,n){S(r,t,n),m(t,s),m(t,e)},p:le,d(r){r&&h(t)}}}function Dl(i){Tt(i);let t,s,l="Last Check",e,r,n="Checks",a,o,u="Skipped",c,_,f="Errors",w,d,U=i[4]+"",p,k,g,I=i[3].nbChecks+"",T,E,P,ee=i[3].nbSkipped+"",q,W,Te,De=i[3].nbFails+"",re,ye,oe,Ne,G,Q,Ee="Status",Ue,_e,$e="Ref",ke,be,Ie="Host",de,ie,F="Data",ve,me=z(i[5]),J=[];for(let R=0;R<me.length;R+=1)J[R]=At(Et(i,me,R));return{c(){t=v("div"),s=v("span"),s.textContent=l,e=A(),r=v("span"),r.textContent=n,a=A(),o=v("span"),o.textContent=u,c=A(),_=v("span"),_.textContent=f,w=A(),d=v("span"),p=H(U),k=A(),g=v("span"),T=H(I),E=A(),P=v("span"),q=H(ee),W=A(),Te=v("span"),re=H(De),ye=A(),oe=v("br"),Ne=A(),G=v("div"),Q=v("span"),Q.textContent=Ee,Ue=A(),_e=v("span"),_e.textContent=$e,ke=A(),be=v("span"),be.textContent=Ie,de=A(),ie=v("span"),ie.textContent=F,ve=A();for(let R=0;R<J.length;R+=1)J[R].c();this.h()},l(R){t=C(R,"DIV",{class:!0});var V=B(t);s=C(V,"SPAN",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-1lbvzb0"&&(s.textContent=l),e=N(V),r=C(V,"SPAN",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-1wmxeaf"&&(r.textContent=n),a=N(V),o=C(V,"SPAN",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-txun94"&&(o.textContent=u),c=N(V),_=C(V,"SPAN",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-5mrj6x"&&(_.textContent=f),w=N(V),d=C(V,"SPAN",{class:!0});var O=B(d);p=M(O,U),O.forEach(h),k=N(V),g=C(V,"SPAN",{class:!0});var ae=B(g);T=M(ae,I),ae.forEach(h),E=N(V),P=C(V,"SPAN",{class:!0});var K=B(P);q=M(K,ee),K.forEach(h),W=N(V),Te=C(V,"SPAN",{class:!0});var Ce=B(Te);re=M(Ce,De),Ce.forEach(h),V.forEach(h),ye=N(R),oe=C(R,"BR",{}),Ne=N(R),G=C(R,"DIV",{class:!0});var ne=B(G);Q=C(ne,"SPAN",{class:!0,"data-svelte-h":!0}),X(Q)!=="svelte-1s7ffxq"&&(Q.textContent=Ee),Ue=N(ne),_e=C(ne,"SPAN",{class:!0,"data-svelte-h":!0}),X(_e)!=="svelte-1wa8gqx"&&(_e.textContent=$e),ke=N(ne),be=C(ne,"SPAN",{class:!0,"data-svelte-h":!0}),X(be)!=="svelte-33rgke"&&(be.textContent=Ie),de=N(ne),ie=C(ne,"SPAN",{class:!0,"data-svelte-h":!0}),X(ie)!=="svelte-1yzk30k"&&(ie.textContent=F),ve=N(ne);for(let b=0;b<J.length;b+=1)J[b].l(ne);ne.forEach(h),this.h()},h(){L(s,"class","col table-head svelte-1b7k28l"),L(r,"class","col table-head svelte-1b7k28l"),L(o,"class","col table-head svelte-1b7k28l"),L(_,"class","col table-head svelte-1b7k28l"),L(d,"class","col svelte-1b7k28l"),L(g,"class","col svelte-1b7k28l"),L(P,"class","col svelte-1b7k28l"),L(Te,"class","col svelte-1b7k28l"),L(t,"class","rows svelte-1b7k28l"),L(Q,"class","col table-head svelte-1b7k28l"),L(_e,"class","col table-head svelte-1b7k28l"),L(be,"class","col table-head svelte-1b7k28l"),L(ie,"class","col table-head svelte-1b7k28l"),L(G,"class","rows svelte-1b7k28l")},m(R,V){S(R,t,V),m(t,s),m(t,e),m(t,r),m(t,a),m(t,o),m(t,c),m(t,_),m(t,w),m(t,d),m(d,p),m(t,k),m(t,g),m(g,T),m(t,E),m(t,P),m(P,q),m(t,W),m(t,Te),m(Te,re),S(R,ye,V),S(R,oe,V),S(R,Ne,V),S(R,G,V),m(G,Q),m(G,Ue),m(G,_e),m(G,ke),m(G,be),m(G,de),m(G,ie),m(G,ve);for(let O=0;O<J.length;O+=1)J[O]&&J[O].m(G,null)},p(R,V){if(Tt(R),V&4){me=z(R[5]);let O;for(O=0;O<me.length;O+=1){const ae=Et(R,me,O);J[O]?J[O].p(ae,V):(J[O]=At(ae),J[O].c(),J[O].m(G,null))}for(;O<J.length;O+=1)J[O].d(1);J.length=me.length}},d(R){R&&(h(t),h(ye),h(oe),h(Ne),h(G)),pe(J,R)}}}function At(i){let t,s=i[6].status+"",l,e,r,n=i[6].chord.artist+"",a,o,u=i[6].chord.title+"",c,_,f,w,d=new URL(i[6].chord.url).hostname+"",U,p,k,g=(i[6].error?JSON.stringify(i[6].error):"")+"",I;return{c(){t=v("span"),l=H(s),e=A(),r=v("span"),a=H(n),o=H(" - "),c=H(u),_=A(),f=v("span"),w=v("a"),U=H(d),p=A(),k=v("span"),I=H(g),this.h()},l(T){t=C(T,"SPAN",{class:!0});var E=B(t);l=M(E,s),E.forEach(h),e=N(T),r=C(T,"SPAN",{class:!0});var P=B(r);a=M(P,n),o=M(P," - "),c=M(P,u),P.forEach(h),_=N(T),f=C(T,"SPAN",{class:!0});var ee=B(f);w=C(ee,"A",{href:!0,target:!0,rel:!0});var q=B(w);U=M(q,d),q.forEach(h),ee.forEach(h),p=N(T),k=C(T,"SPAN",{class:!0});var W=B(k);I=M(W,g),W.forEach(h),this.h()},h(){L(t,"class","col svelte-1b7k28l"),L(r,"class","col svelte-1b7k28l"),L(w,"href",i[6].chord.url),L(w,"target","_blank"),L(w,"rel","noopener noreferrer"),L(f,"class","col svelte-1b7k28l"),L(k,"class","col svelte-1b7k28l")},m(T,E){S(T,t,E),m(t,l),S(T,e,E),S(T,r,E),m(r,a),m(r,o),m(r,c),S(T,_,E),S(T,f,E),m(f,w),m(w,U),S(T,p,E),S(T,k,E),m(k,I)},p:le,d(T){T&&(h(t),h(e),h(r),h(_),h(f),h(p),h(k))}}}function Ul(i){let t,s="Fetching results...";return{c(){t=v("p"),t.textContent=s},l(l){t=C(l,"P",{"data-svelte-h":!0}),X(t)!=="svelte-gjakbw"&&(t.textContent=s)},m(l,e){S(l,t,e)},p:le,d(l){l&&h(t)}}}function $l(i){let t,s=i[0]&&yt(i);return{c(){s&&s.c(),t=Y()},l(l){s&&s.l(l),t=Y()},m(l,e){s&&s.m(l,e),S(l,t,e)},p(l,[e]){l[0]?s?s.p(l,e):(s=yt(l),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i:le,o:le,d(l){l&&h(t),s&&s.d(l)}}}function Il(i,t,s){let{isOpen:l}=t;const e=n=>{const a=new Date(n.timestamp);return a.toDateString()+" "+a.toTimeString()},r=n=>n.fails.sort((a,o)=>a.chord.url<o.chord.url?-1:1);return i.$$set=n=>{"isOpen"in n&&s(0,l=n.isOpen)},[l,e,r]}class Ol extends Le{constructor(t){super(),Se(this,t,Il,$l,se,{isOpen:0})}}function Nt(i,t,s){const l=i.slice();return l[10]=t[s],l}function Bt(i){let t,s=i[10].dateTag+"",l;return{c(){t=v("li"),l=H(s),this.h()},l(e){t=C(e,"LI",{class:!0});var r=B(t);l=M(r,s),r.forEach(h),this.h()},h(){L(t,"class","ul2col-separator")},m(e,r){S(e,t,r),m(t,l)},p(e,r){r&1&&s!==(s=e[10].dateTag+"")&&je(l,s)},d(e){e&&h(t)}}}function Dt(i){let t,s,l,e,r,n=i[10].dateTag&&Bt(i);return l=new Pe({props:{chord:i[10]}}),{c(){n&&n.c(),t=A(),s=v("li"),fe(l.$$.fragment),e=A(),this.h()},l(a){n&&n.l(a),t=N(a),s=C(a,"LI",{class:!0});var o=B(s);ge(l.$$.fragment,o),e=N(o),o.forEach(h),this.h()},h(){L(s,"class","ul2col-item")},m(a,o){n&&n.m(a,o),S(a,t,o),S(a,s,o),ue(l,s,null),m(s,e),r=!0},p(a,o){a[10].dateTag?n?n.p(a,o):(n=Bt(a),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null);const u={};o&1&&(u.chord=a[10]),l.$set(u)},i(a){r||(y(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&(h(t),h(s)),n&&n.d(a),he(l)}}}function Pl(i){let t,s,l,e,r="More...",n,a,o,u,c,_=z(i[0]),f=[];for(let d=0;d<_.length;d+=1)f[d]=Dt(Nt(i,_,d));const w=d=>$(f[d],1,1,()=>{f[d]=null});return{c(){t=v("div"),s=v("h3"),l=H(`Latest additions
        `),e=v("button"),e.textContent=r,n=A(),a=v("ul");for(let d=0;d<f.length;d+=1)f[d].c();this.h()},l(d){t=C(d,"DIV",{});var U=B(t);s=C(U,"H3",{});var p=B(s);l=M(p,`Latest additions
        `),e=C(p,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-l2h3rt"&&(e.textContent=r),p.forEach(h),n=N(U),a=C(U,"UL",{class:!0});var k=B(a);for(let g=0;g<f.length;g+=1)f[g].l(k);k.forEach(h),U.forEach(h),this.h()},h(){L(e,"class","pull-right"),L(a,"class","ul2col-container")},m(d,U){S(d,t,U),m(t,s),m(s,l),m(s,e),m(t,n),m(t,a);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(a,null);o=!0,u||(c=te(e,"click",i[3]),u=!0)},p(d,[U]){if(U&1){_=z(d[0]);let p;for(p=0;p<_.length;p+=1){const k=Nt(d,_,p);f[p]?(f[p].p(k,U),y(f[p],1)):(f[p]=Dt(k),f[p].c(),y(f[p],1),f[p].m(a,null))}for(Z(),p=_.length;p<f.length;p+=1)w(p);x()}},i(d){if(!o){for(let U=0;U<_.length;U+=1)y(f[U]);o=!0}},o(d){f=f.filter(Boolean);for(let U=0;U<f.length;U+=1)$(f[U]);o=!1},d(d){d&&h(t),pe(f,d),u=!1,c()}}}function Vl(i,t,s){let{chords:l}=t;const e=Date.now(),r=1e3*3600*24*7,n=r*4,a=[{label:"last week",time:e-r},{label:"one month ago",time:e-n},{label:"two monthes ago",time:e-2*n},{label:"six monthes ago",time:e-6*n},{label:"one year ago",time:e-12*n}],o=l.filter(w=>w.creationDate).sort((w,d)=>d.creationDate-w.creationDate).map((w,d,U)=>{const p={...w};if(d>0){const k=U[d-1];for(const{time:g,label:I}of a)k.creationDate>g&&w.creationDate<g&&(p.dateTag=I)}return p});let u=6,c=[];const _=()=>{u+=4,s(0,c=o.slice(0,u))};Xe(()=>{_()});const f=()=>_();return i.$$set=w=>{"chords"in w&&s(2,l=w.chords)},[c,_,l,f]}class Hl extends Le{constructor(t){super(),Se(this,t,Vl,Pl,se,{chords:2})}}function Ut(i,t,s){const l=i.slice();return l[5]=t[s],l}function $t(i){let t,s=" ↶ ",l,e;return{c(){t=v("button"),t.textContent=s},l(r){t=C(r,"BUTTON",{"data-svelte-h":!0}),X(t)!=="svelte-1mg1zky"&&(t.textContent=s)},m(r,n){S(r,t,n),l||(e=te(t,"click",i[3]),l=!0)},p:le,d(r){r&&h(t),l=!1,e()}}}function It(i,t){let s,l,e,r;return l=new Pe({props:{chord:t[5],showArtist:!0}}),{key:i,first:null,c(){s=v("li"),fe(l.$$.fragment),e=A(),this.h()},l(n){s=C(n,"LI",{class:!0});var a=B(s);ge(l.$$.fragment,a),e=N(a),a.forEach(h),this.h()},h(){L(s,"class","ul2col-item"),this.first=s},m(n,a){S(n,s,a),ue(l,s,null),m(s,e),r=!0},p(n,a){t=n;const o={};a&2&&(o.chord=t[5]),l.$set(o)},i(n){r||(y(l.$$.fragment,n),r=!0)},o(n){$(l.$$.fragment,n),r=!1},d(n){n&&h(s),he(l)}}}function Ml(i){let t,s,l,e,r,n,a="Get more random songs",o,u,c,_,f=[],w=new Map,d,U,p,k=i[0].length>Ae&&$t(i),g=z(i[1]);const I=T=>T[5].url;for(let T=0;T<g.length;T+=1){let E=Ut(i,g,T),P=I(E);w.set(P,f[T]=It(P,E))}return{c(){t=v("div"),s=v("h3"),l=H(`Random song
        `),e=v("span"),k&&k.c(),r=A(),n=v("button"),n.textContent=a,o=A(),u=v("br"),c=A(),_=v("ul");for(let T=0;T<f.length;T+=1)f[T].c();this.h()},l(T){t=C(T,"DIV",{});var E=B(t);s=C(E,"H3",{});var P=B(s);l=M(P,`Random song
        `),e=C(P,"SPAN",{class:!0});var ee=B(e);k&&k.l(ee),r=N(ee),n=C(ee,"BUTTON",{"data-svelte-h":!0}),X(n)!=="svelte-1gfm3kd"&&(n.textContent=a),ee.forEach(h),P.forEach(h),o=N(E),u=C(E,"BR",{}),c=N(E),_=C(E,"UL",{class:!0});var q=B(_);for(let W=0;W<f.length;W+=1)f[W].l(q);q.forEach(h),E.forEach(h),this.h()},h(){L(e,"class","pull-right"),L(_,"class","ul2col-container")},m(T,E){S(T,t,E),m(t,s),m(s,l),m(s,e),k&&k.m(e,null),m(e,r),m(e,n),m(t,o),m(t,u),m(t,c),m(t,_);for(let P=0;P<f.length;P+=1)f[P]&&f[P].m(_,null);d=!0,U||(p=te(n,"click",i[2]),U=!0)},p(T,[E]){T[0].length>Ae?k?k.p(T,E):(k=$t(T),k.c(),k.m(e,r)):k&&(k.d(1),k=null),E&2&&(g=z(T[1]),Z(),f=Zt(f,E,I,1,T,g,w,_,xt,It,null,Ut),x())},i(T){if(!d){for(let E=0;E<g.length;E+=1)y(f[E]);d=!0}},o(T){for(let E=0;E<f.length;E+=1)$(f[E]);d=!1},d(T){T&&h(t),k&&k.d();for(let E=0;E<f.length;E+=1)f[E].d();U=!1,p()}}}const Ae=6;function Rl(i,t,s){let{chords:l}=t,e=[],r=[];const n=()=>{e.length>=l.length-Ae&&s(0,e=[]);for(let o=0;o<Ae;o++){let u=-1;for(;u===-1||e.includes(u);)u=Math.floor(Math.random()*l.length);e.push(u)}s(1,r=e.slice(e.length-Ae).map(o=>l[o]))},a=()=>{e.length<=Ae||(e.splice(e.length-Ae),s(1,r=e.slice(e.length-Ae).map(o=>l[o])))};return Xe(()=>{n()}),i.$$set=o=>{"chords"in o&&s(4,l=o.chords)},[e,r,n,a,l]}class jl extends Le{constructor(t){super(),Se(this,t,Rl,Ml,se,{chords:4})}}function Ot(i,t,s){const l=i.slice();return l[15]=t[s],l}function Pt(i,t,s){const l=i.slice();return l[18]=t[s],l[19]=t,l[20]=s,l}function Vt(i){let t,s,l,e,r,n,a;function o(){i[11].call(s,i[18])}function u(){return i[12](i[18])}return{c(){t=v("button"),s=v("input"),l=A(),e=v("span"),r=A(),this.h()},l(c){t=C(c,"BUTTON",{class:!0});var _=B(t);s=C(_,"INPUT",{id:!0,type:!0}),l=N(_),e=C(_,"SPAN",{class:!0}),B(e).forEach(h),r=N(_),_.forEach(h),this.h()},h(){L(s,"id",i[18]),L(s,"type","checkbox"),L(e,"class",Fe(Je(i[18]))+" svelte-kiyfxh"),L(t,"class","filter-control svelte-kiyfxh")},m(c,_){S(c,t,_),m(t,s),s.checked=i[2][i[18]],m(t,l),m(t,e),m(t,r),n||(a=[te(s,"change",o),te(t,"click",u)],n=!0)},p(c,_){i=c,_&36&&(s.checked=i[2][i[18]])},d(c){c&&h(t),n=!1,Ke(a)}}}function Ht(i){let t,s=i[15].label+"",l,e,r,n;function a(){return i[13](i[15])}return{c(){t=v("button"),l=H(s),e=A(),this.h()},l(o){t=C(o,"BUTTON",{class:!0});var u=B(t);l=M(u,s),e=N(u),u.forEach(h),this.h()},h(){L(t,"class","control svelte-kiyfxh"),Re(t,"selected",i[1]===i[15])},m(o,u){S(o,t,u),m(t,l),m(t,e),r||(n=te(t,"click",a),r=!0)},p(o,u){i=o,u&18&&Re(t,"selected",i[1]===i[15])},d(o){o&&h(t),r=!1,n()}}}function ql(i){let t,s,l,e,r,n,a="Check dead links",o,u,c="Edit",_,f,w,d,U,p=i[3].length+"",k,g,I,T,E,P,ee,q,W,Te="All songs",De,re,ye,oe,Ne='<i class="fas fa-times-circle"></i>',G,Q,Ee,Ue="Filters",_e,$e,ke,be="View",Ie,de,ie,F,ve,me,J,R;t=new ll({props:{title:"Song Book",description:"My song book",iconPath:"/songbook.png"}}),f=new dl({}),T=new Hl({props:{chords:i[3]}}),P=new jl({props:{chords:i[3]}});let V=z(i[5]),O=[];for(let b=0;b<V.length;b+=1)O[b]=Vt(Pt(i,V,b));let ae=z(i[4]),K=[];for(let b=0;b<ae.length;b+=1)K[b]=Ht(Ot(i,ae,b));var Ce=i[1].component;function ne(b,j){return{props:{chords:b[3],searchString:b[0],filters:b[2]}}}return Ce&&(F=We(Ce,ne(i))),{c(){fe(t.$$.fragment),s=A(),l=v("h2"),e=H(`Song book
    `),r=v("span"),n=v("button"),n.textContent=a,o=A(),u=v("button"),u.textContent=c,_=A(),fe(f.$$.fragment),w=A(),d=v("p"),U=H("This is a list of "),k=H(p),g=H(` song chords I have been gathering for the past 10 years and that
    I like to play.`),I=A(),fe(T.$$.fragment),E=A(),fe(P.$$.fragment),ee=A(),q=v("div"),W=v("h3"),W.textContent=Te,De=H(`
    Search an artist, a title or a tag:`),re=v("input"),ye=A(),oe=v("button"),oe.innerHTML=Ne,G=A(),Q=v("div"),Ee=v("h4"),Ee.textContent=Ue,_e=A();for(let b=0;b<O.length;b+=1)O[b].c();$e=A(),ke=v("h4"),ke.textContent=be,Ie=A(),de=v("div");for(let b=0;b<K.length;b+=1)K[b].c();ie=A(),F&&fe(F.$$.fragment),ve=Y(),this.h()},l(b){ge(t.$$.fragment,b),s=N(b),l=C(b,"H2",{});var j=B(l);e=M(j,`Song book
    `),r=C(j,"SPAN",{class:!0});var D=B(r);n=C(D,"BUTTON",{"data-svelte-h":!0}),X(n)!=="svelte-13v6ylk"&&(n.textContent=a),o=N(D),u=C(D,"BUTTON",{"data-svelte-h":!0}),X(u)!=="svelte-18v2orh"&&(u.textContent=c),D.forEach(h),j.forEach(h),_=N(b),ge(f.$$.fragment,b),w=N(b),d=C(b,"P",{});var we=B(d);U=M(we,"This is a list of "),k=M(we,p),g=M(we,` song chords I have been gathering for the past 10 years and that
    I like to play.`),we.forEach(h),I=N(b),ge(T.$$.fragment,b),E=N(b),ge(P.$$.fragment,b),ee=N(b),q=C(b,"DIV",{});var ce=B(q);W=C(ce,"H3",{"data-svelte-h":!0}),X(W)!=="svelte-bfvigd"&&(W.textContent=Te),De=M(ce,`
    Search an artist, a title or a tag:`),re=C(ce,"INPUT",{type:!0}),ye=N(ce),oe=C(ce,"BUTTON",{"data-svelte-h":!0}),X(oe)!=="svelte-5nqbye"&&(oe.innerHTML=Ne),G=N(ce),Q=C(ce,"DIV",{class:!0});var Me=B(Q);Ee=C(Me,"H4",{"data-svelte-h":!0}),X(Ee)!=="svelte-xazxp3"&&(Ee.textContent=Ue),_e=N(Me);for(let Be=0;Be<O.length;Be+=1)O[Be].l(Me);Me.forEach(h),$e=N(ce),ke=C(ce,"H4",{"data-svelte-h":!0}),X(ke)!=="svelte-1yp5l9r"&&(ke.textContent=be),Ie=N(ce),de=C(ce,"DIV",{class:!0});var Ye=B(de);for(let Be=0;Be<K.length;Be+=1)K[Be].l(Ye);Ye.forEach(h),ce.forEach(h),ie=N(b),F&&ge(F.$$.fragment,b),ve=Y(),this.h()},h(){Ve(n,"position","relative"),Ve(u,"position","relative"),L(r,"class","pull-right"),L(re,"type","text"),L(Q,"class","filter-controls-container svelte-kiyfxh"),L(de,"class","view-controls-container svelte-kiyfxh")},m(b,j){ue(t,b,j),S(b,s,j),S(b,l,j),m(l,e),m(l,r),m(r,n),m(r,o),m(r,u),S(b,_,j),ue(f,b,j),S(b,w,j),S(b,d,j),m(d,U),m(d,k),m(d,g),S(b,I,j),ue(T,b,j),S(b,E,j),ue(P,b,j),S(b,ee,j),S(b,q,j),m(q,W),m(q,De),m(q,re),Qe(re,i[0]),m(q,ye),m(q,oe),m(q,G),m(q,Q),m(Q,Ee),m(Q,_e);for(let D=0;D<O.length;D+=1)O[D]&&O[D].m(Q,null);m(q,$e),m(q,ke),m(q,Ie),m(q,de);for(let D=0;D<K.length;D+=1)K[D]&&K[D].m(de,null);S(b,ie,j),F&&ue(F,b,j),S(b,ve,j),me=!0,J||(R=[te(n,"click",i[7]),te(u,"click",i[8]),te(re,"input",i[9]),te(oe,"click",i[10])],J=!0)},p(b,[j]){if(j&1&&re.value!==b[0]&&Qe(re,b[0]),j&36){V=z(b[5]);let D;for(D=0;D<V.length;D+=1){const we=Pt(b,V,D);O[D]?O[D].p(we,j):(O[D]=Vt(we),O[D].c(),O[D].m(Q,null))}for(;D<O.length;D+=1)O[D].d(1);O.length=V.length}if(j&18){ae=z(b[4]);let D;for(D=0;D<ae.length;D+=1){const we=Ot(b,ae,D);K[D]?K[D].p(we,j):(K[D]=Ht(we),K[D].c(),K[D].m(de,null))}for(;D<K.length;D+=1)K[D].d(1);K.length=ae.length}if(j&2&&Ce!==(Ce=b[1].component)){if(F){Z();const D=F;$(D.$$.fragment,1,0,()=>{he(D,1)}),x()}Ce?(F=We(Ce,ne(b)),fe(F.$$.fragment),y(F.$$.fragment,1),ue(F,ve.parentNode,ve)):F=null}else if(Ce){const D={};j&1&&(D.searchString=b[0]),j&4&&(D.filters=b[2]),F.$set(D)}},i(b){me||(y(t.$$.fragment,b),y(f.$$.fragment,b),y(T.$$.fragment,b),y(P.$$.fragment,b),F&&y(F.$$.fragment,b),me=!0)},o(b){$(t.$$.fragment,b),$(f.$$.fragment,b),$(T.$$.fragment,b),$(P.$$.fragment,b),F&&$(F.$$.fragment,b),me=!1},d(b){b&&(h(s),h(l),h(_),h(w),h(d),h(I),h(E),h(ee),h(q),h(ie),h(ve)),he(t,b),he(f,b),he(T,b),he(P,b),pe(O,b),pe(K,b),F&&he(F,b),J=!1,Ke(R)}}}function Fl(i,t,s){let l;qt(i,He,g=>s(14,l=g));let{data:e}=t;const{chords:r}=e;Xe(async()=>{try{if(l.length){for(const g of l)await Rt(g);Ft(He,l=[],l)}}catch(g){console.log("Couldnt upload failed visit counts"),console.log(g)}try{const I=(await Yt()).reduce((T,E)=>(T.set(E.url,{...E}),T),new Map);Oe.set(I)}catch(g){console.log("Couldnt upload failed visit counts"),console.log(g)}});let n="";const a=[{label:"By artist",component:Ll},{label:"By tags",component:El},{label:"By frequency",component:Nl},{label:"By access date",component:bl}];let o=a[0],u={pdf:!0,doc:!0,youtube:!0,link:!0};const c=Object.keys(u),_=()=>tl(Ol),f=()=>cl("/songbook/edit");function w(){n=this.value,s(0,n)}const d=()=>s(0,n="");function U(g){u[g]=this.checked,s(2,u)}const p=g=>{s(2,u[g]=!u[g],u),s(2,u)},k=g=>s(1,o=g);return i.$$set=g=>{"data"in g&&s(6,e=g.data)},[n,o,u,r,a,c,e,_,f,w,d,U,p,k]}class sn extends Le{constructor(t){super(),Se(this,t,Fl,ql,se,{data:6})}}export{sn as component,nn as universal};
