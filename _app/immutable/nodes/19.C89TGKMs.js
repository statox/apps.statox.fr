import{s as Te,A as ue,i as L,f as v,k as Ke,I as wt,e as d,t as pe,a as k,c as p,b as $,d as ve,z as P,g as y,l as f,N as se,D as St,h as u,P as rt,E as ie,a3 as $t,B as Xe,y as It,Q as Lt,n as ce,o as Ye,p as Ut,G as Qe,j as Ie,a4 as zt}from"../chunks/scheduler.DD29IDFH.js";import{h as ot,u as At}from"../chunks/await_block.CPkDFjTD.js";import{S as Be,i as xe,a as D,g as De,t as O,c as Ne,f as Pt,b as be,d as ge,m as Ce,e as ke}from"../chunks/index.DdAIetyJ.js";import{c as kt,o as Dt}from"../chunks/store.CA0gqAJR.js";import{u as Ze,M as yt,U as Nt}from"../chunks/Main.DE0GsWw4.js";import{r as jt,a as et,A as Tt}from"../chunks/index.D68wnC6W.js";import{e as Pe}from"../chunks/each.BVF7ijxy.js";import{t as Et}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.B_SaEqtJ.js";import{M as Bt,a as xt,b as Wt}from"../chunks/Main.CT6B5vZk.js";import{a as Mt}from"../chunks/datetime.nQE3q1jc.js";import"../chunks/entry.BTRv7pPv.js";import{p as Ot}from"../chunks/Main.svelte_svelte_type_style_lang.zAxtl4ho.js";const Vt=!1,Il=Object.freeze(Object.defineProperty({__proto__:null,ssr:Vt},Symbol.toStringTag,{value:"Module"})),it=async()=>jt({path:"/webWatcher/getAllWatchers"}),ct=async a=>et({path:"/webWatcher/createWatcher",data:a}),Ht=async a=>et({path:"/webWatcher/deleteWatcher",data:{id:a}}),qt=async a=>et({path:"/webWatcher/toggleWatcherEnabled",data:a});function ut(a,e,l){const t=a.slice();return t[17]=e[l],t}function ft(a){let e,l,t,n,r,o="Close",i,s,c,h,C="Name",w,b,_,m,g="Check interval",I,W,X,U,H,ye="Notification message (the @mention is automatically added)",Ee,G,fe,re,Y="Watcher type",Z,q,ee,Le="CSS",F,_e="HASH",me,te,Ue="URL",we,J,le,ne,ze,Se,ae,$e,oe,Q=Pe(a[1]),z=[];for(let E=0;E<Q.length;E+=1)z[E]=ht(ut(a,Q,E));const je=E=>O(z[E],1,1,()=>{z[E]=null});function he(E){a[12](E)}let Ae={allowedUnits:["minutes","hours","days"],defaultDuration:{value:1,unit:"hours"}};a[6]!==void 0&&(Ae.valueInSeconds=a[6]),W=new Bt({props:Ae}),wt.push(()=>Pt(W,"valueInSeconds",he));let M=a[7]==="CSS"&&dt(a);function de(E,A){return E[8]?Rt:Ft}let K=de(a),R=K(a);return{c(){e=d("div"),l=d("div"),t=d("h3"),n=pe(`Add a new clipboard entry
                `),r=d("button"),r.textContent=o,i=k();for(let E=0;E<z.length;E+=1)z[E].c();s=k(),c=d("form"),h=d("label"),h.textContent=C,w=k(),b=d("input"),_=k(),m=d("label"),m.textContent=g,I=k(),be(W.$$.fragment),U=k(),H=d("label"),H.textContent=ye,Ee=k(),G=d("input"),fe=k(),re=d("label"),re.textContent=Y,Z=k(),q=d("select"),ee=d("option"),ee.textContent=Le,F=d("option"),F.textContent=_e,me=k(),te=d("label"),te.textContent=Ue,we=k(),J=d("input"),le=k(),M&&M.c(),ne=k(),ze=d("br"),Se=k(),R.c(),this.h()},l(E){e=p(E,"DIV",{role:!0,class:!0});var A=$(e);l=p(A,"DIV",{class:!0});var T=$(l);t=p(T,"H3",{class:!0});var N=$(t);n=ve(N,`Add a new clipboard entry
                `),r=p(N,"BUTTON",{"data-svelte-h":!0}),P(r)!=="svelte-2m9p61"&&(r.textContent=o),N.forEach(v),i=y(T);for(let V=0;V<z.length;V+=1)z[V].l(T);s=y(T),c=p(T,"FORM",{class:!0});var S=$(c);h=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),P(h)!=="svelte-bs9sy6"&&(h.textContent=C),w=y(S),b=p(S,"INPUT",{type:!0}),_=y(S),m=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),P(m)!=="svelte-q7xqd"&&(m.textContent=g),I=y(S),ge(W.$$.fragment,S),U=y(S),H=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),P(H)!=="svelte-1nwvu8o"&&(H.textContent=ye),Ee=y(S),G=p(S,"INPUT",{type:!0}),fe=y(S),re=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),P(re)!=="svelte-180kuuc"&&(re.textContent=Y),Z=y(S),q=p(S,"SELECT",{id:!0});var B=$(q);ee=p(B,"OPTION",{"data-svelte-h":!0}),P(ee)!=="svelte-x0e7ng"&&(ee.textContent=Le),F=p(B,"OPTION",{"data-svelte-h":!0}),P(F)!=="svelte-1f1oya6"&&(F.textContent=_e),B.forEach(v),me=y(S),te=p(S,"LABEL",{for:!0,"data-svelte-h":!0}),P(te)!=="svelte-47691s"&&(te.textContent=Ue),we=y(S),J=p(S,"INPUT",{type:!0}),le=y(S),M&&M.l(S),ne=y(S),ze=p(S,"BR",{}),Se=y(S),R.l(S),S.forEach(v),T.forEach(v),A.forEach(v),this.h()},h(){f(t,"class","title-bar svelte-1cixduj"),f(h,"for","name"),f(b,"type","text"),f(m,"for","check-interval"),f(H,"for","notification-message"),f(G,"type","textarea"),f(re,"for","watch-type"),ee.__value="CSS",se(ee,ee.__value),F.__value="HASH",se(F,F.__value),f(q,"id","watch-type"),a[7]===void 0&&St(()=>a[14].call(q)),f(te,"for","content"),f(J,"type","textarea"),f(c,"class","form-content svelte-1cixduj"),f(l,"class","contents svelte-1cixduj"),f(e,"role","dialog"),f(e,"class","modal svelte-1cixduj")},m(E,A){L(E,e,A),u(e,l),u(l,t),u(t,n),u(t,r),u(l,i);for(let T=0;T<z.length;T+=1)z[T]&&z[T].m(l,null);u(l,s),u(l,c),u(c,h),u(c,w),u(c,b),se(b,a[2]),u(c,_),u(c,m),u(c,I),Ce(W,c,null),u(c,U),u(c,H),u(c,Ee),u(c,G),se(G,a[3]),u(c,fe),u(c,re),u(c,Z),u(c,q),u(q,ee),u(q,F),rt(q,a[7],!0),u(c,me),u(c,te),u(c,we),u(c,J),se(J,a[4]),u(c,le),M&&M.m(c,null),u(c,ne),u(c,ze),u(c,Se),R.m(c,null),ae=!0,$e||(oe=[ie(r,"click",kt),ie(b,"input",a[11]),ie(G,"input",a[13]),ie(q,"change",a[14]),ie(J,"input",a[15])],$e=!0)},p(E,A){if(A&2){Q=Pe(E[1]);let N;for(N=0;N<Q.length;N+=1){const S=ut(E,Q,N);z[N]?(z[N].p(S,A),D(z[N],1)):(z[N]=ht(S),z[N].c(),D(z[N],1),z[N].m(l,s))}for(De(),N=Q.length;N<z.length;N+=1)je(N);Ne()}A&4&&b.value!==E[2]&&se(b,E[2]);const T={};!X&&A&64&&(X=!0,T.valueInSeconds=E[6],$t(()=>X=!1)),W.$set(T),A&8&&se(G,E[3]),A&128&&rt(q,E[7]),A&16&&se(J,E[4]),E[7]==="CSS"?M?M.p(E,A):(M=dt(E),M.c(),M.m(c,ne)):M&&(M.d(1),M=null),K===(K=de(E))&&R?R.p(E,A):(R.d(1),R=K(E),R&&(R.c(),R.m(c,null)))},i(E){if(!ae){for(let A=0;A<Q.length;A+=1)D(z[A]);D(W.$$.fragment,E),ae=!0}},o(E){z=z.filter(Boolean);for(let A=0;A<z.length;A+=1)O(z[A]);O(W.$$.fragment,E),ae=!1},d(E){E&&v(e),Xe(z,E),ke(W),M&&M.d(),R.d(),$e=!1,It(oe)}}}function ht(a){let e,l;return e=new yt({props:{item:a[17]}}),{c(){be(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,n){Ce(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.item=t[17]),e.$set(r)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function dt(a){let e,l="CSS selector",t,n,r,o;return{c(){e=d("label"),e.textContent=l,t=k(),n=d("input"),this.h()},l(i){e=p(i,"LABEL",{for:!0,"data-svelte-h":!0}),P(e)!=="svelte-1ib74yx"&&(e.textContent=l),t=y(i),n=p(i,"INPUT",{type:!0}),this.h()},h(){f(e,"for","css-selector"),f(n,"type","textarea")},m(i,s){L(i,e,s),L(i,t,s),L(i,n,s),se(n,a[5]),r||(o=ie(n,"input",a[16]),r=!0)},p(i,s){s&32&&se(n,i[5])},d(i){i&&(v(e),v(t),v(n)),r=!1,o()}}}function Ft(a){let e,l="Login to upload an entry";return{c(){e=d("span"),e.textContent=l,this.h()},l(t){e=p(t,"SPAN",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-4ab4io"&&(e.textContent=l),this.h()},h(){f(e,"class","form-action svelte-1cixduj")},m(t,n){L(t,e,n)},p:ce,d(t){t&&v(e)}}}function Rt(a){let e,l="Submit",t,n;return{c(){e=d("button"),e.textContent=l,this.h()},l(r){e=p(r,"BUTTON",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1nfv1d"&&(e.textContent=l),this.h()},h(){f(e,"class","form-action svelte-1cixduj")},m(r,o){L(r,e,o),t||(n=ie(e,"click",a[9]),t=!0)},p:ce,d(r){r&&v(e),t=!1,n()}}}function Gt(a){let e,l,t=a[0]&&ft(a);return{c(){t&&t.c(),e=ue()},l(n){t&&t.l(n),e=ue()},m(n,r){t&&t.m(n,r),L(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&D(t,1)):(t=ft(n),t.c(),D(t,1),t.m(e.parentNode,e)):t&&(De(),O(t,1,1,()=>{t=null}),Ne())},i(n){l||(D(t),l=!0)},o(n){O(t),l=!1},d(n){n&&v(e),t&&t.d(n)}}}function Jt(a,e,l){let t;Ke(a,Ze,U=>l(8,t=U));let{isOpen:n}=e,{onUpload:r}=e,o=[],i,s,c,h,C,w;const b=async()=>{l(1,o=[]),i!=null&&i.length||o.push({level:"error",header:"name must be defined"}),s||o.push({level:"error",header:"notification message must be defined"}),w==="CSS"&&!h&&o.push({level:"error",header:"A CSS watcher must have a css selector defined"}),C<15*60&&o.push({level:"error",header:"Check interval too small. Must be >= 15mn"});try{new URL(c)}catch{o.push({level:"error",header:"The URL is invalid"})}if(!o.length)try{w==="CSS"?await ct({name:i,notificationMessage:s,url:c,cssSelector:h,checkIntervalSeconds:C,watchType:w}):w==="HASH"&&await ct({name:i,notificationMessage:s,url:c,checkIntervalSeconds:C,watchType:w}),r(),kt()}catch(U){let H=U.message;U instanceof Tt&&U.code===401?H="Invalid logged in user":U instanceof Nt&&(H="User is logged out");const ye=`<strong>Entry not created</strong><br/> ${H}`;Et.push(ye,{theme:{"--toastBarBackground":"#FF0000"}})}};function _(){i=this.value,l(2,i)}function m(U){C=U,l(6,C)}function g(){s=this.value,l(3,s)}function I(){w=Lt(this),l(7,w)}function W(){c=this.value,l(4,c)}function X(){h=this.value,l(5,h)}return a.$$set=U=>{"isOpen"in U&&l(0,n=U.isOpen),"onUpload"in U&&l(10,r=U.onUpload)},[n,o,i,s,c,h,C,w,t,b,r,_,m,g,I,W,X]}class Qt extends Be{constructor(e){super(),xe(this,e,Jt,Gt,Te,{isOpen:0,onUpload:10})}}function pt(a,e,l){const t=a.slice();return t[11]=e[l],t}function Kt(a){let e,l,t,n,r,o=Pe(a[3]),i=[];for(let s=0;s<o.length;s+=1)i[s]=vt(pt(a,o,s));return{c(){e=d("div"),l=d("div"),t=d("div"),n=pe(a[1]),r=k();for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=p(s,"DIV",{class:!0});var c=$(e);l=p(c,"DIV",{role:!0,class:!0,"aria-labelledby":!0,style:!0,id:!0});var h=$(l);t=p(h,"DIV",{class:!0,id:!0});var C=$(t);n=ve(C,a[1]),C.forEach(v),r=y(h);for(let w=0;w<i.length;w+=1)i[w].l(h);h.forEach(v),c.forEach(v),this.h()},h(){f(t,"class","legend"),f(t,"id",`label-${a[6]}`),f(l,"role","radiogroup"),f(l,"class","group-container svelte-1n7axnp"),f(l,"aria-labelledby",`label-${a[6]}`),Qe(l,"font-size",a[4]+"px"),f(l,"id",`group-${a[6]}`),f(e,"class","s s--multi svelte-1n7axnp")},m(s,c){L(s,e,c),u(e,l),u(l,t),u(t,n),u(l,r);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(l,null)},p(s,c){if(c&2&&Ie(n,s[1]),c&73){o=Pe(s[3]);let h;for(h=0;h<o.length;h+=1){const C=pt(s,o,h);i[h]?i[h].p(C,c):(i[h]=vt(C),i[h].c(),i[h].m(l,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=o.length}c&16&&Qe(l,"font-size",s[4]+"px")},d(s){s&&v(e),Xe(i,s)}}}function Xt(a){let e,l,t,n,r,o,i;return{c(){e=d("div"),l=d("span"),t=pe(a[1]),n=k(),r=d("button"),this.h()},l(s){e=p(s,"DIV",{class:!0,style:!0});var c=$(e);l=p(c,"SPAN",{id:!0});var h=$(l);t=ve(h,a[1]),h.forEach(v),n=y(c),r=p(c,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var C=$(r);C.forEach(v),c.forEach(v),this.h()},h(){f(l,"id",`switch-${a[6]}`),f(r,"role","switch"),f(r,"aria-checked",a[5]),f(r,"aria-labelledby",`switch-${a[6]}`),f(r,"class","svelte-1n7axnp"),f(e,"class","s s--slider svelte-1n7axnp"),Qe(e,"font-size",a[4]+"px")},m(s,c){L(s,e,c),u(e,l),u(l,t),u(e,n),u(e,r),o||(i=ie(r,"click",a[7]),o=!0)},p(s,c){c&2&&Ie(t,s[1]),c&32&&f(r,"aria-checked",s[5]),c&16&&Qe(e,"font-size",s[4]+"px")},d(s){s&&v(e),o=!1,i()}}}function Yt(a){let e,l,t,n,r,o,i="on",s,c,h="off",C,w;return{c(){e=d("div"),l=d("span"),t=pe(a[1]),n=k(),r=d("button"),o=d("span"),o.textContent=i,s=k(),c=d("span"),c.textContent=h,this.h()},l(b){e=p(b,"DIV",{class:!0});var _=$(e);l=p(_,"SPAN",{id:!0,class:!0});var m=$(l);t=ve(m,a[1]),m.forEach(v),n=y(_),r=p(_,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var g=$(r);o=p(g,"SPAN",{class:!0,"data-svelte-h":!0}),P(o)!=="svelte-oik0f3"&&(o.textContent=i),s=y(g),c=p(g,"SPAN",{class:!0,"data-svelte-h":!0}),P(c)!=="svelte-10sksj5"&&(c.textContent=h),g.forEach(v),_.forEach(v),this.h()},h(){f(l,"id",`switch-${a[6]}`),f(l,"class","svelte-1n7axnp"),f(o,"class","svelte-1n7axnp"),f(c,"class","svelte-1n7axnp"),f(r,"role","switch"),f(r,"aria-checked",a[5]),f(r,"aria-labelledby",`switch-${a[6]}`),f(r,"class","svelte-1n7axnp"),f(e,"class","s s--inner svelte-1n7axnp")},m(b,_){L(b,e,_),u(e,l),u(l,t),u(e,n),u(e,r),u(r,o),u(r,s),u(r,c),C||(w=ie(r,"click",a[7]),C=!0)},p(b,_){_&2&&Ie(t,b[1]),_&32&&f(r,"aria-checked",b[5])},d(b){b&&v(e),C=!1,w()}}}function vt(a){let e,l,t,n=!1,r,o,i=a[11]+"",s,c,h,C,w,b;return C=zt(a[9][0]),{c(){e=d("input"),r=k(),o=d("label"),s=pe(i),c=k(),this.h()},l(_){e=p(_,"INPUT",{type:!0,id:!0,class:!0}),r=y(_),o=p(_,"LABEL",{for:!0,class:!0});var m=$(o);s=ve(m,i),c=y(m),m.forEach(v),this.h()},h(){f(e,"type","radio"),f(e,"id",l=`${a[11]}-${a[6]}`),e.__value=t=a[11],se(e,e.__value),f(e,"class","svelte-1n7axnp"),f(o,"for",h=`${a[11]}-${a[6]}`),f(o,"class","svelte-1n7axnp"),C.p(e)},m(_,m){L(_,e,m),e.checked=e.__value===a[0],L(_,r,m),L(_,o,m),u(o,s),u(o,c),w||(b=ie(e,"change",a[8]),w=!0)},p(_,m){m&8&&l!==(l=`${_[11]}-${_[6]}`)&&f(e,"id",l),m&8&&t!==(t=_[11])&&(e.__value=t,se(e,e.__value),n=!0),(n||m&9)&&(e.checked=e.__value===_[0]),m&8&&i!==(i=_[11]+"")&&Ie(s,i),m&8&&h!==(h=`${_[11]}-${_[6]}`)&&f(o,"for",h)},d(_){_&&(v(e),v(r),v(o)),C.r(),w=!1,b()}}}function Zt(a){let e;function l(r,o){return r[2]=="inner"?Yt:r[2]=="slider"?Xt:Kt}let t=l(a),n=t(a);return{c(){n.c(),e=ue()},l(r){n.l(r),e=ue()},m(r,o){n.m(r,o),L(r,e,o)},p(r,[o]){t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:ce,o:ce,d(r){r&&v(e),n.d(r)}}}function el(a,e,l){let{label:t}=e,{design:n="inner label"}=e,{options:r=[]}=e,{fontSize:o=16}=e,{value:i="on"}=e,s=!0;const c=Math.floor(Math.random()*100),h=Ye();function C(_){const m=_.target,g=m==null?void 0:m.getAttribute("aria-checked");l(5,s=g!=="true"),l(0,i=s===!0?"on":"off"),h("change",i)}Ut(()=>{l(5,s=i==="on")});const w=[[]];function b(){i=this.__value,l(0,i)}return a.$$set=_=>{"label"in _&&l(1,t=_.label),"design"in _&&l(2,n=_.design),"options"in _&&l(3,r=_.options),"fontSize"in _&&l(4,o=_.fontSize),"value"in _&&l(0,i=_.value)},[i,t,n,r,o,s,c,C,b,w]}class tl extends Be{constructor(e){super(),xe(this,e,el,Zt,Te,{label:1,design:2,options:3,fontSize:4,value:0})}}function _t(a){let e,l,t,n=a[0].name+"",r,o,i,s,c,h,C,w,b,_,m="Check interval",g,I,W,X,U,H,ye="Notification message",Ee,G,fe,re,Y,Z,q,ee="URL",Le,F,_e=a[0].url+"",me,te,Ue,we,J,le,ne,ze="Last check",Se,ae,$e,oe,Q,z="Last content change",je,he,Ae,M,de,K,R,E="Last content",A,T,N,S;s=new tl({props:{value:a[8],label:"Enabled",design:"slider"}}),s.$on("change",a[7]),h=new xt({}),h.$on("delete",a[6]);let B=a[0].watchType==="CSS"&&mt(a),V=a[0].lastErrorDateUnix&&bt(a);return{c(){e=d("div"),l=d("h3"),t=d("div"),r=pe(n),o=k(),i=d("div"),be(s.$$.fragment),c=k(),be(h.$$.fragment),C=k(),w=d("div"),b=d("p"),_=d("label"),_.textContent=m,g=k(),I=d("input"),W=k(),X=d("div"),U=d("p"),H=d("label"),H.textContent=ye,Ee=k(),G=d("input"),re=k(),Y=d("div"),Z=d("p"),q=d("label"),q.textContent=ee,Le=k(),F=d("a"),me=pe(_e),Ue=k(),B&&B.c(),we=k(),J=d("div"),le=d("p"),ne=d("label"),ne.textContent=ze,Se=k(),ae=d("input"),$e=k(),oe=d("p"),Q=d("label"),Q.textContent=z,je=k(),he=d("input"),Ae=k(),V&&V.c(),M=k(),de=d("div"),K=d("p"),R=d("label"),R.textContent=E,A=k(),T=d("input"),this.h()},l(x){e=p(x,"DIV",{class:!0});var j=$(e);l=p(j,"H3",{class:!0});var We=$(l);t=p(We,"DIV",{class:!0});var tt=$(t);r=ve(tt,n),tt.forEach(v),o=y(We),i=p(We,"DIV",{class:!0});var Me=$(i);ge(s.$$.fragment,Me),c=y(Me),ge(h.$$.fragment,Me),Me.forEach(v),We.forEach(v),C=y(j),w=p(j,"DIV",{class:!0});var lt=$(w);b=p(lt,"P",{class:!0});var Oe=$(b);_=p(Oe,"LABEL",{for:!0,"data-svelte-h":!0}),P(_)!=="svelte-q7xqd"&&(_.textContent=m),g=y(Oe),I=p(Oe,"INPUT",{type:!0,class:!0}),Oe.forEach(v),lt.forEach(v),W=y(j),X=p(j,"DIV",{class:!0});var nt=$(X);U=p(nt,"P",{class:!0});var Ve=$(U);H=p(Ve,"LABEL",{for:!0,"data-svelte-h":!0}),P(H)!=="svelte-1rjok9v"&&(H.textContent=ye),Ee=y(Ve),G=p(Ve,"INPUT",{type:!0,class:!0}),Ve.forEach(v),nt.forEach(v),re=y(j),Y=p(j,"DIV",{class:!0});var He=$(Y);Z=p(He,"P",{class:!0});var qe=$(Z);q=p(qe,"LABEL",{for:!0,"data-svelte-h":!0}),P(q)!=="svelte-47691s"&&(q.textContent=ee),Le=y(qe),F=p(qe,"A",{target:!0,rel:!0,href:!0});var at=$(F);me=ve(at,_e),at.forEach(v),qe.forEach(v),Ue=y(He),B&&B.l(He),He.forEach(v),we=y(j),J=p(j,"DIV",{class:!0});var Fe=$(J);le=p(Fe,"P",{class:!0});var Re=$(le);ne=p(Re,"LABEL",{for:!0,"data-svelte-h":!0}),P(ne)!=="svelte-l58ce3"&&(ne.textContent=ze),Se=y(Re),ae=p(Re,"INPUT",{type:!0,class:!0}),Re.forEach(v),$e=y(Fe),oe=p(Fe,"P",{class:!0});var Ge=$(oe);Q=p(Ge,"LABEL",{for:!0,"data-svelte-h":!0}),P(Q)!=="svelte-r6rd2z"&&(Q.textContent=z),je=y(Ge),he=p(Ge,"INPUT",{type:!0,class:!0}),Ge.forEach(v),Fe.forEach(v),Ae=y(j),V&&V.l(j),M=y(j),de=p(j,"DIV",{class:!0});var st=$(de);K=p(st,"P",{class:!0});var Je=$(K);R=p(Je,"LABEL",{for:!0,"data-svelte-h":!0}),P(R)!=="svelte-1hxqr7r"&&(R.textContent=E),A=y(Je),T=p(Je,"INPUT",{type:!0,class:!0}),Je.forEach(v),st.forEach(v),j.forEach(v),this.h()},h(){f(t,"class","item-name svelte-1jnygz9"),f(i,"class","item-actions svelte-1jnygz9"),f(l,"class","item-title svelte-1jnygz9"),f(_,"for","check-interval"),I.disabled=!0,f(I,"type","textarea"),I.value=a[5],f(I,"class","svelte-1jnygz9"),f(b,"class","section-1-item svelte-1jnygz9"),f(w,"class","section svelte-1jnygz9"),f(H,"for","notification-message"),G.disabled=!0,f(G,"type","textarea"),G.value=fe=a[0].notificationMessage,f(G,"class","svelte-1jnygz9"),f(U,"class","section-2-item svelte-1jnygz9"),f(X,"class","section svelte-1jnygz9"),f(q,"for","content"),f(F,"target","_blank"),f(F,"rel","noopener noreferrer"),f(F,"href",te=a[0].url),f(Z,"class","section-3-item svelte-1jnygz9"),f(Y,"class","section svelte-1jnygz9"),f(ne,"for","last-check"),ae.disabled=!0,f(ae,"type","textarea"),ae.value=a[3],f(ae,"class","svelte-1jnygz9"),f(le,"class","section-4-item svelte-1jnygz9"),f(Q,"for","last-update"),he.disabled=!0,f(he,"type","textarea"),he.value=a[4],f(he,"class","svelte-1jnygz9"),f(oe,"class","section-4-item svelte-1jnygz9"),f(J,"class","section svelte-1jnygz9"),f(R,"for","last-update"),T.disabled=!0,f(T,"type","textarea"),T.value=N=a[0].lastContent,f(T,"class","svelte-1jnygz9"),f(K,"class","section-3-item svelte-1jnygz9"),f(de,"class","section svelte-1jnygz9"),f(e,"class","item svelte-1jnygz9")},m(x,j){L(x,e,j),u(e,l),u(l,t),u(t,r),u(l,o),u(l,i),Ce(s,i,null),u(i,c),Ce(h,i,null),u(e,C),u(e,w),u(w,b),u(b,_),u(b,g),u(b,I),u(e,W),u(e,X),u(X,U),u(U,H),u(U,Ee),u(U,G),u(e,re),u(e,Y),u(Y,Z),u(Z,q),u(Z,Le),u(Z,F),u(F,me),u(Y,Ue),B&&B.m(Y,null),u(e,we),u(e,J),u(J,le),u(le,ne),u(le,Se),u(le,ae),u(J,$e),u(J,oe),u(oe,Q),u(oe,je),u(oe,he),u(e,Ae),V&&V.m(e,null),u(e,M),u(e,de),u(de,K),u(K,R),u(K,A),u(K,T),S=!0},p(x,j){(!S||j&1)&&n!==(n=x[0].name+"")&&Ie(r,n),(!S||j&1&&fe!==(fe=x[0].notificationMessage)&&G.value!==fe)&&(G.value=fe),(!S||j&1)&&_e!==(_e=x[0].url+"")&&Ie(me,_e),(!S||j&1&&te!==(te=x[0].url))&&f(F,"href",te),x[0].watchType==="CSS"?B?(B.p(x,j),j&1&&D(B,1)):(B=mt(x),B.c(),D(B,1),B.m(Y,null)):B&&(De(),O(B,1,1,()=>{B=null}),Ne()),x[0].lastErrorDateUnix?V?V.p(x,j):(V=bt(x),V.c(),V.m(e,M)):V&&(V.d(1),V=null),(!S||j&1&&N!==(N=x[0].lastContent)&&T.value!==N)&&(T.value=N)},i(x){S||(D(s.$$.fragment,x),D(h.$$.fragment,x),D(B),S=!0)},o(x){O(s.$$.fragment,x),O(h.$$.fragment,x),O(B),S=!1},d(x){x&&v(e),ke(s),ke(h),B&&B.d(),V&&V.d()}}}function mt(a){let e,l,t,n,r,o,i,s;return n=new Wt({props:{content:a[0].cssSelector}}),{c(){e=d("p"),l=d("label"),t=pe(`CSS selector
                        `),be(n.$$.fragment),r=k(),o=d("input"),this.h()},l(c){e=p(c,"P",{class:!0});var h=$(e);l=p(h,"LABEL",{for:!0});var C=$(l);t=ve(C,`CSS selector
                        `),ge(n.$$.fragment,C),C.forEach(v),r=y(h),o=p(h,"INPUT",{type:!0,class:!0}),h.forEach(v),this.h()},h(){f(l,"for","css-selector"),o.disabled=!0,f(o,"type","textarea"),o.value=i=a[0].cssSelector,f(o,"class","svelte-1jnygz9"),f(e,"class","section-3-item svelte-1jnygz9")},m(c,h){L(c,e,h),u(e,l),u(l,t),Ce(n,l,null),u(e,r),u(e,o),s=!0},p(c,h){const C={};h&1&&(C.content=c[0].cssSelector),n.$set(C),(!s||h&1&&i!==(i=c[0].cssSelector)&&o.value!==i)&&(o.value=i)},i(c){s||(D(n.$$.fragment,c),s=!0)},o(c){O(n.$$.fragment,c),s=!1},d(c){c&&v(e),ke(n)}}}function bt(a){let e,l,t,n="Last error",r,o,i,s,c,h,C="Last error message",w,b,_;return{c(){e=d("div"),l=d("p"),t=d("label"),t.textContent=n,r=k(),o=d("input"),s=k(),c=d("p"),h=d("label"),h.textContent=C,w=k(),b=d("input"),this.h()},l(m){e=p(m,"DIV",{class:!0});var g=$(e);l=p(g,"P",{class:!0});var I=$(l);t=p(I,"LABEL",{for:!0,"data-svelte-h":!0}),P(t)!=="svelte-1h8ip7h"&&(t.textContent=n),r=y(I),o=p(I,"INPUT",{type:!0,class:!0}),I.forEach(v),s=y(g),c=p(g,"P",{class:!0});var W=$(c);h=p(W,"LABEL",{for:!0,"data-svelte-h":!0}),P(h)!=="svelte-x18p73"&&(h.textContent=C),w=y(W),b=p(W,"INPUT",{type:!0,class:!0}),W.forEach(v),g.forEach(v),this.h()},h(){f(t,"for","last-check"),o.disabled=!0,f(o,"type","textarea"),o.value=i=a[2](a[0].lastErrorDateUnix),f(o,"class","svelte-1jnygz9"),f(l,"class","section-4-item svelte-1jnygz9"),f(h,"for","last-update"),b.disabled=!0,f(b,"type","textarea"),b.value=_=a[0].lastErrorMessage,f(b,"class","svelte-1jnygz9"),f(c,"class","section-4-item svelte-1jnygz9"),f(e,"class","section error-section svelte-1jnygz9")},m(m,g){L(m,e,g),u(e,l),u(l,t),u(l,r),u(l,o),u(e,s),u(e,c),u(c,h),u(c,w),u(c,b)},p(m,g){g&1&&i!==(i=m[2](m[0].lastErrorDateUnix))&&o.value!==i&&(o.value=i),g&1&&_!==(_=m[0].lastErrorMessage)&&b.value!==_&&(b.value=_)},d(m){m&&v(e)}}}function ll(a){let e,l,t=a[1]&&_t(a);return{c(){t&&t.c(),e=ue()},l(n){t&&t.l(n),e=ue()},m(n,r){t&&t.m(n,r),L(n,e,r),l=!0},p(n,[r]){n[1]?t?(t.p(n,r),r&2&&D(t,1)):(t=_t(n),t.c(),D(t,1),t.m(e.parentNode,e)):t&&(De(),O(t,1,1,()=>{t=null}),Ne())},i(n){l||(D(t),l=!0)},o(n){O(t),l=!1},d(n){n&&v(e),t&&t.d(n)}}}function nl(a,e,l){let t;Ke(a,Ze,b=>l(1,t=b));const n=Ye();let{watcher:r}=e;const o=b=>{const _=new Date(b*1e3);return _.toLocaleDateString()+" "+_.toLocaleTimeString()},i=r.lastCheckDateUnix===0?"Never checked before":o(r.lastCheckDateUnix),s=r.lastUpdateDateUnix===0?"Never changed":o(r.lastUpdateDateUnix),c=Mt.fromMillis(r.checkIntervalSeconds*1e3).rescale().toHuman(),h=async()=>{if(!r.id){console.error("id must be defined");return}try{await Ht(r.id),n("delete")}catch(b){const _=`<strong>Watcher not deleted</strong><br/> ${b.message}`;Et.push(_,{theme:{"--toastBarBackground":"#FF0000"}})}},C=async b=>{await qt({watcherId:r.id,setToEnabled:b.detail==="on"}),n("update")};let w=r.archivalDateUnix?"off":"on";return a.$$set=b=>{"watcher"in b&&l(0,r=b.watcher)},[r,t,o,i,s,c,h,C,w]}class al extends Be{constructor(e){super(),xe(this,e,nl,ll,Te,{watcher:0})}}function gt(a,e,l){const t=a.slice();return t[5]=e[l],t}function Ct(a){let e,l;return e=new al({props:{watcher:a[5]}}),e.$on("delete",a[3]),e.$on("update",a[4]),{c(){be(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,n){Ce(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.watcher=t[5]),e.$set(r)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function sl(a){let e,l,t=Pe(a[0].sort(a[2])),n=[];for(let o=0;o<t.length;o+=1)n[o]=Ct(gt(a,t,o));const r=o=>O(n[o],1,1,()=>{n[o]=null});return{c(){e=d("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=p(o,"DIV",{class:!0});var i=$(e);for(let s=0;s<n.length;s+=1)n[s].l(i);i.forEach(v),this.h()},h(){f(e,"class","container svelte-c8nodu")},m(o,i){L(o,e,i);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);l=!0},p(o,[i]){if(i&7){t=Pe(o[0].sort(o[2]));let s;for(s=0;s<t.length;s+=1){const c=gt(o,t,s);n[s]?(n[s].p(c,i),D(n[s],1)):(n[s]=Ct(c),n[s].c(),D(n[s],1),n[s].m(e,null))}for(De(),s=t.length;s<n.length;s+=1)r(s);Ne()}},i(o){if(!l){for(let i=0;i<t.length;i+=1)D(n[i]);l=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)O(n[i]);l=!1},d(o){o&&v(e),Xe(n,o)}}}function rl(a,e,l){let{watchers:t}=e;const n=Ye(),r=(s,c)=>s.archivalDateUnix===null&&c.archivalDateUnix!==null?-1:s.archivalDateUnix!==null&&c.archivalDateUnix===null?1:c.id-s.id,o=()=>n("delete"),i=()=>n("update");return a.$$set=s=>{"watchers"in s&&l(0,t=s.watchers)},[t,n,r,o,i]}class ol extends Be{constructor(e){super(),xe(this,e,rl,sl,Te,{watchers:0})}}function il(a){let e,l;return e=new yt({props:{item:{level:"info",header:"Login to list the watchers"}}}),{c(){be(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,n){Ce(e,t,n),l=!0},p:ce,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function cl(a){let e,l="Create a new watcher",t,n,r="Add an entry",o,i,s="Watchers",c,h,C,w,b,_,m={ctx:a,current:null,token:null,hasCatch:!0,pending:hl,then:fl,catch:ul,value:4,error:5,blocks:[,,,]};return ot(C=a[0],m),{c(){e=d("h2"),e.textContent=l,t=k(),n=d("button"),n.textContent=r,o=k(),i=d("h2"),i.textContent=s,c=k(),h=ue(),m.block.c()},l(g){e=p(g,"H2",{"data-svelte-h":!0}),P(e)!=="svelte-1syw717"&&(e.textContent=l),t=y(g),n=p(g,"BUTTON",{"data-svelte-h":!0}),P(n)!=="svelte-10yn9w3"&&(n.textContent=r),o=y(g),i=p(g,"H2",{"data-svelte-h":!0}),P(i)!=="svelte-19rsvuf"&&(i.textContent=s),c=y(g),h=ue(),m.block.l(g)},m(g,I){L(g,e,I),L(g,t,I),L(g,n,I),L(g,o,I),L(g,i,I),L(g,c,I),L(g,h,I),m.block.m(g,m.anchor=I),m.mount=()=>h.parentNode,m.anchor=h,w=!0,b||(_=ie(n,"click",a[3]),b=!0)},p(g,I){a=g,m.ctx=a,I&1&&C!==(C=a[0])&&ot(C,m)||At(m,a,I)},i(g){w||(D(m.block),w=!0)},o(g){for(let I=0;I<3;I+=1){const W=m.blocks[I];O(W)}w=!1},d(g){g&&(v(e),v(t),v(n),v(o),v(i),v(c),v(h)),m.block.d(g),m.token=null,m=null,b=!1,_()}}}function ul(a){let e,l="Something went wrong",t,n,r=JSON.stringify(a[5])+"",o;return{c(){e=d("p"),e.textContent=l,t=k(),n=d("p"),o=pe(r)},l(i){e=p(i,"P",{"data-svelte-h":!0}),P(e)!=="svelte-171fb2d"&&(e.textContent=l),t=y(i),n=p(i,"P",{});var s=$(n);o=ve(s,r),s.forEach(v)},m(i,s){L(i,e,s),L(i,t,s),L(i,n,s),u(n,o)},p(i,s){s&1&&r!==(r=JSON.stringify(i[5])+"")&&Ie(o,r)},i:ce,o:ce,d(i){i&&(v(e),v(t),v(n))}}}function fl(a){let e,l;return e=new ol({props:{watchers:a[4]}}),e.$on("delete",a[2]),e.$on("update",a[2]),{c(){be(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,n){Ce(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.watchers=t[4]),e.$set(r)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function hl(a){let e,l="Loading data";return{c(){e=d("p"),e.textContent=l},l(t){e=p(t,"P",{"data-svelte-h":!0}),P(e)!=="svelte-ezyzhc"&&(e.textContent=l)},m(t,n){L(t,e,n)},p:ce,i:ce,o:ce,d(t){t&&v(e)}}}function dl(a){let e,l,t,n;const r=[cl,il],o=[];function i(s,c){return s[1]?0:1}return e=i(a),l=o[e]=r[e](a),{c(){l.c(),t=ue()},l(s){l.l(s),t=ue()},m(s,c){o[e].m(s,c),L(s,t,c),n=!0},p(s,[c]){let h=e;e=i(s),e===h?o[e].p(s,c):(De(),O(o[h],1,1,()=>{o[h]=null}),Ne(),l=o[e],l?l.p(s,c):(l=o[e]=r[e](s),l.c()),D(l,1),l.m(t.parentNode,t))},i(s){n||(D(l),n=!0)},o(s){O(l),n=!1},d(s){s&&v(t),o[e].d(s)}}}function pl(a,e,l){let t;Ke(a,Ze,i=>l(1,t=i)),Ot.set("Web Watchers");let n=it();const r=()=>l(0,n=it());return[n,t,r,()=>Dt(Qt,{onUpload:r})]}class Ll extends Be{constructor(e){super(),xe(this,e,pl,dl,Te,{})}}export{Ll as component,Il as universal};
