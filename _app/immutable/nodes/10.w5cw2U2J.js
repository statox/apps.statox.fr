import{s as A,a as g,f as w,l as P,c as b,g as y,h as C,d as o,m as S,M as T,j as _,F as B,k as U,i as r,G as j,w as k,n as O,A as V,o as D}from"../chunks/scheduler.JOg8NEYR.js";import{S as N,i as G,b as H,d as W,m as q,a as F,t as L,e as R}from"../chunks/index.LkMwavup.js";import{M as z}from"../chunks/Main.aSKv4q5N.js";function J(m){let s,p,e,d,l,c=m[0]?"show src":"hide src",h,i,n,E="Capture",$,u,I,f,v,x,M;return s=new z({props:{title:"Pot",description:"A WIP honey pot",iconPath:"/pot.png"}}),{c(){H(s.$$.fragment),p=g(),e=w("video"),d=g(),l=w("button"),h=P(c),i=g(),n=w("button"),n.textContent=E,$=g(),u=w("canvas"),I=g(),f=w("img"),this.h()},l(t){W(s.$$.fragment,t),p=b(t),e=y(t,"VIDEO",{id:!0,class:!0}),C(e).forEach(o),d=b(t),l=y(t,"BUTTON",{});var a=C(l);h=S(a,c),a.forEach(o),i=b(t),n=y(t,"BUTTON",{id:!0,"data-svelte-h":!0}),T(n)!=="svelte-j87h5p"&&(n.textContent=E),$=b(t),u=y(t,"CANVAS",{id:!0,style:!0}),C(u).forEach(o),I=b(t),f=y(t,"IMG",{id:!0,alt:!0}),this.h()},h(){_(e,"id","video"),e.autoplay=!0,e.playsInline=!0,_(e,"class","svelte-17nkj1a"),B(e,"hidden",m[0]),_(n,"id","capture"),_(u,"id","canvas"),U(u,"display","none"),_(f,"id","photo"),_(f,"alt","The captured photo will appear in this box.")},m(t,a){q(s,t,a),r(t,p,a),r(t,e,a),r(t,d,a),r(t,l,a),j(l,h),r(t,i,a),r(t,n,a),r(t,$,a),r(t,u,a),r(t,I,a),r(t,f,a),v=!0,x||(M=[k(l,"click",m[2]),k(n,"click",m[1])],x=!0)},p(t,[a]){(!v||a&1)&&B(e,"hidden",t[0]),(!v||a&1)&&c!==(c=t[0]?"show src":"hide src")&&O(h,c)},i(t){v||(F(s.$$.fragment,t),v=!0)},o(t){L(s.$$.fragment,t),v=!1},d(t){t&&(o(p),o(e),o(d),o(l),o(i),o(n),o($),o(u),o(I),o(f)),R(s,t),x=!1,V(M)}}}function K(m,s,p){let e,d;const l=()=>{const i=document.getElementById("canvas");if(!i)throw new Error("canvas not available");const n=i.getContext("2d");if(e=document.getElementById("video"),d=document.getElementById("photo"),!n)throw new Error("no context available");if(!d||!e)throw new Error("no photo or video available");n.drawImage(e,0,0,e.videoWidth,e.videoHeight,0,0,i.width,i.height);var E=i.toDataURL("image/png");d.setAttribute("src",E)};let c=!0;const h=()=>p(0,c=!c);return D(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then(function(i){e=document.getElementById("video"),e.srcObject=i}).catch(function(i){console.error("Error accessing media devices.",i)})}),[c,l,h]}class Z extends N{constructor(s){super(),G(this,s,K,J,A,{})}}export{Z as component};
