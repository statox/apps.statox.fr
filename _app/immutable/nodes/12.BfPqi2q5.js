import"../chunks/NZTpNUN0.js";import"../chunks/DuPUj2a-.js";import{p as O,h as l,Y as ie,b as p,s as r,g as t,i as s,t as z,a as n,d as Y,e as f,r as u,n as D,f as le,j as ne}from"../chunks/DgoBSJc-.js";import{i as ce}from"../chunks/CDb9fPsg.js";import"../chunks/Cs7NvGAu.js";import{p as fe}from"../chunks/hqaMbjU1.js";/* empty css                */import{u as ue}from"../chunks/b4YYT05T.js";import{d as pe}from"../chunks/CEmcvi-N.js";import{e as me,i as de}from"../chunks/CM6o1U-z.js";import{i as k}from"../chunks/v9wTuNyK.js";import{r as H}from"../chunks/BobObAPF.js";import{s as ve}from"../chunks/Cl-9avSH.js";import{b as N,d as be}from"../chunks/BoL4DXBn.js";import{b as ge}from"../chunks/BIQ4GWrd.js";import{s as _e,a as he}from"../chunks/B3zh8tvr.js";import{A as ye,U as xe}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{t as ke}from"../chunks/CbMfUzwz.js";import{M as Me}from"../chunks/BzNtkXvw.js";import{M as Se}from"../chunks/I4gp5Djb.js";import{M as Pe}from"../chunks/Da9fXhtz.js";import{u as Ue}from"../chunks/Do2kYWHR.js";import{g as we}from"../chunks/LPT7FAYe.js";var Ae=p('Public <i class="fas fa-lock-open"></i>',1),Ce=p('Private <i class="fas fa-lock"></i>',1),Ie=p('<i class="sucess-indicator fas fa-check svelte-5gxvc6"></i>'),Te=p('<button class="form-action"><!></button> <!>',1),Ee=p('<span class="form-action">Login to upload an entry</span>'),Fe=p('<div class="contents svelte-5gxvc6"><h4 class="title-bar svelte-5gxvc6">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-5gxvc6"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-5gxvc6" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Le(M,b){O(b,!0);const S=()=>he(ue,"$user",q),[q,G]=_e();let c=l(ie([])),g=l(""),_=l(""),h=l(void 0),m=l(void 0),d=l(!1),y=l(0),v=l(!1),P=l(!1);const J=async()=>{if(s(c,[],!0),t(g)?.length||t(c).push({level:"error",header:"name must be defined"}),t(y)<0&&t(c).push({level:"error",header:"TTL must be positive"}),t(c).length)return;let e;if(t(m)&&t(m).length&&(e=t(m)[0]||void 0),!t(_)?.length&&!e){t(c).push({level:"error",header:"Either content or file must be defined"});return}try{s(v,!0),s(P,!1),await Ue({name:t(g),content:t(_),ttlSeconds:t(y),isPublic:t(d),file:e}),s(v,!1),b.onUpload(),s(P,!0)}catch(a){s(v,!1);let i=a.message;a instanceof ye&&a.code===401?i="Invalid logged in user":a instanceof xe&&(i="User is logged out");const F=`<strong>Entry not created</strong><br/> ${i}`;ke.push(F,{theme:{"--toastBarBackground":"#FF0000"}})}},K=()=>{we("/clipboard/")};var U=Fe(),w=f(U),Q=r(f(w));Q.__click=K,u(w);var B=r(w,2);me(B,17,()=>t(c),de,(e,a)=>{Se(e,{get item(){return t(a)}})});var A=r(B,2),C=r(f(A),2);H(C);var I=r(C,4);H(I);var T=r(I,4),E=f(T);ge(E,e=>s(h,e),()=>t(h));var R=r(E,2);R.__click=()=>{t(h)!==void 0&&(t(h).value="")},u(T);var $=r(T,4);Pe($,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(y)},set valueInSeconds(e){s(y,e,!0)}});var x=r($,4);let j;x.__click=()=>s(d,!t(d));var V=f(x);{var W=e=>{var a=Ae();D(),n(e,a)},X=e=>{var a=Ce();D(),n(e,a)};k(V,e=>{t(d)?e(W):e(X,!1)})}u(x),u(A);var Z=r(A,2);{var ee=e=>{var a=Te(),i=le(a);i.__click=J;var F=f(i);{var ae=o=>{Me(o,{size:.5,unit:"em",durationSeconds:.5})},se=o=>{var L=ne("Submit");n(o,L)};k(F,o=>{t(v)?o(ae):o(se,!1)})}u(i);var re=r(i,2);{var oe=o=>{var L=Ie();n(o,L)};k(re,o=>{t(P)&&o(oe)})}z(()=>i.disabled=t(v)),n(e,a)},te=e=>{var a=Ee();n(e,a)};k(Z,e=>{S()?e(ee):e(te,!1)})}u(U),z(()=>j=ve(x,1,"visibility-status svelte-5gxvc6",null,j,{"visibility-public":t(d)})),N(C,()=>t(g),e=>s(g,e)),N(I,()=>t(_),e=>s(_,e)),be(E,()=>t(m),e=>s(m,e)),n(M,U),Y(),G()}pe(["click"]);function ot(M,b){O(b,!1);const S={name:"Clipboard",description:"My universal clipboard app",iconPath:"/clipboard.png",showAuthInHeader:!0};fe.set(S),ce(),Le(M,{onUpload:()=>console.log("new entry created")}),Y()}export{ot as component};
