import"../chunks/NZTpNUN0.js";import"../chunks/BE8VNsya.js";import{x as $,o as b,C as r,p as u,E as i,w as x,u as n,aE as o,a as N,B,g as _,ar as P,f as T}from"../chunks/CF3vMb2z.js";import{a as ta}from"../chunks/CQaHvcsC.js";import{i as j}from"../chunks/ChdFyB-P.js";import"../chunks/TUWHzwli.js";import"../chunks/BvKoZoel.js";import{A as s,g as na}from"../chunks/SNkCvy0f.js";import{a as O,D as W}from"../chunks/DTyfSRsR.js";import{M as oa}from"../chunks/B6rmGegZ.js";import{p as ra}from"../chunks/gkz-prKY.js";import{M as q}from"../chunks/Da_oIgHK.js";import{s as w}from"../chunks/CK0MUMJY.js";import{s as I,c as ia}from"../chunks/Cjffvopl.js";import{p as C}from"../chunks/C5O5w8Lb.js";import{i as sa}from"../chunks/DhdTNEOV.js";import{e as z,i as Q}from"../chunks/zmj_gju8.js";const D=e=>{if(e===s.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(e===s.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(e===s.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(e===s.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(e===s.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(e===s.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(e===s.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(e===s.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},X=e=>{if(e===s.NEW)return"moon_phase_icons/1_new_moon.png";if(e===s.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(e===s.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(e===s.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(e===s.FULL)return"moon_phase_icons/5_full_moon.png";if(e===s.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(e===s.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(e===s.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},ma=async()=>{const e=await na(),{moonState:f,sunState:a,upcomingLunarStates:t}=e;return{moonState:f,sunState:{goldenHour:W.fromMillis(a.goldenHour),solarNoon:W.fromMillis(a.solarNoon),sunrise:W.fromMillis(a.sunrise),sunset:W.fromMillis(a.sunset),dayLength:O.fromMillis(a.dayLengthMs),dayLengthDiff:O.fromMillis(a.dayLengthDiffMs)},upcomingLunarStates:t.map(l=>({date:W.fromMillis(l.tsMillis),lunarState:{...l.lunarState,phasePictureUrl:D(l.lunarState.moonPhase)}}))}};var pa=b('<div class="container svelte-1mhy40n"><div class="content svelte-1mhy40n"><div class="data svelte-1mhy40n"><span><i class="fas fa-moon" aria-hidden="true"></i></span> <span></span> <span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span><i class="fas fa-sun" aria-hidden="true"></i></span> <span></span> <span>Sun rise/set</span> <span> </span> <span>DayLength</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-1mhy40n"/></div></div>');function da(e,f){$(f,!1);let a=C(f,"moonState",8),t=C(f,"sunState",8);j();var l=pa(),A=r(l),v=r(A),m=u(r(v),6),p=r(m,!0);i(m);var g=u(m,4),d=r(g);i(g);var h=u(g,4),L=r(h);i(h);var S=u(h,8),E=r(S);i(S);var y=u(S,4),F=r(y);i(y);var c=u(y,4),M=r(c,!0);i(c);var k=u(c,4),U=r(k,!0);i(k),i(v);var R=u(v,2);i(A),i(l),x((G,H,V,K,J,Y,Z,aa,ea)=>{w(p,(o(a()),n(()=>a().moonPhaseFr))),w(d,`${G??""} days (${H??""}%)`),w(L,`${o(a()),n(()=>a().moonVisibilityWindow[0])??""} - ${o(a()),n(()=>a().moonVisibilityWindow[1])??""}`),w(E,`${V??""} - ${K??""}`),w(F,`${J??""}
                (${o(t()),n(()=>t().dayLengthDiff>0?"+":"")??""}${Y??""})`),w(M,Z),w(U,aa),I(R,"alt",(o(a()),n(()=>a().moonPhase))),I(R,"src",ea)},[()=>(o(a()),n(()=>a().lunarAge.toFixed(1))),()=>(o(a()),n(()=>(a().lunarAgePercent*100).toFixed(0))),()=>(o(t()),n(()=>t().sunrise.toFormat("HH:mm"))),()=>(o(t()),n(()=>t().sunset.toFormat("HH:mm"))),()=>(o(t()),n(()=>t().dayLength.toFormat("h:m"))),()=>(o(t()),n(()=>t().dayLengthDiff.toFormat("m:s"))),()=>(o(t()),n(()=>t().solarNoon.toFormat("HH:mm"))),()=>(o(t()),n(()=>t().goldenHour.toFormat("HH:mm"))),()=>(o(D),o(a()),n(()=>D(a().moonPhase)))]),N(e,l),B()}var _a=b('<div class="day-header svelte-1baztfi"> </div>'),ua=b("<div> </div> <div> </div>",1),la=b('<div><div><img class="phase-img svelte-1baztfi"/></div> <!></div>'),va=b('<div class="container svelte-1baztfi"><!> <!></div>');function ga(e,f){$(f,!1);let a=C(f,"upcomingLunarStates",8);j();var t=va(),l=r(t);z(l,1,()=>(o(a()),n(()=>a().slice(0,7))),Q,(v,m)=>{let p=()=>_(m).date;var g=_a(),d=r(g,!0);i(g),x(h=>w(d,h),[()=>(p(),n(()=>p().setLocale("fr").toLocaleString({weekday:"long"})))]),N(v,g)});var A=u(l,2);z(A,1,a,Q,(v,m,p)=>{let g=()=>_(m).date,d=()=>_(m).lunarState;const h=P(()=>(o(a()),d(),n(()=>p===0||p===29||a()[p-1].lunarState.moonPhaseFr!==d().moonPhaseFr)));var L=la(),S=r(L),E=r(S);i(S);var y=u(S,2);{var F=c=>{var M=ua(),k=T(M),U=r(k,!0);i(k);var R=u(k,2),G=r(R,!0);i(R),x(H=>{w(U,H),w(G,(d(),n(()=>d().moonPhaseFr)))},[()=>(g(),n(()=>g().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})))]),N(c,M)};sa(y,c=>{_(h)&&c(F)})}i(L),x(c=>{ia(L,1,`entry ${_(h)?"important-day":"other-day"}`,"svelte-1baztfi"),I(E,"alt",(d(),n(()=>d().moonPhase))),I(E,"src",c)},[()=>(o(X),d(),n(()=>X(d().moonPhase)))]),N(v,L)}),i(t),N(e,t),B()}var ca=b("<!> <br/> <!> <br/> <!>",1),fa=b("<p>Loading ephemerides data</p>"),ha=b('<!> <div class="content"><!></div>',1);function Ga(e,f){$(f,!1),ra.set("Ephemerides"),j();var a=ha(),t=T(a);oa(t,{title:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"});var l=u(t,2),A=r(l);ta(A,ma,v=>{var m=fa();N(v,m)},(v,m)=>{var p=P(()=>{var{moonState:F,sunState:c,upcomingLunarStates:M}=_(m);return{moonState:F,sunState:c,upcomingLunarStates:M}}),g=P(()=>_(p).moonState),d=P(()=>_(p).sunState),h=P(()=>_(p).upcomingLunarStates),L=ca(),S=T(L);da(S,{get moonState(){return _(g)},get sunState(){return _(d)}});var E=u(S,4);ga(E,{get upcomingLunarStates(){return _(h)}});var y=u(E,4);q(y,{item:{level:"info",message:"All data is computed for Paris, France"}}),N(v,L)},(v,m)=>{{let p=P(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:_(m)}));q(v,{get item(){return _(p)}})}}),i(l),N(e,a),B()}export{Ga as component};
