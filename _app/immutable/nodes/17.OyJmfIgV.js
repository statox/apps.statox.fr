import"../chunks/disclose-version.Bg9kRutz.js";import{p as X,aN as oe,g as r,aV as ae,aF as _,aG as l,n as q,aH as F,s as G,w as N,v as H,x as ne,k as W,o as ce,aa as ge}from"../chunks/index-client.JlBVMNcv.js";import{s as E}from"../chunks/render.D0Buk_M8.js";import{i as U}from"../chunks/if.5fMxmT3W.js";import{k as me}from"../chunks/key.DIKDtvG9.js";import{e as K,i as z}from"../chunks/each.Ew_1-Ryx.js";import{a as M,t as j,f as $,e as se}from"../chunks/template.BbMWxsdt.js";import{p as R}from"../chunks/proxy.DxHtXs8G.js";import{b as te}from"../chunks/select.CqD-i1Ww.js";import"../chunks/legacy.B7sduY7i.js";import{p as ve}from"../chunks/Main.svelte_svelte_type_style_lang.BLmcNCB_.js";import{p as re}from"../chunks/props.C_baSvAk.js";import{P as ie}from"../chunks/P5.C3V8DZJH.js";import{s as he}from"../chunks/style.PwPRnE0L.js";import{m as fe}from"../chunks/Modals.DMm-y1C7.js";const O=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],ee=p=>{if(p<1||p>7)throw new Error(`Unkown degree ${p}`);return["I","II","III","IV","V","VI","VII"][p-1]};var ue=j('<div class="d-flex justify-content-center"><!></div>');function _e(p,o){X(o,!0);let d=F(void 0),x=re(o,"labelMode",3,"name");const m=["C","D","E","F","G","A","B"],y=["C#","D#","F#","G#","A#"],v=14,f=t=>{const I=[80,70,60,150],e=[80,70,60],a=t.width/v;for(let n=0;n<v;n++){const c=m[n%m.length];t.strokeWeight(1),t.stroke(I),t.noFill(),t.rect(a*n,0,a,t.height);const k=c+"#";y.includes(k)&&(t.fill(e),t.rect(a*n+2*a/3,0,a/2,t.height*.65))}},T=(t,I,e)=>{if(e==="name")return I;const a=t.indexOf(I);if(a===-1)throw new Error("note not in scale");return ee(a+1)},L=t=>{const I=t.width/v;for(let e=0;e<v;e++){const a=m[e%m.length],n=o.notesToDisplay.indexOf(a);if(n>=0){n===0?t.fill([250,80,80]):t.fill("black");const w=I*e+I/2,i=t.height*.8;t.circle(w,i,20),t.noStroke(),t.fill("white");const b=T(o.notesToDisplay,a,x());t.text(b,w-t.textWidth(b)/2,i+t.textSize()/2)}const c=a+"#",k=o.notesToDisplay.indexOf(c);if(k>=0){k===0?t.fill([250,80,80]):t.fill("black");const w=I*e+I,i=t.height*.5;t.circle(w,i,20),t.noStroke(),t.fill("white");const b=T(o.notesToDisplay,c,x());t.text(b,w-t.textWidth(b)/2,i+t.textSize()/2)}}},S=t=>{t.setup=()=>{G(d,R(t)),t.createCanvas(900,300),t.textStyle(t.BOLD)},t.draw=()=>{t.background([200,190,170]),f(t),L(t),t.noLoop()}};oe(()=>{var t;(o.notesToDisplay||x())&&((t=r(d))==null||t.draw())}),ae(()=>{var t;(t=r(d))==null||t.remove()});var h=ue(),B=_(h);ie(B,{sketch:S}),l(h),M(p,h),q()}var ye=j('<div class="d-flex justify-content-center"><!></div>');function be(p,o){X(o,!0);let d=F(void 0),x=re(o,"labelMode",3,"name");const m=["E","A","D","G","B","E"],y=15,v=m.map(e=>{const a=O.indexOf(e);if(a===-1)throw new Error(`Base ${e} not found`);const n=[e];for(let c=1;c<y;c++){const k=O[(a+c)%O.length];n.push(k)}return n}),f=30,T=e=>{const a=[80,70,60,150],n=e.height/6;for(let i=0;i<v.length;i++){const b=m[i],C=n*i+n/2;e.strokeWeight(1),e.stroke(a),e.noFill(),e.line(f,C,e.width,C),e.noStroke(),e.fill(a),e.text(b,5,e.height-C+e.textSize()/2)}e.strokeWeight(5),e.stroke(a),e.noFill(),e.line(f,n/2,f,e.height-n/2),e.strokeWeight(1);const c=e.width/v[0].length;for(let i=1;i<y;i++){const b=f+c*i;e.line(b,n/2,b,e.height-n/2)}const k=[3,5,7,9,15];for(const i of k){let{x:b,y:C}=h({string:2,fret:i});C-=n/2,e.fill(a),e.circle(b,C,10)}const w=[1,3];for(const i of w){let{x:b,y:C}=h({string:i,fret:12});C-=n/2,e.fill(a),e.circle(b,C,10)}},L=(e,a,n)=>{if(n==="name")return a;const c=e.indexOf(a);if(c===-1)throw new Error("note not in scale");return ee(c+1)},S=e=>{for(let a=0;a<6;a++){const n=v[a];for(let c=0;c<n.length;c++){const k=n[c];if(!o.notesToDisplay.includes(k))continue;const w={string:a,fret:c},{x:i,y:b}=h(w);o.notesToDisplay.indexOf(k)===0?e.fill([250,80,80]):e.fill("black"),e.circle(i,b,20),e.noStroke(),e.fill("white");const C=L(o.notesToDisplay,k,x());e.text(C,i-e.textWidth(C)/2,b+e.textSize()/2)}}},h=e=>{if(r(d)===void 0)throw new Error("P5 instance is undefined");const{string:a,fret:n}=e,c=r(d).height/6,k=c*(5-a)+c/2;if(n===0)return{x:f,y:k};const w=r(d).width/v[0].length;return{x:f+w*(n-1)+w*.5,y:k}},B=e=>{e.setup=()=>{G(d,R(e)),e.createCanvas(900,300),e.textStyle(e.BOLD)},e.draw=()=>{e.background([200,190,170]),T(e),S(e),e.noLoop()}};oe(()=>{var e;(o.notesToDisplay||x())&&((e=r(d))==null||e.draw())}),ae(()=>{var e;(e=r(d))==null||e.remove()});var t=ye(),I=_(t);ie(I,{sketch:B}),l(t),M(p,t),q()}var xe=(p,o)=>G(o,R(r(o)==="name"?"degree":"name")),ke=(p,o,d)=>G(o,(r(o)+1)%d.length),we=j('<h3>Instrument</h3> <div><button>C / IV</button> <button><i class="fas fa-guitar"></i> / <i class="fas fa-keyboard"></i></button></div> <!> <!>',1);function pe(p,o){X(o,!0);let d=F("name");const x=["neck","keyboard","both"];let m=F(0);var y=we(),v=N(H(y),2),f=_(v);f.__click=[xe,d];var T=N(f,2);T.__click=[ke,m,x],l(v);var L=N(v,2);{var S=t=>{be(t,{get notesToDisplay(){return o.notesToDisplay},get labelMode(){return r(d)}})};U(L,t=>{["neck","both"].includes(x[r(m)])&&t(S)})}var h=N(L,2);{var B=t=>{_e(t,{get notesToDisplay(){return o.notesToDisplay},get labelMode(){return r(d)}})};U(h,t=>{["keyboard","both"].includes(x[r(m)])&&t(B)})}M(p,y),q()}$(["click"]);var De=j(`<div role="dialog" class="modal svelte-5yv1o0"><div class="contents svelte-5yv1o0"><h4 class="title-bar svelte-5yv1o0">Chord Progressions <button>Close</button></h4> <div>This is a list of chord progressions I took from David Benett's videos and elsewhere
                too <ul><li><a href="https://www.youtube.com/watch?v=Vyc8lezaa9g" rel="noopener noreferrer" target="_blank">David Benett - 7 super common chord progressions and why they work</a></li> <li><a href="https://www.youtube.com/watch?v=v3YbEL-_eoI" rel="noopener noreferrer" target="_blank">David Benett - 6 more common chord progressions and why they work</a></li></ul> The user can change the tonic note in the "Scales" section and the progressions will
                change the actual chords to play.</div></div></div>`);function Se(p,o){var d=se(),x=H(d);{var m=y=>{var v=De(),f=_(v),T=_(f),L=N(_(T));L.__click=function(...S){var h;(h=o.close)==null||h.apply(this,S)},l(T),ne(2),l(f),l(v),M(y,v)};U(x,y=>{o.isOpen&&y(m)})}M(p,d)}$(["click"]);const Ie=[{name:"Axis progression",examples:["Let it be","Take on me","Someone like you","Don't step believin'","Can you feel the love tonight","Let it go"],chords:[{degree:1},{degree:5},{degree:6,minor:!0},{degree:4}]},{name:"Other axis progression",examples:["Numb - Linkin Park","Kids - MGMT","Africa - Toto","Rivers flow in you (piano thingy)","Complicated - Avril Lavigne","Grenade","San Francisco","Save tonight"],chords:[{degree:6,minor:!0},{degree:4},{degree:1},{degree:5}]},{name:"Third axis progression",examples:["What's my age again?","Umbrella - Rihanna","Dragosta Din Tei","Boulevard of broken dreams (chorus)","Alejandro - Lady Gaga"],chords:[{degree:4},{degree:1},{degree:5},{degree:6,minor:!0}]},{name:"Andalusian cadence",examples:["Hit the road Jack","Good vibrations - The Beach boys","Happy together","Vanina"],chords:[{degree:1,minor:!0},{degree:7,flat:!0},{degree:6,flat:!0},{degree:5}]},{name:"Aeolian vamp",examples:["Rolling in the deep","All along the watchtower","Stairway to heaven","My hear will go on","Somebody that I used to know"],chords:[{degree:1,minor:!0},{degree:7,flat:!0},{degree:6,flat:!0},{degree:7,flat:!0}]},{name:"Doo-Woop change",examples:["I will always love you","Crocodile rock","Let's twist again","Baby - Justin Bieber"],chords:[{degree:1},{degree:6,minor:!0},{degree:4},{degree:5}]},{name:"Major scale vamp",examples:["Your body is a wonderland","All the small things - Blink 182"],chords:[{degree:1},{degree:5},{degree:4},{degree:5}]},{name:"Mixolydyan vamp",examples:["Hey Jude (Lalalalaa)","Sympathy for the devil","Sweet child o' mine","Royals - Lorde","Sweet home Alabama"],chords:[{degree:1},{degree:7,flat:!0},{degree:4},{degree:5}]},{name:"pachelbel's cannon",chords:[{degree:1},{degree:5},{degree:6,minor:!0},{degree:3,minor:!0},{degree:4},{degree:1},{degree:4},{degree:5}]},{name:"Plagal cascade",examples:["Wonderwall","Boulevard of broken dreams (couplet)","Mad world","Pumped up kids","Radioactive - Imagine Dragons"],chords:[{degree:1,minor:!0},{degree:3,flat:!0},{degree:7,flat:!0},{degree:4}]},{name:`"Can't stop" progression`,examples:["Can't stop","Cant't hold us - Mackelmore & Ryan Lewis"],chords:[{degree:1,minor:!0},{degree:7,flat:!0},{degree:5,minor:!0},{degree:6,flat:!0}]},{name:'"Closing time" progression',examples:["Closing time - Semisonic","SOS - ABBA","Believe - Cher","All star (Shrek)"],chords:[{degree:1},{degree:5},{degree:2,minor:!0},{degree:4}]},{name:'"More than a feeling" progression',examples:["More than a feeling","Mr Brightside - The Killers"],chords:[{degree:1},{degree:4},{degree:6,minor:!0},{degree:5}]},{name:"Classic blues slow change",chords:[{degree:1},{degree:1},{degree:1},{degree:1},{degree:4},{degree:4},{degree:1},{degree:1},{degree:5},{degree:4},{degree:1},{degree:5}]},{name:"Classic blues quick change",chords:[{degree:1},{degree:4},{degree:1},{degree:1},{degree:4},{degree:4},{degree:1},{degree:1},{degree:5},{degree:4},{degree:1},{degree:5}]},{name:"Classic rock",chords:[{degree:1},{degree:4},{degree:1},{degree:1},{degree:4},{degree:4},{degree:1},{degree:1},{degree:5},{degree:5},{degree:1},{degree:1}]}];var Ce=()=>fe.open(Se),Ne=j("<span><b>Examples:</b> </span>"),Te=j('<div class="progression-step"><div class="step-degree svelte-1p3ym4z"> </div> <div class="step-value svelte-1p3ym4z"> </div></div>'),Be=j('<div><h4> </h4> <!> <div class="progression-table svelte-1p3ym4z"></div></div> <br>',1),Me=j('<h3>Chord Progressions <span><button aria-label="info"><i class="fa fa-info-circle" aria-hidden="true"></i></button></span></h3> <!>',1);function je(p,o){X(o,!0);let d=re(o,"scaleNotes",19,()=>[]);const x=S=>{let h=ee(S.degree);return S.minor&&(h=h.toLowerCase()),S.flat&&(h="b"+h),h},m=S=>{const h=d()[S.degree-1];let B=O.indexOf(h);S.flat&&(B--,B===-1&&(B=O.length-1));let t=O[B];return S.minor&&(t+="m"),t};var y=Me(),v=H(y),f=N(_(v)),T=_(f);T.__click=[Ce],he(T,"position","relative"),l(f),l(v);var L=N(v,2);K(L,17,()=>Ie,z,(S,h)=>{var B=Be(),t=H(B),I=_(t),e=_(I,!0);l(I);var a=N(I,2);{var n=k=>{var w=Ne(),i=N(_(w));l(w),W(b=>E(i,` ${b??""}`),[()=>r(h).examples.join(", ")]),M(k,w)};U(a,k=>{r(h).examples&&k(n)})}var c=N(a,2);K(c,21,()=>r(h).chords,z,(k,w)=>{var i=Te(),b=_(i),C=_(b,!0);l(b);var Y=N(b,2),J=_(Y,!0);l(Y),l(i),W((Q,Z)=>{E(C,Q),E(J,Z)},[()=>x(r(w)),()=>m(r(w))]),M(k,i)}),l(c),l(t),ne(2),W(()=>E(e,r(h).name)),M(S,B)}),M(p,y),q()}$(["click"]);var Le=(p,o,d,x,m)=>o(r(d),r(x),r(m)),Ae=j("<option> </option>"),Oe=(p,o,d,x,m)=>o(r(d),r(x),r(m)),Ee=j("<option> </option>"),We=(p,o,d,x,m)=>o(r(d),r(x),r(m)),Fe=j("<option> </option>"),Ge=j('<th class="svelte-gg3pfu"> </th>'),Pe=j('<td class="svelte-gg3pfu"> </td>'),Ke=j('<table><thead><tr><th class="svelte-gg3pfu"><label for="tonicInput">Tonic</label></th><th class="svelte-gg3pfu"><label for="scaleInput">Scale</label></th><th class="svelte-gg3pfu"><label for="modeInput">mode</label></th></tr></thead><tbody><tr><td class="svelte-gg3pfu"><select id="tonicInput"></select></td><td class="svelte-gg3pfu"><select id="scaleInput"></select></td><td class="svelte-gg3pfu"><select id="modeInput"></select></td></tr></tbody></table> <br> <table><tbody><tr></tr><tr></tr></tbody></table> <!> <!>',1);function ot(p,o){X(o,!0),ve.set("Scales");const d=[{name:"Major",intervals:[2,2,1,2,2,2,1],chords:["major","minor","minor","diminished","major","minor","major"]},{name:"Natural minor",intervals:[2,1,2,2,1,2,2],chords:["minor","diminished","major","minor","major","major","minor"]},{name:"Pentatonic major",intervals:[2,2,3,2,3],chords:["major","minor","minor","major","minor"]},{name:"Pentatonic minor",intervals:[3,2,2,3,2],chords:["minor","major","minor","major","major"]}],x=[{name:"Ionian",degree:1},{name:"Dorian",degree:2},{name:"Phrygian",degree:3},{name:"Lydian",degree:4},{name:"Mixolydian",degree:5},{name:"Aeolian",degree:6},{name:"Locrian",degree:7}];let m=F("C"),y=F(R(d[0])),v=F(R(x[0])),f=F(R([]));const T=(u,g,s)=>{const{intervals:D}=g;G(f,R([u]));const A=O.indexOf(u);if(A===-1)throw new Error(`Tonic ${u} not found`);let P=A;for(const V of D)P=(P+V)%O.length,r(f).push(O[P]);r(f).pop();for(let V=1;V<s.degree;V++)r(f).push(r(f).shift())},L=(u,g)=>{let s=ee(u);return g==="minor"?s=s.toLowerCase():g==="diminished"&&(s+="°"),s},S=(u,g)=>{let s=u;return g==="minor"?s+="m":g==="diminished"&&(s+="°"),s};ce(()=>T(r(m),r(y),r(v)));var h=Ke(),B=H(h),t=N(_(B)),I=_(t),e=_(I),a=_(e);a.__change=[Le,T,m,y,v],K(a,21,()=>O,z,(u,g)=>{var s=Ae(),D={},A=_(s,!0);l(s),W(()=>{D!==(D=r(g))&&(s.value=(s.__value=r(g))==null?"":r(g)),E(A,r(g))}),M(u,s)}),l(a),l(e);var n=N(e),c=_(n);c.__change=[Oe,T,m,y,v],K(c,21,()=>d,z,(u,g)=>{var s=Ee(),D={},A=_(s,!0);l(s),W(()=>{D!==(D=r(g))&&(s.value=(s.__value=r(g))==null?"":r(g)),E(A,r(g).name)}),M(u,s)}),l(c),l(n);var w=N(n),i=_(w);i.__change=[We,T,m,y,v],K(i,21,()=>x,z,(u,g)=>{var s=Fe(),D={},A=_(s,!0);l(s),W(()=>{D!==(D=r(g))&&(s.value=(s.__value=r(g))==null?"":r(g)),E(A,r(g).name)}),M(u,s)}),l(i),l(w),l(I),l(t),l(B);var C=N(B,4),Y=_(C),J=_(Y);K(J,21,()=>r(y).chords,z,(u,g,s)=>{var D=Ge(),A=_(D,!0);l(D),W(P=>E(A,P),[()=>L(s+1,r(g))]),M(u,D)}),l(J);var Q=N(J);K(Q,21,()=>r(f),z,(u,g,s)=>{var D=Pe();const A=ge(()=>r(y).chords[s]);var P=_(D,!0);l(D),W(V=>E(P,V),[()=>S(r(g),r(A))]),M(u,D)}),l(Q),l(Y),l(C);var Z=N(C,2);pe(Z,{get notesToDisplay(){return r(f)}});var le=N(Z,2);{var de=u=>{var g=se(),s=H(g);me(s,()=>r(f),D=>{je(D,{get scaleNotes(){return r(f)}})}),M(u,g)};U(le,u=>{["Major","Natural minor"].includes(r(y).name)&&u(de)})}te(a,()=>r(m),u=>G(m,u)),te(c,()=>r(y),u=>G(y,u)),te(i,()=>r(v),u=>G(v,u)),M(p,h),q()}$(["change"]);export{ot as component};
