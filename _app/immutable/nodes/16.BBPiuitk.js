var ye=Object.defineProperty;var oe=l=>{throw TypeError(l)};var ze=(l,t,r)=>t in l?ye(l,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[t]=r;var Q=(l,t,r)=>ze(l,typeof t!="symbol"?t+"":t,r),Me=(l,t,r)=>t.has(l)||oe("Cannot "+r);var U=(l,t,r)=>(Me(l,t,"read from private field"),r?r.call(l):t.get(l)),ue=(l,t,r)=>t.has(l)?oe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(l):t.set(l,r);import"../chunks/CWj6FrbW.js";import{A as N,g as W,s as X,C as pe,p as Ee,aN as we,B as ke,E as S,w as a,k as Fe,n as xe,F as y,v as Be}from"../chunks/B6o_wv7S.js";import{s as Ce}from"../chunks/FKE68SDy.js";import{i as Ie}from"../chunks/Djwtjxlo.js";import{f as Le,t as ce,a as ve}from"../chunks/CYn10qqJ.js";import{r as s}from"../chunks/DP6z5guH.js";import{b as o}from"../chunks/CDqcD15-.js";import{b as Ne}from"../chunks/C4q3xt0n.js";import{M as We}from"../chunks/DUIqsoKf.js";import{P as Xe}from"../chunks/ySrA2UDQ.js";var z;class Ye{constructor(t,r){Q(this,"default");ue(this,z,N());Q(this,"key","");this.key=t,this.value=r,this.default=r;{const n=localStorage.getItem(t);n&&(this.value=this.deserialize(n))}pe(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return W(U(this,z))}set value(t){X(U(this,z),t,!0)}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(t){return JSON.stringify(t)}deserialize(t){return JSON.parse(t)}}z=new WeakMap;function i(l,t){return new Ye(l,t)}var Ze=ce('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1">',1),qe=ce('<div class="container svelte-shzjm9"><div id="canvas-container"><!></div> <div class="controls svelte-shzjm9"><label for="fps">FPS</label> <span> </span> <span>Grid controls</span><span></span> <label for="gridSize">gridSize</label> <input type="number" step="1"> <label for="blurEnabled">Enable blur</label> <!> <!> <span>Noise controls</span><span></span> <label for="displacementX">displacementX</label> <input type="number" step="0.01"> <label for="displacementY">displacementY</label> <input type="number" step="0.01"> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"> <span>Lines controls</span><span></span> <label for="levelsStart">levelsStart</label> <input type="number" step="0.1"> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option></select> <label for="resetAll">Reset all</label><button>Reset</button></div></div>');function $e(l,t){Ee(t,!0);let r=N(void 0),n=1e3,M=0,K=0,Y=0,ee=N(0);const u=i("p5-terrain-gridSize",200);let _=n/u.value;pe(()=>{_=n/u.value});let c=i("p5-terrain-blurEnabled",!1),E=i("p5-terrain-blurValue",4),w=i("p5-terrain-displacementX",0),k=i("p5-terrain-displacementY",0),F=i("p5-terrain-displacementZ",.01),g=i("p5-terrain-noiseFactor",.02),d=i("p5-terrain-levelsStart",.2),f=i("p5-terrain-levelsEnd",.8),x=i("p5-terrain-levelsStep",.05),B=i("p5-terrain-margin",.005),m=i("p5-terrain-colorMode","gradient");const de=()=>{[u,c,E,w,k,F,g,d,f,x,B,m].forEach(v=>v.reset())},fe=(e,v,p)=>v-p<=e&&e<=v+p,me=e=>{e.setup=()=>{X(r,e,!0),e.createCanvas(n,n),e.noStroke()},e.draw=()=>{if(document.getElementById("canvas-container")){const b=Math.floor(window.innerHeight*.8)||600,h=Math.floor(window.innerWidth*.8)||600;n=Math.min(h,b),e.width!==n&&(e.resizeCanvas(n,n),_=n/u.value)}e.background(0);const p=Date.now();p-K>1e3&&(X(ee,Y,!0),K=p,Y=0),Y++,M++;for(let b=0;b<u.value;b++)for(let h=0;h<u.value;h++){const se=e.noise(h*g.value+M*w.value,b*g.value+M*k.value,M*F.value);for(let I=d.value;I<=f.value;I+=x.value){if(!fe(se,I,B.value))continue;let L=255;if(m.value==="white")L=255;else if(m.value==="gradient")L=e.map(I,d.value,f.value,100,255);else if(m.value==="quantized-gradient"){const Se=Math.trunc(se*10)/10;L=e.map(Se,d.value,f.value,100,255)}e.fill(L),e.circle(h*_,b*_,_)}}c.value&&e.filter(e.BLUR,E.value)}};we(()=>{var e;(e=W(r))==null||e.remove()});let te=N(ke(c.value?"on":"off"));var Z=qe(),q=S(Z),be=S(q);Xe(be,{sketch:me}),y(q);var le=a(q,2),A=a(S(le),2),he=S(A,!0);y(A);var G=a(A,7);s(G);var ae=a(G,4);We(ae,{get value(){return W(te)},label:"",design:"slider",$$events:{change:()=>{c.value=!c.value,X(te,c.value?"on":"off",!0)}}});var re=a(ae,2);{var _e=e=>{var v=Ze(),p=a(Be(v),2);s(p),o(p,()=>E.value,ie=>E.value=ie),ve(e,v)};Ie(re,e=>{c.value&&e(_e)})}var P=a(re,7);s(P);var R=a(P,4);s(R);var V=a(R,4);s(V);var j=a(V,4);s(j);var D=a(j,7);s(D);var H=a(D,4);s(H);var J=a(H,4);s(J);var O=a(J,4);s(O);var C=a(O,4),T=S(C);T.value=T.__value="white";var $=a(T);$.value=$.__value="gradient";var ne=a($);ne.value=ne.__value="quantized-gradient",y(C);var ge=a(C,3);ge.__click=de,y(le),y(Z),Fe(()=>Ce(he,W(ee))),o(G,()=>u.value,e=>u.value=e),o(P,()=>w.value,e=>w.value=e),o(R,()=>k.value,e=>k.value=e),o(V,()=>F.value,e=>F.value=e),o(j,()=>g.value,e=>g.value=e),o(D,()=>d.value,e=>d.value=e),o(H,()=>f.value,e=>f.value=e),o(J,()=>x.value,e=>x.value=e),o(O,()=>B.value,e=>B.value=e),Ne(C,()=>m.value,e=>m.value=e),ve(l,Z),xe()}Le(["click"]);export{$e as component};
