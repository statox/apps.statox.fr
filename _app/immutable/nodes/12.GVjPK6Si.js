import{s as ve,e as p,a as A,A as re,c as d,g as B,b as H,f,l as g,i as T,O as ne,E as Q,n as j,B as ge,t as ce,d as ue,z as F,h as v,j as be,C as ae,G as He,k as $e,y as ze,K as Fe}from"../chunks/scheduler.aZMkCCdx.js";import{h as Ee,u as je}from"../chunks/await_block.YzATO51f.js";import{S as ke,i as Ce,a as x,g as ye,t as J,c as Te,b as fe,d as he,m as _e,e as me}from"../chunks/index.Bc1Vv-y6.js";import{c as Se,o as xe}from"../chunks/store.CNuYb_Jl.js";import{g as Ge,t as qe,u as De,M as Ve,U as Je}from"../chunks/Main.5g3o7spe.js";import{M as Ke}from"../chunks/Main.B8jl1477.js";import{P as Y}from"../chunks/public.xpUinP6t.js";import{r as Qe,A as We}from"../chunks/index.C1H4zXXd.js";import{s as Xe}from"../chunks/client.GswimQwb.js";import{e as oe}from"../chunks/each.CAizsQ3y.js";const Ye=!1,Nt=Object.freeze(Object.defineProperty({__proto__:null,ssr:Ye},Symbol.toStringTag,{value:"Module"})),Ue=()=>Qe({path:"/reactor/getEntriesForPublic"}),Ze=async n=>{const e=Y+"/reactor/addEntry",l=await Ge();typeof l=="string"&&await Xe.post(e).auth(l,{type:"bearer"}).field("name",n.name).field("commaSeparatedTags",n.commaSeparatedTags).attach("file",n.file)};function Ne(n,e,l){const t=n.slice();return t[10]=e[l],t}function Le(n,e,l){const t=n.slice();return t[13]=e[l],t}function Ie(n){let e,l=n[13]+"",t;return{c(){e=p("span"),t=ce(l),this.h()},l(r){e=d(r,"SPAN",{class:!0});var o=H(e);t=ue(o,l),o.forEach(f),this.h()},h(){g(e,"class","tag svelte-16m67n3")},m(r,o){T(r,e,o),v(e,t)},p(r,o){o&8&&l!==(l=r[13]+"")&&be(t,l)},d(r){r&&f(e)}}}function et(n){let e,l,t;return{c(){e=p("img"),this.h()},l(r){e=d(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){g(e,"class","medium-margin svelte-16m67n3"),ae(e.src,l=Y+n[10].uri)||g(e,"src",l),g(e,"alt",t=n[10].name)},m(r,o){T(r,e,o)},p(r,o){o&8&&!ae(e.src,l=Y+r[10].uri)&&g(e,"src",l),o&8&&t!==(t=r[10].name)&&g(e,"alt",t)},d(r){r&&f(e)}}}function tt(n){let e,l;return{c(){e=p("video"),this.h()},l(t){e=d(t,"VIDEO",{class:!0,style:!0,src:!0}),H(e).forEach(f),this.h()},h(){g(e,"class","medium-margin svelte-16m67n3"),He(e,"max-width","100%"),e.controls=!0,ae(e.src,l=Y+n[10].uri)||g(e,"src",l)},m(t,r){T(t,e,r)},p(t,r){r&8&&!ae(e.src,l=Y+t[10].uri)&&g(e,"src",l)},d(t){t&&f(e)}}}function Pe(n){let e,l,t,r=n[10].name+"",o,h,_,m,s,c,u=`<i class="fas fa-copy"></i>
                    Copy link`,b,i,k,O,D,w,$,M,z,L=oe(n[10].tags),a=[];for(let U=0;U<L.length;U+=1)a[U]=Ie(Le(n,L,U));function C(){return n[7](n[10])}function V(U,I){return I&8&&(O=null),O==null&&(O=!!U[5](U[10])),O?tt:et}let X=V(n,-1),S=X(n);return{c(){e=p("div"),l=p("div"),t=p("b"),o=ce(r),h=A(),_=p("div");for(let U=0;U<a.length;U+=1)a[U].c();m=A(),s=p("div"),c=p("button"),c.innerHTML=u,b=A(),i=p("div"),k=p("a"),S.c(),$=A(),this.h()},l(U){e=d(U,"DIV",{});var I=H(e);l=d(I,"DIV",{});var P=H(l);t=d(P,"B",{});var W=H(t);o=ue(W,r),W.forEach(f),P.forEach(f),h=B(I),_=d(I,"DIV",{class:!0});var Z=H(_);for(let E=0;E<a.length;E+=1)a[E].l(Z);Z.forEach(f),m=B(I),s=d(I,"DIV",{});var ee=H(s);c=d(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),F(c)!=="svelte-2xhnct"&&(c.innerHTML=u),ee.forEach(f),I.forEach(f),b=B(U),i=d(U,"DIV",{});var te=H(i);k=d(te,"A",{href:!0,download:!0,rel:!0,target:!0});var K=H(k);S.l(K),K.forEach(f),$=B(te),te.forEach(f),this.h()},h(){g(_,"class","svelte-16m67n3"),g(c,"class","full-width svelte-16m67n3"),g(k,"href",D=Y+n[10].uri),g(k,"download",w=n[10].name),g(k,"rel","noopener noreferrer"),g(k,"target","blank")},m(U,I){T(U,e,I),v(e,l),v(l,t),v(t,o),v(e,h),v(e,_);for(let P=0;P<a.length;P+=1)a[P]&&a[P].m(_,null);v(e,m),v(e,s),v(s,c),T(U,b,I),T(U,i,I),v(i,k),S.m(k,null),v(i,$),M||(z=Q(c,"click",C),M=!0)},p(U,I){if(n=U,I&8&&r!==(r=n[10].name+"")&&be(o,r),I&8){L=oe(n[10].tags);let P;for(P=0;P<L.length;P+=1){const W=Le(n,L,P);a[P]?a[P].p(W,I):(a[P]=Ie(W),a[P].c(),a[P].m(_,null))}for(;P<a.length;P+=1)a[P].d(1);a.length=L.length}X===(X=V(n,I))&&S?S.p(n,I):(S.d(1),S=X(n),S&&(S.c(),S.m(k,null))),I&8&&D!==(D=Y+n[10].uri)&&g(k,"href",D),I&8&&w!==(w=n[10].name)&&g(k,"download",w)},d(U){U&&(f(e),f(b),f(i)),ge(a,U),S.d(),M=!1,z()}}}function Oe(n){let e,l="More...",t,r;return{c(){e=p("button"),e.textContent=l,this.h()},l(o){e=d(o,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-3fputj"&&(e.textContent=l),this.h()},h(){g(e,"class","full-width medium-margin svelte-16m67n3")},m(o,h){T(o,e,h),t||(r=Q(e,"click",n[8]),t=!0)},p:j,d(o){o&&f(e),t=!1,r()}}}function lt(n){let e,l,t,r,o,h,_,m=oe(n[3]),s=[];for(let u=0;u<m.length;u+=1)s[u]=Pe(Ne(n,m,u));let c=n[2].length===0&&n[1]*de<n[0].length&&Oe(n);return{c(){e=p("input"),l=A(),t=p("div");for(let u=0;u<s.length;u+=1)s[u].c();r=A(),c&&c.c(),o=re(),this.h()},l(u){e=d(u,"INPUT",{class:!0,type:!0,placeholder:!0}),l=B(u),t=d(u,"DIV",{class:!0});var b=H(t);for(let i=0;i<s.length;i+=1)s[i].l(b);b.forEach(f),r=B(u),c&&c.l(u),o=re(),this.h()},h(){g(e,"class","full-width medium-margin svelte-16m67n3"),g(e,"type","text"),g(e,"placeholder","Search by tags or name"),g(t,"class","container svelte-16m67n3")},m(u,b){T(u,e,b),ne(e,n[2]),T(u,l,b),T(u,t,b);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(t,null);T(u,r,b),c&&c.m(u,b),T(u,o,b),h||(_=Q(e,"input",n[6]),h=!0)},p(u,[b]){if(b&4&&e.value!==u[2]&&ne(e,u[2]),b&56){m=oe(u[3]);let i;for(i=0;i<m.length;i+=1){const k=Ne(u,m,i);s[i]?s[i].p(k,b):(s[i]=Pe(k),s[i].c(),s[i].m(t,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=m.length}u[2].length===0&&u[1]*de<u[0].length?c?c.p(u,b):(c=Oe(u),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},i:j,o:j,d(u){u&&(f(e),f(l),f(t),f(r),f(o)),ge(s,u),c&&c.d(u),h=!1,_()}}}const de=10;function nt(n,e,l){let{reactions:t}=e,r=1,o=[],h="";const _=(i,k)=>{if(!k.length||i.name.toLowerCase().includes(k.toLowerCase()))return!0;for(const D of i.tags)if(D.toLowerCase().includes(k.toLowerCase()))return!0;return!1},m=i=>{navigator.clipboard.writeText(Y+i.uri),qe.push('<i class="fas fa-check"></i> Link copied to clipboard',{duration:1e3,theme:{"--toastBarHeight":0}})},s=i=>i.s3PresignedUrl.includes(".mp4");function c(){h=this.value,l(2,h)}const u=i=>m(i),b=()=>l(1,r++,r);return n.$$set=i=>{"reactions"in i&&l(0,t=i.reactions)},n.$$.update=()=>{n.$$.dirty&7&&l(3,o=t.filter(i=>_(i,h)).sort((i,k)=>k.creationDateUnix-i.creationDateUnix).slice(0,h.length?void 0:r*de))},[t,r,h,o,m,s,c,u,b]}class rt extends ke{constructor(e){super(),Ce(this,e,nt,lt,ve,{reactions:0})}}function Ae(n,e,l){const t=n.slice();return t[14]=e[l],t}function Be(n){let e,l,t,r,o,h="Close",_,m,s,c,u="Name",b,i,k,O,D="Tags",w,$,M,z,L="File",a,C,V,X,S,U='<i class="fas fa-times-circle"></i>',I,P,W,Z,ee,te,K=oe(n[1]),E=[];for(let y=0;y<K.length;y+=1)E[y]=Me(Ae(n,K,y));const Re=y=>J(E[y],1,1,()=>{E[y]=null});function we(y,q){return y[6]?st:ot}let se=we(n),G=se(n);return{c(){e=p("div"),l=p("div"),t=p("h4"),r=ce(`Add a new file
                `),o=p("button"),o.textContent=h,_=A();for(let y=0;y<E.length;y+=1)E[y].c();m=A(),s=p("form"),c=p("label"),c.textContent=u,b=A(),i=p("input"),k=A(),O=p("label"),O.textContent=D,w=A(),$=p("input"),M=A(),z=p("label"),z.textContent=L,a=A(),C=p("span"),V=p("input"),X=A(),S=p("button"),S.innerHTML=U,I=A(),P=p("br"),W=A(),G.c(),this.h()},l(y){e=d(y,"DIV",{role:!0,class:!0});var q=H(e);l=d(q,"DIV",{class:!0});var N=H(l);t=d(N,"H4",{class:!0});var le=H(t);r=ue(le,`Add a new file
                `),o=d(le,"BUTTON",{"data-svelte-h":!0}),F(o)!=="svelte-2m9p61"&&(o.textContent=h),le.forEach(f),_=B(N);for(let pe=0;pe<E.length;pe+=1)E[pe].l(N);m=B(N),s=d(N,"FORM",{class:!0});var R=H(s);c=d(R,"LABEL",{for:!0,"data-svelte-h":!0}),F(c)!=="svelte-bs9sy6"&&(c.textContent=u),b=B(R),i=d(R,"INPUT",{type:!0}),k=B(R),O=d(R,"LABEL",{for:!0,"data-svelte-h":!0}),F(O)!=="svelte-1myp42m"&&(O.textContent=D),w=B(R),$=d(R,"INPUT",{type:!0}),M=B(R),z=d(R,"LABEL",{for:!0,"data-svelte-h":!0}),F(z)!=="svelte-180hc3e"&&(z.textContent=L),a=B(R),C=d(R,"SPAN",{});var ie=H(C);V=d(ie,"INPUT",{class:!0,type:!0}),X=B(ie),S=d(ie,"BUTTON",{"data-svelte-h":!0}),F(S)!=="svelte-4vp3x8"&&(S.innerHTML=U),ie.forEach(f),I=B(R),P=d(R,"BR",{}),W=B(R),G.l(R),R.forEach(f),N.forEach(f),q.forEach(f),this.h()},h(){g(t,"class","title-bar svelte-uq1fka"),g(c,"for","name"),g(i,"type","text"),g(O,"for","content"),g($,"type","textarea"),g(z,"for","file"),g(V,"class","file-input svelte-uq1fka"),g(V,"type","file"),g(s,"class","form-content svelte-uq1fka"),g(l,"class","contents svelte-uq1fka"),g(e,"role","dialog"),g(e,"class","modal svelte-uq1fka")},m(y,q){T(y,e,q),v(e,l),v(l,t),v(t,r),v(t,o),v(l,_);for(let N=0;N<E.length;N+=1)E[N]&&E[N].m(l,null);v(l,m),v(l,s),v(s,c),v(s,b),v(s,i),ne(i,n[2]),v(s,k),v(s,O),v(s,w),v(s,$),ne($,n[3]),v(s,M),v(s,z),v(s,a),v(s,C),v(C,V),n[12](V),v(C,X),v(C,S),v(s,I),v(s,P),v(s,W),G.m(s,null),Z=!0,ee||(te=[Q(o,"click",Se),Q(i,"input",n[9]),Q($,"input",n[10]),Q(V,"change",n[11]),Q(S,"click",n[13])],ee=!0)},p(y,q){if(q&2){K=oe(y[1]);let N;for(N=0;N<K.length;N+=1){const le=Ae(y,K,N);E[N]?(E[N].p(le,q),x(E[N],1)):(E[N]=Me(le),E[N].c(),x(E[N],1),E[N].m(l,m))}for(ye(),N=K.length;N<E.length;N+=1)Re(N);Te()}q&4&&i.value!==y[2]&&ne(i,y[2]),q&8&&ne($,y[3]),se===(se=we(y))&&G?G.p(y,q):(G.d(1),G=se(y),G&&(G.c(),G.m(s,null)))},i(y){if(!Z){for(let q=0;q<K.length;q+=1)x(E[q]);Z=!0}},o(y){E=E.filter(Boolean);for(let q=0;q<E.length;q+=1)J(E[q]);Z=!1},d(y){y&&f(e),ge(E,y),n[12](null),G.d(),ee=!1,ze(te)}}}function Me(n){let e,l;return e=new Ve({props:{item:n[14]}}),{c(){fe(e.$$.fragment)},l(t){he(e.$$.fragment,t)},m(t,r){_e(e,t,r),l=!0},p(t,r){const o={};r&2&&(o.item=t[14]),e.$set(o)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){me(e,t)}}}function ot(n){let e,l="Login to upload an entry";return{c(){e=p("span"),e.textContent=l,this.h()},l(t){e=d(t,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-4ab4io"&&(e.textContent=l),this.h()},h(){g(e,"class","form-action svelte-uq1fka")},m(t,r){T(t,e,r)},p:j,d(t){t&&f(e)}}}function st(n){let e,l="Submit",t,r;return{c(){e=p("button"),e.textContent=l,this.h()},l(o){e=d(o,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1nfv1d"&&(e.textContent=l),this.h()},h(){g(e,"class","form-action svelte-uq1fka")},m(o,h){T(o,e,h),t||(r=Q(e,"click",n[7]),t=!0)},p:j,d(o){o&&f(e),t=!1,r()}}}function it(n){let e,l,t=n[0]&&Be(n);return{c(){t&&t.c(),e=re()},l(r){t&&t.l(r),e=re()},m(r,o){t&&t.m(r,o),T(r,e,o),l=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&x(t,1)):(t=Be(r),t.c(),x(t,1),t.m(e.parentNode,e)):t&&(ye(),J(t,1,1,()=>{t=null}),Te())},i(r){l||(x(t),l=!0)},o(r){J(t),l=!1},d(r){r&&f(e),t&&t.d(r)}}}function at(n,e,l){let t;$e(n,De,w=>l(6,t=w));let{isOpen:r}=e,{onUpload:o}=e,h=[],_,m="",s,c;const u=async()=>{l(1,h=[]),_!=null&&_.length||h.push({level:"error",header:"name must be defined"});let w;if(c&&c.length&&(w=c[0]),w||h.push({level:"error",header:"a file must be uploaded"}),!(h.length||!w))try{await Ze({name:_,commaSeparatedTags:m,file:w}),o(),Se()}catch($){let M=$.message;$ instanceof We&&$.code===401?M="Invalid logged in user":$ instanceof Je&&(M="User is logged out");const z=`<strong>Entry not created</strong><br/> ${M}`;qe.push(z,{theme:{"--toastBarBackground":"#FF0000"}})}};function b(){_=this.value,l(2,_)}function i(){m=this.value,l(3,m)}function k(){c=this.files,l(5,c)}function O(w){Fe[w?"unshift":"push"](()=>{s=w,l(4,s)})}const D=()=>{l(4,s.value="",s)};return n.$$set=w=>{"isOpen"in w&&l(0,r=w.isOpen),"onUpload"in w&&l(8,o=w.onUpload)},[r,h,_,m,s,c,t,u,o,b,i,k,O,D]}class ct extends ke{constructor(e){super(),Ce(this,e,at,it,ve,{isOpen:0,onUpload:8})}}function ut(n){let e,l;return e=new Ve({props:{item:{level:"info",header:"Login to add an entry"}}}),{c(){fe(e.$$.fragment)},l(t){he(e.$$.fragment,t)},m(t,r){_e(e,t,r),l=!0},p:j,i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){me(e,t)}}}function ft(n){let e,l="Add an entry",t,r;return{c(){e=p("button"),e.textContent=l},l(o){e=d(o,"BUTTON",{"data-svelte-h":!0}),F(e)!=="svelte-zzenq0"&&(e.textContent=l)},m(o,h){T(o,e,h),t||(r=Q(e,"click",n[3]),t=!0)},p:j,i:j,o:j,d(o){o&&f(e),t=!1,r()}}}function ht(n){let e,l="Something went wrong",t,r,o=JSON.stringify(n[5])+"",h;return{c(){e=p("p"),e.textContent=l,t=A(),r=p("p"),h=ce(o)},l(_){e=d(_,"P",{"data-svelte-h":!0}),F(e)!=="svelte-171fb2d"&&(e.textContent=l),t=B(_),r=d(_,"P",{});var m=H(r);h=ue(m,o),m.forEach(f)},m(_,m){T(_,e,m),T(_,t,m),T(_,r,m),v(r,h)},p(_,m){m&1&&o!==(o=JSON.stringify(_[5])+"")&&be(h,o)},i:j,o:j,d(_){_&&(f(e),f(t),f(r))}}}function _t(n){let e,l;return e=new rt({props:{reactions:n[4]}}),{c(){fe(e.$$.fragment)},l(t){he(e.$$.fragment,t)},m(t,r){_e(e,t,r),l=!0},p(t,r){const o={};r&1&&(o.reactions=t[4]),e.$set(o)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){me(e,t)}}}function mt(n){let e,l="Loading data";return{c(){e=p("p"),e.textContent=l},l(t){e=d(t,"P",{"data-svelte-h":!0}),F(e)!=="svelte-ezyzhc"&&(e.textContent=l)},m(t,r){T(t,e,r)},p:j,i:j,o:j,d(t){t&&f(e)}}}function pt(n){let e,l,t,r="Reactor",o,h,_="Upload",m,s,c,u,b,i="Content",k,O,D,w;e=new Ke({props:{title:"Reactor",description:"My collection of memes"}});const $=[ft,ut],M=[];function z(a,C){return a[1]?0:1}s=z(n),c=M[s]=$[s](n);let L={ctx:n,current:null,token:null,hasCatch:!0,pending:mt,then:_t,catch:ht,value:4,error:5,blocks:[,,,]};return Ee(D=n[0],L),{c(){fe(e.$$.fragment),l=A(),t=p("h2"),t.textContent=r,o=A(),h=p("h3"),h.textContent=_,m=A(),c.c(),u=A(),b=p("h3"),b.textContent=i,k=A(),O=re(),L.block.c()},l(a){he(e.$$.fragment,a),l=B(a),t=d(a,"H2",{"data-svelte-h":!0}),F(t)!=="svelte-3o4hy8"&&(t.textContent=r),o=B(a),h=d(a,"H3",{"data-svelte-h":!0}),F(h)!=="svelte-18fi3zp"&&(h.textContent=_),m=B(a),c.l(a),u=B(a),b=d(a,"H3",{"data-svelte-h":!0}),F(b)!=="svelte-1qnf76d"&&(b.textContent=i),k=B(a),O=re(),L.block.l(a)},m(a,C){_e(e,a,C),T(a,l,C),T(a,t,C),T(a,o,C),T(a,h,C),T(a,m,C),M[s].m(a,C),T(a,u,C),T(a,b,C),T(a,k,C),T(a,O,C),L.block.m(a,L.anchor=C),L.mount=()=>O.parentNode,L.anchor=O,w=!0},p(a,[C]){n=a;let V=s;s=z(n),s===V?M[s].p(n,C):(ye(),J(M[V],1,1,()=>{M[V]=null}),Te(),c=M[s],c?c.p(n,C):(c=M[s]=$[s](n),c.c()),x(c,1),c.m(u.parentNode,u)),L.ctx=n,C&1&&D!==(D=n[0])&&Ee(D,L)||je(L,n,C)},i(a){w||(x(e.$$.fragment,a),x(c),x(L.block),w=!0)},o(a){J(e.$$.fragment,a),J(c);for(let C=0;C<3;C+=1){const V=L.blocks[C];J(V)}w=!1},d(a){a&&(f(l),f(t),f(o),f(h),f(m),f(u),f(b),f(k),f(O)),me(e,a),M[s].d(a),L.block.d(a),L.token=null,L=null}}}function dt(n,e,l){let t;$e(n,De,_=>l(1,t=_));let r=Ue();const o=()=>l(0,r=Ue());return[r,t,o,()=>xe(ct,{onUpload:o})]}class Lt extends ke{constructor(e){super(),Ce(this,e,dt,pt,ve,{})}}export{Lt as component,Nt as universal};
