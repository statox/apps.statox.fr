import"../chunks/NZTpNUN0.js";import"../chunks/DRxGxY2p.js";import{p as q,h as l,a5 as ie,b as p,s as o,g as t,i as s,t as z,a as n,d as G,e as f,r as u,n as D,f as le,j as ne}from"../chunks/OOCdeaM4.js";import{i as ce}from"../chunks/c3q9pMCF.js";import"../chunks/Cd_fGgqa.js";import{p as fe}from"../chunks/BOKhb25Z.js";/* empty css                */import{u as ue}from"../chunks/bMdrnNxv.js";import{d as pe}from"../chunks/DBBHR-3t.js";import{e as me,i as de}from"../chunks/80iJqotc.js";import{i as k}from"../chunks/BMFH8sZT.js";import{r as N}from"../chunks/C2XHBoXy.js";import{s as ve}from"../chunks/DazWBkG7.js";import{b as O,d as be}from"../chunks/CCHh_OeQ.js";import{b as ge}from"../chunks/BZoYCivA.js";import{s as _e,a as he}from"../chunks/BY6cWyRb.js";import{A as ye,U as xe}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{t as ke}from"../chunks/Du_j8uFv.js";import{M as Me}from"../chunks/C1Xki9n9.js";import{M as Se}from"../chunks/DKcpRBkl.js";import{M as Pe}from"../chunks/Y_imNMTD.js";import{u as Ue}from"../chunks/Do2kYWHR.js";import{g as Ce}from"../chunks/BcbhCB1J.js";var Te=p('Public <i class="fas fa-lock-open"></i>',1),we=p('Private <i class="fas fa-lock"></i>',1),Ae=p('<i class="sucess-indicator fas fa-check svelte-5gxvc6"></i>'),Ee=p('<button class="form-action"><!></button> <!>',1),Fe=p('<span class="form-action">Login to upload an entry</span>'),Ie=p('<div class="contents svelte-5gxvc6"><h4 class="title-bar svelte-5gxvc6">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-5gxvc6"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-5gxvc6" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Le(M,b){q(b,!0);const S=()=>he(ue,"$user",H),[H,J]=_e();let c=l(ie([])),g=l(""),_=l(""),h=l(void 0),m=l(void 0),d=l(!1),y=l(0),v=l(!1),P=l(!1);const K=async()=>{if(s(c,[],!0),t(g)?.length||t(c).push({level:"error",header:"name must be defined"}),t(y)<0&&t(c).push({level:"error",header:"TTL must be positive"}),t(c).length)return;let e;if(t(m)&&t(m).length&&(e=t(m)[0]||void 0),!t(_)?.length&&!e){t(c).push({level:"error",header:"Either content or file must be defined"});return}try{s(v,!0),s(P,!1),await Ue({name:t(g),content:t(_),ttlSeconds:t(y),isPublic:t(d),file:e}),s(v,!1),b.onUpload(),s(P,!0)}catch(a){s(v,!1);let i=a.message;a instanceof ye&&a.code===401?i="Invalid logged in user":a instanceof xe&&(i="User is logged out");const I=`<strong>Entry not created</strong><br/> ${i}`;ke.push(I,{theme:{"--toastBarBackground":"#FF0000"}})}},Q=()=>{Ce("/clipboard/")};var U=Ie(),C=f(U),R=o(f(C));R.__click=Q,u(C);var B=o(C,2);me(B,17,()=>t(c),de,(e,a)=>{Se(e,{get item(){return t(a)}})});var T=o(B,2),w=o(f(T),2);N(w);var A=o(w,4);N(A);var E=o(A,4),F=f(E);ge(F,e=>s(h,e),()=>t(h));var V=o(F,2);V.__click=()=>{t(h)!==void 0&&(t(h).value="")},u(E);var $=o(E,4);Pe($,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(y)},set valueInSeconds(e){s(y,e,!0)}});var x=o($,4);let j;x.__click=()=>s(d,!t(d));var W=f(x);{var X=e=>{var a=Te();D(),n(e,a)},Y=e=>{var a=we();D(),n(e,a)};k(W,e=>{t(d)?e(X):e(Y,!1)})}u(x),u(T);var Z=o(T,2);{var ee=e=>{var a=Ee(),i=le(a);i.__click=K;var I=f(i);{var ae=r=>{Me(r,{size:.5,unit:"em",durationSeconds:.5})},se=r=>{var L=ne("Submit");n(r,L)};k(I,r=>{t(v)?r(ae):r(se,!1)})}u(i);var oe=o(i,2);{var re=r=>{var L=Ae();n(r,L)};k(oe,r=>{t(P)&&r(re)})}z(()=>i.disabled=t(v)),n(e,a)},te=e=>{var a=Fe();n(e,a)};k(Z,e=>{S()?e(ee):e(te,!1)})}u(U),z(()=>j=ve(x,1,"visibility-status svelte-5gxvc6",null,j,{"visibility-public":t(d)})),O(w,()=>t(g),e=>s(g,e)),O(A,()=>t(_),e=>s(_,e)),be(F,()=>t(m),e=>s(m,e)),n(M,U),G(),J()}pe(["click"]);function rt(M,b){q(b,!1);const S={name:"Clipboard",description:"My universal clipboard app",iconPath:"/clipboard.png"};fe.set(S),ce(),Le(M,{onUpload:()=>console.log("new entry created")}),G()}export{rt as component};
