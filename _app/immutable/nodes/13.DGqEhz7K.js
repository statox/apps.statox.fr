import"../chunks/NZTpNUN0.js";import"../chunks/CohOaeDR.js";import{z as B,p as I,F as h,A as k,v as m,g as e,aZ as te,G as _,a as y,E as U,x as D,s as p,B as q,bk as ae,a_ as re,c as oe,f as ne}from"../chunks/R2JDhSNG.js";import{i as N}from"../chunks/4u1zq58c.js";import{i as se}from"../chunks/BJpv7Yrn.js";import{a as O,s as R}from"../chunks/Ct-TLQDZ.js";import{u as G,U as ie}from"../chunks/C54_DghZ.js";import{M as Q}from"../chunks/FElWoEaI.js";import{d as E,s as le}from"../chunks/C3Q0-X8e.js";import{e as Z,i as j}from"../chunks/UCjBP_y5.js";import{r as A}from"../chunks/DmNmkrrX.js";import{b as L}from"../chunks/CpZDNLuF.js";import{A as de}from"../chunks/UCu7ArvF.js";import{M as ue}from"../chunks/DbJyAgG7.js";import{t as H}from"../chunks/Csd1YvgP.js";import{a as ve,b as ce}from"../chunks/DqZJIGSP.js";import{g as me}from"../chunks/B0l88DD7.js";import{I as fe}from"../chunks/CXi5Vd5E.js";import{o as pe}from"../chunks/BlCreX5I.js";import{p as ge}from"../chunks/B764EtYD.js";import{p as _e}from"../chunks/D7obuF16.js";const be=(g,t)=>{p(t,!1)};var he=(g,t,i)=>t(e(i)),ke=I('<div class="option svelte-10zooem"> </div>'),ye=I('<div class="dropdown svelte-10zooem"></div>'),xe=I('<span><input type="text" class="svelte-10zooem"/> <!></span>');function Ie(g,t){B(t,!0);const i=a=>a.normalize("NFD").replace(/[\u0300-\u036f]/g,"");let o=ge(t,"value",15),n=k(!1),v=te(()=>t.options.filter(a=>o().length<2?!1:i(a).toLowerCase().includes(i(o()).toLowerCase())));function d(a){o(a),p(n,!0)}var s=xe(),r=h(s);A(r),r.__input=[be,n];var u=m(r,2);{var f=a=>{var b=ye();Z(b,21,()=>e(v),j,($,z)=>{var x=ke();x.__click=[he,d,z];var F=h(x,!0);_(x),D(()=>le(F,e(z))),y($,x)}),_(b),y(a,b)};N(u,a=>{e(v).length>0&&!e(n)&&a(f)})}_(s),L(r,o),y(g,s),U()}E(["input","click"]);const we=(g,t,i,o,n)=>{e(t)&&i.onAdd({name:e(t),quantity:e(o),unit:e(n)})};var ze=I('<div class="input-container svelte-1mzmydd"><label for="name">Ingredient</label> <!> <label for="quantity">Quantity</label> <input type="number"/> <label for="quantity">Unit</label> <input type="text"/> <button><i class="fa fa-solid fa-plus"></i></button></div>');function Fe(g,t){B(t,!0);let i=k(q([])),o=k(""),n=k(void 0),v=k(void 0);pe(async()=>{p(i,(await ve()).ingredients.sort((a,b)=>a<b?1:0).map(a=>a.name),!0)});var d=ze(),s=m(h(d),2);Ie(s,{get options(){return e(i)},get value(){return e(o)},set value(a){p(o,a,!0)}});var r=m(s,4);A(r);var u=m(r,4);A(u);var f=m(u,2);f.__click=[we,o,t,n,v],_(d),L(r,()=>e(n),a=>p(n,a)),L(u,()=>e(v),a=>p(v,a)),y(g,d),U()}E(["click"]);const Le=async(g,t,i,o,n,v,d)=>{if(p(t,[],!0),e(i)?.length||e(t).push({level:"error",header:"Name must be defined"}),e(o)?.length||e(t).push({level:"error",header:"Content must be defined"}),!e(t).length)try{p(n,!0),await ce({name:e(i),content:e(o),ingredients:v}),p(n,!1),d.onUpload()}catch(s){p(n,!1);let r=s.message;s instanceof de&&s.code===401?r="Invalid logged in user":s instanceof ie&&(r="User is logged out");const u=`<strong>Entry not created</strong><br/> ${r}`;H.push(u,{theme:{"--toastBarBackground":"#FF0000"}})}};var Ne=()=>me("/cookbook"),Ae=I('<button class="form-action svelte-1603erd"><!></button>'),Be=I('<span class="form-action svelte-1603erd">Login to upload an entry</span>'),Ue=I('<div class="contents svelte-1603erd"><span class="title-bar svelte-1603erd"><h2>Add a new recipe</h2> <button class="svelte-1603erd">Back to list</button></span> <!> <div class="form-content svelte-1603erd"><label for="name">Name</label> <input type="text"/> <label for="ingredients">New ingredient</label> <div><!></div> <label for="ingredients">List of ingredients</label> <div><!></div> <label for="content">Instructions</label> <textarea rows="10" cols="50"></textarea></div> <!></div>');function $e(g,t){B(t,!0);const[i,o]=R(),n=()=>O(G,"$user",i);let v=k(q([])),d=k(!1),s=k(""),r=k(""),u=q([]);const f=l=>{if(u.find(c=>c.name===l.name)){const c=l.name+" already added";H.push(c,{theme:{"--toastBarBackground":"#FF0000"}});return}u.push(l)};var a=Ue(),b=h(a),$=m(h(b),2);$.__click=[Ne],_(b);var z=m(b,2);Z(z,17,()=>e(v),j,(l,c)=>{Q(l,{get item(){return e(c)}})});var x=m(z,2),F=m(h(x),2);A(F);var C=m(F,4),J=h(C);Fe(J,{onAdd:f}),_(C);var M=m(C,4),K=h(M);fe(K,{get ingredients(){return u},editable:!0}),_(M);var S=m(M,4);ae(S),_(x);var P=m(x,2);{var T=l=>{var c=Ae();c.__click=[Le,v,s,r,d,u,t];var W=h(c);{var X=w=>{ue(w,{size:.5,unit:"em",durationSeconds:.5})},Y=w=>{var ee=re("Submit");y(w,ee)};N(W,w=>{e(d)?w(X):w(Y,!1)})}_(c),D(()=>c.disabled=e(d)),y(l,c)},V=l=>{var c=Be();y(l,c)};N(P,l=>{n()?l(T):l(V,!1)})}_(a),L(F,()=>e(s),l=>p(s,l)),L(S,()=>e(r),l=>p(r,l)),y(g,a),U(),o()}E(["click"]);function et(g,t){B(t,!1);const[i,o]=R(),n=()=>O(G,"$user",i);_e.set("Cookbook");const v=()=>{console.log("New recipe created")};se();var d=oe(),s=ne(d);{var r=f=>{$e(f,{onUpload:v})},u=f=>{Q(f,{item:{level:"info",header:"Login to add an entry"}})};N(s,f=>{n()?f(r):f(u,!1)})}y(g,d),U(),o()}export{et as component};
