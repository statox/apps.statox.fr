import"../chunks/DsnmJJEf.js";import{p as Pe,c as _e,f as D,a as r,d as We,b as d,g as a,I as Ee,s as l,e as n,r as v,t as _,j as L,h as Fe,C as Ve,aI as De,n as qe,i as ue}from"../chunks/CXrX7986.js";import{d as Ce,s as f}from"../chunks/DLkfXc5I.js";import{i as c}from"../chunks/DQPMSdNN.js";import{M as He}from"../chunks/Bm4UHWoh.js";import{M as Ge}from"../chunks/BRl4ZXYB.js";import"../chunks/Ce2CK_U2.js";import{o as Je}from"../chunks/C7sTf4wh.js";import{e as Te,i as Se}from"../chunks/Ndl5UhFC.js";import{b as Ye,s as ze,a as se}from"../chunks/B01PSW-W.js";import{i as Be}from"../chunks/B8WaZjLc.js";import{a as pe,s as Oe}from"../chunks/TEj7Am9_.js";import{M as Le}from"../chunks/C2MD-Xgl.js";import{e as ye,p as Ie}from"../chunks/DE1jjzpz.js";import{D as me}from"../chunks/CkcISRbr.js";import{g as Ue}from"../chunks/D8uqfHxw.js";import{S as Ke,P as Ne}from"../chunks/NnL9o5lO.js";import"../chunks/Cq8wxC1G.js";import{p as Qe}from"../chunks/DfXgUzVA.js";/* empty css                */var Re=d("<p>Loading events</p>"),Xe=d('<span class="emoji-value svelte-cyscl8"> </span>'),Ze=d('<span class="emoji-value svelte-cyscl8"> </span>'),ea=d('<span class="emoji-value svelte-cyscl8"> </span>'),aa=d('<button class="emotion-item svelte-cyscl8"> </button>'),ta=d('<div class="selection svelte-cyscl8"></div>'),sa=d('<div class="journal-text svelte-cyscl8"> </div>'),ra=d('<button class="journal-toggle svelte-cyscl8"> </button> <!>',1),oa=d('<div class="event svelte-cyscl8"><div class="event-date svelte-cyscl8"> </div> <div class="event-value svelte-cyscl8" data-label="Mood:"><!></div> <div class="event-value svelte-cyscl8" data-label="Energy:"><!></div> <div class="event-value svelte-cyscl8" data-label="Weight:"><!></div> <div class="event-value svelte-cyscl8" data-label="Workplace:"><!></div> <div class="event-value svelte-cyscl8" data-label="Emotions:"><!></div> <div class="event-value journal-cell svelte-cyscl8"><!></div> <div class="event-actions svelte-cyscl8"><button class="svelte-cyscl8">Edit</button></div></div>'),va=d('<div class="events-header svelte-cyscl8"><div>Date</div> <div>Mood</div> <div>Energy</div> <div>Weight</div> <div>Workplace</div> <div>Emotions</div> <div>Journal</div> <div>Actions</div></div> <!>',1);function na(G,Y){Pe(Y,!1);const M=()=>pe(Ie,"$personalTrackerPassword",T),y=()=>pe(ye,"$eventsStore",T),[T,I]=Oe();Je(()=>{ye.fetch(M())});const w=u=>{Ue(`/personal-tracker/add/${u}`)},z=["üò¢","üòü","üòï","üòê","üôÇ","üòä","üòÑ","üòÅ","ü§©","üòç"],B=["üò¥","üò™","ü•±","üòë","üòê","üôÇ","üòä","üòÑ","‚ö°","üîã"],S=new Ke,K=u=>{S.has(u)?S.delete(u):S.add(u)};Be();var N=_e(),A=D(N);{var P=u=>{var $=Re();r(u,$)},W=u=>{var $=_e(),Q=D($);{var p=m=>{{let C=Ee(()=>({level:"error",header:"Something went wrong getting events",message:y().error.message}));Le(m,{get item(){return a(C)}})}},b=m=>{var C=va(),R=l(D(C),2);Te(R,1,()=>y().events.sort((h,o)=>o.eventDateUnix-h.eventDateUnix),Se,(h,o)=>{const j=Ee(()=>me.fromSeconds(a(o).eventDateUnix).toFormat("EEEE, d MMMM yyyy")),E=Ee(()=>S.has(a(o).eventDateUnix));var k=oa(),U=n(k),V=n(U,!0);v(U);var F=l(U,2),q=n(F);{var ge=t=>{var e=Xe(),s=n(e);v(e),_(()=>f(s,`${z[a(o).mood-1]??""}
                        ${a(o).mood??""}`)),r(t,e)},fe=t=>{var e=L("-");r(t,e)};c(q,t=>{a(o).mood!==void 0?t(ge):t(fe,!1)})}v(F);var i=l(F,2),J=n(i);{var re=t=>{var e=Ze(),s=n(e);v(e),_(()=>f(s,`${B[a(o).energy-1]??""}
                        ${a(o).energy??""}`)),r(t,e)},X=t=>{var e=L("-");r(t,e)};c(J,t=>{a(o).energy!==void 0?t(re):t(X,!1)})}v(i);var Z=l(i,2),oe=n(Z);{var we=t=>{var e=L();_(s=>f(e,`${s??""} kg`),[()=>(a(o).weight/100).toFixed(1)]),r(t,e)},he=t=>{var e=L("-");r(t,e)};c(oe,t=>{a(o).weight!==void 0?t(we):t(he,!1)})}v(Z);var ee=l(Z,2),x=n(ee);{var O=t=>{var e=ea(),s=n(e,!0);v(e),_(()=>f(s,a(o).workplace==="remote"?"üè†":"üè¢")),r(t,e)},ve=t=>{var e=L("-");r(t,e)};c(x,t=>{a(o).workplace!==void 0?t(O):t(ve,!1)})}v(ee);var ae=l(ee,2),ne=n(ae);{var je=t=>{var e=ta();Te(e,5,()=>a(o).emotionwheel.emotions,Se,(s,g)=>{var H=aa(),xe=n(H);v(H),_(()=>{Ye(H,`--color: ${a(g).color??""}`),f(xe,`${a(g).category??""}
                                ${a(g).subcategory??""}
                                ${a(g).emotion??""}`)}),r(s,H)}),v(e),r(t,e)},ie=t=>{var e=L("-");r(t,e)};c(ne,t=>{a(o).emotionwheel?.emotions?t(je):t(ie,!1)})}v(ae);var te=l(ae,2),le=n(te);{var be=t=>{var e=ra(),s=D(e);s.__click=()=>K(a(o).eventDateUnix);var g=n(s,!0);v(s);var H=l(s,2);{var xe=Me=>{var $e=sa(),Ae=n($e,!0);v($e),_(()=>f(Ae,a(o).journal)),r(Me,$e)};c(H,Me=>{a(E)&&Me(xe)})}_(()=>f(g,a(E)?"üìñ Hide":"üìù Show")),r(t,e)},de=t=>{var e=L("-");r(t,e)};c(le,t=>{a(o).journal!==void 0?t(be):t(de,!1)})}v(te);var ce=l(te,2),ke=n(ce);ke.__click=()=>w(a(o).eventDateUnix),v(ce),v(k),_(()=>f(V,a(j))),r(h,k)}),r(m,C)};c(Q,m=>{y().error?m(p):m(b,!1)},!0)}r(u,$)};c(A,u=>{y().loading?u(P):u(W,!1)})}r(G,N),We(),I()}Ce(["click"]);var ia=d("<p>Loading events</p>"),la=d('<div class="add-indicator svelte-juywa"><span class="plus-sign svelte-juywa">+</span></div>'),da=d('<div class="indicator mood svelte-juywa"> </div>'),ca=d('<div class="indicator weight svelte-juywa">W</div>'),ua=d('<div class="indicator emotions svelte-juywa">E</div>'),ma=d('<div class="indicator workplace svelte-juywa"> </div>'),_a=d('<div class="indicator energy svelte-juywa"> </div>'),pa=d('<div class="indicator journal svelte-juywa" title="Journal entry">üìù</div>'),ya=d('<div class="event-indicators svelte-juywa"><!> <!> <!> <!> <!> <!></div>'),ga=d('<div role="button" tabindex="0"><div class="day-number svelte-juywa"> </div> <!> <!></div>'),fa=d('<div class="calendar-container svelte-juywa"><div class="calendar-header svelte-juywa"><button class="nav-button svelte-juywa">&lt;</button> <h3 class="month-year svelte-juywa"> </h3> <button class="nav-button svelte-juywa">&gt;</button> <button class="today-button svelte-juywa">Today</button></div> <div class="calendar-grid svelte-juywa"><div class="day-name svelte-juywa">Mon</div> <div class="day-name svelte-juywa">Tue</div> <div class="day-name svelte-juywa">Wed</div> <div class="day-name svelte-juywa">Thu</div> <div class="day-name svelte-juywa">Fri</div> <div class="day-name svelte-juywa">Sat</div> <div class="day-name svelte-juywa">Sun</div> <!></div> <div class="calendar-legend svelte-juywa"><div class="legend-item svelte-juywa"><div class="indicator mood svelte-juywa">5</div> <span>Mood</span></div> <div class="legend-item svelte-juywa"><div class="indicator weight svelte-juywa">W</div> <span>Weight</span></div> <div class="legend-item svelte-juywa"><div class="indicator emotions svelte-juywa">E</div> <span>Emotions</span></div> <div class="legend-item svelte-juywa"><div class="indicator workplace svelte-juywa">üè†</div> <span>Workplace</span></div> <div class="legend-item svelte-juywa"><div class="indicator energy svelte-juywa">5</div> <span>Energy</span></div> <div class="legend-item svelte-juywa"><div class="indicator journal svelte-juywa">üìù</div> <span>Journal</span></div></div></div>');function wa(G,Y){Pe(Y,!0);const M=()=>pe(Ie,"$personalTrackerPassword",T),y=()=>pe(ye,"$eventsStore",T),[T,I]=Oe();let w=Fe(Ve(me.now().startOf("month")));Je(()=>{ye.fetch(M())});const z=()=>{ue(w,a(w).minus({months:1}),!0)},B=()=>{ue(w,a(w).plus({months:1}),!0)},S=()=>{ue(w,me.now().startOf("month"),!0)},K=p=>{Ue(`/personal-tracker/add/${p}`)},N=(p,b)=>{const m=p.startOf("month"),R=m.weekday-1,h=42,o=[];let j=m.minus({days:R});for(let E=0;E<h;E++){const k=j.toUTC().plus({days:1}).startOf("day").toUnixInteger(),U=b.find(q=>q.eventDateUnix===k),V=j.month===p.month,F=j.hasSame(me.now(),"day");o.push({date:j,timestamp:k,event:U,isCurrentMonth:V,isToday:F}),j=j.plus({days:1})}return o},A=De(()=>N(a(w),y().events)),P=De(()=>a(w).toFormat("MMMM yyyy"));var W=_e(),u=D(W);{var $=p=>{var b=ia();r(p,b)},Q=p=>{var b=_e(),m=D(b);{var C=h=>{{let o=De(()=>({level:"error",header:"Something went wrong getting events",message:y().error.message}));Le(h,{get item(){return a(o)}})}},R=h=>{var o=fa(),j=n(o),E=n(j);E.__click=z;var k=l(E,2),U=n(k,!0);v(k);var V=l(k,2);V.__click=B;var F=l(V,2);F.__click=S,v(j);var q=l(j,2),ge=l(n(q),14);Te(ge,17,()=>a(A),Se,(fe,i)=>{var J=ga();let re;J.__click=()=>K(a(i).timestamp);var X=n(J),Z=n(X,!0);v(X);var oe=l(X,2);{var we=x=>{var O=la();r(x,O)};c(oe,x=>{a(i).event||x(we)})}var he=l(oe,2);{var ee=x=>{var O=ya(),ve=n(O);{var ae=e=>{var s=da(),g=n(s,!0);v(s),_(()=>{se(s,"title",`Mood: ${a(i).event.mood??""}`),f(g,a(i).event.mood)}),r(e,s)};c(ve,e=>{a(i).event.mood!==void 0&&e(ae)})}var ne=l(ve,2);{var je=e=>{var s=ca();_(g=>se(s,"title",`Weight: ${g??""} kg`),[()=>(a(i).event.weight/100).toFixed(1)]),r(e,s)};c(ne,e=>{a(i).event.weight!==void 0&&e(je)})}var ie=l(ne,2);{var te=e=>{var s=ua();_(()=>se(s,"title",`${a(i).event.emotionwheel.emotions.length??""} emotions`)),r(e,s)};c(ie,e=>{a(i).event.emotionwheel?.emotions&&e(te)})}var le=l(ie,2);{var be=e=>{var s=ma(),g=n(s,!0);v(s),_(()=>{se(s,"title",`Workplace: ${a(i).event.workplace??""}`),f(g,a(i).event.workplace==="remote"?"üè†":"üè¢")}),r(e,s)};c(le,e=>{a(i).event.workplace!==void 0&&e(be)})}var de=l(le,2);{var ce=e=>{var s=_a(),g=n(s,!0);v(s),_(()=>{se(s,"title",`Energy: ${a(i).event.energy??""}`),f(g,a(i).event.energy)}),r(e,s)};c(de,e=>{a(i).event.energy!==void 0&&e(ce)})}var ke=l(de,2);{var t=e=>{var s=pa();r(e,s)};c(ke,e=>{a(i).event.journal!==void 0&&e(t)})}v(O),r(x,O)};c(he,x=>{a(i).event&&x(ee)})}v(J),_(()=>{re=ze(J,1,"calendar-day svelte-juywa",null,re,{"other-month":!a(i).isCurrentMonth,"has-event":a(i).event,today:a(i).isToday}),f(Z,a(i).date.day)}),r(fe,J)}),v(q),qe(2),v(o),_(()=>f(U,a(P))),r(h,o)};c(m,h=>{y().error?h(C):h(R,!1)},!0)}r(p,b)};c(u,p=>{y().loading?p($):p(Q,!1)})}r(G,W),We(),I()}Ce(["click"]);var ha=d(`<div class="controls svelte-8wagie"><button>Add Today's entry</button> <button class="view-toggle svelte-8wagie"> </button></div> <!>`,1),ja=d("<!> <!>",1);function qa(G,Y){Pe(Y,!0);const M={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};Qe.set(M);let y=Fe("calendar");const T=()=>{ue(y,a(y)==="calendar"?"list":"calendar",!0)};var I=ja(),w=D(I);Ge(w,{get title(){return M.name},get description(){return M.description},get iconPath(){return M.iconPath}});var z=l(w,2);He(z,{message:"Login to see events",requiredScope:"admin",children:(B,S)=>{Ne(B,{children:(K,N)=>{var A=ha(),P=D(A),W=n(P);W.__click=()=>Ue("/personal-tracker/add");var u=l(W,2);u.__click=T;var $=n(u,!0);v(u),v(P);var Q=l(P,2);{var p=m=>{wa(m,{})},b=m=>{na(m,{})};c(Q,m=>{a(y)==="calendar"?m(p):m(b,!1)})}_(()=>f($,a(y)==="calendar"?"üìã List View":"üìÖ Calendar View")),r(K,A)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(G,I),We()}Ce(["click"]);export{qa as component};
