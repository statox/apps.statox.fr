var Le=Object.defineProperty;var fe=a=>{throw TypeError(a)};var Pe=(a,e,r)=>e in a?Le(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r;var ae=(a,e,r)=>Pe(a,typeof e!="symbol"?e+"":e,r),Xe=(a,e,r)=>e.has(a)||fe("Cannot "+r);var le=(a,e,r)=>(Xe(a,e,"read from private field"),r?r.call(a):e.get(a)),_e=(a,e,r)=>e.has(a)?fe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,r);import"../chunks/CWj6FrbW.js";import{a as Ye}from"../chunks/CaQVVKkx.js";import{C as A,i as J,g as O,F as he,p as Ze,E as be,v as X,G as c,y as t,w as Re,a as P,x as qe,H as u,f as xe}from"../chunks/CGiGqk7P.js";import{d as Ne,s as Be}from"../chunks/C57t7CU5.js";import{i as W}from"../chunks/Cc712tkr.js";import{c as te,r as y,b as me}from"../chunks/BbjtQk7y.js";import{b as M}from"../chunks/SGPRxWVV.js";import{M as De}from"../chunks/DL_1D3tM.js";import{P as He}from"../chunks/C0c18rOM.js";var V;class Ie{constructor(e,r){ae(this,"default");_e(this,V,A());ae(this,"key","");this.key=e,this.value=r,this.default=r;{const n=localStorage.getItem(e);n&&(this.value=this.deserialize(n))}he(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return J(le(this,V))}set value(e){O(le(this,V),e,!0)}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e)}}V=new WeakMap;function f(a,e){return new Ie(a,e)}const Ve=(a,e,r)=>e-r<=a&&a<=e+r;function We(a,e){const r=Math.sqrt(a*a+e*e),n=Math.atan2(e,a);return{r,theta:n}}const Ae=(a,e)=>{const{gridSize:r,colorMode:n,cellSize:x,t:Y,noiseMode:N,noiseFactor:Z,displacementX:m,displacementY:B,displacementZ:h,levelsStart:z,levelsEnd:k,levelsStep:D,levelsMargin:H}=e;a.background(0);const R=a.color(255,0,0),q=a.color(0,255,0);for(let g=0;g<r;g++)for(let S=0;S<r;S++){let _=0;if(N==="carthesian")_=a.noise(S*Z+Y*m,g*Z+Y*B,Y*h);else if(N==="polar"){const{r:b,theta:d}=We((S-r/2)*Z,(g-r/2)*Z);_=a.noise(d*m,b*B,Y*h)}for(let b=z;b<=k;b+=D||.1){if(!Ve(_,b,H))continue;let d=255;if(n==="white")d=255;else if(n==="gradient")d=a.map(b,z,k,100,255);else if(n==="quantized-gradient"){const I=Math.trunc(_*10)/10;d=a.map(I,z,k,100,255)}else if(n==="color-gradient")d=a.lerpColor(R,q,_);else if(n==="color-scaled-gradient"){const I=a.map(_,z,k,0,1);d=a.lerpColor(R,q,I)}a.fill(d),a.circle(S*x,g*x,x)}}};var Je=(a,e)=>e.grid=!e.grid,Oe=X("<br/>"),Te=X('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1"/>',1),Qe=X('<div class="control-section svelte-10wynr9"><label for="gridSize">Grid size</label> <input type="number" step="1"/> <label for="blurEnabled">Enable blur</label> <!> <!></div>'),Ue=(a,e)=>e.noise=!e.noise,je=X("<br/>"),Ke=X('<div class="control-section svelte-10wynr9"><label for="noiseMode">Noise Mode</label> <select id="noiseMode-select"><option>Carthesian</option><option>Polar</option></select> <label for="displacementX">displacementX</label> <input type="number" step="0.01"/> <label for="displacementY">displacementY</label> <input type="number" step="0.01"/> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"/> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"/></div>'),$e=(a,e)=>e.lines=!e.lines,ea=X("<br/>"),aa=X('<div class="control-section svelte-10wynr9"><label for="levelsStart">levelsStart</label> <input type="number" step="0.1"/> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"/> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"/> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"/> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option><option>Color Gradient</option><option>Color scaled Gradient</option></select></div>'),la=X('<div class="container svelte-10wynr9"><div id="canvas-container"><div class="stats"><label for="fps">FPS</label> <span> </span></div> <!></div> <div class="controls-container svelte-10wynr9"><span class="control-header svelte-10wynr9"><button>&nbsp;Grid controls</button></span> <!> <span class="control-header svelte-10wynr9"><button>&nbsp;Noise controls</button></span> <!> <span class="control-header svelte-10wynr9"><button>&nbsp;Lines controls</button></span> <!> <div class="control-section svelte-10wynr9"><label for="resetAll">Reset all</label><button>Reset</button></div></div></div>');function pa(a,e){Ze(e,!0);let r=A(void 0),n=1e3,x=0,Y=0,N=0,Z=A(0);const m=f("p5-terrain-gridSize",200);let B=n/m.value;he(()=>{B=n/m.value});let h=f("p5-terrain-blurEnabled",!1),z=f("p5-terrain-blurValue",4),k=f("p5-terrain-displacementX",0),D=f("p5-terrain-displacementY",0),H=f("p5-terrain-displacementZ",.01),R=f("p5-terrain-noiseFactor",.02),q=f("p5-terrain-levelsStart",.2),g=f("p5-terrain-levelsEnd",.8),S=f("p5-terrain-levelsStep",.05),_=f("p5-terrain-margin",.005),b=f("p5-terrain-colorMode","gradient"),d=f("p5-terrain-nodeMode","carthesian"),I=A(be(h.value?"on":"off"));const ge=()=>{[m,h,z,d,k,D,H,R,q,g,S,_,b].forEach(o=>o.reset())},E=be({grid:!1,noise:!1,lines:!1}),Se=l=>{function o(){const s=Math.min(l.windowWidth,l.windowHeight);n=Math.floor(s*.9),l.resizeCanvas(n,n),B=n/m.value}function v(){const s=Date.now();s-Y>1e3&&(O(Z,N,!0),Y=s,N=0),N++}l.windowResized=()=>{o()},l.setup=()=>{O(r,l,!0),l.createCanvas(n,n),o(),l.noStroke()},l.draw=()=>{v(),x++,Ae(l,{gridSize:m.value,colorMode:b.value,noiseMode:d.value,t:x,cellSize:B,noiseFactor:R.value,displacementX:k.value,displacementY:D.value,displacementZ:H.value,levelsStart:q.value,levelsEnd:g.value,levelsMargin:_.value,levelsStep:S.value}),h.value&&l.filter(l.BLUR,z.value)}};Ye(()=>{var l;(l=J(r))==null||l.remove()});var T=la(),Q=c(T),U=c(Q),re=t(c(U),2),we=c(re,!0);u(re),u(U);var ye=t(U,2);He(ye,{sketch:Se}),u(Q);var oe=t(Q,2),j=c(oe),ne=c(j);ne.__click=[Je,E],u(j);var se=t(j,2);{var Me=l=>{var o=Oe();P(l,o)},ze=l=>{var o=Qe(),v=t(c(o),2);y(v);var s=t(v,4);De(s,{get value(){return J(I)},label:"",design:"slider",$$events:{change:()=>{h.value=!h.value,O(I,h.value?"on":"off",!0)}}});var C=t(s,2);{var F=p=>{var w=Te(),G=t(xe(w),2);y(G),M(G,()=>z.value,i=>z.value=i),P(p,w)};W(C,p=>{h.value&&p(F)})}u(o),M(v,()=>m.value,p=>m.value=p),P(l,o)};W(se,l=>{E.grid?l(Me):l(ze,!1)})}var K=t(se,2),ie=c(K);ie.__click=[Ue,E],u(K);var ve=t(K,2);{var ke=l=>{var o=je();P(l,o)},Ee=l=>{var o=Ke(),v=t(c(o),2),s=c(v);s.value=s.__value="carthesian";var C=t(s);C.value=C.__value="polar",u(v);var F=t(v,4);y(F);var p=t(F,4);y(p);var w=t(p,4);y(w);var G=t(w,4);y(G),u(o),me(v,()=>d.value,i=>d.value=i),M(F,()=>k.value,i=>k.value=i),M(p,()=>D.value,i=>D.value=i),M(w,()=>H.value,i=>H.value=i),M(G,()=>R.value,i=>R.value=i),P(l,o)};W(ve,l=>{E.noise?l(ke):l(Ee,!1)})}var $=t(ve,2),ce=c($);ce.__click=[$e,E],u($);var ue=t($,2);{var Ce=l=>{var o=ea();P(l,o)},Fe=l=>{var o=aa(),v=t(c(o),2);y(v);var s=t(v,4);y(s);var C=t(s,4);y(C);var F=t(C,4);y(F);var p=t(F,4),w=c(p);w.value=w.__value="white";var G=t(w);G.value=G.__value="gradient";var i=t(G);i.value=i.__value="quantized-gradient";var ee=t(i);ee.value=ee.__value="color-gradient";var pe=t(ee);pe.value=pe.__value="color-scaled-gradient",u(p),u(o),M(v,()=>q.value,L=>q.value=L),M(s,()=>g.value,L=>g.value=L),M(C,()=>S.value,L=>S.value=L),M(F,()=>_.value,L=>_.value=L),me(p,()=>b.value,L=>b.value=L),P(l,o)};W(ue,l=>{E.lines?l(Ce):l(Fe,!1)})}var de=t(ue,2),Ge=t(c(de));Ge.__click=ge,u(de),u(oe),u(T),Re(()=>{Be(we,J(Z)),te(ne,1,`collapse-button ${E.grid?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9"),te(ie,1,`collapse-button ${E.noise?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9"),te(ce,1,`collapse-button ${E.lines?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9")}),P(a,T),qe()}Ne(["click"]);export{pa as component};
