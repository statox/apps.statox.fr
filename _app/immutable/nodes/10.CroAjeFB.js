import"../chunks/NZTpNUN0.js";import"../chunks/CqiQQVFS.js";import{p as G,g as n,G as re,b as p,s as o,e as s,t as $,h as t,a as c,d as O,i as u,r as m,F as j,f as ie,j as le}from"../chunks/tjCGPzdr.js";import{i as ne}from"../chunks/BiWxbyTn.js";import{p as ce}from"../chunks/B16qy7Wo.js";import{d as fe}from"../chunks/DOKer7p_.js";import{i as k}from"../chunks/BsrVr-Z0.js";import{e as ue,i as me}from"../chunks/An4e5j9g.js";import{c as pe,r as z}from"../chunks/DKsZ4ghV.js";import{b as D,d as ve}from"../chunks/B25JaP4K.js";import{b as de}from"../chunks/D7Gt26Db.js";import{s as be,a as _e}from"../chunks/tc5FJSM7.js";import{u as ge,U as he}from"../chunks/t4dp9bUv.js";import{A as xe}from"../chunks/DhWkRSDu.js";import{t as ye}from"../chunks/C7n9iEt3.js";import{M as ke}from"../chunks/C7IQeyOL.js";import{M as Se}from"../chunks/fgiaMEnO.js";import{M as Me}from"../chunks/BRbIelu5.js";import{u as Ue}from"../chunks/CIx52TPp.js";import{g as Ce}from"../chunks/DfF0MMXd.js";const Fe=()=>{Ce("/clipboard/")};var Te=(v,r)=>{t(r)!==void 0&&(t(r).value="")},we=(v,r)=>s(r,!t(r)),Ae=p('Public <i class="fas fa-lock-open"></i>',1),Le=p('Private <i class="fas fa-lock"></i>',1),Pe=p('<i class="sucess-indicator fas fa-check svelte-5gxvc6"></i>'),Be=p('<button class="form-action"><!></button> <!>',1),Ee=p('<span class="form-action">Login to upload an entry</span>'),Ie=p('<div class="contents svelte-5gxvc6"><h4 class="title-bar svelte-5gxvc6">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-5gxvc6"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-5gxvc6" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Ne(v,r){G(r,!0);const q=()=>_e(ge,"$user",H),[H,J]=be();let f=n(re([])),_=n(""),g=n(""),S=n(void 0),d=n(void 0),h=n(!1),x=n(0),b=n(!1),M=n(!1);const K=async()=>{if(s(f,[],!0),t(_)?.length||t(f).push({level:"error",header:"name must be defined"}),t(g)?.length||t(f).push({level:"error",header:"content must be defined"}),t(x)<0&&t(f).push({level:"error",header:"TTL must be positive"}),t(f).length)return;let e;t(d)&&t(d).length&&(e=t(d)[0]||void 0);try{s(b,!0),s(M,!1),await Ue({name:t(_),content:t(g),ttlSeconds:t(x),isPublic:t(h),file:e}),s(b,!1),r.onUpload(),s(M,!0)}catch(a){s(b,!1);let l=a.message;a instanceof xe&&a.code===401?l="Invalid logged in user":a instanceof he&&(l="User is logged out");const P=`<strong>Entry not created</strong><br/> ${l}`;ye.push(P,{theme:{"--toastBarBackground":"#FF0000"}})}};var U=Ie(),C=u(U),Q=o(u(C));Q.__click=[Fe],m(C);var E=o(C,2);ue(E,17,()=>t(f),me,(e,a)=>{Se(e,{get item(){return t(a)}})});var F=o(E,2),T=o(u(F),2);z(T);var w=o(T,4);z(w);var A=o(w,4),L=u(A);de(L,e=>s(S,e),()=>t(S));var R=o(L,2);R.__click=[Te,S],m(A);var I=o(A,4);Me(I,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(x)},set valueInSeconds(e){s(x,e,!0)}});var y=o(I,4);let N;y.__click=[we,h];var V=u(y);{var W=e=>{var a=Ae();j(),c(e,a)},X=e=>{var a=Le();j(),c(e,a)};k(V,e=>{t(h)?e(W):e(X,!1)})}m(y),m(F);var Y=o(F,2);{var Z=e=>{var a=Be(),l=ie(a);l.__click=K;var P=u(l);{var te=i=>{ke(i,{size:.5,unit:"em",durationSeconds:.5})},ae=i=>{var B=le("Submit");c(i,B)};k(P,i=>{t(b)?i(te):i(ae,!1)})}m(l);var se=o(l,2);{var oe=i=>{var B=Pe();c(i,B)};k(se,i=>{t(M)&&i(oe)})}$(()=>l.disabled=t(b)),c(e,a)},ee=e=>{var a=Ee();c(e,a)};k(Y,e=>{q()?e(Z):e(ee,!1)})}m(U),$(e=>N=pe(y,1,"visibility-status svelte-5gxvc6",null,N,e),[()=>({"visibility-public":t(h)})]),D(T,()=>t(_),e=>s(_,e)),D(w,()=>t(g),e=>s(g,e)),ve(L,()=>t(d),e=>s(d,e)),c(v,U),O(),J()}fe(["click"]);function st(v,r){G(r,!1),ce.set("Clipboard"),ne(),Ne(v,{onUpload:()=>console.log("new entry created")}),O()}export{st as component};
