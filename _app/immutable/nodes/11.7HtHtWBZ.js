import{s as tt,f as _,g as m,h as I,d as u,j as g,i as v,r as D,O as mt,l as J,a as P,m as K,c as x,N as rt,G as C,n as Q,e as z,B as dt,P as ht,p as vt,M as N,S as R,w as F,A as bt}from"../chunks/scheduler.JOg8NEYR.js";import{h as ot,u as gt}from"../chunks/await_block.0983Bfv9.js";import{S as et,i as nt,b as W,d as X,m as Y,a as q,t as j,e as Z}from"../chunks/index.LkMwavup.js";import{P as _t}from"../chunks/public.C30nq52-.js";import{g as Ct,u as kt,t as $t}from"../chunks/service.ZLFloEuv.js";import{s as wt}from"../chunks/client.xGIisHg-.js";import{M as yt}from"../chunks/Main.aSKv4q5N.js";import{e as it}from"../chunks/each.7LNSErVp.js";const ct=async()=>{const r=_t+"/reactor/getEntriesForPublic";return fetch(r,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(async t=>{if(t.ok)return t.json();throw new Error(await t.text())})},Et=async r=>{const t=_t+"/reactor/addEntry",s=await Ct();await wt.post(t).auth(s,{type:"bearer"}).field("name",r.name).field("commaSeparatedTags",r.commaSeparatedTags).attach("file",r.file)};function ut(r,t,s){const e=r.slice();return e[1]=t[s],e}function ft(r){let t,s,e=r[1].name+"",a,o,l,f,i,p,T,k,$,y,b,d,E=r[1].tags+"",h;return{c(){t=_("div"),s=_("b"),a=J(e),o=P(),l=_("div"),f=_("div"),i=_("a"),p=_("img"),b=P(),d=_("div"),h=J(E),this.h()},l(n){t=m(n,"DIV",{});var c=I(t);s=m(c,"B",{});var L=I(s);a=K(L,e),L.forEach(u),c.forEach(u),o=x(n),l=m(n,"DIV",{class:!0});var V=I(l);f=m(V,"DIV",{});var A=I(f);i=m(A,"A",{href:!0,download:!0});var S=I(i);p=m(S,"IMG",{src:!0,alt:!0}),S.forEach(u),A.forEach(u),V.forEach(u),b=x(n),d=m(n,"DIV",{});var B=I(d);h=K(B,E),B.forEach(u),this.h()},h(){rt(p.src,T=r[1].s3PresignedUrl)||g(p,"src",T),g(p,"alt",k=r[1].name),g(i,"href",$=r[1].s3PresignedUrl),g(i,"download",y=r[1].name),g(l,"class","entry-data-section svelte-8fipr1")},m(n,c){v(n,t,c),C(t,s),C(s,a),v(n,o,c),v(n,l,c),C(l,f),C(f,i),C(i,p),v(n,b,c),v(n,d,c),C(d,h)},p(n,c){c&1&&e!==(e=n[1].name+"")&&Q(a,e),c&1&&!rt(p.src,T=n[1].s3PresignedUrl)&&g(p,"src",T),c&1&&k!==(k=n[1].name)&&g(p,"alt",k),c&1&&$!==($=n[1].s3PresignedUrl)&&g(i,"href",$),c&1&&y!==(y=n[1].name)&&g(i,"download",y),c&1&&E!==(E=n[1].tags+"")&&Q(h,E)},d(n){n&&(u(t),u(o),u(l),u(b),u(d))}}}function Pt(r){let t,s=it(r[0].sort(pt)),e=[];for(let a=0;a<s.length;a+=1)e[a]=ft(ut(r,s,a));return{c(){t=_("div");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=m(a,"DIV",{class:!0});var o=I(t);for(let l=0;l<e.length;l+=1)e[l].l(o);o.forEach(u),this.h()},h(){g(t,"class","container svelte-8fipr1")},m(a,o){v(a,t,o);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null)},p(a,[o]){if(o&1){s=it(a[0].sort(pt));let l;for(l=0;l<s.length;l+=1){const f=ut(a,s,l);e[l]?e[l].p(f,o):(e[l]=ft(f),e[l].c(),e[l].m(t,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=s.length}},i:D,o:D,d(a){a&&u(t),mt(e,a)}}}const pt=(r,t)=>t.creationDateUnix-r.creationDateUnix;function xt(r,t,s){let{reactions:e}=t;return r.$$set=a=>{"reactions"in a&&s(0,e=a.reactions)},[e]}class Tt extends et{constructor(t){super(),nt(this,t,xt,Pt,tt,{reactions:0})}}function Ut(r){let t,s="Login to upload content";return{c(){t=_("p"),t.textContent=s},l(e){t=m(e,"P",{"data-svelte-h":!0}),N(t)!=="svelte-k7lhwu"&&(t.textContent=s)},m(e,a){v(e,t,a)},p:D,d(e){e&&u(t)}}}function It(r){let t,s,e,a="Name",o,l,f,i,p,T="Tags",k,$,y,b,d,E="File",h,n,c,L,V='<i class="fas fa-times-circle"></i>',A,S,B,lt="Upload",G,at;return{c(){t=_("div"),s=_("p"),e=_("label"),e.textContent=a,o=P(),l=_("input"),f=P(),i=_("p"),p=_("label"),p.textContent=T,k=P(),$=_("input"),y=P(),b=_("p"),d=_("label"),d.textContent=E,h=P(),n=_("input"),c=P(),L=_("button"),L.innerHTML=V,A=P(),S=_("p"),B=_("button"),B.textContent=lt,this.h()},l(w){t=m(w,"DIV",{class:!0});var U=I(t);s=m(U,"P",{class:!0});var H=I(s);e=m(H,"LABEL",{for:!0,"data-svelte-h":!0}),N(e)!=="svelte-bs9sy6"&&(e.textContent=a),o=x(H),l=m(H,"INPUT",{type:!0,class:!0}),H.forEach(u),f=x(U),i=m(U,"P",{class:!0});var O=I(i);p=m(O,"LABEL",{for:!0,"data-svelte-h":!0}),N(p)!=="svelte-1myp42m"&&(p.textContent=T),k=x(O),$=m(O,"INPUT",{type:!0,class:!0}),O.forEach(u),U.forEach(u),y=x(w),b=m(w,"P",{class:!0});var M=I(b);d=m(M,"LABEL",{for:!0,"data-svelte-h":!0}),N(d)!=="svelte-180hc3e"&&(d.textContent=E),h=x(M),n=m(M,"INPUT",{class:!0,type:!0}),c=x(M),L=m(M,"BUTTON",{"data-svelte-h":!0}),N(L)!=="svelte-1q80dng"&&(L.innerHTML=V),M.forEach(u),A=x(w),S=m(w,"P",{});var st=I(S);B=m(st,"BUTTON",{"data-svelte-h":!0}),N(B)!=="svelte-15774uw"&&(B.textContent=lt),st.forEach(u),this.h()},h(){g(e,"for","name"),g(l,"type","text"),g(l,"class","svelte-248e0t"),g(s,"class","meta-section-item svelte-248e0t"),g(p,"for","content"),g($,"type","textarea"),g($,"class","svelte-248e0t"),g(i,"class","meta-section-item svelte-248e0t"),g(t,"class","meta-section svelte-248e0t"),g(d,"for","file"),g(n,"class","file-input svelte-248e0t"),g(n,"type","file"),g(b,"class","file-section svelte-248e0t")},m(w,U){v(w,t,U),C(t,s),C(s,e),C(s,o),C(s,l),R(l,r[0]),C(t,f),C(t,i),C(i,p),C(i,k),C(i,$),R($,r[1]),v(w,y,U),v(w,b,U),C(b,d),C(b,h),C(b,n),r[9](n),C(b,c),C(b,L),v(w,A,U),v(w,S,U),C(S,B),G||(at=[F(l,"input",r[6]),F($,"input",r[7]),F(n,"change",r[8]),F(L,"click",r[10]),F(B,"click",r[5])],G=!0)},p(w,U){U&1&&l.value!==w[0]&&R(l,w[0]),U&2&&R($,w[1])},d(w){w&&(u(t),u(y),u(b),u(A),u(S)),r[9](null),G=!1,bt(at)}}}function Lt(r){let t;function s(o,l){return o[4]?It:Ut}let e=s(r),a=e(r);return{c(){a.c(),t=z()},l(o){a.l(o),t=z()},m(o,l){a.m(o,l),v(o,t,l)},p(o,[l]){e===(e=s(o))&&a?a.p(o,l):(a.d(1),a=e(o),a&&(a.c(),a.m(t.parentNode,t)))},i:D,o:D,d(o){o&&u(t),a.d(o)}}}function Nt(r,t,s){let e;dt(r,kt,d=>s(4,e=d));const a=ht();let o,l,f,i;const p=async()=>{if(!o.length)return;let d;i&&i.length&&(d=i[0]||void 0);try{await Et({name:o,commaSeparatedTags:l,file:d}),a("upload")}catch(E){const h=`<strong>Entry not created</strong><br/> ${E.message}`;$t.push(h,{theme:{"--toastBarBackground":"#FF0000"}})}};function T(){o=this.value,s(0,o)}function k(){l=this.value,s(1,l)}function $(){i=this.files,s(3,i)}function y(d){vt[d?"unshift":"push"](()=>{f=d,s(2,f)})}return[o,l,f,i,e,p,T,k,$,y,()=>{s(2,f.value="",f)}]}class Bt extends et{constructor(t){super(),nt(this,t,Nt,Lt,tt,{})}}function Dt(r){let t,s="Something went wrong",e,a,o=JSON.stringify(r[3])+"",l;return{c(){t=_("p"),t.textContent=s,e=P(),a=_("p"),l=J(o)},l(f){t=m(f,"P",{"data-svelte-h":!0}),N(t)!=="svelte-171fb2d"&&(t.textContent=s),e=x(f),a=m(f,"P",{});var i=I(a);l=K(i,o),i.forEach(u)},m(f,i){v(f,t,i),v(f,e,i),v(f,a,i),C(a,l)},p(f,i){i&1&&o!==(o=JSON.stringify(f[3])+"")&&Q(l,o)},i:D,o:D,d(f){f&&(u(t),u(e),u(a))}}}function St(r){let t,s;return t=new Tt({props:{reactions:r[2]}}),{c(){W(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,a){Y(t,e,a),s=!0},p(e,a){const o={};a&1&&(o.reactions=e[2]),t.$set(o)},i(e){s||(q(t.$$.fragment,e),s=!0)},o(e){j(t.$$.fragment,e),s=!1},d(e){Z(t,e)}}}function At(r){let t,s="Loading data";return{c(){t=_("p"),t.textContent=s},l(e){t=m(e,"P",{"data-svelte-h":!0}),N(t)!=="svelte-ezyzhc"&&(t.textContent=s)},m(e,a){v(e,t,a)},p:D,i:D,o:D,d(e){e&&u(t)}}}function Mt(r){let t,s,e,a="Clipboard",o,l,f="Upload",i,p,T,k,$="Content",y,b,d,E;t=new yt({props:{title:"Clipboard",description:"My universal clipboard app"}}),p=new Bt({}),p.$on("upload",r[1]);let h={ctx:r,current:null,token:null,hasCatch:!0,pending:At,then:St,catch:Dt,value:2,error:3,blocks:[,,,]};return ot(d=r[0],h),{c(){W(t.$$.fragment),s=P(),e=_("h2"),e.textContent=a,o=P(),l=_("h3"),l.textContent=f,i=P(),W(p.$$.fragment),T=P(),k=_("h3"),k.textContent=$,y=P(),b=z(),h.block.c()},l(n){X(t.$$.fragment,n),s=x(n),e=m(n,"H2",{"data-svelte-h":!0}),N(e)!=="svelte-1cwnlts"&&(e.textContent=a),o=x(n),l=m(n,"H3",{"data-svelte-h":!0}),N(l)!=="svelte-18fi3zp"&&(l.textContent=f),i=x(n),X(p.$$.fragment,n),T=x(n),k=m(n,"H3",{"data-svelte-h":!0}),N(k)!=="svelte-1qnf76d"&&(k.textContent=$),y=x(n),b=z(),h.block.l(n)},m(n,c){Y(t,n,c),v(n,s,c),v(n,e,c),v(n,o,c),v(n,l,c),v(n,i,c),Y(p,n,c),v(n,T,c),v(n,k,c),v(n,y,c),v(n,b,c),h.block.m(n,h.anchor=c),h.mount=()=>b.parentNode,h.anchor=b,E=!0},p(n,[c]){r=n,h.ctx=r,c&1&&d!==(d=r[0])&&ot(d,h)||gt(h,r,c)},i(n){E||(q(t.$$.fragment,n),q(p.$$.fragment,n),q(h.block),E=!0)},o(n){j(t.$$.fragment,n),j(p.$$.fragment,n);for(let c=0;c<3;c+=1){const L=h.blocks[c];j(L)}E=!1},d(n){n&&(u(s),u(e),u(o),u(l),u(i),u(T),u(k),u(y),u(b)),Z(t,n),Z(p,n),h.block.d(n),h.token=null,h=null}}}function Vt(r,t,s){let e=ct();return[e,()=>s(0,e=ct())]}class Jt extends et{constructor(t){super(),nt(this,t,Vt,Mt,tt,{})}}export{Jt as component};
