import{s as S,a as _,e as g,t as T,g as y,c as E,b as x,f as o,d as U,z as j,m as b,D as M,E as k,i as r,h as A,C as P,j as D,y as O,q as V}from"../chunks/scheduler.BmPMPFrP.js";import{S as N,i as q,b as H,d as W,m as z,a as G,t as L,e as R}from"../chunks/index.G_7h3MTf.js";import{M as F}from"../chunks/Main.DK2P2x96.js";function J(m){let s,p,e,d,l,c=m[0]?"show src":"hide src",f,i,n,$="Capture",w,u,I,h,v,C,B;return s=new F({props:{title:"Pot",description:"A WIP honey pot",iconPath:"/pot.png"}}),{c(){H(s.$$.fragment),p=_(),e=g("video"),d=_(),l=g("button"),f=T(c),i=_(),n=g("button"),n.textContent=$,w=_(),u=g("canvas"),I=_(),h=g("img"),this.h()},l(t){W(s.$$.fragment,t),p=y(t),e=E(t,"VIDEO",{id:!0,class:!0}),x(e).forEach(o),d=y(t),l=E(t,"BUTTON",{});var a=x(l);f=U(a,c),a.forEach(o),i=y(t),n=E(t,"BUTTON",{id:!0,"data-svelte-h":!0}),j(n)!=="svelte-j87h5p"&&(n.textContent=$),w=y(t),u=E(t,"CANVAS",{id:!0,style:!0}),x(u).forEach(o),I=y(t),h=E(t,"IMG",{alt:!0}),this.h()},h(){b(e,"id","video"),e.autoplay=!0,e.playsInline=!0,b(e,"class","svelte-17nkj1a"),M(e,"hidden",m[0]),b(n,"id","capture"),b(u,"id","canvas"),k(u,"display","none"),b(h,"alt","The captured camera")},m(t,a){z(s,t,a),r(t,p,a),r(t,e,a),r(t,d,a),r(t,l,a),A(l,f),r(t,i,a),r(t,n,a),r(t,w,a),r(t,u,a),r(t,I,a),r(t,h,a),v=!0,C||(B=[P(l,"click",m[2]),P(n,"click",m[1])],C=!0)},p(t,[a]){(!v||a&1)&&M(e,"hidden",t[0]),(!v||a&1)&&c!==(c=t[0]?"show src":"hide src")&&D(f,c)},i(t){v||(G(s.$$.fragment,t),v=!0)},o(t){L(s.$$.fragment,t),v=!1},d(t){t&&(o(p),o(e),o(d),o(l),o(i),o(n),o(w),o(u),o(I),o(h)),R(s,t),C=!1,O(B)}}}function K(m,s,p){let e,d;const l=()=>{const i=document.getElementById("canvas");if(!i)throw new Error("canvas not available");const n=i.getContext("2d");if(e=document.getElementById("video"),d=document.getElementById("photo"),!n)throw new Error("no context available");if(!d||!e)throw new Error("no photo or video available");n.drawImage(e,0,0,e.videoWidth,e.videoHeight,0,0,i.width,i.height);var $=i.toDataURL("image/png");d.setAttribute("src",$)};let c=!0;const f=()=>p(0,c=!c);return V(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then(function(i){e=document.getElementById("video"),e.srcObject=i}).catch(function(i){console.error("Error accessing media devices.",i)})}),[c,l,f]}class Z extends N{constructor(s){super(),q(this,s,K,J,S,{})}}export{Z as component};
