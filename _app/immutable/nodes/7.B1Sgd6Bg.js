import"../chunks/NZTpNUN0.js";import{p as E,u as L,s,f as M,g as r,a as S,b as p,c as t,d as l,r as c,e as D}from"../chunks/BTM_f0C0.js";import{d as F}from"../chunks/fpD4cHwH.js";import{f as H,a as N}from"../chunks/g3ICtxBO.js";import{i as O}from"../chunks/D_G27x0v.js";import{r as _}from"../chunks/DbSpTE_I.js";import{b as h}from"../chunks/BekeXsjs.js";import{s as P,a as R}from"../chunks/CapB82rd.js";import{g as b}from"../chunks/BUlStzOB.js";import{l as T,c as Z,u as j}from"../chunks/DRYpzuxW.js";import{M as z}from"../chunks/Ci27vOOA.js";var B=H('<h2>Login</h2> <form><section><label for="username">Username</label> <input id="username" name="username" type="text" autocomplete="username" required/></section> <section><label for="current-password">Password</label> <input id="current-password" name="password" type="password" autocomplete="current-password" required/></section> <button>Sign in</button></form> <!>',1);function se(w,$){E($,!0);const d=()=>P(j,"$user",k),[k,y]=R();let o=p(""),i=p(""),a=p(void 0);const I=async()=>{try{await T(r(o),r(i)),await Z(),d()?.status=="logged_in"?b("/auth/me"):t(a,new Error("Invalid password or username"),!0)}catch(e){if(e?.message==='{"message":"UNAUTHORIZED"}'){t(a,"Invalid password or username");return}t(a,e,!0)}};L(()=>{d()?.status=="logged_in"&&b("/auth/me")});var f=B(),n=s(M(f),2),m=l(n),g=s(l(m),2);_(g),c(m);var u=s(m,2),v=s(l(u),2);_(v),c(u);var U=s(u,2);U.__click=I,c(n);var q=s(n,2);{var x=e=>{{let A=D(()=>({level:"error",header:"Failed auth",message:r(a).toString()}));z(e,{get item(){return r(A)}})}};O(q,e=>{r(a)&&e(x)})}h(g,()=>r(o),e=>t(o,e)),h(v,()=>r(i),e=>t(i,e)),N(w,f),S(),y()}F(["click"]);export{se as component};
