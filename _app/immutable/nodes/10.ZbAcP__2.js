import{s as I,a as h,f as g,c as _,g as y,h as b,d as i,M as C,k as x,j as u,i as l,w as M,r as B,o as P}from"../chunks/scheduler.JOg8NEYR.js";import{S as A,i as U,b as j,d as k,m as D,a as O,t as S,e as T}from"../chunks/index.LkMwavup.js";import{M as N}from"../chunks/Main.aSKv4q5N.js";function V(w){let e,r,n,a,o,m="Capture",p,c,f,d,v,E,$;return e=new N({props:{title:"Pot",description:"A WIP honey pot",iconPath:"/pot.png"}}),{c(){j(e.$$.fragment),r=h(),n=g("video"),a=h(),o=g("button"),o.textContent=m,p=h(),c=g("canvas"),f=h(),d=g("img"),this.h()},l(t){k(e.$$.fragment,t),r=_(t),n=y(t,"VIDEO",{style:!0,id:!0}),b(n).forEach(i),a=_(t),o=y(t,"BUTTON",{id:!0,"data-svelte-h":!0}),C(o)!=="svelte-j87h5p"&&(o.textContent=m),p=_(t),c=y(t,"CANVAS",{id:!0,style:!0}),b(c).forEach(i),f=_(t),d=y(t,"IMG",{id:!0,alt:!0}),this.h()},h(){x(n,"display","none"),u(n,"id","video"),n.autoplay=!0,n.playsInline=!0,u(o,"id","capture"),u(c,"id","canvas"),x(c,"display","none"),u(d,"id","photo"),u(d,"alt","The captured photo will appear in this box.")},m(t,s){D(e,t,s),l(t,r,s),l(t,n,s),l(t,a,s),l(t,o,s),l(t,p,s),l(t,c,s),l(t,f,s),l(t,d,s),v=!0,E||($=M(o,"click",w[0]),E=!0)},p:B,i(t){v||(O(e.$$.fragment,t),v=!0)},o(t){S(e.$$.fragment,t),v=!1},d(t){t&&(i(r),i(n),i(a),i(o),i(p),i(c),i(f),i(d)),T(e,t),E=!1,$()}}}function W(w){let e,r;const n=()=>{const a=document.getElementById("canvas");if(!a)throw new Error("canvas not available");const o=a.getContext("2d");if(e=document.getElementById("video"),r=document.getElementById("photo"),!o)throw new Error("no context available");if(!r||!e)throw new Error("no photo or video available");o.drawImage(e,0,0,e.videoWidth,e.videoHeight,0,0,a.width,a.height);var m=a.toDataURL("image/png");r.setAttribute("src",m)};return P(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then(function(a){e=document.getElementById("video"),e.srcObject=a}).catch(function(a){console.error("Error accessing media devices.",a)})}),[n]}class L extends A{constructor(e){super(),U(this,e,W,V,I,{})}}export{L as component};
