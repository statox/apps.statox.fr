import"../chunks/CWj6FrbW.js";import{i as te}from"../chunks/CU0QmhD1.js";import{p as z,A as l,B as ae,w as o,s as r,k as I,g as t,n as D,E as c,F as u,x as N}from"../chunks/D7Iq_oEs.js";import{p as se}from"../chunks/Cbs7y-DQ.js";import{f as oe,t as _,a as m,j as re}from"../chunks/6Mp4TzzX.js";import{i as B}from"../chunks/BHUurzv7.js";import{e as ie,i as le}from"../chunks/BZoveuJY.js";import{b as ne,r as $}from"../chunks/CHVQtzBs.js";import{b as j,a as fe}from"../chunks/DkX4YCPt.js";import{b as ce}from"../chunks/C6ZF0PI7.js";import{s as ue,a as me}from"../chunks/XeRfgqW9.js";import{u as pe,U as de}from"../chunks/CGKnbS59.js";import{A as ve}from"../chunks/K8nuUPqk.js";import{t as be}from"../chunks/B5B4nQiO.js";import{M as _e}from"../chunks/DLkGyeFp.js";import{M as ge}from"../chunks/Jo_1U8Q0.js";import{M as he}from"../chunks/CpYfVfsj.js";import{u as ye}from"../chunks/BjeGWQtK.js";import{g as ke}from"../chunks/BWdLgAD0.js";const xe=()=>{ke("/clipboard/")};var Me=(p,s)=>{t(s)!==void 0&&(t(s).value="")},Se=(p,s)=>r(s,!t(s)),Ue=_('Public <i class="fas fa-lock-open"></i>',1),qe=_('Private <i class="fas fa-lock"></i>',1),we=_('<button class="form-action"><!></button>'),Ae=_('<span class="form-action">Login to upload an entry</span>'),Ce=_('<div class="contents svelte-q6sf93"><h4 class="title-bar svelte-q6sf93">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-q6sf93"><label for="name">Name</label> <input type="text"> <label for="content">Content</label> <input type="textarea"> <label for="file">File</label> <span><input class="file-input svelte-q6sf93" type="file"> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Fe(p,s){z(s,!0);const[O,G]=ue(),H=()=>me(pe,"$user",O);let n=l(ae([])),g=l(""),h=l(""),S=l(void 0),d=l(void 0),y=l(!1),k=l(0),v=l(!1);const J=async()=>{var a,M;if(r(n,[],!0),(a=t(g))!=null&&a.length||t(n).push({level:"error",header:"name must be defined"}),(M=t(h))!=null&&M.length||t(n).push({level:"error",header:"content must be defined"}),t(k)<0&&t(n).push({level:"error",header:"TTL must be positive"}),t(n).length)return;let e;t(d)&&t(d).length&&(e=t(d)[0]||void 0);try{r(v,!0),await ye({name:t(g),content:t(h),ttlSeconds:t(k),isPublic:t(y),file:e}),r(v,!1),s.onUpload()}catch(f){r(v,!1);let b=f.message;f instanceof ve&&f.code===401?b="Invalid logged in user":f instanceof de&&(b="User is logged out");const i=`<strong>Entry not created</strong><br/> ${b}`;be.push(i,{theme:{"--toastBarBackground":"#FF0000"}})}};var U=Ce(),q=c(U),K=o(c(q));K.__click=[xe],u(q);var E=o(q,2);ie(E,17,()=>t(n),le,(e,a)=>{ge(e,{get item(){return t(a)}})});var w=o(E,2),A=o(c(w),2);$(A);var C=o(A,4);$(C);var F=o(C,4),T=c(F);ce(T,e=>r(S,e),()=>t(S));var Q=o(T,2);Q.__click=[Me,S],u(F);var L=o(F,4);he(L,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(k)},set valueInSeconds(e){r(k,e,!0)}});var x=o(L,4);let P;x.__click=[Se,y];var R=c(x);{var V=e=>{var a=Ue();N(),m(e,a)},W=e=>{var a=qe();N(),m(e,a)};B(R,e=>{t(y)?e(V):e(W,!1)})}u(x),u(w);var X=o(w,2);{var Y=e=>{var a=we();a.__click=J;var M=c(a);{var f=i=>{_e(i,{size:.5,unit:"em",durationSeconds:.5})},b=i=>{var ee=re("Submit");m(i,ee)};B(M,i=>{t(v)?i(f):i(b,!1)})}u(a),I(()=>a.disabled=t(v)),m(e,a)},Z=e=>{var a=Ae();m(e,a)};B(X,e=>{H()?e(Y):e(Z,!1)})}u(U),I(e=>P=ne(x,1,"visibility-status svelte-q6sf93",null,P,e),[()=>({"visibility-public":t(y)})]),j(A,()=>t(g),e=>r(g,e)),j(C,()=>t(h),e=>r(h,e)),fe(T,()=>t(d),e=>r(d,e)),m(p,U),D(),G()}oe(["click"]);function We(p,s){z(s,!1),se.set("Clipboard"),te(),Fe(p,{onUpload:()=>console.log("new entry created")}),D()}export{We as component};
