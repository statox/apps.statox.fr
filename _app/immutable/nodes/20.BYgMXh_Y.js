import"../chunks/disclose-version.Bg9kRutz.js";import{p as K,aV as j,n as R,s as d,g as a,aF as m,aG as p,aH as T,w as c,v as W,k as F,aW as E,x as z}from"../chunks/index-client.CwKaIs20.js";import{s as P}from"../chunks/render.CCvbYkc4.js";import{a as B,t as C,f as H,s as q}from"../chunks/template.7grJUHbA.js";import{t as S}from"../chunks/service.BXYI2SAD.js";import{p as A}from"../chunks/proxy.CJQ3oePJ.js";import{M as I}from"../chunks/Main.DbGP_41n.js";import{r as U}from"../chunks/legacy-client.L7S3g_vf.js";import{P as $}from"../chunks/P5.HcSw3Ku0.js";import{e as J,i as O}from"../chunks/each.DKzLuYBh.js";import{T as Q}from"../chunks/TapTempo.vaCicukU.js";import"../chunks/legacy.C6Jsm68G.js";import{p as X}from"../chunks/Main.svelte_svelte_type_style_lang.BwOXifR7.js";var Y=C('<div id="canvas-container" class="d-flex justify-content-center"><!></div>');function Z(w,r){K(r,!0);let o=T(void 0);const f=e=>{e.setup=()=>{d(o,A(e)),e.createCanvas(600,100)},e.draw=()=>{const t=document.getElementById("canvas-container");if(t){const s=(t==null?void 0:t.clientWidth)||600;e.width!==s&&e.resizeCanvas(s,100);const i=getComputedStyle(document.body),l=i.getPropertyValue("--nc-bg-2")||"white",v=i.getPropertyValue("--nc-tx-1")||"black";e.background(l),e.stroke(v)}const n=Date.now(),y=n-r.keptDuration;for(const s of r.taps){const i=e.map(s,n,y,e.width,0);e.line(i,0,i,e.height)}}};U(()=>{var e,t;r.pause?(e=a(o))==null||e.noLoop():(t=a(o))==null||t.loop()}),j(()=>{var e;(e=a(o))==null||e.remove()});var h=Y(),g=m(h);$(g,{sketch:f}),p(h),B(w,h),R()}var ee=C('<span class="col svelte-1kxd0qm"> </span> <span class="col svelte-1kxd0qm"> </span> <span class="col svelte-1kxd0qm"> </span>',1),te=C('<div class="container svelte-1kxd0qm"><span class="col table-head svelte-1kxd0qm">BPM</span> <span class="col table-head svelte-1kxd0qm">Tempo</span> <span class="col table-head svelte-1kxd0qm">Description</span> <!></div>');function ae(w,r){const o=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],f=(t,n)=>t>(n.low??0)&&t<=(n.high??9999),h=t=>{if(t.high&&t.low)return`${t.low} - ${t.high}`;if(t.low)return`>${t.low}`;if(t.high)return`<${t.high}`};var g=te(),e=c(m(g),6);J(e,17,()=>o,O,(t,n)=>{var y=ee(),s=W(y),i=m(s,!0);p(s);var l=c(s,2),v=m(l,!0);p(l);var b=c(l,2),x=m(b,!0);p(b),F((k,_)=>{S(s,"selected",k),P(i,_),S(l,"selected",k),P(v,a(n).name),S(b,"selected",k),P(x,a(n).description)},[()=>f(r.currentBpm,a(n)),()=>h(a(n))]),B(t,y)}),p(g),B(w,g)}var oe=(w,r)=>d(r,!a(r)),ne=C('<!> <div class="container svelte-1t43gmp"><div>Press the space bar or click/tap anywhere on the page to get a bpm.</div> <div class="bpm svelte-1t43gmp"> <br>BPM</div> <div class="controls svelte-1t43gmp"><button class="control-button svelte-1t43gmp">Reset (c)</button> <button class="control-button svelte-1t43gmp"> </button></div> <!> <!></div>',1);function ye(w,r){K(r,!0),X.set("Tap Tempo");let o=T(A(new Q)),f=T(!1);const h=()=>{a(e)||(a(o).addBeat(),d(o,A(a(o))),d(f,!0),setTimeout(()=>d(f,!1),100))},g=()=>{a(o).reset(),d(o,A(a(o)))};let e=T(!1),t=!0;const n=u=>{const D=" ",V="Enter",L="c";if([D,V,L].includes(u.key)&&(u.preventDefault(),!!t)){if(t=!1,u.key===D){d(e,!1),h();return}if(u.key===V){d(e,!a(e));return}u.key===L&&(g(),d(o,A(a(o))))}},y=u=>{!t&&u.key===" "&&(t=!0,u.preventDefault())};var s=ne();q("keydown",E,n),q("keyup",E,y),q("pointerdown",E,h);var i=W(s);I(i,{title:"TapTempo",description:"Tap Tempo Metronome",iconPath:"/tap_tempo.png"});var l=c(i,2),v=c(m(l),2),b=m(v,!0);z(2),p(v);var x=c(v,2),k=m(x);k.__click=g;var _=c(k,2);_.__click=[oe,e];var G=m(_);p(_),p(x);var M=c(x,2);Z(M,{get taps(){return a(o).taps},get keptDuration(){return a(o).keptDuration},get pause(){return a(e)}});var N=c(M,2);ae(N,{get currentBpm(){return a(o).bpm}}),p(l),F(()=>{S(v,"tapped",a(f)),P(b,a(o).bpm),P(G,`${(a(e)?"Play":"Pause")??""} (Enter)`)}),B(w,s),R()}H(["click"]);export{ye as component};
