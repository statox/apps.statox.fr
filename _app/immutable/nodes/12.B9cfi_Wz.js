import"../chunks/DsnmJJEf.js";import"../chunks/CrquYXKP.js";import{p as O,h as l,C as ie,b as p,s as r,g as t,i as s,t as z,a as n,d as q,e as f,r as u,n as D,f as le,j as ne}from"../chunks/C3-yz8dw.js";import{i as ce}from"../chunks/C_vsOW3i.js";import"../chunks/CV_zAIKQ.js";import{p as fe}from"../chunks/BQF7YunG.js";/* empty css                */import{u as ue}from"../chunks/Byefvy9Z.js";import{d as pe}from"../chunks/DUwLERL-.js";import{i as k}from"../chunks/Ceeih1bB.js";import{e as me,i as de}from"../chunks/C63BUUd7.js";import{r as H}from"../chunks/C4tlimJ_.js";import{s as ve}from"../chunks/cHXO9EUa.js";import{b as N,d as be}from"../chunks/CVqt2Uny.js";import{b as ge}from"../chunks/DuPGlERk.js";import{s as _e,a as he}from"../chunks/k7vEulbC.js";import{U as ye}from"../chunks/BWptIUEw.js";import{A as xe}from"../chunks/CuMzzfZD.js";import"../chunks/RZZgkjFT.js";import{t as ke}from"../chunks/L5I2oL6d.js";import{M as Me}from"../chunks/8lDCG3vb.js";import{M as Se}from"../chunks/BCRe70JM.js";import{M as Ce}from"../chunks/DRzPK8wi.js";import{u as Pe}from"../chunks/CKztfU-L.js";import{g as Ue}from"../chunks/DgUVsjp6.js";var we=p('Public <i class="fas fa-lock-open"></i>',1),Ae=p('Private <i class="fas fa-lock"></i>',1),Ie=p('<i class="sucess-indicator fas fa-check svelte-5gxvc6"></i>'),Te=p('<button class="form-action"><!></button> <!>',1),Ee=p('<span class="form-action">Login to upload an entry</span>'),Fe=p('<div class="contents svelte-5gxvc6"><h4 class="title-bar svelte-5gxvc6">Add a new clipboard entry <button>Back</button></h4> <!> <form class="form-content svelte-5gxvc6"><label for="name">Name</label> <input type="text"/> <label for="content">Content</label> <input type="textarea"/> <label for="file">File</label> <span><input class="file-input svelte-5gxvc6" type="file"/> <button aria-label="delete file"><i class="fas fa-times-circle"></i></button></span> <label for="ttlSeconds">TTL</label> <!> <label for="isPublic">Access</label> <button><!></button></form> <!></div>');function Le(M,b){O(b,!0);const S=()=>he(ue,"$user",G),[G,J]=_e();let c=l(ie([])),g=l(""),_=l(""),h=l(void 0),m=l(void 0),d=l(!1),y=l(0),v=l(!1),C=l(!1);const K=async()=>{if(s(c,[],!0),t(g)?.length||t(c).push({level:"error",header:"name must be defined"}),t(y)<0&&t(c).push({level:"error",header:"TTL must be positive"}),t(c).length)return;let e;if(t(m)&&t(m).length&&(e=t(m)[0]||void 0),!t(_)?.length&&!e){t(c).push({level:"error",header:"Either content or file must be defined"});return}try{s(v,!0),s(C,!1),await Pe({name:t(g),content:t(_),ttlSeconds:t(y),isPublic:t(d),file:e}),s(v,!1),b.onUpload(),s(C,!0)}catch(a){s(v,!1);let i=a.message;a instanceof xe&&a.code===401?i="Invalid logged in user":a instanceof ye&&(i="User is logged out");const F=`<strong>Entry not created</strong><br/> ${i}`;ke.push(F,{theme:{"--toastBarBackground":"#FF0000"}})}},Q=()=>{Ue("/clipboard/")};var P=Fe(),U=f(P),R=r(f(U));R.__click=Q,u(U);var B=r(U,2);me(B,17,()=>t(c),de,(e,a)=>{Se(e,{get item(){return t(a)}})});var w=r(B,2),A=r(f(w),2);H(A);var I=r(A,4);H(I);var T=r(I,4),E=f(T);ge(E,e=>s(h,e),()=>t(h));var V=r(E,2);V.__click=()=>{t(h)!==void 0&&(t(h).value="")},u(T);var $=r(T,4);Ce($,{allowedUnits:["minutes","hours","days","months","years"],defaultDuration:{value:10,unit:"minutes"},get valueInSeconds(){return t(y)},set valueInSeconds(e){s(y,e,!0)}});var x=r($,4);let j;x.__click=()=>s(d,!t(d));var W=f(x);{var X=e=>{var a=we();D(),n(e,a)},Y=e=>{var a=Ae();D(),n(e,a)};k(W,e=>{t(d)?e(X):e(Y,!1)})}u(x),u(w);var Z=r(w,2);{var ee=e=>{var a=Te(),i=le(a);i.__click=K;var F=f(i);{var ae=o=>{Me(o,{size:.5,unit:"em",durationSeconds:.5})},se=o=>{var L=ne("Submit");n(o,L)};k(F,o=>{t(v)?o(ae):o(se,!1)})}u(i);var re=r(i,2);{var oe=o=>{var L=Ie();n(o,L)};k(re,o=>{t(C)&&o(oe)})}z(()=>i.disabled=t(v)),n(e,a)},te=e=>{var a=Ee();n(e,a)};k(Z,e=>{S()?e(ee):e(te,!1)})}u(P),z(()=>j=ve(x,1,"visibility-status svelte-5gxvc6",null,j,{"visibility-public":t(d)})),N(A,()=>t(g),e=>s(g,e)),N(I,()=>t(_),e=>s(_,e)),be(E,()=>t(m),e=>s(m,e)),n(M,P),q(),J()}pe(["click"]);function it(M,b){O(b,!1);const S={name:"Clipboard",description:"My universal clipboard app",iconPath:"/clipboard.png",showAuthInHeader:!0};fe.set(S),ce(),Le(M,{onUpload:()=>console.log("new entry created")}),q()}export{it as component};
