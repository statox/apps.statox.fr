import"../chunks/NZTpNUN0.js";import"../chunks/WHv88YST.js";import{h as O,bu as xe,a8 as je,g as e,i as h,bf as me,p as le,Y as we,b as L,s as b,e as y,r as p,a as A,d as ce,t as R,f as N,c as re,bv as ve,u as _,n as Ae}from"../chunks/BXDEc9at.js";import{e as B,i as P}from"../chunks/Bewy8owc.js";import{d as de,s as ee,e as J}from"../chunks/rMjN7E44.js";import{i as Be}from"../chunks/DzN6g0OA.js";import{i as Pe}from"../chunks/DDjwRVny.js";import{s as Te,a as Ie}from"../chunks/CKHL-8-y.js";import{t as ue}from"../chunks/DsttWXTE.js";import{u as ze}from"../chunks/CRQfEbLk.js";import{M as fe}from"../chunks/0yIdRvEd.js";import{r as He,s as S}from"../chunks/Wc9Rb65n.js";import{b as Oe}from"../chunks/CA3RFMya.js";import{A as Me,U as $e}from"../chunks/BI4tYcJk.js";import"../chunks/DmUNp7rQ.js";import{c as pe}from"../chunks/CnqxynKU.js";import{D as ge}from"../chunks/DTyfSRsR.js";import{s as ae,a as oe}from"../chunks/CJ3rIdgZ.js";import"../chunks/BLokosK0.js";import{p as We}from"../chunks/DoNHDqcw.js";import{g as ye}from"../chunks/CJm-6nVB.js";var De=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],qe=["difference","intersection","symmetricDifference","union"],ke=!1;class ie extends Set{#n=new Map;#e=O(0);#t=O(0);#s=xe||-1;constructor(a){if(super(),a){for(var u of a)super.add(u);this.#t.v=super.size}ke||this.#r()}#o(a){return xe===this.#s?O(a):je(a)}#r(){ke=!0;var a=ie.prototype,u=Set.prototype;for(const o of De)a[o]=function(...f){return e(this.#e),u[o].apply(this,f)};for(const o of qe)a[o]=function(...f){e(this.#e);var M=u[o].apply(this,f);return new ie(M)}}has(a){var u=super.has(a),o=this.#n,f=o.get(a);if(f===void 0){if(!u)return e(this.#e),!1;f=this.#o(!0),o.set(a,f)}return e(f),u}add(a){return super.has(a)||(super.add(a),h(this.#t,super.size),me(this.#e)),this}delete(a){var u=super.delete(a),o=this.#n,f=o.get(a);return f!==void 0&&(o.delete(a),h(f,!1)),u&&(h(this.#t,super.size),me(this.#e)),u}clear(){if(super.size!==0){super.clear();var a=this.#n;for(var u of a.values())h(u,!1);a.clear(),h(this.#t,0),me(this.#e)}}keys(){return this.values()}values(){return e(this.#e),super.values()}entries(){return e(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return e(this.#t)}}var Le=L('<div><h4>Weight</h4> <!> <div class="input-container svelte-huay37"><button class="svelte-huay37">-</button> <input type="number" step="0.1" class="svelte-huay37"/> <button class="svelte-huay37">+</button></div> <button class="form-action">Submit</button></div>');function Ve(W,a){le(a,!0);let u=O(we([])),o=O(100);const f=async()=>{if(h(u,[],!0),e(o)!==Number(e(o).toFixed(1))&&e(u).push({level:"error",header:"Value have at most 1 number after the comma"}),(e(o)<80||e(o)>110)&&e(u).push({level:"error",header:"Value must be in kg"}),e(u).length)return;const x=ge.now().toUTC().toUnixInteger();try{await pe({event:{timestampUTC:x,type:"weight",value:Math.floor(e(o)*100)}}),a.onUpload()}catch(k){let T=k.message;k instanceof Me&&k.code===401?T="Invalid logged in user":k instanceof $e&&(T="User is logged out");const D=`<strong>Entry not created</strong><br/> ${T}`;ue.push(D,{theme:{"--toastBarBackground":"#FF0000"}})}};var M=Le(),U=b(y(M),2);B(U,17,()=>e(u),P,(x,k)=>{fe(x,{get item(){return e(k)}})});var E=b(U,2),$=y(E);$.__click=()=>h(o,Number((e(o)-.1).toFixed(2)),!0);var g=b($,2);He(g);var m=b(g,2);m.__click=()=>h(o,Number((e(o)+.1).toFixed(2)),!0),p(E);var v=b(E,2);v.__click=f,p(M),Oe(g,()=>e(o),x=>h(o,x)),A(W,M),ce()}de(["click"]);var Ze=L("<button> </button>"),Ge=L('<div><h4>Mood</h4> <!> <div class="options-container svelte-m23i1u"></div> <button class="form-action">Submit</button></div>');function Je(W,a){le(a,!0);let u=we([]),o=O(5);const f=async()=>{const g=ge.now().toUTC().toUnixInteger();try{await pe({event:{timestampUTC:g,type:"mood",value:e(o)}}),a.onUpload()}catch(m){let v=m.message;m instanceof Me&&m.code===401?v="Invalid logged in user":m instanceof $e&&(v="User is logged out");const x=`<strong>Entry not created</strong><br/> ${v}`;ue.push(x,{theme:{"--toastBarBackground":"#FF0000"}})}};var M=Ge(),U=b(y(M),2);B(U,17,()=>u,P,(g,m)=>{fe(g,{get item(){return e(m)}})});var E=b(U,2);B(E,20,()=>[1,2,3,4,5,6,7,9,10],P,(g,m)=>{var v=Ze();v.__click=()=>h(o,m,!0);let x;var k=y(v,!0);p(v),R(()=>{x=ae(v,1,"",null,x,{selected:e(o)===m}),ee(k,m)}),A(g,v)}),p(E);var $=b(E,2);$.__click=f,p(M),A(W,M),ce()}de(["click"]);const K={fearful:{_color:"#FFA726",scared:{helpless:{en:"helpless"},frightened:{en:"frightened"}},anxious:{apprehensive:{en:"apprehensive"},worried:{en:"worried"}},insecure:{inadequate:{en:"inadequate"},"self-conscious":{en:"self-conscious"}},weak:{worthless:{en:"worthless"},insignificant:{en:"insignificant"}},rejected:{excluded:{en:"excluded"},persecuted:{en:"persecuted"}},threatened:{nervous:{en:"nervous"},exposed:{en:"exposed"}}},angry:{_color:"#EF5350","let down":{betrayed:{en:"betrayed"},resentful:{en:"resentful"}},humiliated:{disrespected:{en:"disrespected"},ridiculed:{en:"ridiculed"}},bitter:{indignant:{en:"indignant"},violated:{en:"violated"}},mad:{furious:{en:"furious"},jealous:{en:"jealous"}},aggressive:{provoked:{en:"provoked"},hostile:{en:"hostile"}},frustrated:{infuriated:{en:"infuriated"},annoyed:{en:"annoyed"}},distant:{withdrawn:{en:"withdrawn"},numb:{en:"numb"}},critical:{skeptical:{en:"skeptical"},dismissive:{en:"dismissive"}}},disgusted:{_color:"#9E9E9E",disapproving:{judgmental:{en:"judgmental"},disdainful:{en:"disdainful"}},disappointed:{appalled:{en:"appalled"},revolted:{en:"revolted"}},awful:{nauseated:{en:"nauseated"},detestable:{en:"detestable"}},repelled:{horrified:{en:"horrified"},hesitant:{en:"hesitant"}}},sad:{_color:"#42A5F5",lonely:{isolated:{en:"isolated"},abandoned:{en:"abandoned"}},vulnerable:{victimized:{en:"victimized"},fragile:{en:"fragile"}},despair:{grief:{en:"grief"},powerless:{en:"powerless"}},guilty:{ashamed:{en:"ashamed"},remorseful:{en:"remorseful"}},depressed:{inferior:{en:"inferior"},empty:{en:"empty"}},hurt:{embarrassed:{en:"embarrassed"},discouraged:{en:"discouraged"}}},happy:{_color:"#FFEB3B",interested:{curious:{en:"curious"},inquisitive:{en:"inquisitive"}},proud:{successful:{en:"successful"},confident:{en:"confident"}},accepted:{respected:{en:"respected"},valued:{en:"valued"}},powerful:{courageous:{en:"courageous"},creative:{en:"creative"}},peaceful:{loving:{en:"loving"},thankful:{en:"thankful"}},trusting:{sensitive:{en:"sensitive"},intimate:{en:"intimate"}},optimistic:{hopeful:{en:"hopeful"},inspired:{en:"inspired"}},playful:{aroused:{en:"aroused"},cheeky:{en:"cheeky"}},content:{free:{en:"free"},joyful:{en:"joyful"}}},surprised:{_color:"#AB47BC",startled:{shocked:{en:"shocked"},dismayed:{en:"dismayed"}},confused:{disillusioned:{en:"disillusioned"},perplexed:{en:"perplexed"}},amazed:{astonished:{en:"astonished"},awe:{en:"awe"}},excited:{eager:{en:"eager"},energetic:{en:"energetic"}}},bad:{_color:"#66BB6A",bored:{indifferent:{en:"indifferent"},apathetic:{en:"apathetic"}},busy:{pressured:{en:"pressured"},rushed:{en:"rushed"}},stressed:{overwhelmed:{en:"overwhelmed"},"out of control":{en:"out of control"}},tired:{sleepy:{en:"sleepy"},unfocused:{en:"unfocused"}}}};var Ke=ve('<g class="emotion-wedge"><path></path><text class="emotion-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Ne=ve('<g class="subcategory-wedge"><path></path><text class="subcategory-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Qe=ve('<g class="category-wedge"><path></path><text class="category-text svelte-15n63h9" text-anchor="middle" dominant-baseline="middle"> </text></g>'),Ye=L('<button class="selection-item svelte-15n63h9"> </button>'),Xe=L('<div class="emotion-wheel-container svelte-15n63h9"><svg viewBox="0 0 100 100" class="wheel svelte-15n63h9"><!><!><!><circle cx="50" cy="50" r="0" class="center-circle svelte-15n63h9"></circle></svg></div> <div class="selection svelte-15n63h9"></div> <br/> <button>Submit</button>',1);function Re(W,a){le(a,!0);const u=async()=>{const i=[...o].map(s=>{const[n,c,r,l]=s.split(" - ");return{category:n,subcategory:c,emotion:r,color:l}}),t=ge.now().toUTC().toUnixInteger();try{await pe({event:{timestampUTC:t,type:"emotionwheel",data:{emotions:i}}}),a.onUpload()}catch(s){const c=`<strong>Entry not created</strong><br/> ${s.message}`;ue.push(c,{theme:{"--toastBarBackground":"#FF0000"}})}a.onUpload()},o=new ie,f=i=>{const t=[i.category,i.subcategory,i.emotion,i.color].join(" - ");o.has(t)?o.delete(t):o.add(t)};function M(){const i=[];let t=0;Object.keys(K).forEach(n=>{let c=0;Object.keys(K[n]).filter(l=>!l.startsWith("_")).forEach(l=>{c+=Object.keys(K[n][l]).length});const r=K[n]._color||"#CCCCCC";i.push({name:n,color:r,emotionCount:c,startAngle:0,endAngle:0,subcategories:[]}),t+=c});let s=0;return i.forEach(n=>{const c=n.emotionCount/t*360;n.startAngle=s,n.endAngle=s+c;let r=s;Object.keys(K[n.name]).filter(l=>!l.startsWith("_")).forEach(l=>{const d=Object.keys(K[n.name][l]),w=d.length/n.emotionCount*c;n.subcategories.push({name:l,startAngle:r,endAngle:r+w,emotions:d}),r+=w}),s+=c}),i}const U=M();function E(i,t){const s=parseInt(i.replace("#",""),16),n=Math.min(255,Math.floor((s>>16)+(255-(s>>16))*t/100)),c=Math.min(255,Math.floor((s>>8&255)+(255-(s>>8&255))*t/100)),r=Math.min(255,Math.floor((s&255)+(255-(s&255))*t/100));return"#"+(n<<16|c<<8|r).toString(16).padStart(6,"0")}let $=O(null),g=O(null),m=O(null);function v(i,t,s){h($,i,!0),h(g,t,!0),h(m,s,!0)}function x(i,t){h($,i,!0),h(g,t,!0),h(m,null)}function k(i){h($,i,!0),h(g,null),h(m,null)}function T(){h($,null),h(g,null),h(m,null)}function D(i,t,s,n,c=50,r=50){const l=(i-90)*Math.PI/180,d=(t-90)*Math.PI/180,w=c+s*Math.cos(l),C=r+s*Math.sin(l),j=c+n*Math.cos(l),F=r+n*Math.sin(l),I=c+n*Math.cos(d),q=r+n*Math.sin(d),z=c+s*Math.cos(d),H=r+s*Math.sin(d),Z=t-i>180?1:0;return`
            M ${w} ${C}
            L ${j} ${F}
            A ${n} ${n} 0 ${Z} 1 ${I} ${q}
            L ${z} ${H}
            A ${s} ${s} 0 ${Z} 0 ${w} ${C}
            Z
        `}function Q(i,t,s){const n=(i+t)/2,c=(n-90)*Math.PI/180,r=50+s*Math.cos(c),l=50+s*Math.sin(c),d=n<180?n-90:n+90;return{x:r,y:l,rotation:d}}var te=Xe(),V=N(te),Y=y(V),ne=y(Y);B(ne,17,()=>U,P,(i,t)=>{var s=re(),n=N(s);B(n,17,()=>e(t).subcategories,P,(c,r)=>{const l=_(()=>(e(r).endAngle-e(r).startAngle)/e(r).emotions.length);var d=re(),w=N(d);B(w,17,()=>e(r).emotions,P,(C,j,F)=>{const I=_(()=>e(r).startAngle+F*e(l)),q=_(()=>e(r).startAngle+(F+1)*e(l)),z=_(()=>D(e(I),e(q),30,47)),H=_(()=>Q(e(I),e(q),38.5)),Z=_(()=>e(m)===e(j)),Fe=_(()=>[...o].find(Ue=>Ue.includes(e(j))));var G=Ke();G.__click=()=>f({category:e(t).name,subcategory:e(r).name,emotion:e(j),color:e(t).color});var se=y(G);let be;var X=b(se),Se=y(X,!0);p(X),p(G),R(()=>{S(se,"d",e(z)),be=ae(se,0,"emotion-path svelte-15n63h9",null,be,{highlighted:e(Z),selected:e(Fe)}),oe(se,`fill: ${e(t).color??""};`),S(X,"x",e(H).x),S(X,"y",e(H).y),S(X,"transform",`rotate(${e(H).rotation??""} ${e(H).x??""} ${e(H).y??""})`),ee(Se,e(j))}),J("mouseenter",G,()=>v(e(t).name,e(r).name,e(j))),J("mouseleave",G,T),A(C,G)}),A(c,d)}),A(i,s)});var _e=b(ne);B(_e,17,()=>U,P,(i,t)=>{var s=re(),n=N(s);B(n,17,()=>e(t).subcategories,P,(c,r)=>{const l=_(()=>D(e(r).startAngle,e(r).endAngle,17,30)),d=_(()=>Q(e(r).startAngle,e(r).endAngle,23.5)),w=_(()=>e(g)===e(r).name&&e($)===e(t).name),C=_(()=>[...o].find(Z=>Z.includes(e(r).name))),j=_(()=>E(e(t).color,30));var F=Ne(),I=y(F);let q;var z=b(I),H=y(z,!0);p(z),p(F),R(()=>{S(I,"d",e(l)),q=ae(I,0,"subcategory-path svelte-15n63h9",null,q,{highlighted:e(w),selected:e(C)}),oe(I,`fill: ${e(j)??""};`),S(z,"x",e(d).x),S(z,"y",e(d).y),S(z,"transform",`rotate(${e(d).rotation??""} ${e(d).x??""} ${e(d).y??""})`),ee(H,e(r).name)}),J("mouseenter",F,()=>x(e(t).name,e(r).name)),J("mouseleave",F,T),A(c,F)}),A(i,s)});var Ee=b(_e);B(Ee,17,()=>U,P,(i,t)=>{const s=_(()=>D(e(t).startAngle,e(t).endAngle,0,17)),n=_(()=>Q(e(t).startAngle,e(t).endAngle,8.5)),c=_(()=>e($)===e(t).name),r=_(()=>[...o].find(F=>F.includes(e(t).name)));var l=Qe(),d=y(l);let w;var C=b(d),j=y(C,!0);p(C),p(l),R(()=>{S(d,"d",e(s)),w=ae(d,0,"category-path svelte-15n63h9",null,w,{highlighted:e(c),selected:e(r)}),oe(d,`fill: ${e(t).color??""};`),S(C,"x",e(n).x),S(C,"y",e(n).y),S(C,"transform",`rotate(${e(n).rotation??""} ${e(n).x??""} ${e(n).y??""})`),ee(j,e(t).name)}),J("mouseenter",l,()=>k(e(t).name)),J("mouseleave",l,T),A(i,l)}),Ae(),p(Y),p(V);var he=b(V,2);B(he,21,()=>[...o],P,(i,t)=>{const s=_(()=>{const[r,l,d,w]=e(t).split(" - ");return{category:r,subcategory:l,emotion:d,color:w}});var n=Ye();n.__click=()=>o.delete(e(t));var c=y(n);p(n),R(()=>{oe(n,`--color: ${e(s).color??""}`),ee(c,`${e(s).category??""}
            ${e(s).subcategory??""}
            ${e(s).emotion??""}`)}),A(i,n)}),p(he);var Ce=b(he,4);Ce.__click=u,A(W,te),ce()}de(["click"]);var et=L('<div class="input-form svelte-cigsfe"><!></div> <hr class="separator svelte-cigsfe"/>',1),tt=L(`<div class="contents svelte-cigsfe"><h4 class="title-bar svelte-cigsfe">Today's Personal Metrics <button>Back</button></h4> <!></div>`);function wt(W,a){le(a,!1);const u=()=>Ie(ze,"$user",o),[o,f]=Te();We.set({name:"Personal Tracker",iconPath:"/personal_tracker.png",showAuthInHeader:!0});const M=()=>{ye("/personal-tracker"),ue.push("New entry created")};let U=[{name:"emotionWheel",component:Re},{name:"mood",component:Je},{name:"weight",component:Ve}];Pe();var E=re(),$=N(E);{var g=v=>{var x=tt(),k=y(x),T=b(y(k));T.__click=()=>{ye("/personal-tracker")},p(k);var D=b(k,2);B(D,1,()=>U,P,(Q,te)=>{var V=et(),Y=N(V),ne=y(Y);e(te).component(ne,{onUpload:M}),p(Y),Ae(2),A(Q,V)}),p(x),A(v,x)},m=v=>{fe(v,{item:{level:"info",header:"Login to add an entry or see events"}})};Be($,v=>{u()?v(g):v(m,!1)})}A(W,E),ce(),f()}de(["click"]);export{wt as component};
