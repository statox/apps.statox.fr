import"../chunks/NZTpNUN0.js";import{a as ke}from"../chunks/DnIoD-SE.js";import{b as A,g as H,c as J,u as pe,p as Ce,W as ce,d as u,s as a,t as Ee,a as Fe,r as c,f as Ge}from"../chunks/BTM_f0C0.js";import{s as Le}from"../chunks/DjCmUVr5.js";import{i as V}from"../chunks/D_G27x0v.js";import{f as X,a as P}from"../chunks/g3ICtxBO.js";import{c as ee,r as z,b as de}from"../chunks/DbSpTE_I.js";import{d as Pe}from"../chunks/fpD4cHwH.js";import{b as w}from"../chunks/BekeXsjs.js";import{M as Xe}from"../chunks/DtjR3o00.js";import{P as Ye}from"../chunks/B0JigKnz.js";class Ze{default;#e=A();get value(){return H(this.#e)}set value(o){J(this.#e,o,!0)}key="";constructor(o,s){this.key=o,this.value=s,this.default=s;{const r=localStorage.getItem(o);r&&(this.value=this.deserialize(r))}pe(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(o){return JSON.stringify(o)}deserialize(o){return JSON.parse(o)}}function f(l,o){return new Ze(l,o)}const Re=(l,o,s)=>o-s<=l&&l<=o+s;function qe(l,o){const s=Math.sqrt(l*l+o*o),r=Math.atan2(o,l);return{r:s,theta:r}}const Ne=(l,o)=>{const{gridSize:s,colorMode:r,cellSize:N,t:Y,noiseMode:W,noiseFactor:Z,displacementX:h,displacementY:x,displacementZ:g,levelsStart:k,levelsEnd:C,levelsStep:B,levelsMargin:D}=o;l.background(0);const R=l.color(255,0,0),q=l.color(0,255,0);for(let S=0;S<s;S++)for(let y=0;y<s;y++){let _=0;if(W==="carthesian")_=l.noise(y*Z+Y*h,S*Z+Y*x,Y*g);else if(W==="polar"){const{r:m,theta:d}=qe((y-s/2)*Z,(S-s/2)*Z);_=l.noise(d*h,m*x,Y*g)}for(let m=k;m<=C;m+=B||.1){if(!Re(_,m,D))continue;let d=255;if(r==="white")d=255;else if(r==="gradient")d=l.map(m,k,C,100,255);else if(r==="quantized-gradient"){const I=Math.trunc(_*10)/10;d=l.map(I,k,C,100,255)}else if(r==="color-gradient")d=l.lerpColor(R,q,_);else if(r==="color-scaled-gradient"){const I=l.map(_,k,C,0,1);d=l.lerpColor(R,q,I)}l.fill(d),l.circle(y*N,S*N,N)}}};var We=X("<br/>"),xe=X('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1"/>',1),Be=X('<div class="control-section svelte-1a6vy18"><label for="gridSize">Grid size</label> <input type="number" step="1"/> <label for="blurEnabled">Enable blur</label> <!> <!></div>'),De=X("<br/>"),Ie=X('<div class="control-section svelte-1a6vy18"><label for="noiseMode">Noise Mode</label> <select id="noiseMode-select"><option>Carthesian</option><option>Polar</option></select> <label for="displacementX">displacementX</label> <input type="number" step="0.01"/> <label for="displacementY">displacementY</label> <input type="number" step="0.01"/> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"/> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"/></div>'),Ve=X("<br/>"),Ae=X('<div class="control-section svelte-1a6vy18"><label for="levelsStart">levelsStart</label> <input type="number" step="0.1"/> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"/> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"/> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"/> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option><option>Color Gradient</option><option>Color scaled Gradient</option></select></div>'),He=X('<div class="container svelte-1a6vy18"><div id="canvas-container"><div class="stats"><label for="fps">FPS</label> <span> </span></div> <!></div> <div class="controls-container svelte-1a6vy18"><span class="control-header svelte-1a6vy18"><button>&nbsp;Grid controls</button></span> <!> <span class="control-header svelte-1a6vy18"><button>&nbsp;Noise controls</button></span> <!> <span class="control-header svelte-1a6vy18"><button>&nbsp;Lines controls</button></span> <!> <div class="control-section svelte-1a6vy18"><label for="resetAll">Reset all</label><button>Reset</button></div></div></div>');function ta(l,o){Ce(o,!0);let s=A(void 0),r=1e3,N=0,Y=0,W=0,Z=A(0);const h=f("p5-terrain-gridSize",200);let x=r/h.value;pe(()=>{x=r/h.value});let g=f("p5-terrain-blurEnabled",!1),k=f("p5-terrain-blurValue",4),C=f("p5-terrain-displacementX",0),B=f("p5-terrain-displacementY",0),D=f("p5-terrain-displacementZ",.01),R=f("p5-terrain-noiseFactor",.02),q=f("p5-terrain-levelsStart",.2),S=f("p5-terrain-levelsEnd",.8),y=f("p5-terrain-levelsStep",.05),_=f("p5-terrain-margin",.005),m=f("p5-terrain-colorMode","gradient"),d=f("p5-terrain-nodeMode","carthesian"),I=A(ce(g.value?"on":"off"));const fe=()=>{[h,g,k,d,C,B,D,R,q,S,y,_,m].forEach(t=>t.reset())},b=ce({grid:!1,noise:!1,lines:!1}),be=e=>{function t(){const n=Math.min(e.windowWidth,e.windowHeight);r=Math.floor(n*.9),e.resizeCanvas(r,r),x=r/h.value}function v(){const n=Date.now();n-Y>1e3&&(J(Z,W,!0),Y=n,W=0),W++}e.windowResized=()=>{t()},e.setup=()=>{J(s,e,!0),e.createCanvas(r,r),t(),e.noStroke()},e.draw=()=>{v(),N++,Ne(e,{gridSize:h.value,colorMode:m.value,noiseMode:d.value,t:N,cellSize:x,noiseFactor:R.value,displacementX:C.value,displacementY:B.value,displacementZ:D.value,levelsStart:q.value,levelsEnd:S.value,levelsMargin:_.value,levelsStep:y.value}),g.value&&e.filter(e.BLUR,k.value)}};ke(()=>{H(s)?.remove()});var O=He(),T=u(O),Q=u(T),ae=a(u(Q),2),_e=u(ae,!0);c(ae),c(Q);var me=a(Q,2);Ye(me,{sketch:be}),c(T);var le=a(T,2),U=u(le),te=u(U);te.__click=()=>b.grid=!b.grid,c(U);var oe=a(U,2);{var he=e=>{var t=We();P(e,t)},ge=e=>{var t=Be(),v=a(u(t),2);z(v);var n=a(v,4);Xe(n,{get value(){return H(I)},label:"",design:"slider",$$events:{change:()=>{g.value=!g.value,J(I,g.value?"on":"off",!0)}}});var E=a(n,2);{var F=p=>{var M=xe(),G=a(Ge(M),2);z(G),w(G,()=>k.value,i=>k.value=i),P(p,M)};V(E,p=>{g.value&&p(F)})}c(t),w(v,()=>h.value,p=>h.value=p),P(e,t)};V(oe,e=>{b.grid?e(he):e(ge,!1)})}var j=a(oe,2),re=u(j);re.__click=()=>b.noise=!b.noise,c(j);var se=a(j,2);{var Se=e=>{var t=De();P(e,t)},ye=e=>{var t=Ie(),v=a(u(t),2),n=u(v);n.value=n.__value="carthesian";var E=a(n);E.value=E.__value="polar",c(v);var F=a(v,4);z(F);var p=a(F,4);z(p);var M=a(p,4);z(M);var G=a(M,4);z(G),c(t),de(v,()=>d.value,i=>d.value=i),w(F,()=>C.value,i=>C.value=i),w(p,()=>B.value,i=>B.value=i),w(M,()=>D.value,i=>D.value=i),w(G,()=>R.value,i=>R.value=i),P(e,t)};V(se,e=>{b.noise?e(Se):e(ye,!1)})}var K=a(se,2),ne=u(K);ne.__click=()=>b.lines=!b.lines,c(K);var ie=a(K,2);{var Me=e=>{var t=Ve();P(e,t)},ze=e=>{var t=Ae(),v=a(u(t),2);z(v);var n=a(v,4);z(n);var E=a(n,4);z(E);var F=a(E,4);z(F);var p=a(F,4),M=u(p);M.value=M.__value="white";var G=a(M);G.value=G.__value="gradient";var i=a(G);i.value=i.__value="quantized-gradient";var $=a(i);$.value=$.__value="color-gradient";var ue=a($);ue.value=ue.__value="color-scaled-gradient",c(p),c(t),w(v,()=>q.value,L=>q.value=L),w(n,()=>S.value,L=>S.value=L),w(E,()=>y.value,L=>y.value=L),w(F,()=>_.value,L=>_.value=L),de(p,()=>m.value,L=>m.value=L),P(e,t)};V(ie,e=>{b.lines?e(Me):e(ze,!1)})}var ve=a(ie,2),we=a(u(ve));we.__click=fe,c(ve),c(le),c(O),Ee(()=>{Le(_e,H(Z)),ee(te,1,`collapse-button ${b.grid?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1a6vy18"),ee(re,1,`collapse-button ${b.noise?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1a6vy18"),ee(ne,1,`collapse-button ${b.lines?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-1a6vy18")}),P(l,O),Fe()}Pe(["click"]);export{ta as component};
