import"../chunks/disclose-version.Bg9kRutz.js";import{i as D}from"../chunks/legacy.C6Jsm68G.js";import{p as C,aH as _,w as u,aF as y,g as t,aG as $,s as v,n as E,k as J,v as K}from"../chunks/index-client.CwKaIs20.js";import{f as P,j as Q,a as g,t as F,k as T,e as V}from"../chunks/template.WM5jmQYV.js";import{i as w}from"../chunks/if.Bi_20hhT.js";import{s as L,a as M}from"../chunks/store.ChaSGJXD.js";import{u as S,U as W}from"../chunks/service.CR7x1klh.js";import{M as R}from"../chunks/Main.DrhnhMF3.js";import{e as X,i as Y}from"../chunks/each.DKzLuYBh.js";import{r as Z}from"../chunks/attributes.O9VbxzGr.js";import{b as B}from"../chunks/input.Vz6T5ezW.js";import{p as U}from"../chunks/proxy.CJQ3oePJ.js";import{A as ee}from"../chunks/index.DrRnOfd5.js";import{M as te}from"../chunks/Main.B8ObMYj1.js";import{t as ae}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.DK7u8HCG.js";import{a as oe}from"../chunks/api.CK2zu222.js";import{g as re}from"../chunks/entry.1K67peJM.js";import{p as se}from"../chunks/Main.svelte_svelte_type_style_lang.BLOOzyvB.js";const ne=async(b,o,c,f,m,p,s)=>{var n,i;if(v(o,U([])),(n=t(c))!=null&&n.length||t(o).push({level:"error",header:"Name must be defined"}),(i=t(f))!=null&&i.length||t(o).push({level:"error",header:"Content must be defined"}),!t(o).length)try{v(m,!0),await oe({name:t(c),content:t(f),ingredients:p}),v(m,!1),s.onUpload()}catch(l){v(m,!1);let e=l.message;l instanceof ee&&l.code===401?e="Invalid logged in user":l instanceof W&&(e="User is logged out");const h=`<strong>Entry not created</strong><br/> ${e}`;ae.push(h,{theme:{"--toastBarBackground":"#FF0000"}})}};var ie=()=>re("/cookbook"),le=F('<button class="form-action svelte-1khmcc6"><!></button>'),me=F('<span class="form-action svelte-1khmcc6">Login to upload an entry</span>'),ce=F('<div class="contents svelte-1khmcc6"><h4 class="title-bar svelte-1khmcc6">Add a new recipe</h4> <button>Back to list</button> <!> <form class="form-content svelte-1khmcc6"><label for="name">Name</label> <input type="text"> <label for="content">Content</label> <textarea rows="10" cols="50"></textarea> <br> <!></form></div>');function fe(b,o){C(o,!0);const[c,f]=L(),m=()=>M(S,"$user",c);let p=_(U([])),s=_(!1),n=_(""),i=_(""),l=U([]);var e=ce(),h=u(y(e),2);h.__click=[ie];var N=u(h,2);X(N,17,()=>t(p),Y,(a,r)=>{R(a,{get item(){return t(r)}})});var A=u(N,2),k=u(y(A),2);Z(k);var x=u(k,4);Q(x);var j=u(x,4);{var z=a=>{var r=le();r.__click=[ne,p,n,i,s,l,o];var H=y(r);{var I=d=>{te(d,{size:.5,unit:"em",durationSeconds:.5})},O=d=>{var q=T("Submit");g(d,q)};w(H,d=>{t(s)?d(I):d(O,!1)})}$(r),J(()=>r.disabled=t(s)),g(a,r)},G=a=>{var r=me();g(a,r)};w(j,a=>{m()?a(z):a(G,!1)})}$(A),$(e),B(k,()=>t(n),a=>v(n,a)),B(x,()=>t(i),a=>v(i,a)),g(b,e),E(),f()}P(["click"]);function Ce(b,o){C(o,!1);const[c,f]=L(),m=()=>M(S,"$user",c);se.set("Cookbook");const p=()=>{console.log("New recipe created")};D();var s=V(),n=K(s);{var i=e=>{fe(e,{onUpload:p})},l=e=>{R(e,{item:{level:"info",header:"Login to add an entry"}})};w(n,e=>{m()?e(i):e(l,!1)})}g(b,s),E(),f()}export{Ce as component};
