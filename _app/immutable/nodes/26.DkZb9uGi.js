import"../chunks/NZTpNUN0.js";import"../chunks/DRxGxY2p.js";import{p as w,h as F,a5 as P,b as M,s as l,e as k,g as o,i as h,r as _,a as b,d as E,t as V,c as W,f as I}from"../chunks/OOCdeaM4.js";import{e as y,i as U}from"../chunks/80iJqotc.js";import{d as T,s as O}from"../chunks/DBBHR-3t.js";import{i as j}from"../chunks/BMFH8sZT.js";import{i as q}from"../chunks/c3q9pMCF.js";import{s as z,a as G}from"../chunks/BY6cWyRb.js";import{t as B}from"../chunks/Du_j8uFv.js";import{u as H}from"../chunks/bMdrnNxv.js";import{M as C}from"../chunks/DKcpRBkl.js";import{r as J}from"../chunks/C2XHBoXy.js";import{b as K}from"../chunks/CCHh_OeQ.js";import{A as S,U as $}from"../chunks/BI4tYcJk.js";import"../chunks/DPSdUY9Q.js";import{c as A}from"../chunks/Bd9sQ8Nq.js";import{D}from"../chunks/DTyfSRsR.js";import{s as Q}from"../chunks/DazWBkG7.js";import"../chunks/DiYuexAL.js";import{p as R}from"../chunks/BOKhb25Z.js";import{g as N}from"../chunks/BmcunZc1.js";var X=M('<div><h3>Weight</h3> <!> <div class="input-container svelte-huay37"><button class="svelte-huay37">-</button> <input type="number" step="0.1" class="svelte-huay37"/> <button class="svelte-huay37">+</button></div> <button class="form-action">Submit</button></div>');function Y(d,u){w(u,!0);let c=F(P([])),e=F(100);const f=async()=>{if(h(c,[],!0),o(e)!==Number(o(e).toFixed(1))&&o(c).push({level:"error",header:"Value have at most 1 number after the comma"}),(o(e)<80||o(e)>110)&&o(c).push({level:"error",header:"Value must be in kg"}),o(c).length)return;const a=D.now().toUTC().toUnixInteger();try{await A({event:{timestampUTC:a,type:"weight",value:Math.floor(o(e)*100)}}),u.onUpload()}catch(n){let g=n.message;n instanceof S&&n.code===401?g="Invalid logged in user":n instanceof $&&(g="User is logged out");const x=`<strong>Entry not created</strong><br/> ${g}`;B.push(x,{theme:{"--toastBarBackground":"#FF0000"}})}};var m=X(),p=l(k(m),2);y(p,17,()=>o(c),U,(a,n)=>{C(a,{get item(){return o(n)}})});var i=l(p,2),v=k(i);v.__click=()=>h(e,Number((o(e)-.1).toFixed(2)),!0);var s=l(v,2);J(s);var r=l(s,2);r.__click=()=>h(e,Number((o(e)+.1).toFixed(2)),!0),_(i);var t=l(i,2);t.__click=f,_(m),K(s,()=>o(e),a=>h(e,a)),b(d,m),E()}T(["click"]);var Z=M("<button> </button>"),tt=M('<div><h3>Mood</h3> <!> <div class="options-container svelte-m23i1u"></div> <button class="form-action">Submit</button></div>');function et(d,u){w(u,!0);let c=P([]),e=F(5);const f=async()=>{const s=D.now().toUTC().toUnixInteger();try{await A({event:{timestampUTC:s,type:"mood",value:o(e)}}),u.onUpload()}catch(r){let t=r.message;r instanceof S&&r.code===401?t="Invalid logged in user":r instanceof $&&(t="User is logged out");const a=`<strong>Entry not created</strong><br/> ${t}`;B.push(a,{theme:{"--toastBarBackground":"#FF0000"}})}};var m=tt(),p=l(k(m),2);y(p,17,()=>c,U,(s,r)=>{C(s,{get item(){return o(r)}})});var i=l(p,2);y(i,20,()=>[1,2,3,4,5,6,7,9,10],U,(s,r)=>{var t=Z();t.__click=()=>h(e,r,!0);let a;var n=k(t,!0);_(t),V(()=>{a=Q(t,1,"",null,a,{selected:o(e)===r}),O(n,r)}),b(s,t)}),_(i);var v=l(i,2);v.__click=f,_(m),b(d,m),E()}T(["click"]);var ot=M("<button>Back</button> <h2>Today's Personal Metrics</h2> <!>",1);function xt(d,u){w(u,!1);const c=()=>G(H,"$user",e),[e,f]=z();R.set({name:"Personal Tracker",iconPath:"/personal_tracker.png"});const m=()=>{N("/personal-tracker"),B.push("New entry created")};let p=[{name:"mood",component:et},{name:"weight",component:Y}];q();var i=W(),v=I(i);{var s=t=>{var a=ot(),n=I(a);n.__click=()=>N("/personal-tracker");var g=l(n,4);y(g,1,()=>p,U,(x,L)=>{o(L).component(x,{onUpload:m})}),b(t,a)},r=t=>{C(t,{item:{level:"info",header:"Login to add an entry or see events"}})};j(v,t=>{c()?t(s):t(r,!1)})}b(d,i),E(),f()}T(["click"]);export{xt as component};
