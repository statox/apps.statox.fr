import"../chunks/DsnmJJEf.js";import"../chunks/CYMEFg2K.js";import{p as N,c as $,f as o,a,d as Q,g as t,I as J,b as d,e as _,r as v,s as T,t as k,j as B}from"../chunks/BJRZRhu8.js";import{s as b,d as ft}from"../chunks/B3kKxc5b.js";import{i as R}from"../chunks/CqJ2fdgF.js";import{M as _t}from"../chunks/CJ2EnuY8.js";import{M as ut}from"../chunks/Bye5-0Tv.js";import{a as gt}from"../chunks/ItrR6YhR.js";import{i as D}from"../chunks/Bf4rEyHI.js";import{e as C,i as F}from"../chunks/CD5Q4Pji.js";import{a as ht}from"../chunks/BYDnD9tF.js";import{s as yt,a as K}from"../chunks/Elmngvfr.js";import{u as $t}from"../chunks/Ds0xSSFg.js";import{M as kt}from"../chunks/DW0d6O4F.js";import{g as bt,p as wt,P as xt}from"../chunks/Ay7vzzqP.js";import{D as Pt}from"../chunks/CkcISRbr.js";import"../chunks/X1A7Ny5N.js";import{p as Mt}from"../chunks/DxqDe86E.js";/* empty css                */import{g as Dt}from"../chunks/CU_u4AhG.js";var Tt=d('<button class="emotion-item svelte-cyscl8"> </button>'),Lt=d('<div class="selection"></div>'),St=d('<div class="event svelte-cyscl8"><div class="event-date"> </div> <div class="event-value"><!></div></div>'),At=d('<h4> </h4> <div class="event svelte-cyscl8"><div>Date</div> <div>Value</div></div> <!>',1),Et=d("<p>Loading events</p>");function Ht(L,S){N(S,!1);const m=()=>K(wt,"$personalTrackerPassword",u),w=()=>K($t,"$user",u),[u,A]=yt(),E=async()=>(await bt(m())).reduce((e,r)=>(e[r.type]||(e[r.type]=[]),e[r.type].push(r),e),{});R();var H=$(),j=o(H);{var G=s=>{var e=$(),r=o(e);gt(r,E,n=>{var p=Et();a(n,p)},(n,p)=>{var x=$(),W=o(x);C(W,1,()=>Object.keys(t(p)),F,(X,O)=>{var V=At(),q=o(V),Y=_(q,!0);v(q);var Z=T(q,4);C(Z,1,()=>t(p)[t(O)],F,(tt,i)=>{const at=J(()=>Pt.fromSeconds(t(i).eventDateUnix).toLocal().toFormat("dd/MM/yy HH:mm"));var I=St(),U=_(I),et=_(U,!0);v(U);var z=T(U,2),rt=_(z);{var ot=c=>{var g=B();k(()=>b(g,t(i).data)),a(c,g)},st=c=>{var g=$(),nt=o(g);{var it=l=>{var h=B();k(()=>b(h,t(i).data)),a(l,h)},vt=l=>{var h=$(),dt=o(h);{var mt=f=>{var y=Lt();C(y,5,()=>t(i).data.emotions,F,(ct,P)=>{var M=Tt(),lt=_(M);v(M),k(()=>{ht(M,`--color: ${t(P).color??""}`),b(lt,`${t(P).category??""}
                                        ${t(P).subcategory??""}
                                        ${t(P).emotion??""}`)}),a(ct,M)}),v(y),a(f,y)},pt=f=>{var y=B("Unknown type of data");a(f,y)};D(dt,f=>{t(i).type==="emotionwheel"?f(mt):f(pt,!1)},!0)}a(l,h)};D(nt,l=>{t(i).type==="weight"?l(it):l(vt,!1)},!0)}a(c,g)};D(rt,c=>{t(i).type==="mood"?c(ot):c(st,!1)})}v(z),v(I),k(()=>b(et,t(at))),a(tt,I)}),k(()=>b(Y,t(O))),a(X,V)}),a(n,x)},(n,p)=>{{let x=J(()=>({level:"error",header:"Something went wrong getting events",message:t(p)}));kt(n,{get item(){return t(x)}})}}),a(s,e)};D(j,s=>{w()&&s(G)})}a(L,H),Q(),A()}var jt=d("<div><button>Add an entry</button></div> <!>",1),qt=d("<!> <!>",1);function ea(L,S){N(S,!1);const m={name:"Personal Tracker",description:"Track me metrics",iconPath:"/personal_tracker.png",showAuthInHeader:!0};Mt.set(m),R();var w=qt(),u=o(w);ut(u,{get title(){return m.name},get description(){return m.description},get iconPath(){return m.iconPath}});var A=T(u,2);_t(A,{message:"Login to see events",requiredScope:"admin",children:(E,H)=>{xt(E,{children:(j,G)=>{var s=jt(),e=o(s),r=_(e);r.__click=()=>Dt("/personal-tracker/add"),v(e);var n=T(e,2);Ht(n,{}),a(j,s)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(L,w),Q()}ft(["click"]);export{ea as component};
