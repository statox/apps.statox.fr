import"../chunks/disclose-version.Bg9kRutz.js";import{p as F,aV as z,n as G,s as d,g as t,aF as p,aG as h,aH as T,w as m,v as N,k as b,aa as M,aW as V,x as H}from"../chunks/index-client.-dvqkx9U.js";import{s as P}from"../chunks/render.EdNHQRjW.js";import{a as S,t as C,m as I,s as L}from"../chunks/template.vTw7QF-h.js";import{t as B}from"../chunks/service.B0juS8IC.js";import{p as A}from"../chunks/proxy.DvpFO7AR.js";import{M as U}from"../chunks/Main.t0csPp8i.js";import{r as J}from"../chunks/legacy-client.ZIVlmerL.js";import{P as O}from"../chunks/P5.DQqDaVwG.js";import{e as Q,i as X}from"../chunks/each.DdOvmIg7.js";import{T as Y}from"../chunks/TapTempo.vaCicukU.js";import"../chunks/legacy.B7rOiASK.js";import{p as Z}from"../chunks/Main.svelte_svelte_type_style_lang.GeO9eQtV.js";var $=C('<div id="canvas-container" class="d-flex justify-content-center"><!></div>');function ee(f,s){F(s,!0);let o=T(void 0);const c=e=>{e.setup=()=>{d(o,A(e)),e.createCanvas(600,100)},e.draw=()=>{const a=document.getElementById("canvas-container");if(a){const r=(a==null?void 0:a.clientWidth)||600;e.width!==r&&e.resizeCanvas(r,100);const l=getComputedStyle(document.body),y=l.getPropertyValue("--nc-bg-2")||"white",i=l.getPropertyValue("--nc-tx-1")||"black";e.background(y),e.stroke(i)}const n=Date.now(),w=n-s.keptDuration;for(const r of s.taps){const l=e.map(r,n,w,e.width,0);e.line(l,0,l,e.height)}}};J(()=>{var e,a;s.pause?(e=t(o))==null||e.noLoop():(a=t(o))==null||a.loop()}),z(()=>{var e;(e=t(o))==null||e.remove()});var v=$(),g=p(v);O(g,{sketch:c}),h(v),S(f,v),G()}var te=C('<span class="col svelte-1kxd0qm"> </span> <span class="col svelte-1kxd0qm"> </span> <span class="col svelte-1kxd0qm"> </span>',1),ae=C('<div class="container svelte-1kxd0qm"><span class="col table-head svelte-1kxd0qm">BPM</span> <span class="col table-head svelte-1kxd0qm">Tempo</span> <span class="col table-head svelte-1kxd0qm">Description</span> <!></div>');function oe(f,s){const o=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],c=(a,n)=>a>(n.low??0)&&a<=(n.high??9999),v=a=>{if(a.high&&a.low)return`${a.low} - ${a.high}`;if(a.low)return`>${a.low}`;if(a.high)return`<${a.high}`};var g=ae(),e=m(p(g),6);Q(e,17,()=>o,X,(a,n)=>{var w=te(),r=N(w);const l=M(()=>c(s.currentBpm,t(n)));b(()=>B(r,"selected",t(l)));var y=p(r,!0);b(()=>P(y,v(t(n)))),h(r);var i=m(r,2);const D=M(()=>c(s.currentBpm,t(n)));b(()=>B(i,"selected",t(D)));var _=p(i,!0);h(i);var k=m(i,2);const x=M(()=>c(s.currentBpm,t(n)));b(()=>B(k,"selected",t(x)));var E=p(k,!0);h(k),b(()=>{P(_,t(n).name),P(E,t(n).description)}),S(a,w)}),h(g),S(f,g)}var ne=(f,s)=>d(s,!t(s)),se=C('<!> <div class="container svelte-1t43gmp"><div>Press the space bar or click/tap anywhere on the page to get a bpm.</div> <div class="bpm svelte-1t43gmp"> <br>BPM</div> <div class="controls svelte-1t43gmp"><button class="control-button svelte-1t43gmp">Reset (c)</button> <button class="control-button svelte-1t43gmp"> </button></div> <!> <!></div>',1);function ke(f,s){F(s,!0),Z.set("Tap Tempo");let o=T(A(new Y)),c=T(!1);const v=()=>{t(e)||(t(o).addBeat(),d(o,A(t(o))),d(c,!0),setTimeout(()=>d(c,!1),100))},g=()=>{t(o).reset(),d(o,A(t(o)))};let e=T(!1),a=!0;const n=u=>{const q=" ",R="Enter",W="c";if([q,R,W].includes(u.key)&&(u.preventDefault(),!!a)){if(a=!1,u.key===q){d(e,!1),v();return}if(u.key===R){d(e,!t(e));return}u.key===W&&(g(),d(o,A(t(o))))}},w=u=>{!a&&u.key===" "&&(a=!0,u.preventDefault())};var r=se();L("keydown",V,n),L("keyup",V,w),L("pointerdown",V,v);var l=N(r);U(l,{title:"TapTempo",description:"Tap Tempo Metronome",iconPath:"/tap_tempo.png"});var y=m(l,2),i=m(p(y),2),D=p(i,!0);H(2),h(i);var _=m(i,2),k=p(_);k.__click=g;var x=m(k,2);x.__click=[ne,e];var E=p(x);h(x),h(_);var K=m(_,2);ee(K,{get taps(){return t(o).taps},get keptDuration(){return t(o).keptDuration},get pause(){return t(e)}});var j=m(K,2);oe(j,{get currentBpm(){return t(o).bpm}}),h(y),b(()=>{B(i,"tapped",t(c)),P(D,t(o).bpm),P(E,`${(t(e)?"Play":"Pause")??""} (Enter)`)}),S(f,r),G()}I(["click"]);export{ke as component};
