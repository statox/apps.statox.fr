var Le=Object.defineProperty;var fe=t=>{throw TypeError(t)};var Pe=(t,e,r)=>e in t?Le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var te=(t,e,r)=>Pe(t,typeof e!="symbol"?e+"":e,r),Xe=(t,e,r)=>e.has(t)||fe("Cannot "+r);var ae=(t,e,r)=>(Xe(t,e,"read from private field"),r?r.call(t):e.get(t)),_e=(t,e,r)=>e.has(t)?fe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);import"../chunks/CWj6FrbW.js";import{A as W,g as H,s as J,C as he,p as Ye,B as be,aO as Ze,E as c,w as l,k as Re,n as qe,F as u,v as Be}from"../chunks/I8Oq6K5_.js";import{s as Ne}from"../chunks/DRU8cbEw.js";import{i as V}from"../chunks/CLIFNVQM.js";import{f as xe,t as X,a as P}from"../chunks/CtuybYrQ.js";import{b as le,r as y}from"../chunks/BKam2jIy.js";import{b as M}from"../chunks/BcNfVtUj.js";import{b as me}from"../chunks/CUSbk-Jw.js";import{M as Ae}from"../chunks/BXnR543D.js";import{P as De}from"../chunks/u9MJM6mA.js";var O;class Ie{constructor(e,r){te(this,"default");_e(this,O,W());te(this,"key","");this.key=e,this.value=r,this.default=r;{const n=localStorage.getItem(e);n&&(this.value=this.deserialize(n))}he(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return H(ae(this,O))}set value(e){J(ae(this,O),e,!0)}reset(){localStorage.removeItem(this.key),this.value=this.default}serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e)}}O=new WeakMap;function f(t,e){return new Ie(t,e)}const Oe=(t,e,r)=>e-r<=t&&t<=e+r;function Ve(t,e){const r=Math.sqrt(t*t+e*e),n=Math.atan2(e,t);return{r,theta:n}}const We=(t,e)=>{const{gridSize:r,colorMode:n,cellSize:B,t:Y,noiseMode:N,noiseFactor:Z,displacementX:m,displacementY:x,displacementZ:h,levelsStart:z,levelsEnd:k,levelsStep:A,levelsMargin:D}=e;t.background(0);const R=t.color(255,0,0),q=t.color(0,255,0);for(let g=0;g<r;g++)for(let S=0;S<r;S++){let _=0;if(N==="carthesian")_=t.noise(S*Z+Y*m,g*Z+Y*x,Y*h);else if(N==="polar"){const{r:b,theta:d}=Ve((S-r/2)*Z,(g-r/2)*Z);_=t.noise(d*m,b*x,Y*h)}for(let b=z;b<=k;b+=A||.1){if(!Oe(_,b,D))continue;let d=255;if(n==="white")d=255;else if(n==="gradient")d=t.map(b,z,k,100,255);else if(n==="quantized-gradient"){const I=Math.trunc(_*10)/10;d=t.map(I,z,k,100,255)}else if(n==="color-gradient")d=t.lerpColor(R,q,_);else if(n==="color-scaled-gradient"){const I=t.map(_,z,k,0,1);d=t.lerpColor(R,q,I)}t.fill(d),t.circle(S*B,g*B,B)}}};var He=(t,e)=>e.grid=!e.grid,Je=X("<br>"),Te=X('<label for="blurValue">Blur value (default 4)</label> <input type="number" step="1">',1),Qe=X('<div class="control-section svelte-10wynr9"><label for="gridSize">Grid size</label> <input type="number" step="1"> <label for="blurEnabled">Enable blur</label> <!> <!></div>'),Ue=(t,e)=>e.noise=!e.noise,je=X("<br>"),Ke=X('<div class="control-section svelte-10wynr9"><label for="noiseMode">Noise Mode</label> <select id="noiseMode-select"><option>Carthesian</option><option>Polar</option></select> <label for="displacementX">displacementX</label> <input type="number" step="0.01"> <label for="displacementY">displacementY</label> <input type="number" step="0.01"> <label for="displacementZ">displacementZ</label> <input type="number" step="0.01"> <label for="noiseFactor">noiseFactor</label> <input type="number" step="0.01"></div>'),$e=(t,e)=>e.lines=!e.lines,et=X("<br>"),tt=X('<div class="control-section svelte-10wynr9"><label for="levelsStart">levelsStart</label> <input type="number" step="0.1"> <label for="levelsEnd">levelsEnd</label> <input type="number" step="0.1"> <label for="levelsStep">levelsStep</label> <input type="number" step="0.001"> <label for="levelsMargin">levelsMargin</label> <input type="number" step="0.001"> <label for="colorMode">colorMode</label> <select id="colorMode-select"><option>White</option><option>Gradient</option><option>Quantized Gradient</option><option>Color Gradient</option><option>Color scaled Gradient</option></select></div>'),at=X('<div class="container svelte-10wynr9"><div id="canvas-container"><div class="stats"><label for="fps">FPS</label> <span> </span></div> <!></div> <div class="controls-container svelte-10wynr9"><span class="control-header svelte-10wynr9"><button>&nbsp;Grid controls</button></span> <!> <span class="control-header svelte-10wynr9"><button>&nbsp;Noise controls</button></span> <!> <span class="control-header svelte-10wynr9"><button>&nbsp;Lines controls</button></span> <!> <div class="control-section svelte-10wynr9"><label for="resetAll">Reset all</label><button>Reset</button></div></div></div>');function ft(t,e){Ye(e,!0);let r=W(void 0),n=1e3,B=0,Y=0,N=0,Z=W(0);const m=f("p5-terrain-gridSize",200);let x=n/m.value;he(()=>{x=n/m.value});let h=f("p5-terrain-blurEnabled",!1),z=f("p5-terrain-blurValue",4),k=f("p5-terrain-displacementX",0),A=f("p5-terrain-displacementY",0),D=f("p5-terrain-displacementZ",.01),R=f("p5-terrain-noiseFactor",.02),q=f("p5-terrain-levelsStart",.2),g=f("p5-terrain-levelsEnd",.8),S=f("p5-terrain-levelsStep",.05),_=f("p5-terrain-margin",.005),b=f("p5-terrain-colorMode","gradient"),d=f("p5-terrain-nodeMode","carthesian"),I=W(be(h.value?"on":"off"));const ge=()=>{[m,h,z,d,k,A,D,R,q,g,S,_,b].forEach(o=>o.reset())},E=be({grid:!1,noise:!1,lines:!1}),Se=a=>{function o(){const s=Math.min(a.windowWidth,a.windowHeight);n=Math.floor(s*.9),a.resizeCanvas(n,n),x=n/m.value}function v(){const s=Date.now();s-Y>1e3&&(J(Z,N,!0),Y=s,N=0),N++}a.windowResized=()=>{o()},a.setup=()=>{J(r,a,!0),a.createCanvas(n,n),o(),a.noStroke()},a.draw=()=>{v(),B++,We(a,{gridSize:m.value,colorMode:b.value,noiseMode:d.value,t:B,cellSize:x,noiseFactor:R.value,displacementX:k.value,displacementY:A.value,displacementZ:D.value,levelsStart:q.value,levelsEnd:g.value,levelsMargin:_.value,levelsStep:S.value}),h.value&&a.filter(a.BLUR,z.value)}};Ze(()=>{var a;(a=H(r))==null||a.remove()});var T=at(),Q=c(T),U=c(Q),re=l(c(U),2),we=c(re,!0);u(re),u(U);var ye=l(U,2);De(ye,{sketch:Se}),u(Q);var oe=l(Q,2),j=c(oe),ne=c(j);ne.__click=[He,E],u(j);var se=l(j,2);{var Me=a=>{var o=Je();P(a,o)},ze=a=>{var o=Qe(),v=l(c(o),2);y(v);var s=l(v,4);Ae(s,{get value(){return H(I)},label:"",design:"slider",$$events:{change:()=>{h.value=!h.value,J(I,h.value?"on":"off",!0)}}});var C=l(s,2);{var F=p=>{var w=Te(),G=l(Be(w),2);y(G),M(G,()=>z.value,i=>z.value=i),P(p,w)};V(C,p=>{h.value&&p(F)})}u(o),M(v,()=>m.value,p=>m.value=p),P(a,o)};V(se,a=>{E.grid?a(Me):a(ze,!1)})}var K=l(se,2),ie=c(K);ie.__click=[Ue,E],u(K);var ve=l(K,2);{var ke=a=>{var o=je();P(a,o)},Ee=a=>{var o=Ke(),v=l(c(o),2),s=c(v);s.value=s.__value="carthesian";var C=l(s);C.value=C.__value="polar",u(v);var F=l(v,4);y(F);var p=l(F,4);y(p);var w=l(p,4);y(w);var G=l(w,4);y(G),u(o),me(v,()=>d.value,i=>d.value=i),M(F,()=>k.value,i=>k.value=i),M(p,()=>A.value,i=>A.value=i),M(w,()=>D.value,i=>D.value=i),M(G,()=>R.value,i=>R.value=i),P(a,o)};V(ve,a=>{E.noise?a(ke):a(Ee,!1)})}var $=l(ve,2),ce=c($);ce.__click=[$e,E],u($);var ue=l($,2);{var Ce=a=>{var o=et();P(a,o)},Fe=a=>{var o=tt(),v=l(c(o),2);y(v);var s=l(v,4);y(s);var C=l(s,4);y(C);var F=l(C,4);y(F);var p=l(F,4),w=c(p);w.value=w.__value="white";var G=l(w);G.value=G.__value="gradient";var i=l(G);i.value=i.__value="quantized-gradient";var ee=l(i);ee.value=ee.__value="color-gradient";var pe=l(ee);pe.value=pe.__value="color-scaled-gradient",u(p),u(o),M(v,()=>q.value,L=>q.value=L),M(s,()=>g.value,L=>g.value=L),M(C,()=>S.value,L=>S.value=L),M(F,()=>_.value,L=>_.value=L),me(p,()=>b.value,L=>b.value=L),P(a,o)};V(ue,a=>{E.lines?a(Ce):a(Fe,!1)})}var de=l(ue,2),Ge=l(c(de));Ge.__click=ge,u(de),u(oe),u(T),Re(()=>{Ne(we,H(Z)),le(ne,1,`collapse-button ${E.grid?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9"),le(ie,1,`collapse-button ${E.noise?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9"),le(ce,1,`collapse-button ${E.lines?"fas fa-chevron-right":"fas fa-chevron-down"}`,"svelte-10wynr9")}),P(t,T),qe()}xe(["click"]);export{ft as component};
