import{s as te,e as k,c as y,b as B,f as w,m as b,i as D,n as ee,N as he,a as P,z as K,g as A,h as f,B as de,t as I,d as L,F as q,E as z,j as le,y as me}from"../chunks/scheduler.B3gxbuV4.js";import{S as ne,i as se,b as j,d as x,m as F,a as O,t as W,e as G}from"../chunks/index.D4Ghn6ud.js";import{M as ue}from"../chunks/Main.DhctXHZH.js";import{P as pe}from"../chunks/P5.Cve-Pft3.js";import{e as re}from"../chunks/each.BG3x12hU.js";import{T as fe}from"../chunks/TapTempo.vaCicukU.js";function ge(a){let t,l,s;return l=new pe({props:{sketch:a[0]}}),{c(){t=k("div"),j(l.$$.fragment),this.h()},l(h){t=y(h,"DIV",{id:!0,class:!0});var i=B(t);x(l.$$.fragment,i),i.forEach(w),this.h()},h(){b(t,"id","canvas-container"),b(t,"class","d-flex justify-content-center")},m(h,i){D(h,t,i),F(l,t,null),s=!0},p:ee,i(h){s||(O(l.$$.fragment,h),s=!0)},o(h){W(l.$$.fragment,h),s=!1},d(h){h&&w(t),G(l)}}}function ve(a,t,l){let s,{keptDuration:h}=t,{taps:i}=t,{pause:d}=t;const r=o=>{o.setup=()=>{l(4,s=o),o.createCanvas(600,100)},o.draw=()=>{const g=document.getElementById("canvas-container");if(g){const e=(g==null?void 0:g.clientWidth)||600;o.width!==e&&o.resizeCanvas(e,100);const n=getComputedStyle(document.body),u=n.getPropertyValue("--nc-bg-2")||"white",c=n.getPropertyValue("--nc-tx-1")||"black";o.background(u),o.stroke(c)}const v=Date.now(),_=v-h;for(const e of i){const n=o.map(e,v,_,o.width,0);o.line(n,0,n,o.height)}}};return he(()=>{s==null||s.remove()}),a.$$set=o=>{"keptDuration"in o&&l(1,h=o.keptDuration),"taps"in o&&l(2,i=o.taps),"pause"in o&&l(3,d=o.pause)},a.$$.update=()=>{a.$$.dirty&24&&(d?s==null||s.noLoop():s==null||s.loop())},[r,h,i,d,s]}class we extends ne{constructor(t){super(),se(this,t,ve,ge,te,{keptDuration:1,taps:2,pause:3})}}function ie(a,t,l){const s=a.slice();return s[4]=t[l],s}function ce(a){let t,l=a[3](a[4])+"",s,h,i,d=a[4].name+"",r,o,g,v=a[4].description+"",_;return{c(){t=k("span"),s=I(l),h=P(),i=k("span"),r=I(d),o=P(),g=k("span"),_=I(v),this.h()},l(e){t=y(e,"SPAN",{class:!0});var n=B(t);s=L(n,l),n.forEach(w),h=A(e),i=y(e,"SPAN",{class:!0});var u=B(i);r=L(u,d),u.forEach(w),o=A(e),g=y(e,"SPAN",{class:!0});var c=B(g);_=L(c,v),c.forEach(w),this.h()},h(){b(t,"class","col svelte-1kxd0qm"),q(t,"selected",a[2](a[0],a[4])),b(i,"class","col svelte-1kxd0qm"),q(i,"selected",a[2](a[0],a[4])),b(g,"class","col svelte-1kxd0qm"),q(g,"selected",a[2](a[0],a[4]))},m(e,n){D(e,t,n),f(t,s),D(e,h,n),D(e,i,n),f(i,r),D(e,o,n),D(e,g,n),f(g,_)},p(e,n){n&7&&q(t,"selected",e[2](e[0],e[4])),n&7&&q(i,"selected",e[2](e[0],e[4])),n&7&&q(g,"selected",e[2](e[0],e[4]))},d(e){e&&(w(t),w(h),w(i),w(o),w(g))}}}function _e(a){let t,l,s="BPM",h,i,d="Tempo",r,o,g="Description",v,_=re(a[1]),e=[];for(let n=0;n<_.length;n+=1)e[n]=ce(ie(a,_,n));return{c(){t=k("div"),l=k("span"),l.textContent=s,h=P(),i=k("span"),i.textContent=d,r=P(),o=k("span"),o.textContent=g,v=P();for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=y(n,"DIV",{class:!0});var u=B(t);l=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-cdp0q5"&&(l.textContent=s),h=A(u),i=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-1lklpwv"&&(i.textContent=d),r=A(u),o=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-df2g4a"&&(o.textContent=g),v=A(u);for(let c=0;c<e.length;c+=1)e[c].l(u);u.forEach(w),this.h()},h(){b(l,"class","col table-head svelte-1kxd0qm"),b(i,"class","col table-head svelte-1kxd0qm"),b(o,"class","col table-head svelte-1kxd0qm"),b(t,"class","container svelte-1kxd0qm")},m(n,u){D(n,t,u),f(t,l),f(t,h),f(t,i),f(t,r),f(t,o),f(t,v);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null)},p(n,[u]){if(u&15){_=re(n[1]);let c;for(c=0;c<_.length;c+=1){const C=ie(n,_,c);e[c]?e[c].p(C,u):(e[c]=ce(C),e[c].c(),e[c].m(t,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=_.length}},i:ee,o:ee,d(n){n&&w(t),de(e,n)}}}function ke(a,t,l){let{currentBpm:s}=t;const h=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],i=(r,o)=>r>(o.low??0)&&r<=(o.high??9999),d=r=>{if(r.high&&r.low)return`${r.low} - ${r.high}`;if(r.low)return`>${r.low}`;if(r.high)return`<${r.high}`};return a.$$set=r=>{"currentBpm"in r&&l(0,s=r.currentBpm)},[s,h,i,d]}class ye extends ne{constructor(t){super(),se(this,t,ke,_e,te,{currentBpm:0})}}function be(a){let t,l,s,h="Tap Tempo",i,d,r,o="Press the space bar or click/tap anywhere on the page to get a bpm.",g,v,_=a[0].bpm+"",e,n,u,c,C,S,ae="Reset (c)",H,T,R=a[2]?"Play":"Pause",U,J,Q,$,X,V,N,Y,oe;return t=new ue({props:{title:"TapTempo",description:"Tap Tempo Metronome",iconPath:"/tap_tempo.png"}}),$=new we({props:{taps:a[0].taps,keptDuration:a[0].keptDuration,pause:a[2]}}),V=new ye({props:{currentBpm:a[0].bpm}}),{c(){j(t.$$.fragment),l=P(),s=k("h3"),s.textContent=h,i=P(),d=k("div"),r=k("div"),r.textContent=o,g=P(),v=k("div"),e=I(_),n=k("br"),u=I("BPM"),c=P(),C=k("div"),S=k("button"),S.textContent=ae,H=P(),T=k("button"),U=I(R),J=I(" (Enter)"),Q=P(),j($.$$.fragment),X=P(),j(V.$$.fragment),this.h()},l(m){x(t.$$.fragment,m),l=A(m),s=y(m,"H3",{"data-svelte-h":!0}),K(s)!=="svelte-zwchjg"&&(s.textContent=h),i=A(m),d=y(m,"DIV",{class:!0});var p=B(d);r=y(p,"DIV",{"data-svelte-h":!0}),K(r)!=="svelte-11wi1xz"&&(r.textContent=o),g=A(p),v=y(p,"DIV",{class:!0});var E=B(v);e=L(E,_),n=y(E,"BR",{}),u=L(E,"BPM"),E.forEach(w),c=A(p),C=y(p,"DIV",{class:!0});var M=B(C);S=y(M,"BUTTON",{class:!0,"data-svelte-h":!0}),K(S)!=="svelte-5hccmf"&&(S.textContent=ae),H=A(M),T=y(M,"BUTTON",{class:!0});var Z=B(T);U=L(Z,R),J=L(Z," (Enter)"),Z.forEach(w),M.forEach(w),Q=A(p),x($.$$.fragment,p),X=A(p),x(V.$$.fragment,p),p.forEach(w),this.h()},h(){b(v,"class","bpm svelte-1t43gmp"),q(v,"tapped",a[1]),b(S,"class","control-button svelte-1t43gmp"),b(T,"class","control-button svelte-1t43gmp"),b(C,"class","controls svelte-1t43gmp"),b(d,"class","container svelte-1t43gmp")},m(m,p){F(t,m,p),D(m,l,p),D(m,s,p),D(m,i,p),D(m,d,p),f(d,r),f(d,g),f(d,v),f(v,e),f(v,n),f(v,u),f(d,c),f(d,C),f(C,S),f(C,H),f(C,T),f(T,U),f(T,J),f(d,Q),F($,d,null),f(d,X),F(V,d,null),N=!0,Y||(oe=[z(window,"keydown",a[5]),z(window,"keyup",a[6]),z(window,"pointerdown",a[3]),z(S,"click",a[4]),z(T,"click",a[7])],Y=!0)},p(m,[p]){(!N||p&1)&&_!==(_=m[0].bpm+"")&&le(e,_),(!N||p&2)&&q(v,"tapped",m[1]),(!N||p&4)&&R!==(R=m[2]?"Play":"Pause")&&le(U,R);const E={};p&1&&(E.taps=m[0].taps),p&1&&(E.keptDuration=m[0].keptDuration),p&4&&(E.pause=m[2]),$.$set(E);const M={};p&1&&(M.currentBpm=m[0].bpm),V.$set(M)},i(m){N||(O(t.$$.fragment,m),O($.$$.fragment,m),O(V.$$.fragment,m),N=!0)},o(m){W(t.$$.fragment,m),W($.$$.fragment,m),W(V.$$.fragment,m),N=!1},d(m){m&&(w(l),w(s),w(i),w(d)),G(t,m),G($),G(V),Y=!1,me(oe)}}}function Ce(a,t,l){let s=new fe,h=!1;const i=()=>{r||(s.addBeat(),l(0,s),l(1,h=!0),setTimeout(()=>l(1,h=!1),100))},d=()=>{s.reset(),l(0,s)};let r=!1,o=!0;return[s,h,r,i,d,e=>{const n=" ",u="Enter",c="c";if([n,u,c].includes(e.key)&&(e.preventDefault(),!!o)){if(o=!1,e.key===n){l(2,r=!1),i();return}if(e.key===u){l(2,r=!r);return}e.key===c&&(d(),l(0,s))}},e=>{!o&&e.key===" "&&(o=!0,e.preventDefault())},()=>l(2,r=!r)]}class Te extends ne{constructor(t){super(),se(this,t,Ce,be,te,{})}}export{Te as component};
