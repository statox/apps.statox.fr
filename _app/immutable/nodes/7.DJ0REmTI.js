import"../chunks/CWj6FrbW.js";import{a as U}from"../chunks/BdBiDHY1.js";import{f as H,B as f,o as k,C as g,v as N,p as $,s as X,y as J,n as Q,g as M,an as O}from"../chunks/D4gDm57G.js";import{d as Y}from"../chunks/vhkTqBca.js";import{c as Z,a as F,f as q}from"../chunks/Vh0HsYHt.js";import{s as tt}from"../chunks/Xqw48ZgO.js";import{P as et}from"../chunks/CCiiUNWG.js";import{m as ot}from"../chunks/n10vgu6d.js";import{i as it}from"../chunks/McHEF-Jg.js";import"../chunks/Bmw8lZQ2.js";import{p as rt}from"../chunks/U2TU-HKj.js";var at=q(`<div role="dialog" class="modal svelte-5yv1o0"><div class="contents svelte-5yv1o0"><h4 class="title-bar svelte-5yv1o0">Chord Wheel <button>Close</button></h4> <div>This page is an implementation of <a href="https://chordwheel.com/" target="_blank" rel="noopener noreferrer">Jim Fleser's Chord Wheel</a> it is intended for my personal use. If you are using this implementation you should definitely <a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=4" target="_blank" rel="noopener noreferrer">buy his book</a> or <a href="https://apps.apple.com/us/app/the-chord-wheel/id444931977" target="_blank" rel="noopener noreferrer">buy his app</a> (which is much more complete than this page).</div> <div>This tool only works for songs in major keys. <ul><li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=5&amp;Itemid=17" target="_blank" rel="noopener noreferrer">Analyzing songs and compositional styles</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=8:soloing-and-improvisation&amp;catid=8:using-the-chordwheel&amp;Itemid=8" target="_blank" rel="noopener noreferrer">Soloing and improvisation</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=9&amp;Itemid=5" target="_blank" rel="noopener noreferrer">Transpositions</a></li></ul></div></div></div>`);function nt(t,e){var i=Z(),a=H(i);{var l=m=>{var s=at(),c=f(s),x=f(c),r=k(f(x));r.__click=function(...h){var n;(n=e.close)==null||n.apply(this,h)},g(x),N(4),g(c),g(s),F(m,s)};it(a,m=>{e.isOpen&&m(l)})}F(t,i)}Y(["click"]);const P=Math.PI,_={scale:1,position:0,outerRing:{labels:["B°","F♯°","C♯°","G♯°","D♯°","A♯°","F°","C°","G°","D°","A°","E°"],cellSize:2*P/48,ratio:4,innerDiameter:.82,outerDiameter:1},middleRing:{labels:["Em","Am","Bm","Em","F♯m","Bm","C♯m","F♯m","G♯m","C♯m","D♯m","G♯m","A♯m","E♭m","Fm","B♭m","Cm","Fm","Gm","Cm","Dm","Gm","Am","Dm"],cellSize:2*P/24,ratio:1,innerDiameter:.6,outerDiameter:.82},innerRing:{labels:["C","G","D","A","F♭/E","C♭/B","G♭/F♯","D♭/C♯","A♭/G♯","E♭","B♭","F"],cellSize:2*P/12,ratio:1,innerDiameter:.35,outerDiameter:.6}},R=(t,e)=>{if(t>=0)return t%e;for(;t<0;)t+=e;return t},w=(t,e,i,a,l)=>{if(i<0||i>=e.labels.length)throw new Error(`OOB labelIndex: ${i}`);const{cellSize:m,innerDiameter:s,outerDiameter:c,ratio:x}=e,r=t.createVector();r.x=0,r.y=-c/2;const h=i*m*x;r.rotate(h);const n=m/2,u=[r.copy().rotate(-n).setMag(s),r.copy().rotate(-n).setMag(c),r.copy().setMag(c*1.02),r.copy().rotate(n).setMag(c),r.copy().rotate(n).setMag(s),r.copy().setMag(s*1.02)].map(b=>b.mult(l)),I=r.copy().setMag(s+(c-s)/2).mult(l),y=R(i+a,e.labels.length)*360/e.labels.length;return{vertices:u,center:I,label:e.labels[i],color:`hsb(${y}, 50%, 80%)`,colorHue:y}},E=(t,e)=>{const{scale:i}=e,a=e.innerRing.labels.map((s,c)=>w(t,e.innerRing,c,e.position,i)),l=e.middleRing.labels.map((s,c)=>w(t,e.middleRing,c,e.position*2,i)),m=e.outerRing.labels.map((s,c)=>w(t,e.outerRing,c,e.position,i));return{tilesInnerRing:a,tilesMiddleRing:l,tilesOuterRing:m}},T=(t,e)=>{t.strokeWeight(2),t.stroke([0,0,0,.5]),t.fill(`hsb(${e.colorHue}, 50%, 70%)`);const[i,a,l,m,s,c]=e.vertices;t.beginShape(),t.vertex(i.x,i.y),t.vertex(a.x,a.y),t.quadraticVertex(l.x,l.y,m.x,m.y),t.vertex(m.x,m.y),t.vertex(s.x,s.y),t.quadraticVertex(c.x,c.y,i.x,i.y),t.endShape(),t.noStroke(),t.fill(0),t.textSize(13),t.text(e.label,e.center.x-t.textWidth(e.label)/2,e.center.y)},st=(t,e,i,a,l)=>{const m=[i[R(e-1,i.length)],i[R(e,i.length)],i[R(e+1,i.length)],a[R(2*e-1,a.length)],a[R(2*e,a.length)],a[R(2*e+1,a.length)],l[R(e,l.length)]];for(const s of m){t.strokeWeight(3),t.stroke([0,0,0,1]),t.fill(`hsb(${s.colorHue}, 60%, 90%)`);const[c,x,r,h,n,u]=s.vertices;t.beginShape(),t.vertex(c.x,c.y),t.vertex(x.x,x.y),t.quadraticVertex(r.x,r.y,h.x,h.y),t.vertex(h.x,h.y),t.vertex(n.x,n.y),t.quadraticVertex(u.x,u.y,c.x,c.y),t.endShape(),t.noStroke(),t.fill(0),t.textSize(13),t.textStyle(t.BOLD),t.text(s.label,s.center.x-t.textWidth(s.label)/2,s.center.y),t.textStyle(t.NORMAL)}},lt=(t,e,i)=>{const{scale:a}=i;t.textSize(10),t.push(),t.rotate(e*(2*t.PI/12)),t.fill(250),t.circle(0,0,i.innerRing.innerDiameter*2*a),t.fill(0);const l=t.createVector();l.x=0,l.y=-i.innerRing.innerDiameter*a;const m="▲";t.text(m,l.x-t.textWidth(m)/2,l.y*.9);const s="Key";t.text(s,l.x-t.textWidth(s)/2,l.y*.75);const c=t.createVector(),x=["♯","♯♯","♯♯♯","♯♯♯♯","7♭/5♯","6♭/6♯","5♭/7♯","♭♭♭♭","♭♭♭","♭♭","♭"];c.y=-i.innerRing.innerDiameter*.85*a,t.push();for(const W of x)t.rotate(2*t.PI/12),t.text(W,-t.textWidth(W)/2,c.y);t.pop();const r=t.createVector();r.y=-i.innerRing.innerDiameter*1.04*a;const h="I";t.text(h,r.x-t.textWidth(h)/2,r.y);const n=t.createVector();n.y=-i.innerRing.outerDiameter*.9*a;const u="maj7,maj9";t.text(u,n.x-t.textWidth(u)/2,n.y),t.push(),t.rotate(-(2*t.PI)/12);const I="IV";t.text(I,r.x-t.textWidth(I)/2,r.y);const y="maj7,maj9";t.text(y,n.x-t.textWidth(y)/2,n.y),t.pop(),t.push(),t.rotate(2*t.PI/12);const b="V";t.text(b,r.x-t.textWidth(b)/2,r.y);const D="7,9,11,sus4,13";t.text(D,n.x-t.textWidth(D)/2,n.y),t.pop(),r.y=-i.middleRing.innerDiameter*1.02*a,n.y=-i.middleRing.outerDiameter*.95*a;const p="III";t.text(p,r.x-t.textWidth(p)/2,r.y);const C="m7";t.text(C,n.x-t.textWidth(C)/2,n.y),t.push(),t.rotate(-(2*t.PI)/24);const S="II";t.text(S,r.x-t.textWidth(S)/2,r.y);const A="m7,m9";t.text(A,n.x-t.textWidth(A)/2,n.y),t.pop(),t.push();const o="V I";t.rotate(2*t.PI/24),t.text(o,r.x-t.textWidth(o)/2,r.y);const V="m7,m9";t.text(V,n.x-t.textWidth(V)/2,n.y),t.pop();const v="V II°";r.y=-i.outerRing.innerDiameter*1.015*a,n.y=-i.outerRing.outerDiameter*.96*a,t.text(v,r.x-t.textWidth(v)/2,r.y);const d="m7♭5";t.text(d,n.x-t.textWidth(d)/2,n.y)},L=(t,e)=>{if(e){t.position--,t.innerRing.labels.unshift(t.innerRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.outerRing.labels.unshift(t.outerRing.labels.pop());return}t.position++,t.innerRing.labels.push(t.innerRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.outerRing.labels.push(t.outerRing.labels.shift())};var ct=()=>ot.open(nt),mt=(t,e)=>X(e,M(e)-1),dt=(t,e)=>X(e,M(e)+1),ht=q('<h2>Chord wheel <span><button aria-label="info"><i class="fa fa-info-circle" aria-hidden="true"></i></button></span></h2> <div class="d-flex justify-content-center svelte-8r9jj"><!></div> <div class="justify-content-center svelte-8r9jj"><p><button aria-label="rotate shape counter clockwise" class="fa fa-undo"></button> Shape rotation <button aria-label="rotate shape clockwise" class="fa fa-repeat"></button></p> <p><button aria-label="rotate wheel counter clockwise" class="fa fa-undo"></button> Wheel rotation <button aria-label="rotate wheel clockwise" class="fa fa-repeat"></button></p> <p>On mobile you can also swipe left/right to rotate the shape and up/down to rotate the wheel</p></div>',1);function Wt(t,e){$(e,!0),rt.set("Chord Wheel");let i,a,l=J(0);const m=()=>{L(_,!0),a=E(i,_)},s=()=>{L(_,!1),a=E(i,_)},c=o=>{function V(){const d=Math.min(o.windowWidth,o.windowHeight);o.resizeCanvas(d*.8,d*.8),_.scale=d/2*.75,a=E(o,_)}o.setup=()=>{i=o,o.createCanvas(100,100),V(),o.colorMode(o.HSB)},o.draw=()=>{o.background(50),o.translate(o.width/2,o.height/2),a.tilesInnerRing.forEach(d=>T(o,d)),a.tilesMiddleRing.forEach(d=>T(o,d)),a.tilesOuterRing.forEach(d=>T(o,d)),st(o,M(l),a.tilesInnerRing,a.tilesMiddleRing,a.tilesOuterRing),lt(o,M(l),_)},o.keyPressed=d=>{![o.LEFT_ARROW,o.RIGHT_ARROW,o.UP_ARROW,o.DOWN_ARROW].includes(o.keyCode)||d.altKey||(d.preventDefault(),o.keyCode===o.LEFT_ARROW&&O(l,-1),o.keyCode===o.RIGHT_ARROW&&O(l),o.keyCode===o.UP_ARROW&&s(),o.keyCode===o.DOWN_ARROW&&m())};let v;o.touchMoved=d=>{var B;if(((B=d.target)==null?void 0:B.className)!=="p5Canvas")return;if(d.preventDefault(),!v){v={x:o.mouseX,y:o.mouseY};return}const W=o.mouseX-v.x,j=o.mouseY-v.y,z=Math.abs(W),G=Math.abs(j);z<50&&G<50||(z>G?W<0?O(l,-1):O(l):j>0?m():s(),v={x:o.mouseX,y:o.mouseY})},o.windowResized=()=>{V()}};U(()=>{i==null||i.remove()});var x=ht(),r=H(x),h=k(f(r)),n=f(h);n.__click=[ct],tt(n,"",{},{position:"relative"}),g(h),g(r);var u=k(r,2),I=f(u);et(I,{sketch:c}),g(u);var y=k(u,2),b=f(y),D=f(b);D.__click=[mt,l];var p=k(D,2);p.__click=[dt,l],g(b);var C=k(b,2),S=f(C);S.__click=s;var A=k(S,2);A.__click=m,g(C),N(2),g(y),F(t,x),Q()}Y(["click"]);export{Wt as component};
