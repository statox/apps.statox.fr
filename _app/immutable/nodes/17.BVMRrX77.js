import"../chunks/NZTpNUN0.js";import"../chunks/CK2DB9Sl.js";import{p as $,b as A,e as r,s as l,r as i,t as W,y as o,an as n,a as M,d as z,g as u,a8 as x,f as T}from"../chunks/DPK8yXit.js";import{a as ea}from"../chunks/CifkBGsb.js";import{i as B}from"../chunks/CdZ4SmM9.js";import{A as m,g as oa}from"../chunks/3Ri0f5CH.js";import{a as j,D as R}from"../chunks/DTyfSRsR.js";import{M as na}from"../chunks/mLZ2QDuf.js";import"../chunks/Ca7Y264-.js";import{p as ra}from"../chunks/B_ZCztlZ.js";import{M as O}from"../chunks/CTL48U9N.js";import"../chunks/BhkIZ74U.js";import{s as S}from"../chunks/DlsYe5r7.js";import{s as I}from"../chunks/D-_9dRZ1.js";import{p as C}from"../chunks/evCKpkIa.js";import{e as q,i as Q}from"../chunks/BI0rHxLi.js";import{i as ia}from"../chunks/BQEplrKJ.js";import{s as sa}from"../chunks/C9R4ObYU.js";const D=t=>{if(t===m.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(t===m.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(t===m.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(t===m.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(t===m.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(t===m.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(t===m.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(t===m.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},X=t=>{if(t===m.NEW)return"moon_phase_icons/1_new_moon.png";if(t===m.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(t===m.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(t===m.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(t===m.FULL)return"moon_phase_icons/5_full_moon.png";if(t===m.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(t===m.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(t===m.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},ma=async()=>{const{ephemerides:t}=await oa(),{moonState:c,sunState:a,upcomingLunarStates:e}=t;return{moonState:c,sunState:{goldenHour:R.fromMillis(a.goldenHour),solarNoon:R.fromMillis(a.solarNoon),sunrise:R.fromMillis(a.sunrise),sunset:R.fromMillis(a.sunset),dayLength:j.fromMillis(a.dayLengthMs),dayLengthDiff:j.fromMillis(a.dayLengthDiffMs)},upcomingLunarStates:e.map(g=>({date:R.fromMillis(g.tsMillis),lunarState:{...g.lunarState,phasePictureUrl:D(g.lunarState.moonPhase)}}))}};var pa=A('<div class="container svelte-1al6uzi"><div class="content svelte-1al6uzi"><div class="data svelte-1al6uzi"><span><i class="fas fa-moon" aria-hidden="true"></i></span> <span></span> <span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span><i class="fas fa-sun" aria-hidden="true"></i></span> <span></span> <span>Sun rise/set</span> <span> </span> <span>DayLength</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-1al6uzi"/></div></div>');function da(t,c){$(c,!1);let a=C(c,"moonState",8),e=C(c,"sunState",8);B();var g=pa(),E=r(g),L=r(E),p=l(r(L),6),d=r(p,!0);i(p);var s=l(p,4),_=r(s);i(s);var f=l(s,4),w=r(f);i(f);var h=l(f,8),k=r(h);i(h);var N=l(h,4),y=r(N);i(N);var v=l(N,4),P=r(v,!0);i(v);var b=l(v,4),U=r(b,!0);i(b),i(L);var F=l(L,2);i(E),i(g),W((G,H,V,K,J,Y,Z,aa,ta)=>{S(d,(n(a()),o(()=>a().moonPhaseFr))),S(_,`${G??""} days (${H??""}%)`),S(w,`${n(a()),o(()=>a().moonVisibilityWindow[0])??""} - ${n(a()),o(()=>a().moonVisibilityWindow[1])??""}`),S(k,`${V??""} - ${K??""}`),S(y,`${J??""}
                (${n(e()),o(()=>e().dayLengthDiff>0?"+":"")??""}${Y??""})`),S(P,Z),S(U,aa),I(F,"alt",(n(a()),o(()=>a().moonPhase))),I(F,"src",ta)},[()=>(n(a()),o(()=>a().lunarAge.toFixed(1))),()=>(n(a()),o(()=>(a().lunarAgePercent*100).toFixed(0))),()=>(n(e()),o(()=>e().sunrise.toFormat("HH:mm"))),()=>(n(e()),o(()=>e().sunset.toFormat("HH:mm"))),()=>(n(e()),o(()=>e().dayLength.toFormat("h:m"))),()=>(n(e()),o(()=>e().dayLengthDiff.toFormat("m:s"))),()=>(n(e()),o(()=>e().solarNoon.toFormat("HH:mm"))),()=>(n(e()),o(()=>e().goldenHour.toFormat("HH:mm"))),()=>(n(D),n(a()),o(()=>D(a().moonPhase)))]),M(t,g),z()}var _a=A('<div class="day-header svelte-1x8ozl7"> </div>'),ua=A("<div> </div> <div> </div>",1),la=A('<div><div><img class="phase-img svelte-1x8ozl7"/></div> <!></div>'),ga=A('<div class="container svelte-1x8ozl7"><!> <!></div>');function va(t,c){$(c,!1);let a=C(c,"upcomingLunarStates",8);B();var e=ga(),g=r(e);q(g,1,()=>(n(a()),o(()=>a().slice(0,7))),Q,(L,p)=>{let d=()=>u(p).date;var s=_a(),_=r(s,!0);i(s),W(f=>S(_,f),[()=>(d(),o(()=>d().setLocale("fr").toLocaleString({weekday:"long"})))]),M(L,s)});var E=l(g,2);q(E,1,a,Q,(L,p,d)=>{let s=()=>u(p).date,_=()=>u(p).lunarState;const f=x(()=>(n(a()),_(),o(()=>d===0||d===29||a()[d-1].lunarState.moonPhaseFr!==_().moonPhaseFr)));var w=la(),h=r(w),k=r(h);i(h);var N=l(h,2);{var y=v=>{var P=ua(),b=T(P),U=r(b,!0);i(b);var F=l(b,2),G=r(F,!0);i(F),W(H=>{S(U,H),S(G,(_(),o(()=>_().moonPhaseFr)))},[()=>(s(),o(()=>s().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})))]),M(v,P)};ia(N,v=>{u(f)&&v(y)})}i(w),W(v=>{sa(w,1,`entry ${u(f)?"important-day":"other-day"}`,"svelte-1x8ozl7"),I(k,"alt",(_(),o(()=>_().moonPhase))),I(k,"src",v)},[()=>(n(X),_(),o(()=>X(_().moonPhase)))]),M(L,w)}),i(e),M(t,e),z()}var ca=A("<!> <br/> <!> <br/> <!>",1),fa=A("<p>Loading ephemerides data</p>"),ha=A('<!> <div class="content"><!></div>',1);function Ha(t,c){$(c,!1);const a={name:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"};ra.set(a),B();var e=ha(),g=T(e);na(g,{get title(){return a.name},get description(){return a.description},get iconPath(){return a.iconPath}});var E=l(g,2),L=r(E);ea(L,ma,p=>{var d=fa();M(p,d)},(p,d)=>{var s=x(()=>{var{moonState:v,sunState:P,upcomingLunarStates:b}=u(d);return{moonState:v,sunState:P,upcomingLunarStates:b}}),_=x(()=>u(s).moonState),f=x(()=>u(s).sunState),w=x(()=>u(s).upcomingLunarStates),h=ca(),k=T(h);da(k,{get moonState(){return u(_)},get sunState(){return u(f)}});var N=l(k,4);va(N,{get upcomingLunarStates(){return u(w)}});var y=l(N,4);O(y,{item:{level:"info",message:"All data is computed for Paris, France"}}),M(p,h)},(p,d)=>{{let s=x(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:u(d)}));O(p,{get item(){return u(s)}})}}),i(E),M(t,e),z()}export{Ha as component};
