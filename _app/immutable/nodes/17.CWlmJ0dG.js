import"../chunks/NZTpNUN0.js";import"../chunks/DRxGxY2p.js";import{p as $,b,e as r,s as u,r as i,t as W,y as o,an as n,a as N,d as z,g as _,a8 as y,f as T}from"../chunks/OOCdeaM4.js";import{a as ta}from"../chunks/Bfiui_HV.js";import{i as B}from"../chunks/c3q9pMCF.js";import{A as s,g as oa}from"../chunks/3Ri0f5CH.js";import{a as j,D as R}from"../chunks/DTyfSRsR.js";import{M as na}from"../chunks/C8MJLfl1.js";import"../chunks/CVVRCy7F.js";import{p as ra}from"../chunks/Zs3ZkE6R.js";import{M as O}from"../chunks/DKcpRBkl.js";import"../chunks/bMdrnNxv.js";import{s as L}from"../chunks/DBBHR-3t.js";import{s as I}from"../chunks/C2XHBoXy.js";import{p as C}from"../chunks/CFDm-sZd.js";import{e as q,i as Q}from"../chunks/80iJqotc.js";import{i as ia}from"../chunks/BMFH8sZT.js";import{s as sa}from"../chunks/DazWBkG7.js";const D=e=>{if(e===s.NEW)return"https://upload.wikimedia.org/wikipedia/commons/d/dd/New_Moon.jpg";if(e===s.WAXING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/e/e3/Waxing_Crescent_Moon_on_4-1-17_%2833627493622%29.jpg";if(e===s.FIRST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/4/4d/Daniel_Hershman_-_march_moon_%28by%29.jpg";if(e===s.WAXING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/2/2b/Lune-Nikon-600-F4_Luc_Viatour.jpg";if(e===s.FULL)return"https://upload.wikimedia.org/wikipedia/commons/b/b5/20110319_Supermoon.jpg";if(e===s.WANING_GIBBOUS)return"https://upload.wikimedia.org/wikipedia/commons/7/7d/2013-01-02_00-00-55-Waning-gibbous-moon.jpg";if(e===s.LAST_QUARTER)return"https://upload.wikimedia.org/wikipedia/commons/b/b2/Waning_gibbous_moon_near_last_quarter_-_23_Sept._2016.png";if(e===s.WANING_CRESCENT)return"https://upload.wikimedia.org/wikipedia/commons/3/35/Waning_Crescent_Moon%287Sep15%29.jpg";throw new Error("UNKOWN_LUNAR_PHASE")},X=e=>{if(e===s.NEW)return"moon_phase_icons/1_new_moon.png";if(e===s.WAXING_CRESCENT)return"moon_phase_icons/2_waxing_crescent.png";if(e===s.FIRST_QUARTER)return"moon_phase_icons/3_first_quarter.png";if(e===s.WAXING_GIBBOUS)return"moon_phase_icons/4_waxing_gibbous.png";if(e===s.FULL)return"moon_phase_icons/5_full_moon.png";if(e===s.WANING_GIBBOUS)return"moon_phase_icons/6_waning_gibbous.png";if(e===s.LAST_QUARTER)return"moon_phase_icons/7_last_quarter.png";if(e===s.WANING_CRESCENT)return"moon_phase_icons/8_waning_crescent.png";throw new Error("UNKOWN_LUNAR_PHASE")},ma=async()=>{const{ephemerides:e}=await oa(),{moonState:f,sunState:a,upcomingLunarStates:t}=e;return{moonState:f,sunState:{goldenHour:R.fromMillis(a.goldenHour),solarNoon:R.fromMillis(a.solarNoon),sunrise:R.fromMillis(a.sunrise),sunset:R.fromMillis(a.sunset),dayLength:j.fromMillis(a.dayLengthMs),dayLengthDiff:j.fromMillis(a.dayLengthDiffMs)},upcomingLunarStates:t.map(l=>({date:R.fromMillis(l.tsMillis),lunarState:{...l.lunarState,phasePictureUrl:D(l.lunarState.moonPhase)}}))}};var pa=b('<div class="container svelte-1al6uzi"><div class="content svelte-1al6uzi"><div class="data svelte-1al6uzi"><span><i class="fas fa-moon" aria-hidden="true"></i></span> <span></span> <span>Moon phase</span> <span> </span> <span>Moon age</span> <span> </span> <span>Moon visible</span> <span> </span> <span><i class="fas fa-sun" aria-hidden="true"></i></span> <span></span> <span>Sun rise/set</span> <span> </span> <span>DayLength</span> <span> </span> <span>Solar noon</span> <span> </span> <span>Golden hour</span> <span> </span></div> <img class="phase-img svelte-1al6uzi"/></div></div>');function da(e,f){$(f,!1);let a=C(f,"moonState",8),t=C(f,"sunState",8);B();var l=pa(),M=r(l),v=r(M),m=u(r(v),6),p=r(m,!0);i(m);var g=u(m,4),d=r(g);i(g);var h=u(g,4),w=r(h);i(h);var S=u(h,8),A=r(S);i(S);var E=u(S,4),P=r(E);i(E);var c=u(E,4),k=r(c,!0);i(c);var x=u(c,4),U=r(x,!0);i(x),i(v);var F=u(v,2);i(M),i(l),W((G,H,V,K,J,Y,Z,aa,ea)=>{L(p,(n(a()),o(()=>a().moonPhaseFr))),L(d,`${G??""} days (${H??""}%)`),L(w,`${n(a()),o(()=>a().moonVisibilityWindow[0])??""} - ${n(a()),o(()=>a().moonVisibilityWindow[1])??""}`),L(A,`${V??""} - ${K??""}`),L(P,`${J??""}
                (${n(t()),o(()=>t().dayLengthDiff>0?"+":"")??""}${Y??""})`),L(k,Z),L(U,aa),I(F,"alt",(n(a()),o(()=>a().moonPhase))),I(F,"src",ea)},[()=>(n(a()),o(()=>a().lunarAge.toFixed(1))),()=>(n(a()),o(()=>(a().lunarAgePercent*100).toFixed(0))),()=>(n(t()),o(()=>t().sunrise.toFormat("HH:mm"))),()=>(n(t()),o(()=>t().sunset.toFormat("HH:mm"))),()=>(n(t()),o(()=>t().dayLength.toFormat("h:m"))),()=>(n(t()),o(()=>t().dayLengthDiff.toFormat("m:s"))),()=>(n(t()),o(()=>t().solarNoon.toFormat("HH:mm"))),()=>(n(t()),o(()=>t().goldenHour.toFormat("HH:mm"))),()=>(n(D),n(a()),o(()=>D(a().moonPhase)))]),N(e,l),z()}var _a=b('<div class="day-header svelte-1x8ozl7"> </div>'),ua=b("<div> </div> <div> </div>",1),la=b('<div><div><img class="phase-img svelte-1x8ozl7"/></div> <!></div>'),va=b('<div class="container svelte-1x8ozl7"><!> <!></div>');function ga(e,f){$(f,!1);let a=C(f,"upcomingLunarStates",8);B();var t=va(),l=r(t);q(l,1,()=>(n(a()),o(()=>a().slice(0,7))),Q,(v,m)=>{let p=()=>_(m).date;var g=_a(),d=r(g,!0);i(g),W(h=>L(d,h),[()=>(p(),o(()=>p().setLocale("fr").toLocaleString({weekday:"long"})))]),N(v,g)});var M=u(l,2);q(M,1,a,Q,(v,m,p)=>{let g=()=>_(m).date,d=()=>_(m).lunarState;const h=y(()=>(n(a()),d(),o(()=>p===0||p===29||a()[p-1].lunarState.moonPhaseFr!==d().moonPhaseFr)));var w=la(),S=r(w),A=r(S);i(S);var E=u(S,2);{var P=c=>{var k=ua(),x=T(k),U=r(x,!0);i(x);var F=u(x,2),G=r(F,!0);i(F),W(H=>{L(U,H),L(G,(d(),o(()=>d().moonPhaseFr)))},[()=>(g(),o(()=>g().setLocale("fr").toLocaleString({day:"2-digit",month:"2-digit"})))]),N(c,k)};ia(E,c=>{_(h)&&c(P)})}i(w),W(c=>{sa(w,1,`entry ${_(h)?"important-day":"other-day"}`,"svelte-1x8ozl7"),I(A,"alt",(d(),o(()=>d().moonPhase))),I(A,"src",c)},[()=>(n(X),d(),o(()=>X(d().moonPhase)))]),N(v,w)}),i(t),N(e,t),z()}var ca=b("<!> <br/> <!> <br/> <!>",1),fa=b("<p>Loading ephemerides data</p>"),ha=b('<!> <div class="content"><!></div>',1);function Ha(e,f){$(f,!1),ra.set("Ephemerides"),B();var a=ha(),t=T(a);na(t,{title:"Ephemerides",description:"Get the ephemerides",iconPath:"/ephemerides.png"});var l=u(t,2),M=r(l);ta(M,ma,v=>{var m=fa();N(v,m)},(v,m)=>{var p=y(()=>{var{moonState:P,sunState:c,upcomingLunarStates:k}=_(m);return{moonState:P,sunState:c,upcomingLunarStates:k}}),g=y(()=>_(p).moonState),d=y(()=>_(p).sunState),h=y(()=>_(p).upcomingLunarStates),w=ca(),S=T(w);da(S,{get moonState(){return _(g)},get sunState(){return _(d)}});var A=u(S,4);ga(A,{get upcomingLunarStates(){return _(h)}});var E=u(A,4);O(E,{item:{level:"info",message:"All data is computed for Paris, France"}}),N(v,w)},(v,m)=>{{let p=y(()=>({level:"error",header:"Something went wrong getting ephemerides data",message:_(m)}));O(v,{get item(){return _(p)}})}}),i(l),N(e,a),z()}export{Ha as component};
