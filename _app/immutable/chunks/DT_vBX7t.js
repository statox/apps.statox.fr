import"./CWj6FrbW.js";import{aP as z,p as G,A as E,B as j,C as H,g as m,s as h,o as J,aO as N,E as O,F as P,w as B,k as Q,n as R}from"./I8Oq6K5_.js";import{f as U,t as C,k as D,a as I}from"./CtuybYrQ.js";import{i as V}from"./CLIFNVQM.js";import{h as W}from"./B7o7WKVp.js";import{b as X,d as Y}from"./BKam2jIy.js";import{a as Z,s as $}from"./CiomvxOc.js";const tt=()=>performance.now(),p={tick:e=>requestAnimationFrame(e),now:()=>tt(),tasks:new Set};function F(){const e=p.now();p.tasks.forEach(t=>{t.c(e)||(p.tasks.delete(t),t.f())}),p.tasks.size!==0&&p.tick(F)}function et(e){let t;return p.tasks.size===0&&p.tick(F),{promise:new Promise(f=>{p.tasks.add(t={c:e,f})}),abort(){p.tasks.delete(t)}}}function L(e){return e}function vt(e){const t=e-1;return t*t*t+1}const st={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function nt(){const{subscribe:e,update:t}=z([]),f={};let u=0;function i(n="default",r={}){return f[n]=r,f}function s(n,r){const a={target:"default",msg:n,...r},l=f[a.target]||{},d={...st,...l,...a,theme:{...l.theme,...a.theme},classes:[...l.classes||[],...a.classes||[]],id:++u};return t(y=>d.reversed?[...y,d]:[d,...y]),u}function o(n){t(r=>{if(!r.length||n===0)return[];if(n===void 0){const a=Math.max(...r.map(l=>l.id));return r.filter(l=>l.id!==a)}return typeof n=="number"?r.filter(a=>a.id!==n):r.filter(a=>a.target!==n.target)})}return{subscribe:e,push:s,pop:o,_init:i}}const rt=nt();function M(e){return Object.prototype.toString.call(e)==="[object Date]"}function x(e,t){if(e===t||e!==e)return()=>e;const f=typeof e;if(f!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const u=t.map((i,s)=>x(e[s],i));return i=>u.map(s=>s(i))}if(f==="object"){if(!e||!t)throw new Error("Object cannot be null");if(M(e)&&M(t)){const s=e.getTime(),n=t.getTime()-s;return r=>new Date(s+r*n)}const u=Object.keys(t),i={};return u.forEach(s=>{i[s]=x(e[s],t[s])}),s=>{const o={};return u.forEach(n=>{o[n]=i[n](s)}),o}}if(f==="number"){const u=t-e;return i=>e+i*u}return()=>t}function it(e,t={}){const f=z(e);let u,i=e;function s(o,n){if(i=o,e==null)return f.set(e=o),Promise.resolve();let r=u,a=!1,{delay:l=0,duration:d=400,easing:y=L,interpolate:_=x}={...t,...n};if(d===0)return r&&(r.abort(),r=null),f.set(e=i),Promise.resolve();const w=p.now()+l;let g;return u=et(b=>{if(b<w)return!0;a||(g=_(e,o),typeof d=="function"&&(d=d(e,o)),a=!0),r&&(r.abort(),r=null);const k=b-w;return k>d?(f.set(e=o),!1):(f.set(e=g(y(k/d))),!0)}),u.promise}return{set:s,update:(o,n)=>s(o(i,e),n),subscribe:f.subscribe}}var ot=(e,t)=>{e instanceof KeyboardEvent&&["Enter"," "].includes(e.key)&&t()},at=C('<div class="_toastBtn pe svelte-1yg7ke" role="button" tabindex="0"></div>'),ft=C('<div role="status"><div class="_toastMsg svelte-1yg7ke"><!></div> <!> <progress class="_toastBar svelte-1yg7ke"></progress></div>');function yt(e,t){G(t,!0);const[f,u]=$(),i=()=>Z(a,"$progress",f);let s=E(j(t.item.initial)),o=E(j(t.item.initial)),n=E(!1),r;const a=it(t.item.initial,{duration:t.item.duration,easing:L});function l(){rt.pop(t.item.id)}function d(){(i()===1||i()===0)&&l()}function y(){!m(n)&&i()!==m(s)&&(a.set(i(),{duration:0}),h(n,!0))}function _(){if(m(n)){const c=t.item.duration;if(c!==void 0&&m(o)!==void 0&&m(s)!==void 0){const v=c-c*((i()-m(o))/(m(s)-m(o)));a.set(m(s),{duration:v}).then(d)}h(n,!1)}}function w(c=document){if(c.hidden===void 0)return;const v=()=>c.hidden?y():_(),T="visibilitychange";c.addEventListener(T,v),r=()=>c.removeEventListener(T,v),v()}H(()=>{if(m(s)!==t.item.next){if(h(s,t.item.next,!0),h(o,i(),!0),h(n,!1),m(s)===void 0)throw Error("Toast with undefined next");a.set(m(s)).then(d)}}),J(w),N(()=>{var c;(c=t.item)!=null&&c.onpop&&t.item.onpop(t.item.id),r==null||r()});var g=ft();let b;var k=O(g),S=O(k);W(S,()=>t.item.msg),P(k);var A=B(k,2);{var q=c=>{var v=at();v.__click=l,v.__keydown=[ot,l],I(c,v)};V(A,c=>{t.item.dismissable&&c(q)})}var K=B(A,2);P(g),Q(c=>{b=X(g,1,"_toastItem svelte-1yg7ke",null,b,c),Y(K,i())},[()=>({pe:t.item.pausable})]),D("mouseenter",g,()=>{t.item.pausable&&y()}),D("mouseleave",g,_),I(e,g),R(),u()}U(["click","keydown"]);export{yt as T,vt as c,et as l,rt as t};
