import"./NZTpNUN0.js";import{p as j,b as W,t as M,a as w,d as z,r as _,c as D,f as G,i as P,h as l,g as H,e as p}from"./tjCGPzdr.js";import{d as J,e as q}from"./DOKer7p_.js";import{e as I,i as R}from"./An4e5j9g.js";import{a as x,s as K,c as A}from"./DKsZ4ghV.js";var L=(n=>(n[n.notOver=0]="notOver",n[n.winPlayer1=1]="winPlayer1",n[n.winPlayer2=2]="winPlayer2",n[n.draw=3]="draw",n))(L||{});const y=7,v=6,c=4;class N extends Error{constructor(e){super("Can't play in column "+e)}}const te=n=>n.map(e=>[...e]),Q=(n,e)=>n[e].length!==v,se=n=>{const e=[];for(let s=0;s<n.length;s++)n[s].length<v&&e.push(s);return e},T=n=>{const e=y*v,s=n.reduce((r,i)=>r+i.length,0);return e===s},U=n=>{for(let e=0;e<y;e++)for(let s=0;s<v;s++){if(n[e].length<s||!n[e][s])continue;const r=n[e][s];let i=0,o=0,a=0,u=0;for(let t=0;t<c;t++)s+t<=n[e].length&&n[e][s+t]===r&&i++,e+t<n.length&&n[e+t][s]===r&&o++,e+t<n.length&&s+t<=n[e+t].length&&n[e+t][s+t]===r&&a++,e+t<n.length&&s-t>=0&&n[e+t][s-t]===r&&u++;if(i===c||o===c||a===c||u===c)return r}return null},le=n=>{if(X(n)===0)return null;for(let e=0;e<y;e++)for(let s=0;s<v;s++){if(n[e].length<s||!n[e][s])continue;const r=n[e][s],i=[],o=[],a=[],u=[];for(let t=0;t<c;t++)s+t<=n[e].length&&n[e][s+t]===r&&i.push([s+t,e]),e+t<n.length&&n[e+t][s]===r&&o.push([s,e+t]),e+t<n.length&&s+t<=n[e+t].length&&n[e+t][s+t]===r&&a.push([s+t,e+t]),e+t<n.length&&s-t>=0&&n[e+t][s-t]===r&&u.push([s-t,e+t]);if(i.length===c)return i;if(o.length===c)return o;if(a.length===c)return a;if(u.length===c)return u}return null},X=n=>{if(T(n))return 3;const e=U(n);return e===1?1:e===2?2:0},re=(n,e,s)=>{if(!Q(n,s))throw new N(s);return n[s].push(e),n};var Y=(n,e,s)=>e.onMove(l(s)),Z=W('<div class="svelte-1g8saqi"><button><div></div></button></div>'),b=W('<div class="board svelte-1g8saqi"></div>');function ie(n,e){j(e,!0);const s=Array.from({length:e.nbRows},(u,t)=>t),r=Array.from({length:e.nbColumns},(u,t)=>t);let i=H(null);const o=(u,t)=>e.winningCells===null?!1:e.winningCells.filter(h=>h[0]===u&&h[1]===t).length>0;var a=b();I(a,21,()=>s.reverse(),R,(u,t)=>{var h=D(),E=G(h);I(E,17,()=>r,R,(O,f)=>{var m=Z(),g=P(m);let C;g.__click=[Y,e,f];var d=P(g);let k;_(g),_(m),M((F,V)=>{K(g,"aria-label","col-"+l(f)),C=A(g,1,"outer-cell svelte-1g8saqi",null,C,F),k=A(d,1,"cell svelte-1g8saqi",null,k,V),x(d,`--drop-distance: ${e.nbRows-l(t)};`)},[()=>({selected:l(i)===l(f),"winning-cell":o(l(t),l(f))}),()=>({player1:e.board[l(f)][l(t)]===1,player2:e.board[l(f)][l(t)]===2,drop:e.board[l(f)][l(t)]&&l(t)===e.board[l(f)].length-1})]),q("mouseenter",g,()=>p(i,l(f),!0)),q("mouseleave",g,()=>p(i,null)),w(O,m)}),w(u,h)}),_(a),M(()=>x(a,`--nb-col: ${e.nbColumns??""}; --nb-row: ${e.nbRows??""}`)),w(n,a),z()}J(["click"]);export{L as B,ie as a,X as b,te as c,y as d,le as e,se as g,Q as i,re as m,v as n};
