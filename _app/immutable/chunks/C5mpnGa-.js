import"./NZTpNUN0.js";import"./DxsUBIQY.js";import{c as S,f as x,a as m,b as _,p as w,d as M,e as z,r as E,t as A,i as $,h as K,g as R}from"./Brv8g2mx.js";import{d as g,s as j,w as B}from"./BlLNWVag.js";import{i as C}from"./D2xXzMMK.js";import{s as v,a as k}from"./DgiLbMs0.js";import{u as I,b as D,c as F}from"./CJkfdpIC.js";import{o as U}from"./np3e4Z_M.js";import{a as H,s as J,c as O}from"./mz9VyEVN.js";import{i as P}from"./CdKWMwlC.js";import{g as y}from"./572-Aa13.js";const d=624,Q=397,L=32,N=31,V=4294967295<<N>>>0,W=4294967295>>>L-N>>>0,X=2567483615,Y=11,Z=7,tt=15,et=18,st=2636928640,at=4022730752,rt=1812433253,ot=(e,t)=>{e.state_array[0]=t;for(let s=1;s<d;s++)t=Math.imul(rt,t^t>>>L-2)+s>>>0,e.state_array[s]=t;e.state_index=0},T=e=>{let t=e.state_index,s=t-(d-1);s<0&&(s+=d);let r=e.state_array[t]&V|e.state_array[s]&W,n=r>>>1;r&1&&(n^=X),s=t-(d-Q),s<0&&(s+=d),r=(e.state_array[s]^n)>>>0,e.state_array[t++]=r,t>=d&&(t=0),e.state_index=t;let a=r^r>>>Y;return a=a^a<<Z&st,a=a^a<<tt&at,(a^a>>>et)>>>0},nt=e=>T(e)/4294967296;class it{#t;#e;constructor(){this.#e={state_array:[],state_index:0},this.#t=!1}initialize(t){ot(this.#e,t),this.#t=!0}randomInt(){if(!this.#t)throw new Error("State not initialized");return T(this.#e)}random(){if(!this.#t)throw new Error("State not initialized");return nt(this.#e)}}const p=new it,wt=(e,t)=>t?t.user.scopes.includes("admin")?!0:t.user.scopes.includes(e):!1,ct=e=>e.split("").reduce((t,s,r)=>t+(r+1)*s.charCodeAt(0),1),lt=e=>{if(!e)return"#990000";const t=ct(e);p.initialize(t);const s=Math.floor(p.random()*255).toString(16).padStart(2,"0"),r=Math.floor(p.random()*255).toString(16).padStart(2,"0"),n=Math.floor(p.random()*255).toString(16).padStart(2,"0");return`#${s}${r}${n}`};var ut=_('<button title="Logout" class="svelte-6yna3y"><i class="fa fa-sign-out svelte-6yna3y" aria-hidden="true"></i></button>');function Mt(e){const t=()=>k(I,"$user",s),[s,r]=v();var n=S(),a=x(n);{var l=u=>{var c=ut();c.__click=function(...o){D?.apply(this,o)},m(u,c)};C(a,u=>{t()&&u(l)})}m(e,n),r()}g(["click"]);var ft=_('<button title="My profile" class="user-profile svelte-kz860w"> </button>'),dt=_('<button title="Log in" class="svelte-kz860w"><i class="fas fa-user svelte-kz860w" aria-hidden="true"></i></button>');function zt(e,t){w(t,!1);const s=()=>k(I,"$user",r),[r,n]=v();U(()=>{F()}),P();var a=S(),l=x(a);{var u=o=>{var i=ft();i.__click=()=>y("/auth/me");var h=z(i,!0);E(i),A((f,b)=>{H(i,`--user-color: ${f??""}`),j(h,b)},[()=>lt(s()?.user.username),()=>s().user.username[0].toUpperCase()]),m(o,i)},c=o=>{var i=dt();i.__click=()=>y("/auth/login"),m(o,i)};C(l,o=>{s()?o(u):o(c,!1)})}m(e,a),M(),n()}g(["click"]);var mt=_('<button aria-label="switch theme" class="svelte-1uyqgt8"><i aria-hidden="true"></i></button>');function Et(e,t){w(t,!0);const s=()=>k(a,"$darkModeEnabled",r),[r,n]=v(),a=B(!1),l="fas fa-moon",u="fas fa-sun";let c=K(l),o;const i=()=>{a.set(!s()),h()},h=()=>{s()?(o.dataset.theme="dark",$(c,u)):(o.dataset.theme="light",$(c,l))};U(()=>{o=document.documentElement;const q=localStorage.getItem("darkModeEnabled")||!0;a.set(q==="true"),a.subscribe(G=>{localStorage.setItem("darkModeEnabled",G.toString())}),h()});var f=mt();f.__click=i;var b=z(f);E(f),A(()=>J(b,1,O(R(c)),"svelte-1uyqgt8")),m(e,f),M(),n()}g(["click"]);export{zt as A,Et as T,Mt as U,wt as i};
