import{p as S}from"./stores.CjekGxZg.js";import{w as T,g as D}from"./entry.CW-kIb8o.js";import{o as P}from"./auth0-spa-js.production.esm.D13UjCU2.js";import{b as B,c as O,d as H,e as R}from"./public.xpUinP6t.js";import{x as d,s as M,e as g,t as k,a as N,c as p,b as w,d as C,f as m,g as V,l as _,O as y,i as E,h as v,j as L,n as I}from"./scheduler.gZqC1beF.js";import{S as z,i as G}from"./index.qAIlD2bD.js";const f={domain:B,clientId:O,audience:H,callback:R};class j extends Error{constructor(){super("USER_LOGGED_OUT")}}const c=T(),u=T(),Z=async()=>{const t=await P({domain:f.domain,clientId:f.clientId,authorizationParams:{redirect_uri:f.callback,audience:f.audience},cacheLocation:"localstorage",useRefreshTokens:!0});c.set(t);const e=window.location.search;if((e.includes("code=")||e.includes("error="))&&e.includes("state=")){const{appState:i}=await d(c).handleRedirectCallback();window.history.replaceState({},document.title,window.location.pathname),D(i.returnTo||"/")}await d(c).isAuthenticated()?u.set(await d(c).getUser()):u.set(void 0),b()},$=()=>{const t=d(S).url.pathname;d(c).loginWithRedirect({appState:{returnTo:t}})},x=()=>d(c).logout(),ee=async()=>{var t;try{const e=await((t=d(c))==null?void 0:t.getTokenSilently());return u.set(await d(c).getUser()),e}catch{throw u.set(void 0),new j}},b=async()=>{var t;try{const e=await((t=d(c))==null?void 0:t.getTokenSilently());return u.set(await d(c).getUser()),e}catch{u.set(void 0)}setTimeout(b,1e3*60*5)};function A(t){let e,s=t[0].message+"",i;return{c(){e=g("div"),i=k(s),this.h()},l(o){e=p(o,"DIV",{class:!0});var r=w(e);i=C(r,s),r.forEach(m),this.h()},h(){_(e,"class","message svelte-17ommya")},m(o,r){E(o,e,r),v(e,i)},p(o,r){r&1&&s!==(s=o[0].message+"")&&L(i,s)},d(o){o&&m(e)}}}function q(t){let e,s,i=t[0].header+"",o,r,h,a=t[0].message&&A(t);return{c(){e=g("div"),s=g("div"),o=k(i),r=N(),a&&a.c(),this.h()},l(n){e=p(n,"DIV",{class:!0});var l=w(e);s=p(l,"DIV",{class:!0});var U=w(s);o=C(U,i),U.forEach(m),r=V(l),a&&a.l(l),l.forEach(m),this.h()},h(){_(s,"class","header svelte-17ommya"),_(e,"class",h=y("container "+t[0].level)+" svelte-17ommya")},m(n,l){E(n,e,l),v(e,s),v(s,o),v(e,r),a&&a.m(e,null)},p(n,[l]){l&1&&i!==(i=n[0].header+"")&&L(o,i),n[0].message?a?a.p(n,l):(a=A(n),a.c(),a.m(e,null)):a&&(a.d(1),a=null),l&1&&h!==(h=y("container "+n[0].level)+" svelte-17ommya")&&_(e,"class",h)},i:I,o:I,d(n){n&&m(e),a&&a.d()}}}function K(t,e,s){let{item:i}=e;return t.$$set=o=>{"item"in o&&s(0,i=o.item)},[i]}class te extends z{constructor(e){super(),G(this,e,K,q,M,{item:0})}}export{te as M,j as U,$ as a,ee as g,Z as i,x as l,u};
