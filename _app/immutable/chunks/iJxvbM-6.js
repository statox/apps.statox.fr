import"./NZTpNUN0.js";import{a as K,o as G}from"./Bklg67U4.js";import{p as J,h as x,aj as T,H as N,g as m,i as y,b as B,e as O,r as D,s as I,t as Q,a as M,d as R}from"./ClDZ5lex.js";import{w as L,d as U,e as P}from"./DGwtKS1M.js";import{i as V}from"./Dqk1RIi9.js";import{h as W}from"./DbMKhF26.js";import{c as X,e as Y}from"./DYzGdg2Z.js";import{a as Z,s as $}from"./NlAokIjw.js";const tt=()=>performance.now(),p={tick:e=>requestAnimationFrame(e),now:()=>tt(),tasks:new Set};function S(){const e=p.now();p.tasks.forEach(t=>{t.c(e)||(p.tasks.delete(t),t.f())}),p.tasks.size!==0&&p.tick(S)}function et(e){let t;return p.tasks.size===0&&p.tick(S),{promise:new Promise(n=>{p.tasks.add(t={c:e,f:n})}),abort(){p.tasks.delete(t)}}}function q(e){return e}function gt(e){const t=e-1;return t*t*t+1}const st={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function rt(){const{subscribe:e,update:t}=L([]),n={};let c=0;function f(r="default",i={}){return n[r]=i,n}function s(r,i){const a={target:"default",msg:r,...i},l=n[a.target]||{},d={...st,...l,...a,theme:{...l.theme,...a.theme},classes:[...l.classes||[],...a.classes||[]],id:++c};return t(g=>d.reversed?[...g,d]:[d,...g]),c}function o(r){t(i=>{if(!i.length||r===0)return[];if(r===void 0){const a=Math.max(...i.map(l=>l.id));return i.filter(l=>l.id!==a)}return typeof r=="number"?i.filter(a=>a.id!==r):i.filter(a=>a.target!==r.target)})}return{subscribe:e,push:s,pop:o,_init:f}}const nt=rt();function z(e){return Object.prototype.toString.call(e)==="[object Date]"}function E(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const c=t.map((f,s)=>E(e[s],f));return f=>c.map(s=>s(f))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(z(e)&&z(t)){const s=e.getTime(),r=t.getTime()-s;return i=>new Date(s+i*r)}const c=Object.keys(t),f={};return c.forEach(s=>{f[s]=E(e[s],t[s])}),s=>{const o={};return c.forEach(r=>{o[r]=f[r](s)}),o}}if(n==="number"){const c=t-e;return f=>e+f*c}return()=>t}function it(e,t={}){const n=L(e);let c,f=e;function s(o,r){if(f=o,e==null)return n.set(e=o),Promise.resolve();let i=c,a=!1,{delay:l=0,duration:d=400,easing:g=q,interpolate:w=E}={...t,...r};if(d===0)return i&&(i.abort(),i=null),n.set(e=f),Promise.resolve();const k=p.now()+l;let h;return c=et(b=>{if(b<k)return!0;a||(h=w(e,o),typeof d=="function"&&(d=d(e,o)),a=!0),i&&(i.abort(),i=null);const _=b-k;return _>d?(n.set(e=o),!1):(n.set(e=h(g(_/d))),!0)}),c.promise}return{set:s,update:(o,r)=>s(o(f,e),r),subscribe:n.subscribe}}var ot=(e,t)=>{e instanceof KeyboardEvent&&["Enter"," "].includes(e.key)&&t()},at=B('<div class="_toastBtn pe svelte-536hrw" role="button" tabindex="0"></div>'),ft=B('<div role="status"><div class="_toastMsg svelte-536hrw"><!></div> <!> <progress class="_toastBar svelte-536hrw"></progress></div>');function _t(e,t){J(t,!0);const n=()=>Z(a,"$progress",c),[c,f]=$();let s=x(T(t.item.initial)),o=x(T(t.item.initial)),r=x(!1),i;const a=it(t.item.initial,{duration:t.item.duration,easing:q});function l(){nt.pop(t.item.id)}function d(){(n()===1||n()===0)&&l()}function g(){!m(r)&&n()!==m(s)&&(a.set(n(),{duration:0}),y(r,!0))}function w(){if(m(r)){const u=t.item.duration;if(u!==void 0&&m(o)!==void 0&&m(s)!==void 0){const v=u-u*((n()-m(o))/(m(s)-m(o)));a.set(m(s),{duration:v}).then(d)}y(r,!1)}}function k(u=document){if(u.hidden===void 0)return;const v=()=>u.hidden?g():w(),j="visibilitychange";u.addEventListener(j,v),i=()=>u.removeEventListener(j,v),v()}N(()=>{if(m(s)!==t.item.next){if(y(s,t.item.next,!0),y(o,n(),!0),y(r,!1),m(s)===void 0)throw Error("Toast with undefined next");a.set(m(s)).then(d)}}),K(k),G(()=>{t.item?.onpop&&t.item.onpop(t.item.id),i?.()});var h=ft();let b;var _=O(h),C=O(_);W(C,()=>t.item.msg),D(_);var A=I(_,2);{var F=u=>{var v=at();v.__click=l,v.__keydown=[ot,l],M(u,v)};V(A,u=>{t.item.dismissable&&u(F)})}var H=I(A,2);D(h),Q(u=>{b=X(h,1,"_toastItem svelte-536hrw",null,b,u),Y(H,n())},[()=>({pe:t.item.pausable})]),P("mouseenter",h,()=>{t.item.pausable&&g()}),P("mouseleave",h,w),M(e,h),R(),f()}U(["click","keydown"]);export{_t as T,gt as c,et as l,nt as t};
