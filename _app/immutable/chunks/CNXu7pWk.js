import"./NZTpNUN0.js";import{p as L,t as P,a as N,b4 as V,r as C,g as r,b as j,c as m,f as q,d as R}from"./yfIaCavW.js";import{d as z,e as d}from"./CjDXmnel.js";import{f as O,a as M,c as G}from"./_u8npTyQ.js";import{e as x,i as I}from"./CjLfmKGv.js";import{s as H}from"./D5raxYZo.js";import{s as W}from"./f2wZ6L98.js";import{s as E}from"./Bq3iP9QB.js";var J=(n=>(n[n.notOver=0]="notOver",n[n.winPlayer1=1]="winPlayer1",n[n.winPlayer2=2]="winPlayer2",n[n.draw=3]="draw",n))(J||{});const y=7,w=6,o=4;class Q extends Error{constructor(e){super("Can't play in column "+e)}}const re=()=>Array.from({length:y},()=>[]),ie=n=>n.map(e=>[...e]),T=(n,e)=>n[e].length!==w,ue=n=>{const e=[];for(let l=0;l<n.length;l++)n[l].length<w&&e.push(l);return e},U=n=>{const e=y*w,l=n.reduce((i,s)=>i+s.length,0);return e===l},X=n=>{for(let e=0;e<y;e++)for(let l=0;l<w;l++){if(n[e].length<l||!n[e][l])continue;const i=n[e][l];let s=0,f=0,h=0,a=0;for(let t=0;t<o;t++)l+t<=n[e].length&&n[e][l+t]===i&&s++,e+t<n.length&&n[e+t][l]===i&&f++,e+t<n.length&&l+t<=n[e+t].length&&n[e+t][l+t]===i&&h++,e+t<n.length&&l-t>=0&&n[e+t][l-t]===i&&a++;if(s===o||f===o||h===o||a===o)return i}return null},ae=n=>{if(Y(n)===0)return null;for(let e=0;e<y;e++)for(let l=0;l<w;l++){if(n[e].length<l||!n[e][l])continue;const i=n[e][l],s=[],f=[],h=[],a=[];for(let t=0;t<o;t++)l+t<=n[e].length&&n[e][l+t]===i&&s.push([l+t,e]),e+t<n.length&&n[e+t][l]===i&&f.push([l,e+t]),e+t<n.length&&l+t<=n[e+t].length&&n[e+t][l+t]===i&&h.push([l+t,e+t]),e+t<n.length&&l-t>=0&&n[e+t][l-t]===i&&a.push([l-t,e+t]);if(s.length===o)return s;if(f.length===o)return f;if(h.length===o)return h;if(a.length===o)return a}return null},Y=n=>{if(U(n))return 3;const e=X(n);return e===1?1:e===2?2:0},oe=(n,e,l)=>{if(!T(n,l))throw new Q(l);return n[l].push(e),n};var Z=O('<div class="svelte-8y92u7"><button><div></div></button></div>'),p=O('<div class="board svelte-8y92u7"></div>');function ce(n,e){L(e,!0);const l=Array.from({length:e.nbRows},(t,u)=>u),i=Array.from({length:e.nbColumns},(t,u)=>u);let s=j(null);const f=(t,u)=>e.winningCells===null?!1:e.winningCells.filter(v=>v[0]===t&&v[1]===u).length>0,h=t=>{switch(t.key){case"ArrowRight":if(r(s)===null){m(s,Math.floor(e.nbColumns/2),!0);return}m(s,Math.min(r(s)+1,e.nbColumns-1),!0);break;case"ArrowLeft":if(r(s)===null){m(s,Math.floor(e.nbColumns/2),!0);return}m(s,Math.max(r(s)-1,0),!0);break;case" ":if(r(s)===null)return;e.onMove(r(s));break}};var a=p();d("keydown",V,h),x(a,21,()=>l.reverse(),I,(t,u)=>{var v=G(),D=q(v);x(D,17,()=>i,I,(F,c)=>{var _=Z(),g=R(_);let k;g.__click=()=>e.onMove(r(c));var b=R(g);let A;C(g),C(_),P(K=>{H(g,"aria-label","col-"+r(c)),k=W(g,1,"outer-cell svelte-8y92u7",null,k,K),A=W(b,1,"cell svelte-8y92u7",null,A,{player1:e.board[r(c)][r(u)]===1,player2:e.board[r(c)][r(u)]===2,drop:e.board[r(c)][r(u)]&&r(u)===e.board[r(c)].length-1}),E(b,`--drop-distance: ${e.nbRows-r(u)};`)},[()=>({selected:r(s)===r(c),"winning-cell":f(r(u),r(c))})]),d("mouseenter",g,()=>m(s,r(c),!0)),d("mouseleave",g,()=>m(s,null)),M(F,_)}),M(t,v)}),C(a),P(()=>E(a,`--nb-col: ${e.nbColumns??""}; --nb-row: ${e.nbRows??""}`)),M(n,a),N()}z(["click"]);export{J as B,ce as a,Y as b,ie as c,re as d,y as e,ae as f,ue as g,T as i,oe as m,w as n};
