import{A as y,u as S,r as h,h as _,t as A,q as t}from"./index-client.CwKaIs20.js";import{b as k}from"./template.O5anSWHx.js";import{i as C}from"./proxy.CJQ3oePJ.js";function g(e,l,a=l){var v=y();k(e,"input",c=>{var s=c?e.defaultValue:e.value;if(s=u(e)?b(s):s,a(s),v&&s!==(s=l())){var f=e.selectionStart,d=e.selectionEnd;e.value=s??"",d!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(d,e.value.length))}}),(_&&e.defaultValue!==e.value||S(l)==null&&e.value)&&a(u(e)?b(e.value):e.value),h(()=>{var c=l();u(e)&&c===b(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const n=new Set;function B(e,l,a,v,c=v){var s=a.getAttribute("type")==="checkbox",f=e;let d=!1;if(l!==null)for(var m of l)f=f[m]??(f[m]=[]);f.push(a),k(a,"change",()=>{var r=a.__value;s&&(r=i(f,r,a.checked)),c(r)},()=>c(s?[]:null)),h(()=>{var r=v();if(_&&a.defaultChecked!==a.checked){d=!0;return}s?(r=r||[],a.checked=r.includes(a.__value)):a.checked=C(a.__value,r)}),A(()=>{var r=f.indexOf(a);r!==-1&&f.splice(r,1)}),n.has(f)||(n.add(f),t(()=>{f.sort((r,o)=>r.compareDocumentPosition(o)===4?-1:1),n.delete(f)})),t(()=>{if(d){var r;if(s)r=i(f,r,a.checked);else{var o=f.find(w=>w.checked);r=o==null?void 0:o.__value}c(r)}})}function D(e,l,a=l){k(e,"change",v=>{var c=v?e.defaultChecked:e.checked;a(c)}),(_&&e.defaultChecked!==e.checked||S(l)==null)&&a(e.checked),h(()=>{var v=l();e.checked=!!v})}function i(e,l,a){for(var v=new Set,c=0;c<e.length;c+=1)e[c].checked&&v.add(e[c].__value);return a||v.delete(l),Array.from(v)}function u(e){var l=e.type;return l==="number"||l==="range"}function b(e){return e===""?null:+e}function M(e,l,a=l){k(e,"change",()=>{a(e.files)}),_&&e.files&&a(e.files),h(()=>{e.files=l()})}export{M as a,g as b,B as c,D as d};
