import"./NZTpNUN0.js";import{o as G,a as H}from"./Dpa7cG8s.js";import{p as J,h as E,a8 as j,v as N,g as m,i as w,b as B,e as O,r as D,s as I,t as Q,a as M,d as R}from"./D1gec7hp.js";import{d as U,e as P}from"./DBXcV7xI.js";import{i as V}from"./BQPfd91e.js";import{h as W}from"./Cpvoo0I6.js";import{a as X}from"./CwBosGx5.js";import{s as Y}from"./BhCaA7pE.js";import{a as Z,s as $}from"./CTwF8py8.js";import{w as L}from"./DqykZqCX.js";const tt=()=>performance.now(),p={tick:e=>requestAnimationFrame(e),now:()=>tt(),tasks:new Set};function S(){const e=p.now();p.tasks.forEach(t=>{t.c(e)||(p.tasks.delete(t),t.f())}),p.tasks.size!==0&&p.tick(S)}function et(e){let t;return p.tasks.size===0&&p.tick(S),{promise:new Promise(n=>{p.tasks.add(t={c:e,f:n})}),abort(){p.tasks.delete(t)}}}function q(e){return e}function bt(e){const t=e-1;return t*t*t+1}const rt={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function st(){const{subscribe:e,update:t}=L([]),n={};let u=0;function f(s="default",i={}){return n[s]=i,n}function r(s,i){const a={target:"default",msg:s,...i},c=n[a.target]||{},l={...rt,...c,...a,theme:{...c.theme,...a.theme},classes:[...c.classes||[],...a.classes||[]],id:++u};return t(g=>l.reversed?[...g,l]:[l,...g]),u}function o(s){t(i=>{if(!i.length||s===0)return[];if(s===void 0){const a=Math.max(...i.map(c=>c.id));return i.filter(c=>c.id!==a)}return typeof s=="number"?i.filter(a=>a.id!==s):i.filter(a=>a.target!==s.target)})}return{subscribe:e,push:r,pop:o,_init:f}}const nt=st();function z(e){return Object.prototype.toString.call(e)==="[object Date]"}function A(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const u=t.map((f,r)=>A(e[r],f));return f=>u.map(r=>r(f))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(z(e)&&z(t)){const r=e.getTime(),s=t.getTime()-r;return i=>new Date(r+i*s)}const u=Object.keys(t),f={};return u.forEach(r=>{f[r]=A(e[r],t[r])}),r=>{const o={};return u.forEach(s=>{o[s]=f[s](r)}),o}}if(n==="number"){const u=t-e;return f=>e+f*u}return()=>t}function it(e,t={}){const n=L(e);let u,f=e;function r(o,s){if(f=o,e==null)return n.set(e=o),Promise.resolve();let i=u,a=!1,{delay:c=0,duration:l=400,easing:g=q,interpolate:k=A}={...t,...s};if(l===0)return i&&(i.abort(),i=null),n.set(e=f),Promise.resolve();const x=p.now()+c;let h;return u=et(_=>{if(_<x)return!0;a||(h=k(e,o),typeof l=="function"&&(l=l(e,o)),a=!0),i&&(i.abort(),i=null);const b=_-x;return b>l?(n.set(e=o),!1):(n.set(e=h(g(b/l))),!0)}),u.promise}return{set:r,update:(o,s)=>r(o(f,e),s),subscribe:n.subscribe}}var ot=B('<div class="_toastBtn pe svelte-536hrw" role="button" tabindex="0"></div>'),at=B('<div role="status"><div class="_toastMsg svelte-536hrw"><!></div> <!> <progress class="_toastBar svelte-536hrw"></progress></div>');function _t(e,t){J(t,!0);const n=()=>Z(a,"$progress",u),[u,f]=$();let r=E(j(t.item.initial)),o=E(j(t.item.initial)),s=E(!1),i;const a=it(t.item.initial,{duration:t.item.duration,easing:q});function c(){nt.pop(t.item.id)}function l(){(n()===1||n()===0)&&c()}function g(){!m(s)&&n()!==m(r)&&(a.set(n(),{duration:0}),w(s,!0))}function k(){if(m(s)){const d=t.item.duration;if(d!==void 0&&m(o)!==void 0&&m(r)!==void 0){const v=d-d*((n()-m(o))/(m(r)-m(o)));a.set(m(r),{duration:v}).then(l)}w(s,!1)}}function x(d=document){if(d.hidden===void 0)return;const v=()=>d.hidden?g():k(),y="visibilitychange";d.addEventListener(y,v),i=()=>d.removeEventListener(y,v),v()}N(()=>{if(m(r)!==t.item.next){if(w(r,t.item.next,!0),w(o,n(),!0),w(s,!1),m(r)===void 0)throw Error("Toast with undefined next");a.set(m(r)).then(l)}}),G(x),H(()=>{t.item?.onpop&&t.item.onpop(t.item.id),i?.()});var h=at();let _;var b=O(h),C=O(b);W(C,()=>t.item.msg),D(b);var T=I(b,2);{var F=d=>{var v=ot();v.__click=c,v.__keydown=y=>{y instanceof KeyboardEvent&&["Enter"," "].includes(y.key)&&c()},M(d,v)};V(T,d=>{t.item.dismissable&&d(F)})}var K=I(T,2);D(h),Q(()=>{_=Y(h,1,"_toastItem svelte-536hrw",null,_,{pe:t.item.pausable}),X(K,n())}),P("mouseenter",h,()=>{t.item.pausable&&g()}),P("mouseleave",h,k),M(e,h),R(),f()}U(["click","keydown"]);export{_t as T,bt as c,et as l,nt as t};
