import"./DsnmJJEf.js";import{o as J,a as Q}from"./C7sTf4wh.js";import{t as S,l as D,m as M,D as U,bx as V,aa as x,a8 as W,a9 as X,bm as $,bj as ee,a_ as I,u as te,aZ as se,a7 as T,p as re,a1 as R,i as g,h as A,g as m,b as q,e as C,r as N,s as P,a as z,d as ne}from"./CXrX7986.js";import{w as F,d as ie,e as B}from"./DLkfXc5I.js";import{i as ae}from"./DQPMSdNN.js";import{s as oe,e as fe}from"./B01PSW-W.js";import{a as ue,s as le}from"./TEj7Am9_.js";function ce(t,e,i=!1,u=!1,c=!1){var s=t,a="";S(()=>{var n=U;if(a===(a=e()??"")){D&&M();return}if(n.nodes!==null&&(V(n.nodes.start,n.nodes.end),n.nodes=null),a!==""){if(D){x.data;for(var r=M(),o=r;r!==null&&(r.nodeType!==W||r.data!=="");)o=r,r=X(r);if(r===null)throw $(),ee;I(x,o),s=te(r);return}var l=a+"";i?l=`<svg>${l}</svg>`:u&&(l=`<math>${l}</math>`);var f=se(l);if((i||u)&&(f=T(f)),I(T(f),f.lastChild),i||u)for(;T(f);)s.before(T(f));else s.before(f)}})}const de=()=>performance.now(),h={tick:t=>requestAnimationFrame(t),now:()=>de(),tasks:new Set};function H(){const t=h.now();h.tasks.forEach(e=>{e.c(t)||(h.tasks.delete(e),e.f())}),h.tasks.size!==0&&h.tick(H)}function me(t){let e;return h.tasks.size===0&&h.tick(H),{promise:new Promise(i=>{h.tasks.add(e={c:t,f:i})}),abort(){h.tasks.delete(e)}}}function K(t){return t}function je(t){const e=t-1;return e*e*e+1}const he={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function _e(){const{subscribe:t,update:e}=F([]),i={};let u=0;function c(n="default",r={}){return i[n]=r,i}function s(n,r){const o={target:"default",msg:n,...r},l=i[o.target]||{},f={...he,...l,...o,theme:{...l.theme,...o.theme},classes:[...l.classes||[],...o.classes||[]],id:++u};return e(v=>f.reversed?[...v,f]:[f,...v]),u}function a(n){e(r=>{if(!r.length||n===0)return[];if(n===void 0){const o=Math.max(...r.map(l=>l.id));return r.filter(l=>l.id!==o)}return typeof n=="number"?r.filter(o=>o.id!==n):r.filter(o=>o.target!==n.target)})}return{subscribe:t,push:s,pop:a,_init:c}}const pe=_e();function L(t){return Object.prototype.toString.call(t)==="[object Date]"}function O(t,e){if(t===e||t!==t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const u=e.map((c,s)=>O(t[s],c));return c=>u.map(s=>s(c))}if(i==="object"){if(!t||!e)throw new Error("Object cannot be null");if(L(t)&&L(e)){const s=t.getTime(),n=e.getTime()-s;return r=>new Date(s+r*n)}const u=Object.keys(e),c={};return u.forEach(s=>{c[s]=O(t[s],e[s])}),s=>{const a={};return u.forEach(n=>{a[n]=c[n](s)}),a}}if(i==="number"){const u=e-t;return c=>t+c*u}return()=>e}function ve(t,e={}){const i=F(t);let u,c=t;function s(a,n){if(c=a,t==null)return i.set(t=a),Promise.resolve();let r=u,o=!1,{delay:l=0,duration:f=400,easing:v=K,interpolate:k=O}={...e,...n};if(f===0)return r&&(r.abort(),r=null),i.set(t=c),Promise.resolve();const E=h.now()+l;let _;return u=me(y=>{if(y<E)return!0;o||(_=k(t,a),typeof f=="function"&&(f=f(t,a)),o=!0),r&&(r.abort(),r=null);const b=y-E;return b>f?(i.set(t=a),!1):(i.set(t=_(v(b/f))),!0)}),u.promise}return{set:s,update:(a,n)=>s(a(c,t),n),subscribe:i.subscribe}}var ge=q('<div class="_toastBtn pe svelte-536hrw" role="button" tabindex="0"></div>'),be=q('<div role="status"><div class="_toastMsg svelte-536hrw"><!></div> <!> <progress class="_toastBar svelte-536hrw"></progress></div>');function De(t,e){re(e,!0);const i=()=>ue(o,"$progress",u),[u,c]=le();let s=A(void 0),a=A(void 0),n=A(!1),r;R(()=>{g(s,e.item.initial,!0),g(a,e.item.initial,!0)});const o=ve(e.item.initial??0,{duration:e.item.duration??0,easing:K});function l(){pe.pop(e.item.id)}function f(){(i()===1||i()===0)&&l()}function v(){!m(n)&&i()!==m(s)&&(o.set(i(),{duration:0}),g(n,!0))}function k(){if(m(n)){const d=e.item.duration;if(d!==void 0&&m(a)!==void 0&&m(s)!==void 0){const p=d-d*((i()-m(a))/(m(s)-m(a)));o.set(m(s),{duration:p}).then(f)}g(n,!1)}}function E(d=document){if(d.hidden===void 0)return;const p=()=>d.hidden?v():k(),w="visibilitychange";d.addEventListener(w,p),r=()=>d.removeEventListener(w,p),p()}R(()=>{if(m(s)!==e.item.next){if(g(s,e.item.next,!0),g(a,i(),!0),g(n,!1),m(s)===void 0)throw Error("Toast with undefined next");o.set(m(s)).then(f)}}),J(E),Q(()=>{e.item?.onpop&&e.item.onpop(e.item.id),r?.()});var _=be();let y;var b=C(_),Y=C(b);ce(Y,()=>e.item.msg),N(b);var j=P(b,2);{var Z=d=>{var p=ge();p.__click=l,p.__keydown=w=>{w instanceof KeyboardEvent&&["Enter"," "].includes(w.key)&&l()},z(d,p)};ae(j,d=>{e.item.dismissable&&d(Z)})}var G=P(j,2);N(_),S(()=>{y=oe(_,1,"_toastItem svelte-536hrw",null,y,{pe:e.item.pausable}),fe(G,i())}),B("mouseenter",_,()=>{e.item.pausable&&v()}),B("mouseleave",_,k),z(t,_),ne(),c()}ie(["click","keydown"]);export{De as T,je as c,ce as h,me as l,pe as t};
