import{P as c}from"./CELBgAxi.js";class i extends Error{code;constructor(e,s){super(s),this.code=e}}const h=async t=>{const{path:e}=t;if(!e.length||e[0]!=="/")throw new Error("Malformed path");const s=new Headers;s.set("Content-Type","application/json");const r=await fetch(`${c}${e}`,{method:"GET",mode:"cors",credentials:"include",headers:s});if(r.status<200||r.status>=300){let a;try{a=await r.text()}catch{a="could not parse server error message"}throw new i(r.status,a)}return r.json()},o=async t=>{const{path:e,data:s}=t;if(!e.length||e[0]!=="/")throw new Error("Malformed path");const r=JSON.stringify(s),a=await fetch(`${c}${e}`,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:r});if(a.status<200||a.status>=300){let n;try{n=await a.text()}catch{n="could not parse server error message"}throw new i(a.status,n)}return a.json()},m={auth:{login:t=>o({path:"/auth/login",data:t}),logout:()=>o({path:"/auth/logout",data:{}}),me:()=>o({path:"/auth/me",data:{}})},gravitrips:{getNewGame:()=>h({path:"/gravitrips/getNewGame"})},homeTracker:{getEphemerides:()=>h({path:"/homeTracker/getEphemerides"}),getSensorsDataForDashboard:()=>h({path:"/homeTracker/getSensorsDataForDashboard"}),getWeatherForecast:()=>h({path:"/homeTracker/getWeatherForecast"}),histogramData:t=>o({path:"/homeTracker/histogramData",data:t}),histogramDataPublic:t=>o({path:"/homeTracker/histogramDataPublic",data:t}),updateSensorMetadata:t=>o({path:"/homeTracker/updateSensorMetadata",data:t})},reactor:{getEntriesForPublic:()=>h({path:"/reactor/getEntriesForPublic"})}};export{i as A,m as c};
