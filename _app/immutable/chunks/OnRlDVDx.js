import"./CWj6FrbW.js";import{o as G,a as H}from"./CDX-sL3O.js";import{p as J,y as x,z as j,A as N,g as m,s as b,B as O,C as z,o as B,k as Q,n as R}from"./Cv-zmWGa.js";import{d as U,e as D}from"./BQtkqI2r.js";import{f as P,a as I}from"./BkdBIW1u.js";import{i as V}from"./CyUgAfMk.js";import{h as W}from"./BhiEo0u5.js";import{b as X,d as Y}from"./BJbKFSGg.js";import{a as Z,s as $}from"./DDEIsCTc.js";import{w as C}from"./CpW65D4M.js";const tt=()=>performance.now(),p={tick:e=>requestAnimationFrame(e),now:()=>tt(),tasks:new Set};function L(){const e=p.now();p.tasks.forEach(t=>{t.c(e)||(p.tasks.delete(t),t.f())}),p.tasks.size!==0&&p.tick(L)}function et(e){let t;return p.tasks.size===0&&p.tick(L),{promise:new Promise(f=>{p.tasks.add(t={c:e,f})}),abort(){p.tasks.delete(t)}}}function S(e){return e}function _t(e){const t=e-1;return t*t*t+1}const rt={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function st(){const{subscribe:e,update:t}=C([]),f={};let u=0;function i(s="default",n={}){return f[s]=n,f}function r(s,n){const a={target:"default",msg:s,...n},l=f[a.target]||{},d={...rt,...l,...a,theme:{...l.theme,...a.theme},classes:[...l.classes||[],...a.classes||[]],id:++u};return t(y=>d.reversed?[...y,d]:[d,...y]),u}function o(s){t(n=>{if(!n.length||s===0)return[];if(s===void 0){const a=Math.max(...n.map(l=>l.id));return n.filter(l=>l.id!==a)}return typeof s=="number"?n.filter(a=>a.id!==s):n.filter(a=>a.target!==s.target)})}return{subscribe:e,push:r,pop:o,_init:i}}const nt=st();function M(e){return Object.prototype.toString.call(e)==="[object Date]"}function E(e,t){if(e===t||e!==e)return()=>e;const f=typeof e;if(f!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const u=t.map((i,r)=>E(e[r],i));return i=>u.map(r=>r(i))}if(f==="object"){if(!e||!t)throw new Error("Object cannot be null");if(M(e)&&M(t)){const r=e.getTime(),s=t.getTime()-r;return n=>new Date(r+n*s)}const u=Object.keys(t),i={};return u.forEach(r=>{i[r]=E(e[r],t[r])}),r=>{const o={};return u.forEach(s=>{o[s]=i[s](r)}),o}}if(f==="number"){const u=t-e;return i=>e+i*u}return()=>t}function it(e,t={}){const f=C(e);let u,i=e;function r(o,s){if(i=o,e==null)return f.set(e=o),Promise.resolve();let n=u,a=!1,{delay:l=0,duration:d=400,easing:y=S,interpolate:k=E}={...t,...s};if(d===0)return n&&(n.abort(),n=null),f.set(e=i),Promise.resolve();const w=p.now()+l;let g;return u=et(_=>{if(_<w)return!0;a||(g=k(e,o),typeof d=="function"&&(d=d(e,o)),a=!0),n&&(n.abort(),n=null);const h=_-w;return h>d?(f.set(e=o),!1):(f.set(e=g(y(h/d))),!0)}),u.promise}return{set:r,update:(o,s)=>r(o(i,e),s),subscribe:f.subscribe}}var ot=(e,t)=>{e instanceof KeyboardEvent&&["Enter"," "].includes(e.key)&&t()},at=P('<div class="_toastBtn pe svelte-1yg7ke" role="button" tabindex="0"></div>'),ft=P('<div role="status"><div class="_toastMsg svelte-1yg7ke"><!></div> <!> <progress class="_toastBar svelte-1yg7ke"></progress></div>');function bt(e,t){J(t,!0);const[f,u]=$(),i=()=>Z(a,"$progress",f);let r=x(j(t.item.initial)),o=x(j(t.item.initial)),s=x(!1),n;const a=it(t.item.initial,{duration:t.item.duration,easing:S});function l(){nt.pop(t.item.id)}function d(){(i()===1||i()===0)&&l()}function y(){!m(s)&&i()!==m(r)&&(a.set(i(),{duration:0}),b(s,!0))}function k(){if(m(s)){const c=t.item.duration;if(c!==void 0&&m(o)!==void 0&&m(r)!==void 0){const v=c-c*((i()-m(o))/(m(r)-m(o)));a.set(m(r),{duration:v}).then(d)}b(s,!1)}}function w(c=document){if(c.hidden===void 0)return;const v=()=>c.hidden?y():k(),T="visibilitychange";c.addEventListener(T,v),n=()=>c.removeEventListener(T,v),v()}N(()=>{if(m(r)!==t.item.next){if(b(r,t.item.next,!0),b(o,i(),!0),b(s,!1),m(r)===void 0)throw Error("Toast with undefined next");a.set(m(r)).then(d)}}),G(w),H(()=>{var c;(c=t.item)!=null&&c.onpop&&t.item.onpop(t.item.id),n==null||n()});var g=ft();let _;var h=O(g),q=O(h);W(q,()=>t.item.msg),z(h);var A=B(h,2);{var F=c=>{var v=at();v.__click=l,v.__keydown=[ot,l],I(c,v)};V(A,c=>{t.item.dismissable&&c(F)})}var K=B(A,2);z(g),Q(c=>{_=X(g,1,"_toastItem svelte-1yg7ke",null,_,c),Y(K,i())},[()=>({pe:t.item.pausable})]),D("mouseenter",g,()=>{t.item.pausable&&y()}),D("mouseleave",g,k),I(e,g),R(),u()}U(["click","keydown"]);export{bt as T,_t as c,et as l,nt as t};
