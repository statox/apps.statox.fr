import{w as c}from"./entry.3D1jTNmx.js";import{b as r,c as l,d,e as u}from"./public.xpUinP6t.js";import{o as h}from"./auth0-spa-js.production.esm.D13UjCU2.js";import{x as a}from"./scheduler.BO3y7xWz.js";const i={domain:r,clientId:l,audience:d,callback:u};class w extends Error{constructor(){super("USER_LOGGED_OUT")}}const t=c(),s=c(),I=async()=>{const o=await h({domain:i.domain,clientId:i.clientId,authorizationParams:{redirect_uri:i.callback,audience:i.audience},cacheLocation:"localstorage",useRefreshTokens:!0});t.set(o);const e=window.location.search;(e.includes("code=")||e.includes("error="))&&e.includes("state=")&&(await a(t).handleRedirectCallback(),window.history.replaceState({},document.title,window.location.pathname)),await a(t).isAuthenticated()?s.set(await a(t).getUser()):s.set(void 0),n()},T=()=>a(t).loginWithRedirect(),C=()=>a(t).logout(),L=async()=>{var o;try{const e=await((o=a(t))==null?void 0:o.getTokenSilently());return s.set(await a(t).getUser()),e}catch{throw s.set(void 0),new w}},n=async()=>{var o;try{const e=await((o=a(t))==null?void 0:o.getTokenSilently());return s.set(await a(t).getUser()),e}catch{s.set(void 0)}setTimeout(n,1e3*60*5)};export{w as U,T as a,L as g,I as i,C as l,s as u};
