import{aW as h,G as E,x as S,_ as n,R as i,au as o,aZ as C,aY as g,ai as w,$ as m}from"./D6WCIunz.js";function V(e,c,a=c){var d=new WeakSet;h(e,"input",async r=>{var v=r?e.defaultValue:e.value;if(v=t(e)?b(v):v,a(v),o!==null&&d.add(o),await E(),v!==(v=c())){var f=e.selectionStart,s=e.selectionEnd,_=e.value.length;if(e.value=v??"",s!==null){var l=e.value.length;f===s&&s===_&&l>_?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=f,e.selectionEnd=Math.min(s,l))}}}),(i&&e.defaultValue!==e.value||S(c)==null&&e.value)&&(a(t(e)?b(e.value):e.value),o!==null&&d.add(o)),n(()=>{var r=c();if(e===document.activeElement){var v=C??o;if(d.has(v))return}t(e)&&r===b(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}const u=new Set;function W(e,c,a,d,r=d){var v=a.getAttribute("type")==="checkbox",f=e;let s=!1;if(c!==null)for(var _ of c)f=f[_]??=[];f.push(a),h(a,"change",()=>{var l=a.__value;v&&(l=y(f,l,a.checked)),r(l)},()=>r(v?[]:null)),n(()=>{var l=d();if(i&&a.defaultChecked!==a.checked){s=!0;return}v?(l=l||[],a.checked=l.includes(a.__value)):a.checked=g(a.__value,l)}),w(()=>{var l=f.indexOf(a);l!==-1&&f.splice(l,1)}),u.has(f)||(u.add(f),m(()=>{f.sort((l,k)=>l.compareDocumentPosition(k)===4?-1:1),u.delete(f)})),m(()=>{if(s){var l;if(v)l=y(f,l,a.checked);else{var k=f.find(x=>x.checked);l=k?.__value}r(l)}})}function q(e,c,a=c){h(e,"change",d=>{var r=d?e.defaultChecked:e.checked;a(r)}),(i&&e.defaultChecked!==e.checked||S(c)==null)&&a(e.checked),n(()=>{var d=c();e.checked=!!d})}function y(e,c,a){for(var d=new Set,r=0;r<e.length;r+=1)e[r].checked&&d.add(e[r].__value);return a||d.delete(c),Array.from(d)}function t(e){var c=e.type;return c==="number"||c==="range"}function b(e){return e===""?null:+e}function B(e,c,a=c){h(e,"change",()=>{a(e.files)}),i&&e.files&&a(e.files),n(()=>{e.files=c()})}export{W as a,V as b,q as c,B as d};
