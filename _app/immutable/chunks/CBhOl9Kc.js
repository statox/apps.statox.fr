import"./NZTpNUN0.js";import{p as L,b as E,t as P,a as C,d as N,a$ as V,r as d,h as r,g as j,e as v,c as z,f as G,i as R}from"./tjCGPzdr.js";import{d as H,e as k}from"./DOKer7p_.js";import{e as q,i as x}from"./An4e5j9g.js";import{a as I,s as J,c as W}from"./DKsZ4ghV.js";var Q=(n=>(n[n.notOver=0]="notOver",n[n.winPlayer1=1]="winPlayer1",n[n.winPlayer2=2]="winPlayer2",n[n.draw=3]="draw",n))(Q||{});const _=7,w=6,c=4;class T extends Error{constructor(e){super("Can't play in column "+e)}}const se=()=>Array.from({length:_},()=>[]),re=n=>n.map(e=>[...e]),U=(n,e)=>n[e].length!==w,ie=n=>{const e=[];for(let l=0;l<n.length;l++)n[l].length<w&&e.push(l);return e},X=n=>{const e=_*w,l=n.reduce((i,s)=>i+s.length,0);return e===l},Y=n=>{for(let e=0;e<_;e++)for(let l=0;l<w;l++){if(n[e].length<l||!n[e][l])continue;const i=n[e][l];let s=0,f=0,g=0,u=0;for(let t=0;t<c;t++)l+t<=n[e].length&&n[e][l+t]===i&&s++,e+t<n.length&&n[e+t][l]===i&&f++,e+t<n.length&&l+t<=n[e+t].length&&n[e+t][l+t]===i&&g++,e+t<n.length&&l-t>=0&&n[e+t][l-t]===i&&u++;if(s===c||f===c||g===c||u===c)return i}return null},ae=n=>{if(Z(n)===0)return null;for(let e=0;e<_;e++)for(let l=0;l<w;l++){if(n[e].length<l||!n[e][l])continue;const i=n[e][l],s=[],f=[],g=[],u=[];for(let t=0;t<c;t++)l+t<=n[e].length&&n[e][l+t]===i&&s.push([l+t,e]),e+t<n.length&&n[e+t][l]===i&&f.push([l,e+t]),e+t<n.length&&l+t<=n[e+t].length&&n[e+t][l+t]===i&&g.push([l+t,e+t]),e+t<n.length&&l-t>=0&&n[e+t][l-t]===i&&u.push([l-t,e+t]);if(s.length===c)return s;if(f.length===c)return f;if(g.length===c)return g;if(u.length===c)return u}return null},Z=n=>{if(X(n))return 3;const e=Y(n);return e===1?1:e===2?2:0},ue=(n,e,l)=>{if(!U(n,l))throw new T(l);return n[l].push(e),n};var B=(n,e,l)=>e.onMove(r(l)),p=E('<div class="svelte-1g8saqi"><button><div></div></button></div>'),S=E('<div class="board svelte-1g8saqi"></div>');function ce(n,e){L(e,!0);const l=Array.from({length:e.nbRows},(t,a)=>a),i=Array.from({length:e.nbColumns},(t,a)=>a);let s=j(null);const f=(t,a)=>e.winningCells===null?!1:e.winningCells.filter(m=>m[0]===t&&m[1]===a).length>0,g=t=>{switch(t.key){case"ArrowRight":if(r(s)===null){v(s,Math.floor(e.nbColumns/2),!0);return}v(s,Math.min(r(s)+1,e.nbColumns-1),!0);break;case"ArrowLeft":if(r(s)===null){v(s,Math.floor(e.nbColumns/2),!0);return}v(s,Math.max(r(s)-1,0),!0);break;case" ":if(r(s)===null)return;e.onMove(r(s));break}};var u=S();k("keydown",V,g),q(u,21,()=>l.reverse(),x,(t,a)=>{var m=z(),O=G(m);q(O,17,()=>i,x,(D,o)=>{var y=p(),h=R(y);let M;h.__click=[B,e,o];var A=R(h);let b;d(h),d(y),P((F,K)=>{J(h,"aria-label","col-"+r(o)),M=W(h,1,"outer-cell svelte-1g8saqi",null,M,F),b=W(A,1,"cell svelte-1g8saqi",null,b,K),I(A,`--drop-distance: ${e.nbRows-r(a)};`)},[()=>({selected:r(s)===r(o),"winning-cell":f(r(a),r(o))}),()=>({player1:e.board[r(o)][r(a)]===1,player2:e.board[r(o)][r(a)]===2,drop:e.board[r(o)][r(a)]&&r(a)===e.board[r(o)].length-1})]),k("mouseenter",h,()=>v(s,r(o),!0)),k("mouseleave",h,()=>v(s,null)),C(D,y)}),C(t,m)}),d(u),P(()=>I(u,`--nb-col: ${e.nbColumns??""}; --nb-row: ${e.nbRows??""}`)),C(n,u),N()}H(["click"]);export{Q as B,ce as a,Z as b,re as c,se as d,_ as e,ae as f,ie as g,U as i,ue as m,w as n};
