import{p as I}from"./stores.DRrCF4-H.js";import{g as k}from"./entry.c2uDQm9S.js";import{o as C}from"./auth0-spa-js.production.esm.Dzqc2IBy.js";import{N as s,M as h,m as L,ae as m,af as u,z as y,w as p,x as b}from"./index-client.S3REcJgE.js";import{b as E,c as x,d as P,e as S}from"./public.xpUinP6t.js";import"./disclose-version.Bg9kRutz.js";import{i as B}from"./legacy.EqIdVoM0.js";import{s as f}from"./render.CF6uZz0T.js";import{i as D}from"./if.BYsj_AMu.js";import{a as g,t as v}from"./template.B5pchg3w.js";import{s as H}from"./class.co_UInUL.js";import{p as M}from"./props.C2aoZBXh.js";const n={domain:E,clientId:x,audience:P,callback:S};class N extends Error{constructor(){super("USER_LOGGED_OUT")}}const a=h(),i=h(),Z=async()=>{const e=await C({domain:n.domain,clientId:n.clientId,authorizationParams:{redirect_uri:n.callback,audience:n.audience},cacheLocation:"localstorage",useRefreshTokens:!0});a.set(e);const t=window.location.search;if((t.includes("code=")||t.includes("error="))&&t.includes("state=")){const{appState:o}=await s(a).handleRedirectCallback();window.history.replaceState({},document.title,window.location.pathname),k(o.returnTo||"/")}await s(a).isAuthenticated()?i.set(await s(a).getUser()):i.set(void 0),w()},$=()=>{const e=s(I).url.pathname;s(a).loginWithRedirect({appState:{returnTo:e}})},ee=()=>s(a).logout(),te=async()=>{var e;try{const t=await((e=s(a))==null?void 0:e.getTokenSilently());return i.set(await s(a).getUser()),t}catch{throw i.set(void 0),new N}},w=async()=>{var e;try{const t=await((e=s(a))==null?void 0:e.getTokenSilently());return i.set(await s(a).getUser()),t}catch{i.set(void 0)}setTimeout(w,1e3*60*5)};var O=v('<div class="message svelte-l4wt7o"> </div>'),R=v('<div><div class="header svelte-l4wt7o"> </div> <!></div>');function ae(e,t){L(t,!1);let r=M(t,"item",8);B();var o=R(),c=m(o),_=m(c,!0);u(c);var U=y(c,2);{var A=l=>{var d=O(),T=m(d,!0);u(d),p(()=>f(T,r().message)),g(l,d)};D(U,l=>{r().message&&l(A)})}u(o),p(()=>{H(o,`${"container "+r().level} svelte-l4wt7o`),f(_,r().header)}),g(e,o),b()}export{ae as M,N as U,$ as a,te as g,Z as i,ee as l,i as u};
