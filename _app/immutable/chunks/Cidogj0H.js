import"./NZTpNUN0.js";import"./CKAZmBfe.js";import{c as x,f as w,a as m,b as _,p as M,d as y,e as z,r as E,t as A,i as $,h as K,g as R}from"./DnM7dGtc.js";import{d as g,s as j}from"./6Z5RDsVp.js";import{i as C}from"./lY64Rcfk.js";import{a as v,s as k}from"./CVcH4W3l.js";import{u as I,b as B,c as D}from"./CmfuKG-C.js";import{o as L}from"./l_nJxuHZ.js";import{a as F,s as H,c as J}from"./BNctEiaO.js";import{i as O}from"./DcqZt1wk.js";import{g as S}from"./BDdnyrv3.js";import{w as Q}from"./C0FGHCIK.js";const d=624,V=397,N=32,T=31,W=4294967295<<T>>>0,X=4294967295>>>N-T>>>0,Y=2567483615,Z=11,P=7,tt=15,et=18,st=2636928640,at=4022730752,ot=1812433253,rt=(e,t)=>{e.state_array[0]=t;for(let s=1;s<d;s++)t=Math.imul(ot,t^t>>>N-2)+s>>>0,e.state_array[s]=t;e.state_index=0},U=e=>{let t=e.state_index,s=t-(d-1);s<0&&(s+=d);let o=e.state_array[t]&W|e.state_array[s]&X,n=o>>>1;o&1&&(n^=Y),s=t-(d-V),s<0&&(s+=d),o=(e.state_array[s]^n)>>>0,e.state_array[t++]=o,t>=d&&(t=0),e.state_index=t;let a=o^o>>>Z;return a=a^a<<P&st,a=a^a<<tt&at,(a^a>>>et)>>>0},nt=e=>U(e)/4294967296;class it{#t;#e;constructor(){this.#e={state_array:[],state_index:0},this.#t=!1}initialize(t){rt(this.#e,t),this.#t=!0}randomInt(){if(!this.#t)throw new Error("State not initialized");return U(this.#e)}random(){if(!this.#t)throw new Error("State not initialized");return nt(this.#e)}}const p=new it,yt=(e,t)=>t?t.user.scopes.includes("admin")?!0:t.user.scopes.includes(e):!1,ct=e=>e.split("").reduce((t,s,o)=>t+(o+1)*s.charCodeAt(0),1),lt=e=>{if(!e)return"#990000";const t=ct(e);p.initialize(t);const s=Math.floor(p.random()*255).toString(16).padStart(2,"0"),o=Math.floor(p.random()*255).toString(16).padStart(2,"0"),n=Math.floor(p.random()*255).toString(16).padStart(2,"0");return`#${s}${o}${n}`};var ut=_('<button title="Logout" class="svelte-1pi5ero"><i class="fa fa-sign-out svelte-1pi5ero" aria-hidden="true"></i></button>');function zt(e){const t=()=>v(I,"$user",s),[s,o]=k();var n=x(),a=w(n);{var l=u=>{var c=ut();c.__click=function(...r){B?.apply(this,r)},m(u,c)};C(a,u=>{t()&&u(l)})}m(e,n),o()}g(["click"]);var ft=_('<button title="My profile" class="user-profile svelte-kz860w"> </button>'),dt=_('<button title="Log in" class="svelte-kz860w"><i class="fas fa-user svelte-kz860w" aria-hidden="true"></i></button>');function Et(e,t){M(t,!1);const s=()=>v(I,"$user",o),[o,n]=k();L(()=>{D()}),O();var a=x(),l=w(a);{var u=r=>{var i=ft();i.__click=()=>S("/auth/me");var h=z(i,!0);E(i),A((f,b)=>{F(i,`--user-color: ${f??""}`),j(h,b)},[()=>lt(s()?.user.username),()=>s().user.username[0].toUpperCase()]),m(r,i)},c=r=>{var i=dt();i.__click=()=>S("/auth/login"),m(r,i)};C(l,r=>{s()?r(u):r(c,!1)})}m(e,a),y(),n()}g(["click"]);var mt=_('<button aria-label="switch theme" class="svelte-1uyqgt8"><i aria-hidden="true"></i></button>');function At(e,t){M(t,!0);const s=()=>v(a,"$darkModeEnabled",o),[o,n]=k(),a=Q(!1),l="fas fa-moon",u="fas fa-sun";let c=K(l),r;const i=()=>{a.set(!s()),h()},h=()=>{s()?(r.dataset.theme="dark",$(c,u)):(r.dataset.theme="light",$(c,l))};L(()=>{r=document.documentElement;const q=localStorage.getItem("darkModeEnabled")||!0;a.set(q==="true"),a.subscribe(G=>{localStorage.setItem("darkModeEnabled",G.toString())}),h()});var f=mt();f.__click=i;var b=z(f);E(f),A(()=>H(b,1,J(R(c)),"svelte-1uyqgt8")),m(e,f),y(),n()}g(["click"]);export{Et as A,zt as L,At as T,yt as i};
