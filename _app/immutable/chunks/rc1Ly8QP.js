import{P as c}from"./CELBgAxi.js";class i extends Error{code;constructor(e,o){super(o),this.code=e}}const n=async t=>{const{path:e}=t;if(!e.length||e[0]!=="/")throw new Error("Malformed path");const o=new Headers;o.set("Content-Type","application/json");const r=await fetch(`${c}${e}`,{method:"GET",mode:"cors",credentials:"include",headers:o});if(r.status<200||r.status>=300){let a;try{a=await r.text()}catch{a="could not parse server error message"}throw new i(r.status,a)}return r.json()},s=async t=>{const{path:e,data:o}=t;if(!e.length||e[0]!=="/")throw new Error("Malformed path");const r=JSON.stringify(o),a=await fetch(`${c}${e}`,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:r});if(a.status<200||a.status>=300){let h;try{h=await a.text()}catch{h="could not parse server error message"}throw new i(a.status,h)}return a.json()},u={auth:{login:t=>s({path:"/auth/login",data:t}),logout:()=>s({path:"/auth/logout",data:{}}),me:()=>s({path:"/auth/me",data:{}})},homeTracker:{getEphemerides:()=>n({path:"/homeTracker/getEphemerides"}),getSensorsDataForDashboard:()=>n({path:"/homeTracker/getSensorsDataForDashboard"}),getWeatherForecast:()=>n({path:"/homeTracker/getWeatherForecast"}),histogramData:t=>s({path:"/homeTracker/histogramData",data:t}),histogramDataPublic:t=>s({path:"/homeTracker/histogramDataPublic",data:t}),updateSensorMetadata:t=>s({path:"/homeTracker/updateSensorMetadata",data:t})},reactor:{getEntriesForPublic:()=>n({path:"/reactor/getEntriesForPublic"})}};export{i as A,u as c};
