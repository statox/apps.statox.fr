import"./NZTpNUN0.js";import{o as K,a as H}from"./BlCreX5I.js";import{z as J,A as x,B as j,C as N,g as m,s as b,p as P,F as O,G as z,v as B,x as Q,a as D,E as R}from"./R2JDhSNG.js";import{w as C,d as U,f as I}from"./C3Q0-X8e.js";import{i as V}from"./4u1zq58c.js";import{h as W}from"./CJHMwUFf.js";import{a as X,c as Y}from"./DmNmkrrX.js";import{a as Z,s as $}from"./Ct-TLQDZ.js";const tt=()=>performance.now(),p={tick:e=>requestAnimationFrame(e),now:()=>tt(),tasks:new Set};function F(){const e=p.now();p.tasks.forEach(t=>{t.c(e)||(p.tasks.delete(t),t.f())}),p.tasks.size!==0&&p.tick(F)}function et(e){let t;return p.tasks.size===0&&p.tick(F),{promise:new Promise(f=>{p.tasks.add(t={c:e,f})}),abort(){p.tasks.delete(t)}}}function L(e){return e}function yt(e){const t=e-1;return t*t*t+1}const st={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function nt(){const{subscribe:e,update:t}=C([]),f={};let c=0;function r(n="default",i={}){return f[n]=i,f}function s(n,i){const a={target:"default",msg:n,...i},l=f[a.target]||{},d={...st,...l,...a,theme:{...l.theme,...a.theme},classes:[...l.classes||[],...a.classes||[]],id:++c};return t(y=>d.reversed?[...y,d]:[d,...y]),c}function o(n){t(i=>{if(!i.length||n===0)return[];if(n===void 0){const a=Math.max(...i.map(l=>l.id));return i.filter(l=>l.id!==a)}return typeof n=="number"?i.filter(a=>a.id!==n):i.filter(a=>a.target!==n.target)})}return{subscribe:e,push:s,pop:o,_init:r}}const rt=nt();function M(e){return Object.prototype.toString.call(e)==="[object Date]"}function E(e,t){if(e===t||e!==e)return()=>e;const f=typeof e;if(f!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const c=t.map((r,s)=>E(e[s],r));return r=>c.map(s=>s(r))}if(f==="object"){if(!e||!t)throw new Error("Object cannot be null");if(M(e)&&M(t)){const s=e.getTime(),n=t.getTime()-s;return i=>new Date(s+i*n)}const c=Object.keys(t),r={};return c.forEach(s=>{r[s]=E(e[s],t[s])}),s=>{const o={};return c.forEach(n=>{o[n]=r[n](s)}),o}}if(f==="number"){const c=t-e;return r=>e+r*c}return()=>t}function it(e,t={}){const f=C(e);let c,r=e;function s(o,n){if(r=o,e==null)return f.set(e=o),Promise.resolve();let i=c,a=!1,{delay:l=0,duration:d=400,easing:y=L,interpolate:k=E}={...t,...n};if(d===0)return i&&(i.abort(),i=null),f.set(e=r),Promise.resolve();const w=p.now()+l;let g;return c=et(_=>{if(_<w)return!0;a||(g=k(e,o),typeof d=="function"&&(d=d(e,o)),a=!0),i&&(i.abort(),i=null);const h=_-w;return h>d?(f.set(e=o),!1):(f.set(e=g(y(h/d))),!0)}),c.promise}return{set:s,update:(o,n)=>s(o(r,e),n),subscribe:f.subscribe}}var ot=(e,t)=>{e instanceof KeyboardEvent&&["Enter"," "].includes(e.key)&&t()},at=P('<div class="_toastBtn pe svelte-1yg7ke" role="button" tabindex="0"></div>'),ft=P('<div role="status"><div class="_toastMsg svelte-1yg7ke"><!></div> <!> <progress class="_toastBar svelte-1yg7ke"></progress></div>');function ht(e,t){J(t,!0);const[f,c]=$(),r=()=>Z(a,"$progress",f);let s=x(j(t.item.initial)),o=x(j(t.item.initial)),n=x(!1),i;const a=it(t.item.initial,{duration:t.item.duration,easing:L});function l(){rt.pop(t.item.id)}function d(){(r()===1||r()===0)&&l()}function y(){!m(n)&&r()!==m(s)&&(a.set(r(),{duration:0}),b(n,!0))}function k(){if(m(n)){const u=t.item.duration;if(u!==void 0&&m(o)!==void 0&&m(s)!==void 0){const v=u-u*((r()-m(o))/(m(s)-m(o)));a.set(m(s),{duration:v}).then(d)}b(n,!1)}}function w(u=document){if(u.hidden===void 0)return;const v=()=>u.hidden?y():k(),T="visibilitychange";u.addEventListener(T,v),i=()=>u.removeEventListener(T,v),v()}N(()=>{if(m(s)!==t.item.next){if(b(s,t.item.next,!0),b(o,r(),!0),b(n,!1),m(s)===void 0)throw Error("Toast with undefined next");a.set(m(s)).then(d)}}),K(w),H(()=>{t.item?.onpop&&t.item.onpop(t.item.id),i?.()});var g=ft();let _;var h=O(g),S=O(h);W(S,()=>t.item.msg),z(h);var A=B(h,2);{var q=u=>{var v=at();v.__click=l,v.__keydown=[ot,l],D(u,v)};V(A,u=>{t.item.dismissable&&u(q)})}var G=B(A,2);z(g),Q(u=>{_=X(g,1,"_toastItem svelte-1yg7ke",null,_,u),Y(G,r())},[()=>({pe:t.item.pausable})]),I("mouseenter",g,()=>{t.item.pausable&&y()}),I("mouseleave",g,k),D(e,g),R(),c()}U(["click","keydown"]);export{ht as T,yt as c,et as l,rt as t};
