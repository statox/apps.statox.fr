import{p as S}from"./stores.DfUAiaG2.js";import{w as k,g as D}from"./entry.BmYixetS.js";import{o as P}from"./auth0-spa-js.production.esm.D13UjCU2.js";import{b as B,c as H,d as M,e as O}from"./public.xpUinP6t.js";import{x as d,s as R,e as g,t as C,a as N,c as p,b as w,d as y,f as h,g as V,l as _,M as I,i as E,h as v,j as L,n as A}from"./scheduler.DD29IDFH.js";import{S as z,i as G}from"./index.DdAIetyJ.js";const f={domain:B,clientId:H,audience:M,callback:O};class j extends Error{constructor(){super("USER_LOGGED_OUT")}}const c=k(),u=k(),Z=async()=>{const t=await P({domain:f.domain,clientId:f.clientId,authorizationParams:{redirect_uri:f.callback,audience:f.audience},cacheLocation:"localstorage",useRefreshTokens:!0});c.set(t);const e=window.location.search;if((e.includes("code=")||e.includes("error="))&&e.includes("state=")){const{appState:i}=await d(c).handleRedirectCallback();window.history.replaceState({},document.title,window.location.pathname),D(i.returnTo||"/")}await d(c).isAuthenticated()?u.set(await d(c).getUser()):u.set(void 0),b()},$=()=>{const t=d(S).url.pathname;d(c).loginWithRedirect({appState:{returnTo:t}})},x=()=>d(c).logout(),ee=async()=>{var t;try{const e=await((t=d(c))==null?void 0:t.getTokenSilently());return u.set(await d(c).getUser()),e}catch{throw u.set(void 0),new j}},b=async()=>{var t;try{const e=await((t=d(c))==null?void 0:t.getTokenSilently());return u.set(await d(c).getUser()),e}catch{u.set(void 0)}setTimeout(b,1e3*60*5)};function T(t){let e,s=t[0].message+"",i;return{c(){e=g("div"),i=C(s),this.h()},l(o){e=p(o,"DIV",{class:!0});var l=w(e);i=y(l,s),l.forEach(h),this.h()},h(){_(e,"class","message svelte-l4wt7o")},m(o,l){E(o,e,l),v(e,i)},p(o,l){l&1&&s!==(s=o[0].message+"")&&L(i,s)},d(o){o&&h(e)}}}function q(t){let e,s,i=t[0].header+"",o,l,m,a=t[0].message&&T(t);return{c(){e=g("div"),s=g("div"),o=C(i),l=N(),a&&a.c(),this.h()},l(n){e=p(n,"DIV",{class:!0});var r=w(e);s=p(r,"DIV",{class:!0});var U=w(s);o=y(U,i),U.forEach(h),l=V(r),a&&a.l(r),r.forEach(h),this.h()},h(){_(s,"class","header svelte-l4wt7o"),_(e,"class",m=I("container "+t[0].level)+" svelte-l4wt7o")},m(n,r){E(n,e,r),v(e,s),v(s,o),v(e,l),a&&a.m(e,null)},p(n,[r]){r&1&&i!==(i=n[0].header+"")&&L(o,i),n[0].message?a?a.p(n,r):(a=T(n),a.c(),a.m(e,null)):a&&(a.d(1),a=null),r&1&&m!==(m=I("container "+n[0].level)+" svelte-l4wt7o")&&_(e,"class",m)},i:A,o:A,d(n){n&&h(e),a&&a.d()}}}function K(t,e,s){let{item:i}=e;return t.$$set=o=>{"item"in o&&s(0,i=o.item)},[i]}class te extends z{constructor(e){super(),G(this,e,K,q,R,{item:0})}}export{te as M,j as U,$ as a,ee as g,Z as i,x as l,u};
