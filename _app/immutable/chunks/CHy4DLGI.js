import"./DsnmJJEf.js";import{o as J,a as Q}from"./CW6Daupv.js";import{t as S,l as j,m as M,D as U,bw as V,aa as x,a8 as W,a9 as X,bl as $,bi as ee,a_ as C,u as te,aZ as se,a7 as T,p as re,h as A,C as I,a1 as ne,g as m,i as w,b as q,e as R,r as N,s as P,a as z,d as ie}from"./BI5tnybL.js";import{w as F,d as ae,e as B}from"./BHBOcJDT.js";import{i as oe}from"./BcTGm7Fo.js";import{s as fe,e as le}from"./Db8wGxCz.js";import{a as ue,s as ce}from"./fB5nFxe2.js";function de(t,e,i=!1,l=!1,c=!1){var r=t,a="";S(()=>{var n=U;if(a===(a=e()??"")){j&&M();return}if(n.nodes!==null&&(V(n.nodes.start,n.nodes.end),n.nodes=null),a!==""){if(j){x.data;for(var s=M(),o=s;s!==null&&(s.nodeType!==W||s.data!=="");)o=s,s=X(s);if(s===null)throw $(),ee;C(x,o),r=te(s);return}var u=a+"";i?u=`<svg>${u}</svg>`:l&&(u=`<math>${u}</math>`);var f=se(u);if((i||l)&&(f=T(f)),C(T(f),f.lastChild),i||l)for(;T(f);)r.before(T(f));else r.before(f)}})}const me=()=>performance.now(),h={tick:t=>requestAnimationFrame(t),now:()=>me(),tasks:new Set};function H(){const t=h.now();h.tasks.forEach(e=>{e.c(t)||(h.tasks.delete(e),e.f())}),h.tasks.size!==0&&h.tick(H)}function he(t){let e;return h.tasks.size===0&&h.tick(H),{promise:new Promise(i=>{h.tasks.add(e={c:t,f:i})}),abort(){h.tasks.delete(e)}}}function K(t){return t}function je(t){const e=t-1;return e*e*e+1}const _e={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function pe(){const{subscribe:t,update:e}=F([]),i={};let l=0;function c(n="default",s={}){return i[n]=s,i}function r(n,s){const o={target:"default",msg:n,...s},u=i[o.target]||{},f={..._e,...u,...o,theme:{...u.theme,...o.theme},classes:[...u.classes||[],...o.classes||[]],id:++l};return e(v=>f.reversed?[...v,f]:[f,...v]),l}function a(n){e(s=>{if(!s.length||n===0)return[];if(n===void 0){const o=Math.max(...s.map(u=>u.id));return s.filter(u=>u.id!==o)}return typeof n=="number"?s.filter(o=>o.id!==n):s.filter(o=>o.target!==n.target)})}return{subscribe:t,push:r,pop:a,_init:c}}const ve=pe();function L(t){return Object.prototype.toString.call(t)==="[object Date]"}function O(t,e){if(t===e||t!==t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((c,r)=>O(t[r],c));return c=>l.map(r=>r(c))}if(i==="object"){if(!t||!e)throw new Error("Object cannot be null");if(L(t)&&L(e)){const r=t.getTime(),n=e.getTime()-r;return s=>new Date(r+s*n)}const l=Object.keys(e),c={};return l.forEach(r=>{c[r]=O(t[r],e[r])}),r=>{const a={};return l.forEach(n=>{a[n]=c[n](r)}),a}}if(i==="number"){const l=e-t;return c=>t+c*l}return()=>e}function ge(t,e={}){const i=F(t);let l,c=t;function r(a,n){if(c=a,t==null)return i.set(t=a),Promise.resolve();let s=l,o=!1,{delay:u=0,duration:f=400,easing:v=K,interpolate:k=O}={...e,...n};if(f===0)return s&&(s.abort(),s=null),i.set(t=c),Promise.resolve();const E=h.now()+u;let _;return l=he(b=>{if(b<E)return!0;o||(_=k(t,a),typeof f=="function"&&(f=f(t,a)),o=!0),s&&(s.abort(),s=null);const g=b-E;return g>f?(i.set(t=a),!1):(i.set(t=_(v(g/f))),!0)}),l.promise}return{set:r,update:(a,n)=>r(a(c,t),n),subscribe:i.subscribe}}var be=q('<div class="_toastBtn pe svelte-536hrw" role="button" tabindex="0"></div>'),ye=q('<div role="status"><div class="_toastMsg svelte-536hrw"><!></div> <!> <progress class="_toastBar svelte-536hrw"></progress></div>');function Me(t,e){re(e,!0);const i=()=>ue(o,"$progress",l),[l,c]=ce();let r=A(I(e.item.initial)),a=A(I(e.item.initial)),n=A(!1),s;const o=ge(e.item.initial,{duration:e.item.duration,easing:K});function u(){ve.pop(e.item.id)}function f(){(i()===1||i()===0)&&u()}function v(){!m(n)&&i()!==m(r)&&(o.set(i(),{duration:0}),w(n,!0))}function k(){if(m(n)){const d=e.item.duration;if(d!==void 0&&m(a)!==void 0&&m(r)!==void 0){const p=d-d*((i()-m(a))/(m(r)-m(a)));o.set(m(r),{duration:p}).then(f)}w(n,!1)}}function E(d=document){if(d.hidden===void 0)return;const p=()=>d.hidden?v():k(),y="visibilitychange";d.addEventListener(y,p),s=()=>d.removeEventListener(y,p),p()}ne(()=>{if(m(r)!==e.item.next){if(w(r,e.item.next,!0),w(a,i(),!0),w(n,!1),m(r)===void 0)throw Error("Toast with undefined next");o.set(m(r)).then(f)}}),J(E),Q(()=>{e.item?.onpop&&e.item.onpop(e.item.id),s?.()});var _=ye();let b;var g=R(_),Y=R(g);de(Y,()=>e.item.msg),N(g);var D=P(g,2);{var Z=d=>{var p=be();p.__click=u,p.__keydown=y=>{y instanceof KeyboardEvent&&["Enter"," "].includes(y.key)&&u()},z(d,p)};oe(D,d=>{e.item.dismissable&&d(Z)})}var G=P(D,2);N(_),S(()=>{b=fe(_,1,"_toastItem svelte-536hrw",null,b,{pe:e.item.pausable}),le(G,i())}),B("mouseenter",_,()=>{e.item.pausable&&v()}),B("mouseleave",_,k),z(t,_),ie(),c()}ae(["click","keydown"]);export{Me as T,je as c,de as h,he as l,ve as t};
