import{P as n}from"./public.xpUinP6t.js";import{g as i}from"./service.CynkMglu.js";const p=async o=>{const{path:e}=o;if(!e.length||e[0]!=="/")throw new Error("Malformed path");const t=new Headers;if(t.set("Content-Type","application/json"),o.authorize){const a=await i();t.set("Authorization",`Bearer ${a}`)}const r=await fetch(`${n}${e}`,{method:"GET",mode:"cors",headers:t});if(r.status<200||r.status>=300)throw new Error(await r.text());return r.json()},f=async o=>{const e=await i(),{path:t,data:r}=o;if(!t.length||t[0]!=="/")throw new Error("Malformed path");const a=JSON.stringify(r),s=await fetch(`${n}${t}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:a});if(s.status<200||s.status>=300)throw new Error(await s.text());try{return await s.json()}catch(c){return console.error("Error while trying to parse response from "+t),console.error(c),Promise.resolve()}};export{f as a,p as r};
